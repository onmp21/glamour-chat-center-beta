var DT=Object.defineProperty;var U0=t=>{throw TypeError(t)};var FT=(t,e,r)=>e in t?DT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ee=(t,e,r)=>FT(t,typeof e!="symbol"?e+"":e,r),Bh=(t,e,r)=>e.has(t)||U0("Cannot "+r);var B=(t,e,r)=>(Bh(t,e,"read from private field"),r?r.call(t):e.get(t)),Ge=(t,e,r)=>e.has(t)?U0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ke=(t,e,r,n)=>(Bh(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Bt=(t,e,r)=>(Bh(t,e,"access private method"),r);var vu=(t,e,r,n)=>({set _(s){ke(t,e,s,r)},get _(){return B(t,e,n)}});function UT(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var Br=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function M_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function VT(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var D_={exports:{}},Of={},F_={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wc=Symbol.for("react.element"),zT=Symbol.for("react.portal"),BT=Symbol.for("react.fragment"),WT=Symbol.for("react.strict_mode"),HT=Symbol.for("react.profiler"),GT=Symbol.for("react.provider"),qT=Symbol.for("react.context"),KT=Symbol.for("react.forward_ref"),YT=Symbol.for("react.suspense"),QT=Symbol.for("react.memo"),JT=Symbol.for("react.lazy"),V0=Symbol.iterator;function XT(t){return t===null||typeof t!="object"?null:(t=V0&&t[V0]||t["@@iterator"],typeof t=="function"?t:null)}var U_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V_=Object.assign,z_={};function Xi(t,e,r){this.props=t,this.context=e,this.refs=z_,this.updater=r||U_}Xi.prototype.isReactComponent={};Xi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function B_(){}B_.prototype=Xi.prototype;function nv(t,e,r){this.props=t,this.context=e,this.refs=z_,this.updater=r||U_}var sv=nv.prototype=new B_;sv.constructor=nv;V_(sv,Xi.prototype);sv.isPureReactComponent=!0;var z0=Array.isArray,W_=Object.prototype.hasOwnProperty,av={current:null},H_={key:!0,ref:!0,__self:!0,__source:!0};function G_(t,e,r){var n,s={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)W_.call(e,n)&&!H_.hasOwnProperty(n)&&(s[n]=e[n]);var i=arguments.length-2;if(i===1)s.children=r;else if(1<i){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in i=t.defaultProps,i)s[n]===void 0&&(s[n]=i[n]);return{$$typeof:Wc,type:t,key:a,ref:o,props:s,_owner:av.current}}function ZT(t,e){return{$$typeof:Wc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ov(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wc}function eP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var B0=/\/+/g;function Wh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?eP(""+t.key):e.toString(36)}function nd(t,e,r,n,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wc:case zT:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+Wh(o,0):n,z0(s)?(r="",t!=null&&(r=t.replace(B0,"$&/")+"/"),nd(s,e,r,"",function(u){return u})):s!=null&&(ov(s)&&(s=ZT(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(B0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",z0(t))for(var i=0;i<t.length;i++){a=t[i];var c=n+Wh(a,i);o+=nd(a,e,r,c,s)}else if(c=XT(t),typeof c=="function")for(t=c.call(t),i=0;!(a=t.next()).done;)a=a.value,c=n+Wh(a,i++),o+=nd(a,e,r,c,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yu(t,e,r){if(t==null)return t;var n=[],s=0;return nd(t,n,"","",function(a){return e.call(r,a,s++)}),n}function tP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var or={current:null},sd={transition:null},rP={ReactCurrentDispatcher:or,ReactCurrentBatchConfig:sd,ReactCurrentOwner:av};function q_(){throw Error("act(...) is not supported in production builds of React.")}Ue.Children={map:yu,forEach:function(t,e,r){yu(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return yu(t,function(){e++}),e},toArray:function(t){return yu(t,function(e){return e})||[]},only:function(t){if(!ov(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ue.Component=Xi;Ue.Fragment=BT;Ue.Profiler=HT;Ue.PureComponent=nv;Ue.StrictMode=WT;Ue.Suspense=YT;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rP;Ue.act=q_;Ue.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=V_({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=av.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var i=t.type.defaultProps;for(c in e)W_.call(e,c)&&!H_.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&i!==void 0?i[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){i=Array(c);for(var u=0;u<c;u++)i[u]=arguments[u+2];n.children=i}return{$$typeof:Wc,type:t.type,key:s,ref:a,props:n,_owner:o}};Ue.createContext=function(t){return t={$$typeof:qT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:GT,_context:t},t.Consumer=t};Ue.createElement=G_;Ue.createFactory=function(t){var e=G_.bind(null,t);return e.type=t,e};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(t){return{$$typeof:KT,render:t}};Ue.isValidElement=ov;Ue.lazy=function(t){return{$$typeof:JT,_payload:{_status:-1,_result:t},_init:tP}};Ue.memo=function(t,e){return{$$typeof:QT,type:t,compare:e===void 0?null:e}};Ue.startTransition=function(t){var e=sd.transition;sd.transition={};try{t()}finally{sd.transition=e}};Ue.unstable_act=q_;Ue.useCallback=function(t,e){return or.current.useCallback(t,e)};Ue.useContext=function(t){return or.current.useContext(t)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(t){return or.current.useDeferredValue(t)};Ue.useEffect=function(t,e){return or.current.useEffect(t,e)};Ue.useId=function(){return or.current.useId()};Ue.useImperativeHandle=function(t,e,r){return or.current.useImperativeHandle(t,e,r)};Ue.useInsertionEffect=function(t,e){return or.current.useInsertionEffect(t,e)};Ue.useLayoutEffect=function(t,e){return or.current.useLayoutEffect(t,e)};Ue.useMemo=function(t,e){return or.current.useMemo(t,e)};Ue.useReducer=function(t,e,r){return or.current.useReducer(t,e,r)};Ue.useRef=function(t){return or.current.useRef(t)};Ue.useState=function(t){return or.current.useState(t)};Ue.useSyncExternalStore=function(t,e,r){return or.current.useSyncExternalStore(t,e,r)};Ue.useTransition=function(){return or.current.useTransition()};Ue.version="18.3.1";F_.exports=Ue;var g=F_.exports;const G=M_(g),iv=UT({__proto__:null,default:G},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nP=g,sP=Symbol.for("react.element"),aP=Symbol.for("react.fragment"),oP=Object.prototype.hasOwnProperty,iP=nP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lP={key:!0,ref:!0,__self:!0,__source:!0};function K_(t,e,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)oP.call(e,n)&&!lP.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:sP,type:t,key:a,ref:o,props:s,_owner:iP.current}}Of.Fragment=aP;Of.jsx=K_;Of.jsxs=K_;D_.exports=Of;var l=D_.exports,ap={},Y_={exports:{}},Lr={},Q_={exports:{}},J_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,$){var Y=k.length;k.push($);e:for(;0<Y;){var he=Y-1>>>1,ue=k[he];if(0<s(ue,$))k[he]=$,k[Y]=ue,Y=he;else break e}}function r(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var $=k[0],Y=k.pop();if(Y!==$){k[0]=Y;e:for(var he=0,ue=k.length,xe=ue>>>1;he<xe;){var D=2*(he+1)-1,X=k[D],oe=D+1,U=k[oe];if(0>s(X,Y))oe<ue&&0>s(U,X)?(k[he]=U,k[oe]=Y,he=oe):(k[he]=X,k[D]=Y,he=D);else if(oe<ue&&0>s(U,Y))k[he]=U,k[oe]=Y,he=oe;else break e}}return $}function s(k,$){var Y=k.sortIndex-$.sortIndex;return Y!==0?Y:k.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,i=o.now();t.unstable_now=function(){return o.now()-i}}var c=[],u=[],d=1,f=null,h=3,m=!1,y=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(k){for(var $=r(u);$!==null;){if($.callback===null)n(u);else if($.startTime<=k)n(u),$.sortIndex=$.expirationTime,e(c,$);else break;$=r(u)}}function _(k){if(p=!1,b(k),!y)if(r(c)!==null)y=!0,W(C);else{var $=r(u);$!==null&&I(_,$.startTime-k)}}function C(k,$){y=!1,p&&(p=!1,w(A),A=-1),m=!0;var Y=h;try{for(b($),f=r(c);f!==null&&(!(f.expirationTime>$)||k&&!F());){var he=f.callback;if(typeof he=="function"){f.callback=null,h=f.priorityLevel;var ue=he(f.expirationTime<=$);$=t.unstable_now(),typeof ue=="function"?f.callback=ue:f===r(c)&&n(c),b($)}else n(c);f=r(c)}if(f!==null)var xe=!0;else{var D=r(u);D!==null&&I(_,D.startTime-$),xe=!1}return xe}finally{f=null,h=Y,m=!1}}var E=!1,N=null,A=-1,j=5,O=-1;function F(){return!(t.unstable_now()-O<j)}function P(){if(N!==null){var k=t.unstable_now();O=k;var $=!0;try{$=N(!0,k)}finally{$?V():(E=!1,N=null)}}else E=!1}var V;if(typeof x=="function")V=function(){x(P)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,H=R.port2;R.port1.onmessage=P,V=function(){H.postMessage(null)}}else V=function(){v(P,0)};function W(k){N=k,E||(E=!0,V())}function I(k,$){A=v(function(){k(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,W(C))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(k){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var Y=h;h=$;try{return k()}finally{h=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,$){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Y=h;h=k;try{return $()}finally{h=Y}},t.unstable_scheduleCallback=function(k,$,Y){var he=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?he+Y:he):Y=he,k){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Y+ue,k={id:d++,callback:$,priorityLevel:k,startTime:Y,expirationTime:ue,sortIndex:-1},Y>he?(k.sortIndex=Y,e(u,k),r(c)===null&&k===r(u)&&(p?(w(A),A=-1):p=!0,I(_,Y-he))):(k.sortIndex=ue,e(c,k),y||m||(y=!0,W(C))),k},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(k){var $=h;return function(){var Y=h;h=$;try{return k.apply(this,arguments)}finally{h=Y}}}})(J_);Q_.exports=J_;var cP=Q_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uP=g,Rr=cP;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var X_=new Set,fc={};function jo(t,e){Ii(t,e),Ii(t+"Capture",e)}function Ii(t,e){for(fc[t]=e,t=0;t<e.length;t++)X_.add(e[t])}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),op=Object.prototype.hasOwnProperty,dP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W0={},H0={};function fP(t){return op.call(H0,t)?!0:op.call(W0,t)?!1:dP.test(t)?H0[t]=!0:(W0[t]=!0,!1)}function hP(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mP(t,e,r,n){if(e===null||typeof e>"u"||hP(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ir(t,e,r,n,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ut[t]=new ir(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ut[e]=new ir(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ut[t]=new ir(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ut[t]=new ir(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ut[t]=new ir(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ut[t]=new ir(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ut[t]=new ir(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ut[t]=new ir(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ut[t]=new ir(t,5,!1,t.toLowerCase(),null,!1,!1)});var lv=/[\-:]([a-z])/g;function cv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lv,cv);Ut[e]=new ir(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lv,cv);Ut[e]=new ir(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lv,cv);Ut[e]=new ir(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ut[t]=new ir(t,1,!1,t.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new ir("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ut[t]=new ir(t,1,!1,t.toLowerCase(),null,!0,!0)});function uv(t,e,r,n){var s=Ut.hasOwnProperty(e)?Ut[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mP(e,r,s,n)&&(r=null),n||s===null?fP(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ps=uP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xu=Symbol.for("react.element"),ei=Symbol.for("react.portal"),ti=Symbol.for("react.fragment"),dv=Symbol.for("react.strict_mode"),ip=Symbol.for("react.profiler"),Z_=Symbol.for("react.provider"),e1=Symbol.for("react.context"),fv=Symbol.for("react.forward_ref"),lp=Symbol.for("react.suspense"),cp=Symbol.for("react.suspense_list"),hv=Symbol.for("react.memo"),Ys=Symbol.for("react.lazy"),t1=Symbol.for("react.offscreen"),G0=Symbol.iterator;function hl(t){return t===null||typeof t!="object"?null:(t=G0&&t[G0]||t["@@iterator"],typeof t=="function"?t:null)}var ut=Object.assign,Hh;function Tl(t){if(Hh===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Hh=e&&e[1]||""}return`
`+Hh+t}var Gh=!1;function qh(t,e){if(!t||Gh)return"";Gh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,i=a.length-1;1<=o&&0<=i&&s[o]!==a[i];)i--;for(;1<=o&&0<=i;o--,i--)if(s[o]!==a[i]){if(o!==1||i!==1)do if(o--,i--,0>i||s[o]!==a[i]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=i);break}}}finally{Gh=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Tl(t):""}function pP(t){switch(t.tag){case 5:return Tl(t.type);case 16:return Tl("Lazy");case 13:return Tl("Suspense");case 19:return Tl("SuspenseList");case 0:case 2:case 15:return t=qh(t.type,!1),t;case 11:return t=qh(t.type.render,!1),t;case 1:return t=qh(t.type,!0),t;default:return""}}function up(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ti:return"Fragment";case ei:return"Portal";case ip:return"Profiler";case dv:return"StrictMode";case lp:return"Suspense";case cp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case e1:return(t.displayName||"Context")+".Consumer";case Z_:return(t._context.displayName||"Context")+".Provider";case fv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hv:return e=t.displayName||null,e!==null?e:up(t.type)||"Memo";case Ys:e=t._payload,t=t._init;try{return up(t(e))}catch{}}return null}function gP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return up(e);case 8:return e===dv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ea(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function r1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vP(t){var e=r1(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wu(t){t._valueTracker||(t._valueTracker=vP(t))}function n1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=r1(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Td(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dp(t,e){var r=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function q0(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ea(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function s1(t,e){e=e.checked,e!=null&&uv(t,"checked",e,!1)}function fp(t,e){s1(t,e);var r=Ea(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hp(t,e.type,r):e.hasOwnProperty("defaultValue")&&hp(t,e.type,Ea(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function K0(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function hp(t,e,r){(e!=="number"||Td(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Pl=Array.isArray;function hi(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ea(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function mp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Y0(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(K(92));if(Pl(r)){if(1<r.length)throw Error(K(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ea(r)}}function a1(t,e){var r=Ea(e.value),n=Ea(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Q0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function o1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?o1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bu,i1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bu=bu||document.createElement("div"),bu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Hl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yP=["Webkit","ms","Moz","O"];Object.keys(Hl).forEach(function(t){yP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hl[e]=Hl[t]})});function l1(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Hl.hasOwnProperty(t)&&Hl[t]?(""+e).trim():e+"px"}function c1(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=l1(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var xP=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gp(t,e){if(e){if(xP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function vp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yp=null;function mv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xp=null,mi=null,pi=null;function J0(t){if(t=qc(t)){if(typeof xp!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Ff(e),xp(t.stateNode,t.type,e))}}function u1(t){mi?pi?pi.push(t):pi=[t]:mi=t}function d1(){if(mi){var t=mi,e=pi;if(pi=mi=null,J0(t),e)for(t=0;t<e.length;t++)J0(e[t])}}function f1(t,e){return t(e)}function h1(){}var Kh=!1;function m1(t,e,r){if(Kh)return t(e,r);Kh=!0;try{return f1(t,e,r)}finally{Kh=!1,(mi!==null||pi!==null)&&(h1(),d1())}}function mc(t,e){var r=t.stateNode;if(r===null)return null;var n=Ff(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(K(231,e,typeof r));return r}var wp=!1;if(ws)try{var ml={};Object.defineProperty(ml,"passive",{get:function(){wp=!0}}),window.addEventListener("test",ml,ml),window.removeEventListener("test",ml,ml)}catch{wp=!1}function wP(t,e,r,n,s,a,o,i,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Gl=!1,Pd=null,Rd=!1,bp=null,bP={onError:function(t){Gl=!0,Pd=t}};function _P(t,e,r,n,s,a,o,i,c){Gl=!1,Pd=null,wP.apply(bP,arguments)}function SP(t,e,r,n,s,a,o,i,c){if(_P.apply(this,arguments),Gl){if(Gl){var u=Pd;Gl=!1,Pd=null}else throw Error(K(198));Rd||(Rd=!0,bp=u)}}function ko(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function p1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function X0(t){if(ko(t)!==t)throw Error(K(188))}function CP(t){var e=t.alternate;if(!e){if(e=ko(t),e===null)throw Error(K(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return X0(s),t;if(a===n)return X0(s),e;a=a.sibling}throw Error(K(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,i=s.child;i;){if(i===r){o=!0,r=s,n=a;break}if(i===n){o=!0,n=s,r=a;break}i=i.sibling}if(!o){for(i=a.child;i;){if(i===r){o=!0,r=a,n=s;break}if(i===n){o=!0,n=a,r=s;break}i=i.sibling}if(!o)throw Error(K(189))}}if(r.alternate!==n)throw Error(K(190))}if(r.tag!==3)throw Error(K(188));return r.stateNode.current===r?t:e}function g1(t){return t=CP(t),t!==null?v1(t):null}function v1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=v1(t);if(e!==null)return e;t=t.sibling}return null}var y1=Rr.unstable_scheduleCallback,Z0=Rr.unstable_cancelCallback,EP=Rr.unstable_shouldYield,NP=Rr.unstable_requestPaint,ht=Rr.unstable_now,AP=Rr.unstable_getCurrentPriorityLevel,pv=Rr.unstable_ImmediatePriority,x1=Rr.unstable_UserBlockingPriority,Id=Rr.unstable_NormalPriority,jP=Rr.unstable_LowPriority,w1=Rr.unstable_IdlePriority,Lf=null,zn=null;function kP(t){if(zn&&typeof zn.onCommitFiberRoot=="function")try{zn.onCommitFiberRoot(Lf,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:RP,TP=Math.log,PP=Math.LN2;function RP(t){return t>>>=0,t===0?32:31-(TP(t)/PP|0)|0}var _u=64,Su=4194304;function Rl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Od(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var i=o&~s;i!==0?n=Rl(i):(a&=o,a!==0&&(n=Rl(a)))}else o=r&~s,o!==0?n=Rl(o):a!==0&&(n=Rl(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-hn(e),s=1<<r,n|=t[r],e&=~s;return n}function IP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OP(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-hn(a),i=1<<o,c=s[o];c===-1?(!(i&r)||i&n)&&(s[o]=IP(i,e)):c<=e&&(t.expiredLanes|=i),a&=~i}}function _p(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function b1(){var t=_u;return _u<<=1,!(_u&4194240)&&(_u=64),t}function Yh(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Hc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hn(e),t[e]=r}function LP(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-hn(r),a=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~a}}function gv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-hn(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Qe=0;function _1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var S1,vv,C1,E1,N1,Sp=!1,Cu=[],ma=null,pa=null,ga=null,pc=new Map,gc=new Map,Zs=[],$P="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ex(t,e){switch(t){case"focusin":case"focusout":ma=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":ga=null;break;case"pointerover":case"pointerout":pc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gc.delete(e.pointerId)}}function pl(t,e,r,n,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},e!==null&&(e=qc(e),e!==null&&vv(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function MP(t,e,r,n,s){switch(e){case"focusin":return ma=pl(ma,t,e,r,n,s),!0;case"dragenter":return pa=pl(pa,t,e,r,n,s),!0;case"mouseover":return ga=pl(ga,t,e,r,n,s),!0;case"pointerover":var a=s.pointerId;return pc.set(a,pl(pc.get(a)||null,t,e,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,gc.set(a,pl(gc.get(a)||null,t,e,r,n,s)),!0}return!1}function A1(t){var e=Xa(t.target);if(e!==null){var r=ko(e);if(r!==null){if(e=r.tag,e===13){if(e=p1(r),e!==null){t.blockedOn=e,N1(t.priority,function(){C1(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ad(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Cp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);yp=n,r.target.dispatchEvent(n),yp=null}else return e=qc(r),e!==null&&vv(e),t.blockedOn=r,!1;e.shift()}return!0}function tx(t,e,r){ad(t)&&r.delete(e)}function DP(){Sp=!1,ma!==null&&ad(ma)&&(ma=null),pa!==null&&ad(pa)&&(pa=null),ga!==null&&ad(ga)&&(ga=null),pc.forEach(tx),gc.forEach(tx)}function gl(t,e){t.blockedOn===e&&(t.blockedOn=null,Sp||(Sp=!0,Rr.unstable_scheduleCallback(Rr.unstable_NormalPriority,DP)))}function vc(t){function e(s){return gl(s,t)}if(0<Cu.length){gl(Cu[0],t);for(var r=1;r<Cu.length;r++){var n=Cu[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ma!==null&&gl(ma,t),pa!==null&&gl(pa,t),ga!==null&&gl(ga,t),pc.forEach(e),gc.forEach(e),r=0;r<Zs.length;r++)n=Zs[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Zs.length&&(r=Zs[0],r.blockedOn===null);)A1(r),r.blockedOn===null&&Zs.shift()}var gi=Ps.ReactCurrentBatchConfig,Ld=!0;function FP(t,e,r,n){var s=Qe,a=gi.transition;gi.transition=null;try{Qe=1,yv(t,e,r,n)}finally{Qe=s,gi.transition=a}}function UP(t,e,r,n){var s=Qe,a=gi.transition;gi.transition=null;try{Qe=4,yv(t,e,r,n)}finally{Qe=s,gi.transition=a}}function yv(t,e,r,n){if(Ld){var s=Cp(t,e,r,n);if(s===null)am(t,e,n,$d,r),ex(t,n);else if(MP(s,t,e,r,n))n.stopPropagation();else if(ex(t,n),e&4&&-1<$P.indexOf(t)){for(;s!==null;){var a=qc(s);if(a!==null&&S1(a),a=Cp(t,e,r,n),a===null&&am(t,e,n,$d,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else am(t,e,n,null,r)}}var $d=null;function Cp(t,e,r,n){if($d=null,t=mv(n),t=Xa(t),t!==null)if(e=ko(t),e===null)t=null;else if(r=e.tag,r===13){if(t=p1(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $d=t,null}function j1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AP()){case pv:return 1;case x1:return 4;case Id:case jP:return 16;case w1:return 536870912;default:return 16}default:return 16}}var da=null,xv=null,od=null;function k1(){if(od)return od;var t,e=xv,r=e.length,n,s="value"in da?da.value:da.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[a-n];n++);return od=s.slice(t,1<n?1-n:void 0)}function id(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Eu(){return!0}function rx(){return!1}function $r(t){function e(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var i in t)t.hasOwnProperty(i)&&(r=t[i],this[i]=r?r(a):a[i]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Eu:rx,this.isPropagationStopped=rx,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Eu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Eu)},persist:function(){},isPersistent:Eu}),e}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wv=$r(Zi),Gc=ut({},Zi,{view:0,detail:0}),VP=$r(Gc),Qh,Jh,vl,$f=ut({},Gc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vl&&(vl&&t.type==="mousemove"?(Qh=t.screenX-vl.screenX,Jh=t.screenY-vl.screenY):Jh=Qh=0,vl=t),Qh)},movementY:function(t){return"movementY"in t?t.movementY:Jh}}),nx=$r($f),zP=ut({},$f,{dataTransfer:0}),BP=$r(zP),WP=ut({},Gc,{relatedTarget:0}),Xh=$r(WP),HP=ut({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),GP=$r(HP),qP=ut({},Zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),KP=$r(qP),YP=ut({},Zi,{data:0}),sx=$r(YP),QP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=XP[t])?!!e[t]:!1}function bv(){return ZP}var eR=ut({},Gc,{key:function(t){if(t.key){var e=QP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=id(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bv,charCode:function(t){return t.type==="keypress"?id(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?id(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tR=$r(eR),rR=ut({},$f,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ax=$r(rR),nR=ut({},Gc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bv}),sR=$r(nR),aR=ut({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),oR=$r(aR),iR=ut({},$f,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lR=$r(iR),cR=[9,13,27,32],_v=ws&&"CompositionEvent"in window,ql=null;ws&&"documentMode"in document&&(ql=document.documentMode);var uR=ws&&"TextEvent"in window&&!ql,T1=ws&&(!_v||ql&&8<ql&&11>=ql),ox=" ",ix=!1;function P1(t,e){switch(t){case"keyup":return cR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function R1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ri=!1;function dR(t,e){switch(t){case"compositionend":return R1(e);case"keypress":return e.which!==32?null:(ix=!0,ox);case"textInput":return t=e.data,t===ox&&ix?null:t;default:return null}}function fR(t,e){if(ri)return t==="compositionend"||!_v&&P1(t,e)?(t=k1(),od=xv=da=null,ri=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return T1&&e.locale!=="ko"?null:e.data;default:return null}}var hR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hR[t.type]:e==="textarea"}function I1(t,e,r,n){u1(n),e=Md(e,"onChange"),0<e.length&&(r=new wv("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Kl=null,yc=null;function mR(t){W1(t,0)}function Mf(t){var e=ai(t);if(n1(e))return t}function pR(t,e){if(t==="change")return e}var O1=!1;if(ws){var Zh;if(ws){var em="oninput"in document;if(!em){var cx=document.createElement("div");cx.setAttribute("oninput","return;"),em=typeof cx.oninput=="function"}Zh=em}else Zh=!1;O1=Zh&&(!document.documentMode||9<document.documentMode)}function ux(){Kl&&(Kl.detachEvent("onpropertychange",L1),yc=Kl=null)}function L1(t){if(t.propertyName==="value"&&Mf(yc)){var e=[];I1(e,yc,t,mv(t)),m1(mR,e)}}function gR(t,e,r){t==="focusin"?(ux(),Kl=e,yc=r,Kl.attachEvent("onpropertychange",L1)):t==="focusout"&&ux()}function vR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mf(yc)}function yR(t,e){if(t==="click")return Mf(e)}function xR(t,e){if(t==="input"||t==="change")return Mf(e)}function wR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vn=typeof Object.is=="function"?Object.is:wR;function xc(t,e){if(vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!op.call(e,s)||!vn(t[s],e[s]))return!1}return!0}function dx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fx(t,e){var r=dx(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dx(r)}}function $1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function M1(){for(var t=window,e=Td();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Td(t.document)}return e}function Sv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bR(t){var e=M1(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&$1(r.ownerDocument.documentElement,r)){if(n!==null&&Sv(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!t.extend&&a>n&&(s=n,n=a,a=s),s=fx(r,a);var o=fx(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _R=ws&&"documentMode"in document&&11>=document.documentMode,ni=null,Ep=null,Yl=null,Np=!1;function hx(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Np||ni==null||ni!==Td(n)||(n=ni,"selectionStart"in n&&Sv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Yl&&xc(Yl,n)||(Yl=n,n=Md(Ep,"onSelect"),0<n.length&&(e=new wv("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ni)))}function Nu(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var si={animationend:Nu("Animation","AnimationEnd"),animationiteration:Nu("Animation","AnimationIteration"),animationstart:Nu("Animation","AnimationStart"),transitionend:Nu("Transition","TransitionEnd")},tm={},D1={};ws&&(D1=document.createElement("div").style,"AnimationEvent"in window||(delete si.animationend.animation,delete si.animationiteration.animation,delete si.animationstart.animation),"TransitionEvent"in window||delete si.transitionend.transition);function Df(t){if(tm[t])return tm[t];if(!si[t])return t;var e=si[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in D1)return tm[t]=e[r];return t}var F1=Df("animationend"),U1=Df("animationiteration"),V1=Df("animationstart"),z1=Df("transitionend"),B1=new Map,mx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ia(t,e){B1.set(t,e),jo(e,[t])}for(var rm=0;rm<mx.length;rm++){var nm=mx[rm],SR=nm.toLowerCase(),CR=nm[0].toUpperCase()+nm.slice(1);Ia(SR,"on"+CR)}Ia(F1,"onAnimationEnd");Ia(U1,"onAnimationIteration");Ia(V1,"onAnimationStart");Ia("dblclick","onDoubleClick");Ia("focusin","onFocus");Ia("focusout","onBlur");Ia(z1,"onTransitionEnd");Ii("onMouseEnter",["mouseout","mouseover"]);Ii("onMouseLeave",["mouseout","mouseover"]);Ii("onPointerEnter",["pointerout","pointerover"]);Ii("onPointerLeave",["pointerout","pointerover"]);jo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jo("onBeforeInput",["compositionend","keypress","textInput","paste"]);jo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ER=new Set("cancel close invalid load scroll toggle".split(" ").concat(Il));function px(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,SP(n,e,void 0,t),t.currentTarget=null}function W1(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var i=n[o],c=i.instance,u=i.currentTarget;if(i=i.listener,c!==a&&s.isPropagationStopped())break e;px(s,i,u),a=c}else for(o=0;o<n.length;o++){if(i=n[o],c=i.instance,u=i.currentTarget,i=i.listener,c!==a&&s.isPropagationStopped())break e;px(s,i,u),a=c}}}if(Rd)throw t=bp,Rd=!1,bp=null,t}function st(t,e){var r=e[Pp];r===void 0&&(r=e[Pp]=new Set);var n=t+"__bubble";r.has(n)||(H1(e,t,2,!1),r.add(n))}function sm(t,e,r){var n=0;e&&(n|=4),H1(r,t,n,e)}var Au="_reactListening"+Math.random().toString(36).slice(2);function wc(t){if(!t[Au]){t[Au]=!0,X_.forEach(function(r){r!=="selectionchange"&&(ER.has(r)||sm(r,!1,t),sm(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Au]||(e[Au]=!0,sm("selectionchange",!1,e))}}function H1(t,e,r,n){switch(j1(e)){case 1:var s=FP;break;case 4:s=UP;break;default:s=yv}r=s.bind(null,e,r,t),s=void 0,!wp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function am(t,e,r,n,s){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var i=n.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;i!==null;){if(o=Xa(i),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}i=i.parentNode}}n=n.return}m1(function(){var u=a,d=mv(r),f=[];e:{var h=B1.get(t);if(h!==void 0){var m=wv,y=t;switch(t){case"keypress":if(id(r)===0)break e;case"keydown":case"keyup":m=tR;break;case"focusin":y="focus",m=Xh;break;case"focusout":y="blur",m=Xh;break;case"beforeblur":case"afterblur":m=Xh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=nx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=BP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=sR;break;case F1:case U1:case V1:m=GP;break;case z1:m=oR;break;case"scroll":m=VP;break;case"wheel":m=lR;break;case"copy":case"cut":case"paste":m=KP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ax}var p=(e&4)!==0,v=!p&&t==="scroll",w=p?h!==null?h+"Capture":null:h;p=[];for(var x=u,b;x!==null;){b=x;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,w!==null&&(_=mc(x,w),_!=null&&p.push(bc(x,_,b)))),v)break;x=x.return}0<p.length&&(h=new m(h,y,null,r,d),f.push({event:h,listeners:p}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&r!==yp&&(y=r.relatedTarget||r.fromElement)&&(Xa(y)||y[bs]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(y=r.relatedTarget||r.toElement,m=u,y=y?Xa(y):null,y!==null&&(v=ko(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(p=nx,_="onMouseLeave",w="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(p=ax,_="onPointerLeave",w="onPointerEnter",x="pointer"),v=m==null?h:ai(m),b=y==null?h:ai(y),h=new p(_,x+"leave",m,r,d),h.target=v,h.relatedTarget=b,_=null,Xa(d)===u&&(p=new p(w,x+"enter",y,r,d),p.target=b,p.relatedTarget=v,_=p),v=_,m&&y)t:{for(p=m,w=y,x=0,b=p;b;b=Lo(b))x++;for(b=0,_=w;_;_=Lo(_))b++;for(;0<x-b;)p=Lo(p),x--;for(;0<b-x;)w=Lo(w),b--;for(;x--;){if(p===w||w!==null&&p===w.alternate)break t;p=Lo(p),w=Lo(w)}p=null}else p=null;m!==null&&gx(f,h,m,p,!1),y!==null&&v!==null&&gx(f,v,y,p,!0)}}e:{if(h=u?ai(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var C=pR;else if(lx(h))if(O1)C=xR;else{C=vR;var E=gR}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=yR);if(C&&(C=C(t,u))){I1(f,C,r,d);break e}E&&E(t,h,u),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&hp(h,"number",h.value)}switch(E=u?ai(u):window,t){case"focusin":(lx(E)||E.contentEditable==="true")&&(ni=E,Ep=u,Yl=null);break;case"focusout":Yl=Ep=ni=null;break;case"mousedown":Np=!0;break;case"contextmenu":case"mouseup":case"dragend":Np=!1,hx(f,r,d);break;case"selectionchange":if(_R)break;case"keydown":case"keyup":hx(f,r,d)}var N;if(_v)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ri?P1(t,r)&&(A="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(T1&&r.locale!=="ko"&&(ri||A!=="onCompositionStart"?A==="onCompositionEnd"&&ri&&(N=k1()):(da=d,xv="value"in da?da.value:da.textContent,ri=!0)),E=Md(u,A),0<E.length&&(A=new sx(A,t,null,r,d),f.push({event:A,listeners:E}),N?A.data=N:(N=R1(r),N!==null&&(A.data=N)))),(N=uR?dR(t,r):fR(t,r))&&(u=Md(u,"onBeforeInput"),0<u.length&&(d=new sx("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=N))}W1(f,e)})}function bc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Md(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=mc(t,r),a!=null&&n.unshift(bc(t,a,s)),a=mc(t,e),a!=null&&n.push(bc(t,a,s))),t=t.return}return n}function Lo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gx(t,e,r,n,s){for(var a=e._reactName,o=[];r!==null&&r!==n;){var i=r,c=i.alternate,u=i.stateNode;if(c!==null&&c===n)break;i.tag===5&&u!==null&&(i=u,s?(c=mc(r,a),c!=null&&o.unshift(bc(r,c,i))):s||(c=mc(r,a),c!=null&&o.push(bc(r,c,i)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var NR=/\r\n?/g,AR=/\u0000|\uFFFD/g;function vx(t){return(typeof t=="string"?t:""+t).replace(NR,`
`).replace(AR,"")}function ju(t,e,r){if(e=vx(e),vx(t)!==e&&r)throw Error(K(425))}function Dd(){}var Ap=null,jp=null;function kp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tp=typeof setTimeout=="function"?setTimeout:void 0,jR=typeof clearTimeout=="function"?clearTimeout:void 0,yx=typeof Promise=="function"?Promise:void 0,kR=typeof queueMicrotask=="function"?queueMicrotask:typeof yx<"u"?function(t){return yx.resolve(null).then(t).catch(TR)}:Tp;function TR(t){setTimeout(function(){throw t})}function om(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),vc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);vc(e)}function va(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var el=Math.random().toString(36).slice(2),Ln="__reactFiber$"+el,_c="__reactProps$"+el,bs="__reactContainer$"+el,Pp="__reactEvents$"+el,PR="__reactListeners$"+el,RR="__reactHandles$"+el;function Xa(t){var e=t[Ln];if(e)return e;for(var r=t.parentNode;r;){if(e=r[bs]||r[Ln]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=xx(t);t!==null;){if(r=t[Ln])return r;t=xx(t)}return e}t=r,r=t.parentNode}return null}function qc(t){return t=t[Ln]||t[bs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ai(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Ff(t){return t[_c]||null}var Rp=[],oi=-1;function Oa(t){return{current:t}}function at(t){0>oi||(t.current=Rp[oi],Rp[oi]=null,oi--)}function tt(t,e){oi++,Rp[oi]=t.current,t.current=e}var Na={},Qt=Oa(Na),vr=Oa(!1),po=Na;function Oi(t,e){var r=t.type.contextTypes;if(!r)return Na;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function yr(t){return t=t.childContextTypes,t!=null}function Fd(){at(vr),at(Qt)}function wx(t,e,r){if(Qt.current!==Na)throw Error(K(168));tt(Qt,e),tt(vr,r)}function G1(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(K(108,gP(t)||"Unknown",s));return ut({},r,n)}function Ud(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Na,po=Qt.current,tt(Qt,t),tt(vr,vr.current),!0}function bx(t,e,r){var n=t.stateNode;if(!n)throw Error(K(169));r?(t=G1(t,e,po),n.__reactInternalMemoizedMergedChildContext=t,at(vr),at(Qt),tt(Qt,t)):at(vr),tt(vr,r)}var fs=null,Uf=!1,im=!1;function q1(t){fs===null?fs=[t]:fs.push(t)}function IR(t){Uf=!0,q1(t)}function La(){if(!im&&fs!==null){im=!0;var t=0,e=Qe;try{var r=fs;for(Qe=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}fs=null,Uf=!1}catch(s){throw fs!==null&&(fs=fs.slice(t+1)),y1(pv,La),s}finally{Qe=e,im=!1}}return null}var ii=[],li=0,Vd=null,zd=0,Dr=[],Fr=0,go=null,ms=1,ps="";function Wa(t,e){ii[li++]=zd,ii[li++]=Vd,Vd=t,zd=e}function K1(t,e,r){Dr[Fr++]=ms,Dr[Fr++]=ps,Dr[Fr++]=go,go=t;var n=ms;t=ps;var s=32-hn(n)-1;n&=~(1<<s),r+=1;var a=32-hn(e)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,ms=1<<32-hn(e)+s|r<<s|n,ps=a+t}else ms=1<<a|r<<s|n,ps=t}function Cv(t){t.return!==null&&(Wa(t,1),K1(t,1,0))}function Ev(t){for(;t===Vd;)Vd=ii[--li],ii[li]=null,zd=ii[--li],ii[li]=null;for(;t===go;)go=Dr[--Fr],Dr[Fr]=null,ps=Dr[--Fr],Dr[Fr]=null,ms=Dr[--Fr],Dr[Fr]=null}var Tr=null,kr=null,it=!1,cn=null;function Y1(t,e){var r=Ur(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function _x(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tr=t,kr=va(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tr=t,kr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=go!==null?{id:ms,overflow:ps}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ur(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Tr=t,kr=null,!0):!1;default:return!1}}function Ip(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Op(t){if(it){var e=kr;if(e){var r=e;if(!_x(t,e)){if(Ip(t))throw Error(K(418));e=va(r.nextSibling);var n=Tr;e&&_x(t,e)?Y1(n,r):(t.flags=t.flags&-4097|2,it=!1,Tr=t)}}else{if(Ip(t))throw Error(K(418));t.flags=t.flags&-4097|2,it=!1,Tr=t}}}function Sx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tr=t}function ku(t){if(t!==Tr)return!1;if(!it)return Sx(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kp(t.type,t.memoizedProps)),e&&(e=kr)){if(Ip(t))throw Q1(),Error(K(418));for(;e;)Y1(t,e),e=va(e.nextSibling)}if(Sx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){kr=va(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}kr=null}}else kr=Tr?va(t.stateNode.nextSibling):null;return!0}function Q1(){for(var t=kr;t;)t=va(t.nextSibling)}function Li(){kr=Tr=null,it=!1}function Nv(t){cn===null?cn=[t]:cn.push(t)}var OR=Ps.ReactCurrentBatchConfig;function yl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(K(309));var n=r.stateNode}if(!n)throw Error(K(147,t));var s=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var i=s.refs;o===null?delete i[a]:i[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(K(284));if(!r._owner)throw Error(K(290,t))}return t}function Tu(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cx(t){var e=t._init;return e(t._payload)}function J1(t){function e(w,x){if(t){var b=w.deletions;b===null?(w.deletions=[x],w.flags|=16):b.push(x)}}function r(w,x){if(!t)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function n(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function s(w,x){return w=ba(w,x),w.index=0,w.sibling=null,w}function a(w,x,b){return w.index=b,t?(b=w.alternate,b!==null?(b=b.index,b<x?(w.flags|=2,x):b):(w.flags|=2,x)):(w.flags|=1048576,x)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function i(w,x,b,_){return x===null||x.tag!==6?(x=mm(b,w.mode,_),x.return=w,x):(x=s(x,b),x.return=w,x)}function c(w,x,b,_){var C=b.type;return C===ti?d(w,x,b.props.children,_,b.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ys&&Cx(C)===x.type)?(_=s(x,b.props),_.ref=yl(w,x,b),_.return=w,_):(_=md(b.type,b.key,b.props,null,w.mode,_),_.ref=yl(w,x,b),_.return=w,_)}function u(w,x,b,_){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=pm(b,w.mode,_),x.return=w,x):(x=s(x,b.children||[]),x.return=w,x)}function d(w,x,b,_,C){return x===null||x.tag!==7?(x=mo(b,w.mode,_,C),x.return=w,x):(x=s(x,b),x.return=w,x)}function f(w,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=mm(""+x,w.mode,b),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case xu:return b=md(x.type,x.key,x.props,null,w.mode,b),b.ref=yl(w,null,x),b.return=w,b;case ei:return x=pm(x,w.mode,b),x.return=w,x;case Ys:var _=x._init;return f(w,_(x._payload),b)}if(Pl(x)||hl(x))return x=mo(x,w.mode,b,null),x.return=w,x;Tu(w,x)}return null}function h(w,x,b,_){var C=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:i(w,x,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case xu:return b.key===C?c(w,x,b,_):null;case ei:return b.key===C?u(w,x,b,_):null;case Ys:return C=b._init,h(w,x,C(b._payload),_)}if(Pl(b)||hl(b))return C!==null?null:d(w,x,b,_,null);Tu(w,b)}return null}function m(w,x,b,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return w=w.get(b)||null,i(x,w,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case xu:return w=w.get(_.key===null?b:_.key)||null,c(x,w,_,C);case ei:return w=w.get(_.key===null?b:_.key)||null,u(x,w,_,C);case Ys:var E=_._init;return m(w,x,b,E(_._payload),C)}if(Pl(_)||hl(_))return w=w.get(b)||null,d(x,w,_,C,null);Tu(x,_)}return null}function y(w,x,b,_){for(var C=null,E=null,N=x,A=x=0,j=null;N!==null&&A<b.length;A++){N.index>A?(j=N,N=null):j=N.sibling;var O=h(w,N,b[A],_);if(O===null){N===null&&(N=j);break}t&&N&&O.alternate===null&&e(w,N),x=a(O,x,A),E===null?C=O:E.sibling=O,E=O,N=j}if(A===b.length)return r(w,N),it&&Wa(w,A),C;if(N===null){for(;A<b.length;A++)N=f(w,b[A],_),N!==null&&(x=a(N,x,A),E===null?C=N:E.sibling=N,E=N);return it&&Wa(w,A),C}for(N=n(w,N);A<b.length;A++)j=m(N,w,A,b[A],_),j!==null&&(t&&j.alternate!==null&&N.delete(j.key===null?A:j.key),x=a(j,x,A),E===null?C=j:E.sibling=j,E=j);return t&&N.forEach(function(F){return e(w,F)}),it&&Wa(w,A),C}function p(w,x,b,_){var C=hl(b);if(typeof C!="function")throw Error(K(150));if(b=C.call(b),b==null)throw Error(K(151));for(var E=C=null,N=x,A=x=0,j=null,O=b.next();N!==null&&!O.done;A++,O=b.next()){N.index>A?(j=N,N=null):j=N.sibling;var F=h(w,N,O.value,_);if(F===null){N===null&&(N=j);break}t&&N&&F.alternate===null&&e(w,N),x=a(F,x,A),E===null?C=F:E.sibling=F,E=F,N=j}if(O.done)return r(w,N),it&&Wa(w,A),C;if(N===null){for(;!O.done;A++,O=b.next())O=f(w,O.value,_),O!==null&&(x=a(O,x,A),E===null?C=O:E.sibling=O,E=O);return it&&Wa(w,A),C}for(N=n(w,N);!O.done;A++,O=b.next())O=m(N,w,A,O.value,_),O!==null&&(t&&O.alternate!==null&&N.delete(O.key===null?A:O.key),x=a(O,x,A),E===null?C=O:E.sibling=O,E=O);return t&&N.forEach(function(P){return e(w,P)}),it&&Wa(w,A),C}function v(w,x,b,_){if(typeof b=="object"&&b!==null&&b.type===ti&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case xu:e:{for(var C=b.key,E=x;E!==null;){if(E.key===C){if(C=b.type,C===ti){if(E.tag===7){r(w,E.sibling),x=s(E,b.props.children),x.return=w,w=x;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ys&&Cx(C)===E.type){r(w,E.sibling),x=s(E,b.props),x.ref=yl(w,E,b),x.return=w,w=x;break e}r(w,E);break}else e(w,E);E=E.sibling}b.type===ti?(x=mo(b.props.children,w.mode,_,b.key),x.return=w,w=x):(_=md(b.type,b.key,b.props,null,w.mode,_),_.ref=yl(w,x,b),_.return=w,w=_)}return o(w);case ei:e:{for(E=b.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){r(w,x.sibling),x=s(x,b.children||[]),x.return=w,w=x;break e}else{r(w,x);break}else e(w,x);x=x.sibling}x=pm(b,w.mode,_),x.return=w,w=x}return o(w);case Ys:return E=b._init,v(w,x,E(b._payload),_)}if(Pl(b))return y(w,x,b,_);if(hl(b))return p(w,x,b,_);Tu(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(r(w,x.sibling),x=s(x,b),x.return=w,w=x):(r(w,x),x=mm(b,w.mode,_),x.return=w,w=x),o(w)):r(w,x)}return v}var $i=J1(!0),X1=J1(!1),Bd=Oa(null),Wd=null,ci=null,Av=null;function jv(){Av=ci=Wd=null}function kv(t){var e=Bd.current;at(Bd),t._currentValue=e}function Lp(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function vi(t,e){Wd=t,Av=ci=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pr=!0),t.firstContext=null)}function Wr(t){var e=t._currentValue;if(Av!==t)if(t={context:t,memoizedValue:e,next:null},ci===null){if(Wd===null)throw Error(K(308));ci=t,Wd.dependencies={lanes:0,firstContext:t}}else ci=ci.next=t;return e}var Za=null;function Tv(t){Za===null?Za=[t]:Za.push(t)}function Z1(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Tv(e)):(r.next=s.next,s.next=r),e.interleaved=r,_s(t,n)}function _s(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Qs=!1;function Pv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ya(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Be&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,_s(t,r)}return s=n.interleaved,s===null?(e.next=e,Tv(n)):(e.next=s.next,s.next=e),n.interleaved=e,_s(t,r)}function ld(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,gv(t,r)}}function Ex(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Hd(t,e,r,n){var s=t.updateQueue;Qs=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,i=d.lastBaseUpdate,i!==o&&(i===null?d.firstBaseUpdate=u:i.next=u,d.lastBaseUpdate=c))}if(a!==null){var f=s.baseState;o=0,d=u=c=null,i=a;do{var h=i.lane,m=i.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var y=t,p=i;switch(h=e,m=r,p.tag){case 1:if(y=p.payload,typeof y=="function"){f=y.call(m,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=p.payload,h=typeof y=="function"?y.call(m,f,h):y,h==null)break e;f=ut({},f,h);break e;case 2:Qs=!0}}i.callback!==null&&i.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[i]:h.push(i))}else m={eventTime:m,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,o|=h;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;h=i,i=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);yo|=o,t.lanes=o,t.memoizedState=f}}function Nx(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(K(191,s));s.call(n)}}}var Kc={},Bn=Oa(Kc),Sc=Oa(Kc),Cc=Oa(Kc);function eo(t){if(t===Kc)throw Error(K(174));return t}function Rv(t,e){switch(tt(Cc,e),tt(Sc,t),tt(Bn,Kc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pp(e,t)}at(Bn),tt(Bn,e)}function Mi(){at(Bn),at(Sc),at(Cc)}function tS(t){eo(Cc.current);var e=eo(Bn.current),r=pp(e,t.type);e!==r&&(tt(Sc,t),tt(Bn,r))}function Iv(t){Sc.current===t&&(at(Bn),at(Sc))}var lt=Oa(0);function Gd(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lm=[];function Ov(){for(var t=0;t<lm.length;t++)lm[t]._workInProgressVersionPrimary=null;lm.length=0}var cd=Ps.ReactCurrentDispatcher,cm=Ps.ReactCurrentBatchConfig,vo=0,ct=null,Nt=null,It=null,qd=!1,Ql=!1,Ec=0,LR=0;function Wt(){throw Error(K(321))}function Lv(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!vn(t[r],e[r]))return!1;return!0}function $v(t,e,r,n,s,a){if(vo=a,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cd.current=t===null||t.memoizedState===null?FR:UR,t=r(n,s),Ql){a=0;do{if(Ql=!1,Ec=0,25<=a)throw Error(K(301));a+=1,It=Nt=null,e.updateQueue=null,cd.current=VR,t=r(n,s)}while(Ql)}if(cd.current=Kd,e=Nt!==null&&Nt.next!==null,vo=0,It=Nt=ct=null,qd=!1,e)throw Error(K(300));return t}function Mv(){var t=Ec!==0;return Ec=0,t}function kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?ct.memoizedState=It=t:It=It.next=t,It}function Hr(){if(Nt===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=It===null?ct.memoizedState:It.next;if(e!==null)It=e,Nt=t;else{if(t===null)throw Error(K(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},It===null?ct.memoizedState=It=t:It=It.next=t}return It}function Nc(t,e){return typeof e=="function"?e(t):e}function um(t){var e=Hr(),r=e.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=t;var n=Nt,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var i=o=null,c=null,u=a;do{var d=u.lane;if((vo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(i=c=f,o=n):c=c.next=f,ct.lanes|=d,yo|=d}u=u.next}while(u!==null&&u!==a);c===null?o=n:c.next=i,vn(n,e.memoizedState)||(pr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do a=s.lane,ct.lanes|=a,yo|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function dm(t){var e=Hr(),r=e.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);vn(a,e.memoizedState)||(pr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function rS(){}function nS(t,e){var r=ct,n=Hr(),s=e(),a=!vn(n.memoizedState,s);if(a&&(n.memoizedState=s,pr=!0),n=n.queue,Dv(oS.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||It!==null&&It.memoizedState.tag&1){if(r.flags|=2048,Ac(9,aS.bind(null,r,n,s,e),void 0,null),Ot===null)throw Error(K(349));vo&30||sS(r,e,s)}return s}function sS(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function aS(t,e,r,n){e.value=r,e.getSnapshot=n,iS(e)&&lS(t)}function oS(t,e,r){return r(function(){iS(e)&&lS(t)})}function iS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!vn(t,r)}catch{return!0}}function lS(t){var e=_s(t,1);e!==null&&mn(e,t,1,-1)}function Ax(t){var e=kn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nc,lastRenderedState:t},e.queue=t,t=t.dispatch=DR.bind(null,ct,t),[e.memoizedState,t]}function Ac(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function cS(){return Hr().memoizedState}function ud(t,e,r,n){var s=kn();ct.flags|=t,s.memoizedState=Ac(1|e,r,void 0,n===void 0?null:n)}function Vf(t,e,r,n){var s=Hr();n=n===void 0?null:n;var a=void 0;if(Nt!==null){var o=Nt.memoizedState;if(a=o.destroy,n!==null&&Lv(n,o.deps)){s.memoizedState=Ac(e,r,a,n);return}}ct.flags|=t,s.memoizedState=Ac(1|e,r,a,n)}function jx(t,e){return ud(8390656,8,t,e)}function Dv(t,e){return Vf(2048,8,t,e)}function uS(t,e){return Vf(4,2,t,e)}function dS(t,e){return Vf(4,4,t,e)}function fS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hS(t,e,r){return r=r!=null?r.concat([t]):null,Vf(4,4,fS.bind(null,e,t),r)}function Fv(){}function mS(t,e){var r=Hr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Lv(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function pS(t,e){var r=Hr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Lv(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function gS(t,e,r){return vo&21?(vn(r,e)||(r=b1(),ct.lanes|=r,yo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pr=!0),t.memoizedState=r)}function $R(t,e){var r=Qe;Qe=r!==0&&4>r?r:4,t(!0);var n=cm.transition;cm.transition={};try{t(!1),e()}finally{Qe=r,cm.transition=n}}function vS(){return Hr().memoizedState}function MR(t,e,r){var n=wa(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},yS(t))xS(e,r);else if(r=Z1(t,e,r,n),r!==null){var s=ar();mn(r,t,n,s),wS(r,e,n)}}function DR(t,e,r){var n=wa(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(yS(t))xS(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,i=a(o,r);if(s.hasEagerState=!0,s.eagerState=i,vn(i,o)){var c=e.interleaved;c===null?(s.next=s,Tv(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=Z1(t,e,s,n),r!==null&&(s=ar(),mn(r,t,n,s),wS(r,e,n))}}function yS(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function xS(t,e){Ql=qd=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function wS(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,gv(t,r)}}var Kd={readContext:Wr,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},FR={readContext:Wr,useCallback:function(t,e){return kn().memoizedState=[t,e===void 0?null:e],t},useContext:Wr,useEffect:jx,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ud(4194308,4,fS.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ud(4194308,4,t,e)},useInsertionEffect:function(t,e){return ud(4,2,t,e)},useMemo:function(t,e){var r=kn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=kn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=MR.bind(null,ct,t),[n.memoizedState,t]},useRef:function(t){var e=kn();return t={current:t},e.memoizedState=t},useState:Ax,useDebugValue:Fv,useDeferredValue:function(t){return kn().memoizedState=t},useTransition:function(){var t=Ax(!1),e=t[0];return t=$R.bind(null,t[1]),kn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ct,s=kn();if(it){if(r===void 0)throw Error(K(407));r=r()}else{if(r=e(),Ot===null)throw Error(K(349));vo&30||sS(n,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,jx(oS.bind(null,n,a,t),[t]),n.flags|=2048,Ac(9,aS.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=kn(),e=Ot.identifierPrefix;if(it){var r=ps,n=ms;r=(n&~(1<<32-hn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ec++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=LR++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},UR={readContext:Wr,useCallback:mS,useContext:Wr,useEffect:Dv,useImperativeHandle:hS,useInsertionEffect:uS,useLayoutEffect:dS,useMemo:pS,useReducer:um,useRef:cS,useState:function(){return um(Nc)},useDebugValue:Fv,useDeferredValue:function(t){var e=Hr();return gS(e,Nt.memoizedState,t)},useTransition:function(){var t=um(Nc)[0],e=Hr().memoizedState;return[t,e]},useMutableSource:rS,useSyncExternalStore:nS,useId:vS,unstable_isNewReconciler:!1},VR={readContext:Wr,useCallback:mS,useContext:Wr,useEffect:Dv,useImperativeHandle:hS,useInsertionEffect:uS,useLayoutEffect:dS,useMemo:pS,useReducer:dm,useRef:cS,useState:function(){return dm(Nc)},useDebugValue:Fv,useDeferredValue:function(t){var e=Hr();return Nt===null?e.memoizedState=t:gS(e,Nt.memoizedState,t)},useTransition:function(){var t=dm(Nc)[0],e=Hr().memoizedState;return[t,e]},useMutableSource:rS,useSyncExternalStore:nS,useId:vS,unstable_isNewReconciler:!1};function tn(t,e){if(t&&t.defaultProps){e=ut({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function $p(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ut({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var zf={isMounted:function(t){return(t=t._reactInternals)?ko(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=ar(),s=wa(t),a=gs(n,s);a.payload=e,r!=null&&(a.callback=r),e=ya(t,a,s),e!==null&&(mn(e,t,s,n),ld(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=ar(),s=wa(t),a=gs(n,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=ya(t,a,s),e!==null&&(mn(e,t,s,n),ld(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ar(),n=wa(t),s=gs(r,n);s.tag=2,e!=null&&(s.callback=e),e=ya(t,s,n),e!==null&&(mn(e,t,n,r),ld(e,t,n))}};function kx(t,e,r,n,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!xc(r,n)||!xc(s,a):!0}function bS(t,e,r){var n=!1,s=Na,a=e.contextType;return typeof a=="object"&&a!==null?a=Wr(a):(s=yr(e)?po:Qt.current,n=e.contextTypes,a=(n=n!=null)?Oi(t,s):Na),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zf,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function Tx(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&zf.enqueueReplaceState(e,e.state,null)}function Mp(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Pv(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Wr(a):(a=yr(e)?po:Qt.current,s.context=Oi(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&($p(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&zf.enqueueReplaceState(s,s.state,null),Hd(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Di(t,e){try{var r="",n=e;do r+=pP(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function fm(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Dp(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var zR=typeof WeakMap=="function"?WeakMap:Map;function _S(t,e,r){r=gs(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Qd||(Qd=!0,Kp=n),Dp(t,e)},r}function SS(t,e,r){r=gs(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Dp(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Dp(t,e),typeof n!="function"&&(xa===null?xa=new Set([this]):xa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Px(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new zR;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=rI.bind(null,t,e,r),e.then(t,t))}function Rx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ix(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=gs(-1,1),e.tag=2,ya(r,e,1))),r.lanes|=1),t)}var BR=Ps.ReactCurrentOwner,pr=!1;function tr(t,e,r,n){e.child=t===null?X1(e,null,r,n):$i(e,t.child,r,n)}function Ox(t,e,r,n,s){r=r.render;var a=e.ref;return vi(e,s),n=$v(t,e,r,n,a,s),r=Mv(),t!==null&&!pr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ss(t,e,s)):(it&&r&&Cv(e),e.flags|=1,tr(t,e,n,s),e.child)}function Lx(t,e,r,n,s){if(t===null){var a=r.type;return typeof a=="function"&&!qv(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,CS(t,e,a,n,s)):(t=md(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:xc,r(o,n)&&t.ref===e.ref)return Ss(t,e,s)}return e.flags|=1,t=ba(a,n),t.ref=e.ref,t.return=e,e.child=t}function CS(t,e,r,n,s){if(t!==null){var a=t.memoizedProps;if(xc(a,n)&&t.ref===e.ref)if(pr=!1,e.pendingProps=n=a,(t.lanes&s)!==0)t.flags&131072&&(pr=!0);else return e.lanes=t.lanes,Ss(t,e,s)}return Fp(t,e,r,n,s)}function ES(t,e,r){var n=e.pendingProps,s=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(di,Ar),Ar|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,tt(di,Ar),Ar|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,tt(di,Ar),Ar|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,tt(di,Ar),Ar|=n;return tr(t,e,s,r),e.child}function NS(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Fp(t,e,r,n,s){var a=yr(r)?po:Qt.current;return a=Oi(e,a),vi(e,s),r=$v(t,e,r,n,a,s),n=Mv(),t!==null&&!pr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ss(t,e,s)):(it&&n&&Cv(e),e.flags|=1,tr(t,e,r,s),e.child)}function $x(t,e,r,n,s){if(yr(r)){var a=!0;Ud(e)}else a=!1;if(vi(e,s),e.stateNode===null)dd(t,e),bS(e,r,n),Mp(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,i=e.memoizedProps;o.props=i;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Wr(u):(u=yr(r)?po:Qt.current,u=Oi(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==n||c!==u)&&Tx(e,o,n,u),Qs=!1;var h=e.memoizedState;o.state=h,Hd(e,n,o,s),c=e.memoizedState,i!==n||h!==c||vr.current||Qs?(typeof d=="function"&&($p(e,r,d,n),c=e.memoizedState),(i=Qs||kx(e,r,i,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=i):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,eS(t,e),i=e.memoizedProps,u=e.type===e.elementType?i:tn(e.type,i),o.props=u,f=e.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Wr(c):(c=yr(r)?po:Qt.current,c=Oi(e,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==f||h!==c)&&Tx(e,o,n,c),Qs=!1,h=e.memoizedState,o.state=h,Hd(e,n,o,s);var y=e.memoizedState;i!==f||h!==y||vr.current||Qs?(typeof m=="function"&&($p(e,r,m,n),y=e.memoizedState),(u=Qs||kx(e,r,u,n,h,y,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),o.props=n,o.state=y,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||i===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return Up(t,e,r,n,a,s)}function Up(t,e,r,n,s,a){NS(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&bx(e,r,!1),Ss(t,e,a);n=e.stateNode,BR.current=e;var i=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=$i(e,t.child,null,a),e.child=$i(e,null,i,a)):tr(t,e,i,a),e.memoizedState=n.state,s&&bx(e,r,!0),e.child}function AS(t){var e=t.stateNode;e.pendingContext?wx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wx(t,e.context,!1),Rv(t,e.containerInfo)}function Mx(t,e,r,n,s){return Li(),Nv(s),e.flags|=256,tr(t,e,r,n),e.child}var Vp={dehydrated:null,treeContext:null,retryLane:0};function zp(t){return{baseLanes:t,cachePool:null,transitions:null}}function jS(t,e,r){var n=e.pendingProps,s=lt.current,a=!1,o=(e.flags&128)!==0,i;if((i=o)||(i=t!==null&&t.memoizedState===null?!1:(s&2)!==0),i?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),tt(lt,s&1),t===null)return Op(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Hf(o,n,0,null),t=mo(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=zp(r),e.memoizedState=Vp,t):Uv(e,o));if(s=t.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return WR(t,e,o,n,i,s,r);if(a){a=n.fallback,o=e.mode,s=t.child,i=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=ba(s,c),n.subtreeFlags=s.subtreeFlags&14680064),i!==null?a=ba(i,a):(a=mo(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?zp(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=Vp,n}return a=t.child,t=a.sibling,n=ba(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Uv(t,e){return e=Hf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pu(t,e,r,n){return n!==null&&Nv(n),$i(e,t.child,null,r),t=Uv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function WR(t,e,r,n,s,a,o){if(r)return e.flags&256?(e.flags&=-257,n=fm(Error(K(422))),Pu(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,s=e.mode,n=Hf({mode:"visible",children:n.children},s,0,null),a=mo(a,s,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&$i(e,t.child,null,o),e.child.memoizedState=zp(o),e.memoizedState=Vp,a);if(!(e.mode&1))return Pu(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var i=n.dgst;return n=i,a=Error(K(419)),n=fm(a,n,void 0),Pu(t,e,o,n)}if(i=(o&t.childLanes)!==0,pr||i){if(n=Ot,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,_s(t,s),mn(n,t,s,-1))}return Gv(),n=fm(Error(K(421))),Pu(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=nI.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,kr=va(s.nextSibling),Tr=e,it=!0,cn=null,t!==null&&(Dr[Fr++]=ms,Dr[Fr++]=ps,Dr[Fr++]=go,ms=t.id,ps=t.overflow,go=e),e=Uv(e,n.children),e.flags|=4096,e)}function Dx(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Lp(t.return,e,r)}function hm(t,e,r,n,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function kS(t,e,r){var n=e.pendingProps,s=n.revealOrder,a=n.tail;if(tr(t,e,n.children,r),n=lt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dx(t,r,e);else if(t.tag===19)Dx(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(tt(lt,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Gd(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),hm(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Gd(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}hm(e,!0,r,null,a);break;case"together":hm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ss(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),yo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,r=ba(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ba(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function HR(t,e,r){switch(e.tag){case 3:AS(e),Li();break;case 5:tS(e);break;case 1:yr(e.type)&&Ud(e);break;case 4:Rv(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;tt(Bd,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(tt(lt,lt.current&1),e.flags|=128,null):r&e.child.childLanes?jS(t,e,r):(tt(lt,lt.current&1),t=Ss(t,e,r),t!==null?t.sibling:null);tt(lt,lt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return kS(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),tt(lt,lt.current),n)break;return null;case 22:case 23:return e.lanes=0,ES(t,e,r)}return Ss(t,e,r)}var TS,Bp,PS,RS;TS=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Bp=function(){};PS=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,eo(Bn.current);var a=null;switch(r){case"input":s=dp(t,s),n=dp(t,n),a=[];break;case"select":s=ut({},s,{value:void 0}),n=ut({},n,{value:void 0}),a=[];break;case"textarea":s=mp(t,s),n=mp(t,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Dd)}gp(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var i=s[u];for(o in i)i.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fc.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(i=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==i&&(c!=null||i!=null))if(u==="style")if(i){for(o in i)!i.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&i[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&st("scroll",t),a||i===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};RS=function(t,e,r,n){r!==n&&(e.flags|=4)};function xl(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function GR(t,e,r){var n=e.pendingProps;switch(Ev(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return yr(e.type)&&Fd(),Ht(e),null;case 3:return n=e.stateNode,Mi(),at(vr),at(Qt),Ov(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ku(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cn!==null&&(Jp(cn),cn=null))),Bp(t,e),Ht(e),null;case 5:Iv(e);var s=eo(Cc.current);if(r=e.type,t!==null&&e.stateNode!=null)PS(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(K(166));return Ht(e),null}if(t=eo(Bn.current),ku(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Ln]=e,n[_c]=a,t=(e.mode&1)!==0,r){case"dialog":st("cancel",n),st("close",n);break;case"iframe":case"object":case"embed":st("load",n);break;case"video":case"audio":for(s=0;s<Il.length;s++)st(Il[s],n);break;case"source":st("error",n);break;case"img":case"image":case"link":st("error",n),st("load",n);break;case"details":st("toggle",n);break;case"input":q0(n,a),st("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},st("invalid",n);break;case"textarea":Y0(n,a),st("invalid",n)}gp(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var i=a[o];o==="children"?typeof i=="string"?n.textContent!==i&&(a.suppressHydrationWarning!==!0&&ju(n.textContent,i,t),s=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(a.suppressHydrationWarning!==!0&&ju(n.textContent,i,t),s=["children",""+i]):fc.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&st("scroll",n)}switch(r){case"input":wu(n),K0(n,a,!0);break;case"textarea":wu(n),Q0(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Dd)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=o1(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Ln]=e,t[_c]=n,TS(t,e,!1,!1),e.stateNode=t;e:{switch(o=vp(r,n),r){case"dialog":st("cancel",t),st("close",t),s=n;break;case"iframe":case"object":case"embed":st("load",t),s=n;break;case"video":case"audio":for(s=0;s<Il.length;s++)st(Il[s],t);s=n;break;case"source":st("error",t),s=n;break;case"img":case"image":case"link":st("error",t),st("load",t),s=n;break;case"details":st("toggle",t),s=n;break;case"input":q0(t,n),s=dp(t,n),st("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=ut({},n,{value:void 0}),st("invalid",t);break;case"textarea":Y0(t,n),s=mp(t,n),st("invalid",t);break;default:s=n}gp(r,s),i=s;for(a in i)if(i.hasOwnProperty(a)){var c=i[a];a==="style"?c1(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&i1(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&hc(t,c):typeof c=="number"&&hc(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(fc.hasOwnProperty(a)?c!=null&&a==="onScroll"&&st("scroll",t):c!=null&&uv(t,a,c,o))}switch(r){case"input":wu(t),K0(t,n,!1);break;case"textarea":wu(t),Q0(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ea(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?hi(t,!!n.multiple,a,!1):n.defaultValue!=null&&hi(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Dd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(t&&e.stateNode!=null)RS(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(K(166));if(r=eo(Cc.current),eo(Bn.current),ku(e)){if(n=e.stateNode,r=e.memoizedProps,n[Ln]=e,(a=n.nodeValue!==r)&&(t=Tr,t!==null))switch(t.tag){case 3:ju(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ju(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ln]=e,e.stateNode=n}return Ht(e),null;case 13:if(at(lt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&kr!==null&&e.mode&1&&!(e.flags&128))Q1(),Li(),e.flags|=98560,a=!1;else if(a=ku(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(K(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(K(317));a[Ln]=e}else Li(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),a=!1}else cn!==null&&(Jp(cn),cn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?At===0&&(At=3):Gv())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return Mi(),Bp(t,e),t===null&&wc(e.stateNode.containerInfo),Ht(e),null;case 10:return kv(e.type._context),Ht(e),null;case 17:return yr(e.type)&&Fd(),Ht(e),null;case 19:if(at(lt),a=e.memoizedState,a===null)return Ht(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)xl(a,!1);else{if(At!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Gd(t),o!==null){for(e.flags|=128,xl(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return tt(lt,lt.current&1|2),e.child}t=t.sibling}a.tail!==null&&ht()>Fi&&(e.flags|=128,n=!0,xl(a,!1),e.lanes=4194304)}else{if(!n)if(t=Gd(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),xl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!it)return Ht(e),null}else 2*ht()-a.renderingStartTime>Fi&&r!==1073741824&&(e.flags|=128,n=!0,xl(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ht(),e.sibling=null,r=lt.current,tt(lt,n?r&1|2:r&1),e):(Ht(e),null);case 22:case 23:return Hv(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ar&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function qR(t,e){switch(Ev(e),e.tag){case 1:return yr(e.type)&&Fd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mi(),at(vr),at(Qt),Ov(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Iv(e),null;case 13:if(at(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));Li()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return at(lt),null;case 4:return Mi(),null;case 10:return kv(e.type._context),null;case 22:case 23:return Hv(),null;case 24:return null;default:return null}}var Ru=!1,Yt=!1,KR=typeof WeakSet=="function"?WeakSet:Set,le=null;function ui(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ft(t,e,n)}else r.current=null}function Wp(t,e,r){try{r()}catch(n){ft(t,e,n)}}var Fx=!1;function YR(t,e){if(Ap=Ld,t=M1(),Sv(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,i=-1,c=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var m;f!==r||s!==0&&f.nodeType!==3||(i=o+s),f!==a||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===t)break t;if(h===r&&++u===s&&(i=o),h===a&&++d===n&&(c=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=i===-1||c===-1?null:{start:i,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(jp={focusedElem:t,selectionRange:r},Ld=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var p=y.memoizedProps,v=y.memoizedState,w=e.stateNode,x=w.getSnapshotBeforeUpdate(e.elementType===e.type?p:tn(e.type,p),v);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(_){ft(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return y=Fx,Fx=!1,y}function Jl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&Wp(e,r,a)}s=s.next}while(s!==n)}}function Bf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Hp(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function IS(t){var e=t.alternate;e!==null&&(t.alternate=null,IS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ln],delete e[_c],delete e[Pp],delete e[PR],delete e[RR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function OS(t){return t.tag===5||t.tag===3||t.tag===4}function Ux(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||OS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Dd));else if(n!==4&&(t=t.child,t!==null))for(Gp(t,e,r),t=t.sibling;t!==null;)Gp(t,e,r),t=t.sibling}function qp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(qp(t,e,r),t=t.sibling;t!==null;)qp(t,e,r),t=t.sibling}var $t=null,on=!1;function Fs(t,e,r){for(r=r.child;r!==null;)LS(t,e,r),r=r.sibling}function LS(t,e,r){if(zn&&typeof zn.onCommitFiberUnmount=="function")try{zn.onCommitFiberUnmount(Lf,r)}catch{}switch(r.tag){case 5:Yt||ui(r,e);case 6:var n=$t,s=on;$t=null,Fs(t,e,r),$t=n,on=s,$t!==null&&(on?(t=$t,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):$t.removeChild(r.stateNode));break;case 18:$t!==null&&(on?(t=$t,r=r.stateNode,t.nodeType===8?om(t.parentNode,r):t.nodeType===1&&om(t,r),vc(t)):om($t,r.stateNode));break;case 4:n=$t,s=on,$t=r.stateNode.containerInfo,on=!0,Fs(t,e,r),$t=n,on=s;break;case 0:case 11:case 14:case 15:if(!Yt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Wp(r,e,o),s=s.next}while(s!==n)}Fs(t,e,r);break;case 1:if(!Yt&&(ui(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(i){ft(r,e,i)}Fs(t,e,r);break;case 21:Fs(t,e,r);break;case 22:r.mode&1?(Yt=(n=Yt)||r.memoizedState!==null,Fs(t,e,r),Yt=n):Fs(t,e,r);break;default:Fs(t,e,r)}}function Vx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new KR),e.forEach(function(n){var s=sI.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Jr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=t,o=e,i=o;e:for(;i!==null;){switch(i.tag){case 5:$t=i.stateNode,on=!1;break e;case 3:$t=i.stateNode.containerInfo,on=!0;break e;case 4:$t=i.stateNode.containerInfo,on=!0;break e}i=i.return}if($t===null)throw Error(K(160));LS(a,o,s),$t=null,on=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ft(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$S(e,t),e=e.sibling}function $S(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jr(e,t),Nn(t),n&4){try{Jl(3,t,t.return),Bf(3,t)}catch(p){ft(t,t.return,p)}try{Jl(5,t,t.return)}catch(p){ft(t,t.return,p)}}break;case 1:Jr(e,t),Nn(t),n&512&&r!==null&&ui(r,r.return);break;case 5:if(Jr(e,t),Nn(t),n&512&&r!==null&&ui(r,r.return),t.flags&32){var s=t.stateNode;try{hc(s,"")}catch(p){ft(t,t.return,p)}}if(n&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,i=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{i==="input"&&a.type==="radio"&&a.name!=null&&s1(s,a),vp(i,o);var u=vp(i,a);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?c1(s,f):d==="dangerouslySetInnerHTML"?i1(s,f):d==="children"?hc(s,f):uv(s,d,f,u)}switch(i){case"input":fp(s,a);break;case"textarea":a1(s,a);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?hi(s,!!a.multiple,m,!1):h!==!!a.multiple&&(a.defaultValue!=null?hi(s,!!a.multiple,a.defaultValue,!0):hi(s,!!a.multiple,a.multiple?[]:"",!1))}s[_c]=a}catch(p){ft(t,t.return,p)}}break;case 6:if(Jr(e,t),Nn(t),n&4){if(t.stateNode===null)throw Error(K(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(p){ft(t,t.return,p)}}break;case 3:if(Jr(e,t),Nn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{vc(e.containerInfo)}catch(p){ft(t,t.return,p)}break;case 4:Jr(e,t),Nn(t);break;case 13:Jr(e,t),Nn(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Bv=ht())),n&4&&Vx(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Yt=(u=Yt)||d,Jr(e,t),Yt=u):Jr(e,t),Nn(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(le=t,d=t.child;d!==null;){for(f=le=d;le!==null;){switch(h=le,m=h.child,h.tag){case 0:case 11:case 14:case 15:Jl(4,h,h.return);break;case 1:ui(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(p){ft(n,r,p)}}break;case 5:ui(h,h.return);break;case 22:if(h.memoizedState!==null){Bx(f);continue}}m!==null?(m.return=h,le=m):Bx(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(i=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=l1("display",o))}catch(p){ft(t,t.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){ft(t,t.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Jr(e,t),Nn(t),n&4&&Vx(t);break;case 21:break;default:Jr(e,t),Nn(t)}}function Nn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(OS(r)){var n=r;break e}r=r.return}throw Error(K(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(hc(s,""),n.flags&=-33);var a=Ux(t);qp(t,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,i=Ux(t);Gp(t,i,o);break;default:throw Error(K(161))}}catch(c){ft(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QR(t,e,r){le=t,MS(t)}function MS(t,e,r){for(var n=(t.mode&1)!==0;le!==null;){var s=le,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Ru;if(!o){var i=s.alternate,c=i!==null&&i.memoizedState!==null||Yt;i=Ru;var u=Yt;if(Ru=o,(Yt=c)&&!u)for(le=s;le!==null;)o=le,c=o.child,o.tag===22&&o.memoizedState!==null?Wx(s):c!==null?(c.return=o,le=c):Wx(s);for(;a!==null;)le=a,MS(a),a=a.sibling;le=s,Ru=i,Yt=u}zx(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,le=a):zx(t)}}function zx(t){for(;le!==null;){var e=le;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||Bf(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Yt)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:tn(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Nx(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Nx(e,o,r)}break;case 5:var i=e.stateNode;if(r===null&&e.flags&4){r=i;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&vc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Yt||e.flags&512&&Hp(e)}catch(h){ft(e,e.return,h)}}if(e===t){le=null;break}if(r=e.sibling,r!==null){r.return=e.return,le=r;break}le=e.return}}function Bx(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var r=e.sibling;if(r!==null){r.return=e.return,le=r;break}le=e.return}}function Wx(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Bf(4,e)}catch(c){ft(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){ft(e,s,c)}}var a=e.return;try{Hp(e)}catch(c){ft(e,a,c)}break;case 5:var o=e.return;try{Hp(e)}catch(c){ft(e,o,c)}}}catch(c){ft(e,e.return,c)}if(e===t){le=null;break}var i=e.sibling;if(i!==null){i.return=e.return,le=i;break}le=e.return}}var JR=Math.ceil,Yd=Ps.ReactCurrentDispatcher,Vv=Ps.ReactCurrentOwner,zr=Ps.ReactCurrentBatchConfig,Be=0,Ot=null,bt=null,Ft=0,Ar=0,di=Oa(0),At=0,jc=null,yo=0,Wf=0,zv=0,Xl=null,hr=null,Bv=0,Fi=1/0,ls=null,Qd=!1,Kp=null,xa=null,Iu=!1,fa=null,Jd=0,Zl=0,Yp=null,fd=-1,hd=0;function ar(){return Be&6?ht():fd!==-1?fd:fd=ht()}function wa(t){return t.mode&1?Be&2&&Ft!==0?Ft&-Ft:OR.transition!==null?(hd===0&&(hd=b1()),hd):(t=Qe,t!==0||(t=window.event,t=t===void 0?16:j1(t.type)),t):1}function mn(t,e,r,n){if(50<Zl)throw Zl=0,Yp=null,Error(K(185));Hc(t,r,n),(!(Be&2)||t!==Ot)&&(t===Ot&&(!(Be&2)&&(Wf|=r),At===4&&ea(t,Ft)),xr(t,n),r===1&&Be===0&&!(e.mode&1)&&(Fi=ht()+500,Uf&&La()))}function xr(t,e){var r=t.callbackNode;OP(t,e);var n=Od(t,t===Ot?Ft:0);if(n===0)r!==null&&Z0(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Z0(r),e===1)t.tag===0?IR(Hx.bind(null,t)):q1(Hx.bind(null,t)),kR(function(){!(Be&6)&&La()}),r=null;else{switch(_1(n)){case 1:r=pv;break;case 4:r=x1;break;case 16:r=Id;break;case 536870912:r=w1;break;default:r=Id}r=HS(r,DS.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function DS(t,e){if(fd=-1,hd=0,Be&6)throw Error(K(327));var r=t.callbackNode;if(yi()&&t.callbackNode!==r)return null;var n=Od(t,t===Ot?Ft:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Xd(t,n);else{e=n;var s=Be;Be|=2;var a=US();(Ot!==t||Ft!==e)&&(ls=null,Fi=ht()+500,ho(t,e));do try{eI();break}catch(i){FS(t,i)}while(!0);jv(),Yd.current=a,Be=s,bt!==null?e=0:(Ot=null,Ft=0,e=At)}if(e!==0){if(e===2&&(s=_p(t),s!==0&&(n=s,e=Qp(t,s))),e===1)throw r=jc,ho(t,0),ea(t,n),xr(t,ht()),r;if(e===6)ea(t,n);else{if(s=t.current.alternate,!(n&30)&&!XR(s)&&(e=Xd(t,n),e===2&&(a=_p(t),a!==0&&(n=a,e=Qp(t,a))),e===1))throw r=jc,ho(t,0),ea(t,n),xr(t,ht()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(K(345));case 2:Ha(t,hr,ls);break;case 3:if(ea(t,n),(n&130023424)===n&&(e=Bv+500-ht(),10<e)){if(Od(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){ar(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Tp(Ha.bind(null,t,hr,ls),e);break}Ha(t,hr,ls);break;case 4:if(ea(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-hn(n);a=1<<o,o=e[o],o>s&&(s=o),n&=~a}if(n=s,n=ht()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*JR(n/1960))-n,10<n){t.timeoutHandle=Tp(Ha.bind(null,t,hr,ls),n);break}Ha(t,hr,ls);break;case 5:Ha(t,hr,ls);break;default:throw Error(K(329))}}}return xr(t,ht()),t.callbackNode===r?DS.bind(null,t):null}function Qp(t,e){var r=Xl;return t.current.memoizedState.isDehydrated&&(ho(t,e).flags|=256),t=Xd(t,e),t!==2&&(e=hr,hr=r,e!==null&&Jp(e)),t}function Jp(t){hr===null?hr=t:hr.push.apply(hr,t)}function XR(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!vn(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ea(t,e){for(e&=~zv,e&=~Wf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-hn(e),n=1<<r;t[r]=-1,e&=~n}}function Hx(t){if(Be&6)throw Error(K(327));yi();var e=Od(t,0);if(!(e&1))return xr(t,ht()),null;var r=Xd(t,e);if(t.tag!==0&&r===2){var n=_p(t);n!==0&&(e=n,r=Qp(t,n))}if(r===1)throw r=jc,ho(t,0),ea(t,e),xr(t,ht()),r;if(r===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ha(t,hr,ls),xr(t,ht()),null}function Wv(t,e){var r=Be;Be|=1;try{return t(e)}finally{Be=r,Be===0&&(Fi=ht()+500,Uf&&La())}}function xo(t){fa!==null&&fa.tag===0&&!(Be&6)&&yi();var e=Be;Be|=1;var r=zr.transition,n=Qe;try{if(zr.transition=null,Qe=1,t)return t()}finally{Qe=n,zr.transition=r,Be=e,!(Be&6)&&La()}}function Hv(){Ar=di.current,at(di)}function ho(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,jR(r)),bt!==null)for(r=bt.return;r!==null;){var n=r;switch(Ev(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Fd();break;case 3:Mi(),at(vr),at(Qt),Ov();break;case 5:Iv(n);break;case 4:Mi();break;case 13:at(lt);break;case 19:at(lt);break;case 10:kv(n.type._context);break;case 22:case 23:Hv()}r=r.return}if(Ot=t,bt=t=ba(t.current,null),Ft=Ar=e,At=0,jc=null,zv=Wf=yo=0,hr=Xl=null,Za!==null){for(e=0;e<Za.length;e++)if(r=Za[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}Za=null}return t}function FS(t,e){do{var r=bt;try{if(jv(),cd.current=Kd,qd){for(var n=ct.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}qd=!1}if(vo=0,It=Nt=ct=null,Ql=!1,Ec=0,Vv.current=null,r===null||r.return===null){At=1,jc=e,bt=null;break}e:{var a=t,o=r.return,i=r,c=e;if(e=Ft,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=i,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Rx(o);if(m!==null){m.flags&=-257,Ix(m,o,i,a,e),m.mode&1&&Px(a,u,e),e=m,c=u;var y=e.updateQueue;if(y===null){var p=new Set;p.add(c),e.updateQueue=p}else y.add(c);break e}else{if(!(e&1)){Px(a,u,e),Gv();break e}c=Error(K(426))}}else if(it&&i.mode&1){var v=Rx(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Ix(v,o,i,a,e),Nv(Di(c,i));break e}}a=c=Di(c,i),At!==4&&(At=2),Xl===null?Xl=[a]:Xl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var w=_S(a,c,e);Ex(a,w);break e;case 1:i=c;var x=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(xa===null||!xa.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e;var _=SS(a,i,e);Ex(a,_);break e}}a=a.return}while(a!==null)}zS(r)}catch(C){e=C,bt===r&&r!==null&&(bt=r=r.return);continue}break}while(!0)}function US(){var t=Yd.current;return Yd.current=Kd,t===null?Kd:t}function Gv(){(At===0||At===3||At===2)&&(At=4),Ot===null||!(yo&268435455)&&!(Wf&268435455)||ea(Ot,Ft)}function Xd(t,e){var r=Be;Be|=2;var n=US();(Ot!==t||Ft!==e)&&(ls=null,ho(t,e));do try{ZR();break}catch(s){FS(t,s)}while(!0);if(jv(),Be=r,Yd.current=n,bt!==null)throw Error(K(261));return Ot=null,Ft=0,At}function ZR(){for(;bt!==null;)VS(bt)}function eI(){for(;bt!==null&&!EP();)VS(bt)}function VS(t){var e=WS(t.alternate,t,Ar);t.memoizedProps=t.pendingProps,e===null?zS(t):bt=e,Vv.current=null}function zS(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=qR(r,e),r!==null){r.flags&=32767,bt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{At=6,bt=null;return}}else if(r=GR(r,e,Ar),r!==null){bt=r;return}if(e=e.sibling,e!==null){bt=e;return}bt=e=t}while(e!==null);At===0&&(At=5)}function Ha(t,e,r){var n=Qe,s=zr.transition;try{zr.transition=null,Qe=1,tI(t,e,r,n)}finally{zr.transition=s,Qe=n}return null}function tI(t,e,r,n){do yi();while(fa!==null);if(Be&6)throw Error(K(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(LP(t,a),t===Ot&&(bt=Ot=null,Ft=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Iu||(Iu=!0,HS(Id,function(){return yi(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=zr.transition,zr.transition=null;var o=Qe;Qe=1;var i=Be;Be|=4,Vv.current=null,YR(t,r),$S(r,t),bR(jp),Ld=!!Ap,jp=Ap=null,t.current=r,QR(r),NP(),Be=i,Qe=o,zr.transition=a}else t.current=r;if(Iu&&(Iu=!1,fa=t,Jd=s),a=t.pendingLanes,a===0&&(xa=null),kP(r.stateNode),xr(t,ht()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Qd)throw Qd=!1,t=Kp,Kp=null,t;return Jd&1&&t.tag!==0&&yi(),a=t.pendingLanes,a&1?t===Yp?Zl++:(Zl=0,Yp=t):Zl=0,La(),null}function yi(){if(fa!==null){var t=_1(Jd),e=zr.transition,r=Qe;try{if(zr.transition=null,Qe=16>t?16:t,fa===null)var n=!1;else{if(t=fa,fa=null,Jd=0,Be&6)throw Error(K(331));var s=Be;for(Be|=4,le=t.current;le!==null;){var a=le,o=a.child;if(le.flags&16){var i=a.deletions;if(i!==null){for(var c=0;c<i.length;c++){var u=i[c];for(le=u;le!==null;){var d=le;switch(d.tag){case 0:case 11:case 15:Jl(8,d,a)}var f=d.child;if(f!==null)f.return=d,le=f;else for(;le!==null;){d=le;var h=d.sibling,m=d.return;if(IS(d),d===u){le=null;break}if(h!==null){h.return=m,le=h;break}le=m}}}var y=a.alternate;if(y!==null){var p=y.child;if(p!==null){y.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}le=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,le=o;else e:for(;le!==null;){if(a=le,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Jl(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,le=w;break e}le=a.return}}var x=t.current;for(le=x;le!==null;){o=le;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,le=b;else e:for(o=x;le!==null;){if(i=le,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Bf(9,i)}}catch(C){ft(i,i.return,C)}if(i===o){le=null;break e}var _=i.sibling;if(_!==null){_.return=i.return,le=_;break e}le=i.return}}if(Be=s,La(),zn&&typeof zn.onPostCommitFiberRoot=="function")try{zn.onPostCommitFiberRoot(Lf,t)}catch{}n=!0}return n}finally{Qe=r,zr.transition=e}}return!1}function Gx(t,e,r){e=Di(r,e),e=_S(t,e,1),t=ya(t,e,1),e=ar(),t!==null&&(Hc(t,1,e),xr(t,e))}function ft(t,e,r){if(t.tag===3)Gx(t,t,r);else for(;e!==null;){if(e.tag===3){Gx(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(xa===null||!xa.has(n))){t=Di(r,t),t=SS(e,t,1),e=ya(e,t,1),t=ar(),e!==null&&(Hc(e,1,t),xr(e,t));break}}e=e.return}}function rI(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=ar(),t.pingedLanes|=t.suspendedLanes&r,Ot===t&&(Ft&r)===r&&(At===4||At===3&&(Ft&130023424)===Ft&&500>ht()-Bv?ho(t,0):zv|=r),xr(t,e)}function BS(t,e){e===0&&(t.mode&1?(e=Su,Su<<=1,!(Su&130023424)&&(Su=4194304)):e=1);var r=ar();t=_s(t,e),t!==null&&(Hc(t,e,r),xr(t,r))}function nI(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),BS(t,r)}function sI(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(K(314))}n!==null&&n.delete(e),BS(t,r)}var WS;WS=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||vr.current)pr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return pr=!1,HR(t,e,r);pr=!!(t.flags&131072)}else pr=!1,it&&e.flags&1048576&&K1(e,zd,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;dd(t,e),t=e.pendingProps;var s=Oi(e,Qt.current);vi(e,r),s=$v(null,e,n,t,s,r);var a=Mv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yr(n)?(a=!0,Ud(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Pv(e),s.updater=zf,e.stateNode=s,s._reactInternals=e,Mp(e,n,t,r),e=Up(null,e,n,!0,a,r)):(e.tag=0,it&&a&&Cv(e),tr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(dd(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=oI(n),t=tn(n,t),s){case 0:e=Fp(null,e,n,t,r);break e;case 1:e=$x(null,e,n,t,r);break e;case 11:e=Ox(null,e,n,t,r);break e;case 14:e=Lx(null,e,n,tn(n.type,t),r);break e}throw Error(K(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:tn(n,s),Fp(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:tn(n,s),$x(t,e,n,s,r);case 3:e:{if(AS(e),t===null)throw Error(K(387));n=e.pendingProps,a=e.memoizedState,s=a.element,eS(t,e),Hd(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Di(Error(K(423)),e),e=Mx(t,e,n,r,s);break e}else if(n!==s){s=Di(Error(K(424)),e),e=Mx(t,e,n,r,s);break e}else for(kr=va(e.stateNode.containerInfo.firstChild),Tr=e,it=!0,cn=null,r=X1(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Li(),n===s){e=Ss(t,e,r);break e}tr(t,e,n,r)}e=e.child}return e;case 5:return tS(e),t===null&&Op(e),n=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,kp(n,s)?o=null:a!==null&&kp(n,a)&&(e.flags|=32),NS(t,e),tr(t,e,o,r),e.child;case 6:return t===null&&Op(e),null;case 13:return jS(t,e,r);case 4:return Rv(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=$i(e,null,n,r):tr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:tn(n,s),Ox(t,e,n,s,r);case 7:return tr(t,e,e.pendingProps,r),e.child;case 8:return tr(t,e,e.pendingProps.children,r),e.child;case 12:return tr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,tt(Bd,n._currentValue),n._currentValue=o,a!==null)if(vn(a.value,o)){if(a.children===s.children&&!vr.current){e=Ss(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var i=a.dependencies;if(i!==null){o=a.child;for(var c=i.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=gs(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Lp(a.return,r,e),i.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(K(341));o.lanes|=r,i=o.alternate,i!==null&&(i.lanes|=r),Lp(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}tr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,vi(e,r),s=Wr(s),n=n(s),e.flags|=1,tr(t,e,n,r),e.child;case 14:return n=e.type,s=tn(n,e.pendingProps),s=tn(n.type,s),Lx(t,e,n,s,r);case 15:return CS(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:tn(n,s),dd(t,e),e.tag=1,yr(n)?(t=!0,Ud(e)):t=!1,vi(e,r),bS(e,n,s),Mp(e,n,s,r),Up(null,e,n,!0,t,r);case 19:return kS(t,e,r);case 22:return ES(t,e,r)}throw Error(K(156,e.tag))};function HS(t,e){return y1(t,e)}function aI(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(t,e,r,n){return new aI(t,e,r,n)}function qv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oI(t){if(typeof t=="function")return qv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fv)return 11;if(t===hv)return 14}return 2}function ba(t,e){var r=t.alternate;return r===null?(r=Ur(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function md(t,e,r,n,s,a){var o=2;if(n=t,typeof t=="function")qv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ti:return mo(r.children,s,a,e);case dv:o=8,s|=8;break;case ip:return t=Ur(12,r,e,s|2),t.elementType=ip,t.lanes=a,t;case lp:return t=Ur(13,r,e,s),t.elementType=lp,t.lanes=a,t;case cp:return t=Ur(19,r,e,s),t.elementType=cp,t.lanes=a,t;case t1:return Hf(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z_:o=10;break e;case e1:o=9;break e;case fv:o=11;break e;case hv:o=14;break e;case Ys:o=16,n=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=Ur(o,r,e,s),e.elementType=t,e.type=n,e.lanes=a,e}function mo(t,e,r,n){return t=Ur(7,t,n,e),t.lanes=r,t}function Hf(t,e,r,n){return t=Ur(22,t,n,e),t.elementType=t1,t.lanes=r,t.stateNode={isHidden:!1},t}function mm(t,e,r){return t=Ur(6,t,null,e),t.lanes=r,t}function pm(t,e,r){return e=Ur(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function iI(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yh(0),this.expirationTimes=Yh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yh(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Kv(t,e,r,n,s,a,o,i,c){return t=new iI(t,e,r,i,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Ur(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pv(a),t}function lI(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ei,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function GS(t){if(!t)return Na;t=t._reactInternals;e:{if(ko(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var r=t.type;if(yr(r))return G1(t,r,e)}return e}function qS(t,e,r,n,s,a,o,i,c){return t=Kv(r,n,!0,t,s,a,o,i,c),t.context=GS(null),r=t.current,n=ar(),s=wa(r),a=gs(n,s),a.callback=e??null,ya(r,a,s),t.current.lanes=s,Hc(t,s,n),xr(t,n),t}function Gf(t,e,r,n){var s=e.current,a=ar(),o=wa(s);return r=GS(r),e.context===null?e.context=r:e.pendingContext=r,e=gs(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ya(s,e,o),t!==null&&(mn(t,s,o,a),ld(t,s,o)),o}function Zd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Yv(t,e){qx(t,e),(t=t.alternate)&&qx(t,e)}function cI(){return null}var KS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qv(t){this._internalRoot=t}qf.prototype.render=Qv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));Gf(t,e,null,null)};qf.prototype.unmount=Qv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xo(function(){Gf(null,t,null,null)}),e[bs]=null}};function qf(t){this._internalRoot=t}qf.prototype.unstable_scheduleHydration=function(t){if(t){var e=E1();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Zs.length&&e!==0&&e<Zs[r].priority;r++);Zs.splice(r,0,t),r===0&&A1(t)}};function Jv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Kx(){}function uI(t,e,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=Zd(o);a.call(u)}}var o=qS(e,n,t,0,null,!1,!1,"",Kx);return t._reactRootContainer=o,t[bs]=o.current,wc(t.nodeType===8?t.parentNode:t),xo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var i=n;n=function(){var u=Zd(c);i.call(u)}}var c=Kv(t,0,!1,null,null,!1,!1,"",Kx);return t._reactRootContainer=c,t[bs]=c.current,wc(t.nodeType===8?t.parentNode:t),xo(function(){Gf(e,c,r,n)}),c}function Yf(t,e,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var i=s;s=function(){var c=Zd(o);i.call(c)}}Gf(e,o,t,s)}else o=uI(r,e,t,s,n);return Zd(o)}S1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Rl(e.pendingLanes);r!==0&&(gv(e,r|1),xr(e,ht()),!(Be&6)&&(Fi=ht()+500,La()))}break;case 13:xo(function(){var n=_s(t,1);if(n!==null){var s=ar();mn(n,t,1,s)}}),Yv(t,1)}};vv=function(t){if(t.tag===13){var e=_s(t,134217728);if(e!==null){var r=ar();mn(e,t,134217728,r)}Yv(t,134217728)}};C1=function(t){if(t.tag===13){var e=wa(t),r=_s(t,e);if(r!==null){var n=ar();mn(r,t,e,n)}Yv(t,e)}};E1=function(){return Qe};N1=function(t,e){var r=Qe;try{return Qe=t,e()}finally{Qe=r}};xp=function(t,e,r){switch(e){case"input":if(fp(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Ff(n);if(!s)throw Error(K(90));n1(n),fp(n,s)}}}break;case"textarea":a1(t,r);break;case"select":e=r.value,e!=null&&hi(t,!!r.multiple,e,!1)}};f1=Wv;h1=xo;var dI={usingClientEntryPoint:!1,Events:[qc,ai,Ff,u1,d1,Wv]},wl={findFiberByHostInstance:Xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fI={bundleType:wl.bundleType,version:wl.version,rendererPackageName:wl.rendererPackageName,rendererConfig:wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=g1(t),t===null?null:t.stateNode},findFiberByHostInstance:wl.findFiberByHostInstance||cI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ou.isDisabled&&Ou.supportsFiber)try{Lf=Ou.inject(fI),zn=Ou}catch{}}Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dI;Lr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jv(e))throw Error(K(200));return lI(t,e,null,r)};Lr.createRoot=function(t,e){if(!Jv(t))throw Error(K(299));var r=!1,n="",s=KS;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Kv(t,1,!1,null,null,r,!1,n,s),t[bs]=e.current,wc(t.nodeType===8?t.parentNode:t),new Qv(e)};Lr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=g1(e),t=t===null?null:t.stateNode,t};Lr.flushSync=function(t){return xo(t)};Lr.hydrate=function(t,e,r){if(!Kf(e))throw Error(K(200));return Yf(null,t,e,!0,r)};Lr.hydrateRoot=function(t,e,r){if(!Jv(t))throw Error(K(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=KS;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=qS(e,null,t,1,r??null,s,!1,a,o),t[bs]=e.current,wc(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new qf(e)};Lr.render=function(t,e,r){if(!Kf(e))throw Error(K(200));return Yf(null,t,e,!1,r)};Lr.unmountComponentAtNode=function(t){if(!Kf(t))throw Error(K(40));return t._reactRootContainer?(xo(function(){Yf(null,null,t,!1,function(){t._reactRootContainer=null,t[bs]=null})}),!0):!1};Lr.unstable_batchedUpdates=Wv;Lr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Kf(r))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Yf(t,e,r,!1,n)};Lr.version="18.3.1-next-f1338f8080-20240426";function YS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YS)}catch(t){console.error(t)}}YS(),Y_.exports=Lr;var To=Y_.exports;const QS=M_(To);var Yx=To;ap.createRoot=Yx.createRoot,ap.hydrateRoot=Yx.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ef(){return ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ef.apply(this,arguments)}var to;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(to||(to={}));const Qx="popstate";function hI(t){t===void 0&&(t={});function e(n,s){let{pathname:a,search:o,hash:i}=n.location;return Xp("",{pathname:a,search:o,hash:i},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:XS(s)}return pI(e,r,null,t)}function JS(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mI(){return Math.random().toString(36).substr(2,8)}function Jx(t,e){return{usr:t.state,key:t.key,idx:e}}function Xp(t,e,r,n){return r===void 0&&(r=null),ef({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ZS(e):e,{state:r,key:e&&e.key||n||mI()})}function XS(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ZS(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function pI(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,o=s.history,i=to.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(ef({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){i=to.Pop;let v=d(),w=v==null?null:v-u;u=v,c&&c({action:i,location:p.location,delta:w})}function h(v,w){i=to.Push;let x=Xp(p.location,v,w);u=d()+1;let b=Jx(x,u),_=p.createHref(x);try{o.pushState(b,"",_)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(_)}a&&c&&c({action:i,location:p.location,delta:1})}function m(v,w){i=to.Replace;let x=Xp(p.location,v,w);u=d();let b=Jx(x,u),_=p.createHref(x);o.replaceState(b,"",_),a&&c&&c({action:i,location:p.location,delta:0})}function y(v){let w=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof v=="string"?v:XS(v);return x=x.replace(/ $/,"%20"),JS(w,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,w)}let p={get action(){return i},get location(){return t(s,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Qx,f),c=v,()=>{s.removeEventListener(Qx,f),c=null}},createHref(v){return e(s,v)},createURL:y,encodeLocation(v){let w=y(v);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:h,replace:m,go(v){return o.go(v)}};return p}var Xx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Xx||(Xx={}));function gI(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const eC=["post","put","patch","delete"];new Set(eC);const vI=["get",...eC];new Set(vI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zp(){return Zp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zp.apply(this,arguments)}const yI=g.createContext(null),tC=g.createContext(null);function xI(){return g.useContext(tC)!=null}function wI(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function bI(t){let{basename:e="/",children:r=null,location:n,navigationType:s=to.Pop,navigator:a,static:o=!1,future:i}=t;xI()&&JS(!1);let c=e.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:c,navigator:a,static:o,future:Zp({v7_relativeSplatPath:!1},i)}),[c,i,a,o]);typeof n=="string"&&(n=ZS(n));let{pathname:d="/",search:f="",hash:h="",state:m=null,key:y="default"}=n,p=g.useMemo(()=>{let v=gI(d,c);return v==null?null:{location:{pathname:v,search:f,hash:h,state:m,key:y},navigationType:s}},[c,d,f,h,m,y,s]);return p==null?null:g.createElement(yI.Provider,{value:u},g.createElement(tC.Provider,{children:r,value:p}))}new Promise(()=>{});/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const _I="6";try{window.__reactRouterVersion=_I}catch{}const SI="startTransition",Zx=iv[SI];function CI(t){let{basename:e,children:r,future:n,window:s}=t,a=g.useRef();a.current==null&&(a.current=hI({window:s,v5Compat:!0}));let o=a.current,[i,c]=g.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=g.useCallback(f=>{u&&Zx?Zx(()=>c(f)):c(f)},[c,u]);return g.useLayoutEffect(()=>o.listen(d),[o,d]),g.useEffect(()=>wI(n),[n]),g.createElement(bI,{basename:e,children:r,location:i.location,navigationType:i.action,navigator:o,future:n})}var ew;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ew||(ew={}));var tw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tw||(tw={}));var Qf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Jf=typeof window>"u"||"Deno"in globalThis;function rn(){}function EI(t,e){return typeof t=="function"?t(e):t}function NI(t){return typeof t=="number"&&t>=0&&t!==1/0}function AI(t,e){return Math.max(t+(e||0)-Date.now(),0)}function eg(t,e){return typeof t=="function"?t(e):t}function jI(t,e){return typeof t=="function"?t(e):t}function rw(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:a,queryKey:o,stale:i}=t;if(o){if(n){if(e.queryHash!==Xv(o,e.options))return!1}else if(!Tc(e.queryKey,o))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof i=="boolean"&&e.isStale()!==i||s&&s!==e.state.fetchStatus||a&&!a(e))}function nw(t,e){const{exact:r,status:n,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(r){if(kc(e.options.mutationKey)!==kc(a))return!1}else if(!Tc(e.options.mutationKey,a))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function Xv(t,e){return((e==null?void 0:e.queryKeyHashFn)||kc)(t)}function kc(t){return JSON.stringify(t,(e,r)=>tg(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Tc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Tc(t[r],e[r])):!1}function rC(t,e){if(t===e)return t;const r=sw(t)&&sw(e);if(r||tg(t)&&tg(e)){const n=r?t:Object.keys(t),s=n.length,a=r?e:Object.keys(e),o=a.length,i=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<o;d++){const f=r?d:a[d];(!r&&c.has(f)||r)&&t[f]===void 0&&e[f]===void 0?(i[f]=void 0,u++):(i[f]=rC(t[f],e[f]),i[f]===t[f]&&t[f]!==void 0&&u++)}return s===o&&u===s?t:i}return e}function sw(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function tg(t){if(!aw(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!aw(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function aw(t){return Object.prototype.toString.call(t)==="[object Object]"}function kI(t){return new Promise(e=>{setTimeout(e,t)})}function TI(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?rC(t,e):e}function PI(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function RI(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Zv=Symbol();function nC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Zv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var io,oa,Ci,k_,II=(k_=class extends Qf{constructor(){super();Ge(this,io);Ge(this,oa);Ge(this,Ci);ke(this,Ci,e=>{if(!Jf&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){B(this,oa)||this.setEventListener(B(this,Ci))}onUnsubscribe(){var e;this.hasListeners()||((e=B(this,oa))==null||e.call(this),ke(this,oa,void 0))}setEventListener(e){var r;ke(this,Ci,e),(r=B(this,oa))==null||r.call(this),ke(this,oa,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){B(this,io)!==e&&(ke(this,io,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof B(this,io)=="boolean"?B(this,io):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},io=new WeakMap,oa=new WeakMap,Ci=new WeakMap,k_),sC=new II,Ei,ia,Ni,T_,OI=(T_=class extends Qf{constructor(){super();Ge(this,Ei,!0);Ge(this,ia);Ge(this,Ni);ke(this,Ni,e=>{if(!Jf&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){B(this,ia)||this.setEventListener(B(this,Ni))}onUnsubscribe(){var e;this.hasListeners()||((e=B(this,ia))==null||e.call(this),ke(this,ia,void 0))}setEventListener(e){var r;ke(this,Ni,e),(r=B(this,ia))==null||r.call(this),ke(this,ia,e(this.setOnline.bind(this)))}setOnline(e){B(this,Ei)!==e&&(ke(this,Ei,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return B(this,Ei)}},Ei=new WeakMap,ia=new WeakMap,Ni=new WeakMap,T_),tf=new OI;function LI(){let t,e;const r=new Promise((s,a)=>{t=s,e=a});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function $I(t){return Math.min(1e3*2**t,3e4)}function aC(t){return(t??"online")==="online"?tf.isOnline():!0}var oC=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function gm(t){return t instanceof oC}function iC(t){let e=!1,r=0,n=!1,s;const a=LI(),o=p=>{var v;n||(h(new oC(p)),(v=t.abort)==null||v.call(t))},i=()=>{e=!0},c=()=>{e=!1},u=()=>sC.isFocused()&&(t.networkMode==="always"||tf.isOnline())&&t.canRun(),d=()=>aC(t.networkMode)&&t.canRun(),f=p=>{var v;n||(n=!0,(v=t.onSuccess)==null||v.call(t,p),s==null||s(),a.resolve(p))},h=p=>{var v;n||(n=!0,(v=t.onError)==null||v.call(t,p),s==null||s(),a.reject(p))},m=()=>new Promise(p=>{var v;s=w=>{(n||u())&&p(w)},(v=t.onPause)==null||v.call(t)}).then(()=>{var p;s=void 0,n||(p=t.onContinue)==null||p.call(t)}),y=()=>{if(n)return;let p;const v=r===0?t.initialPromise:void 0;try{p=v??t.fn()}catch(w){p=Promise.reject(w)}Promise.resolve(p).then(f).catch(w=>{var E;if(n)return;const x=t.retry??(Jf?0:3),b=t.retryDelay??$I,_=typeof b=="function"?b(r,w):b,C=x===!0||typeof x=="number"&&r<x||typeof x=="function"&&x(r,w);if(e||!C){h(w);return}r++,(E=t.onFail)==null||E.call(t,r,w),kI(_).then(()=>u()?void 0:m()).then(()=>{e?h(w):y()})})};return{promise:a,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:i,continueRetry:c,canStart:d,start:()=>(d()?y():m().then(y),a)}}var MI=t=>setTimeout(t,0);function DI(){let t=[],e=0,r=i=>{i()},n=i=>{i()},s=MI;const a=i=>{e?t.push(i):s(()=>{r(i)})},o=()=>{const i=t;t=[],i.length&&s(()=>{n(()=>{i.forEach(c=>{r(c)})})})};return{batch:i=>{let c;e++;try{c=i()}finally{e--,e||o()}return c},batchCalls:i=>(...c)=>{a(()=>{i(...c)})},schedule:a,setNotifyFunction:i=>{r=i},setBatchNotifyFunction:i=>{n=i},setScheduler:i=>{s=i}}}var sr=DI(),lo,P_,lC=(P_=class{constructor(){Ge(this,lo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),NI(this.gcTime)&&ke(this,lo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Jf?1/0:5*60*1e3))}clearGcTimeout(){B(this,lo)&&(clearTimeout(B(this,lo)),ke(this,lo,void 0))}},lo=new WeakMap,P_),Ai,ji,Mr,co,qt,zc,uo,sn,as,R_,FI=(R_=class extends lC{constructor(e){super();Ge(this,sn);Ge(this,Ai);Ge(this,ji);Ge(this,Mr);Ge(this,co);Ge(this,qt);Ge(this,zc);Ge(this,uo);ke(this,uo,!1),ke(this,zc,e.defaultOptions),this.setOptions(e.options),this.observers=[],ke(this,co,e.client),ke(this,Mr,B(this,co).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ke(this,Ai,VI(this.options)),this.state=e.state??B(this,Ai),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=B(this,qt))==null?void 0:e.promise}setOptions(e){this.options={...B(this,zc),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&B(this,Mr).remove(this)}setData(e,r){const n=TI(this.state.data,e,this.options);return Bt(this,sn,as).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Bt(this,sn,as).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=B(this,qt))==null?void 0:n.promise;return(s=B(this,qt))==null||s.cancel(e),r?r.then(rn).catch(rn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,Ai))}isActive(){return this.observers.some(e=>jI(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Zv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>eg(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!AI(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=B(this,qt))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=B(this,qt))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),B(this,Mr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(B(this,qt)&&(B(this,uo)?B(this,qt).cancel({revert:!0}):B(this,qt).cancelRetry()),this.scheduleGc()),B(this,Mr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Bt(this,sn,as).call(this,{type:"invalidate"})}fetch(e,r){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(B(this,qt))return B(this,qt).continueRetry(),B(this,qt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const n=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(ke(this,uo,!0),n.signal)})},a=()=>{const h=nC(this.options,r),y=(()=>{const p={client:B(this,co),queryKey:this.queryKey,meta:this.meta};return s(p),p})();return ke(this,uo,!1),this.options.persister?this.options.persister(h,y,this):h(y)},i=(()=>{const h={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:B(this,co),state:this.state,fetchFn:a};return s(h),h})();(u=this.options.behavior)==null||u.onFetch(i,this),ke(this,ji,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=i.fetchOptions)==null?void 0:d.meta))&&Bt(this,sn,as).call(this,{type:"fetch",meta:(f=i.fetchOptions)==null?void 0:f.meta});const c=h=>{var m,y,p,v;gm(h)&&h.silent||Bt(this,sn,as).call(this,{type:"error",error:h}),gm(h)||((y=(m=B(this,Mr).config).onError)==null||y.call(m,h,this),(v=(p=B(this,Mr).config).onSettled)==null||v.call(p,this.state.data,h,this)),this.scheduleGc()};return ke(this,qt,iC({initialPromise:r==null?void 0:r.initialPromise,fn:i.fetchFn,abort:n.abort.bind(n),onSuccess:h=>{var m,y,p,v;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(w){c(w);return}(y=(m=B(this,Mr).config).onSuccess)==null||y.call(m,h,this),(v=(p=B(this,Mr).config).onSettled)==null||v.call(p,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,m)=>{Bt(this,sn,as).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{Bt(this,sn,as).call(this,{type:"pause"})},onContinue:()=>{Bt(this,sn,as).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),B(this,qt).start()}},Ai=new WeakMap,ji=new WeakMap,Mr=new WeakMap,co=new WeakMap,qt=new WeakMap,zc=new WeakMap,uo=new WeakMap,sn=new WeakSet,as=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...UI(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return gm(s)&&s.revert&&B(this,ji)?{...B(this,ji),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),sr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),B(this,Mr).notify({query:this,type:"updated",action:e})})},R_);function UI(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:aC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function VI(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Rn,I_,zI=(I_=class extends Qf{constructor(e={}){super();Ge(this,Rn);this.config=e,ke(this,Rn,new Map)}build(e,r,n){const s=r.queryKey,a=r.queryHash??Xv(s,r);let o=this.get(a);return o||(o=new FI({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){B(this,Rn).has(e.queryHash)||(B(this,Rn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=B(this,Rn).get(e.queryHash);r&&(e.destroy(),r===e&&B(this,Rn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){sr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return B(this,Rn).get(e)}getAll(){return[...B(this,Rn).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>rw(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>rw(e,n)):r}notify(e){sr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){sr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){sr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Rn=new WeakMap,I_),In,er,fo,On,Gs,O_,BI=(O_=class extends lC{constructor(e){super();Ge(this,On);Ge(this,In);Ge(this,er);Ge(this,fo);this.mutationId=e.mutationId,ke(this,er,e.mutationCache),ke(this,In,[]),this.state=e.state||WI(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){B(this,In).includes(e)||(B(this,In).push(e),this.clearGcTimeout(),B(this,er).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ke(this,In,B(this,In).filter(r=>r!==e)),this.scheduleGc(),B(this,er).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){B(this,In).length||(this.state.status==="pending"?this.scheduleGc():B(this,er).remove(this))}continue(){var e;return((e=B(this,fo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,o,i,c,u,d,f,h,m,y,p,v,w,x,b,_,C,E,N,A;const r=()=>{Bt(this,On,Gs).call(this,{type:"continue"})};ke(this,fo,iC({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(j,O)=>{Bt(this,On,Gs).call(this,{type:"failed",failureCount:j,error:O})},onPause:()=>{Bt(this,On,Gs).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,er).canRun(this)}));const n=this.state.status==="pending",s=!B(this,fo).canStart();try{if(n)r();else{Bt(this,On,Gs).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(a=B(this,er).config).onMutate)==null?void 0:o.call(a,e,this));const O=await((c=(i=this.options).onMutate)==null?void 0:c.call(i,e));O!==this.state.context&&Bt(this,On,Gs).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const j=await B(this,fo).start();return await((d=(u=B(this,er).config).onSuccess)==null?void 0:d.call(u,j,e,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,j,e,this.state.context)),await((y=(m=B(this,er).config).onSettled)==null?void 0:y.call(m,j,null,this.state.variables,this.state.context,this)),await((v=(p=this.options).onSettled)==null?void 0:v.call(p,j,null,e,this.state.context)),Bt(this,On,Gs).call(this,{type:"success",data:j}),j}catch(j){try{throw await((x=(w=B(this,er).config).onError)==null?void 0:x.call(w,j,e,this.state.context,this)),await((_=(b=this.options).onError)==null?void 0:_.call(b,j,e,this.state.context)),await((E=(C=B(this,er).config).onSettled)==null?void 0:E.call(C,void 0,j,this.state.variables,this.state.context,this)),await((A=(N=this.options).onSettled)==null?void 0:A.call(N,void 0,j,e,this.state.context)),j}finally{Bt(this,On,Gs).call(this,{type:"error",error:j})}}finally{B(this,er).runNext(this)}}},In=new WeakMap,er=new WeakMap,fo=new WeakMap,On=new WeakSet,Gs=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),sr.batch(()=>{B(this,In).forEach(n=>{n.onMutationUpdate(e)}),B(this,er).notify({mutation:this,type:"updated",action:e})})},O_);function WI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var hs,an,Bc,L_,HI=(L_=class extends Qf{constructor(e={}){super();Ge(this,hs);Ge(this,an);Ge(this,Bc);this.config=e,ke(this,hs,new Set),ke(this,an,new Map),ke(this,Bc,0)}build(e,r,n){const s=new BI({mutationCache:this,mutationId:++vu(this,Bc)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){B(this,hs).add(e);const r=Lu(e);if(typeof r=="string"){const n=B(this,an).get(r);n?n.push(e):B(this,an).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(B(this,hs).delete(e)){const r=Lu(e);if(typeof r=="string"){const n=B(this,an).get(r);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&B(this,an).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Lu(e);if(typeof r=="string"){const n=B(this,an).get(r),s=n==null?void 0:n.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const r=Lu(e);if(typeof r=="string"){const s=(n=B(this,an).get(r))==null?void 0:n.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){sr.batch(()=>{B(this,hs).forEach(e=>{this.notify({type:"removed",mutation:e})}),B(this,hs).clear(),B(this,an).clear()})}getAll(){return Array.from(B(this,hs))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>nw(r,n))}findAll(e={}){return this.getAll().filter(r=>nw(e,r))}notify(e){sr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return sr.batch(()=>Promise.all(e.map(r=>r.continue().catch(rn))))}},hs=new WeakMap,an=new WeakMap,Bc=new WeakMap,L_);function Lu(t){var e;return(e=t.options.scope)==null?void 0:e.id}function ow(t){return{onFetch:(e,r)=>{var d,f,h,m,y;const n=e.options,s=(h=(f=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,a=((m=e.state.data)==null?void 0:m.pages)||[],o=((y=e.state.data)==null?void 0:y.pageParams)||[];let i={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const v=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},w=nC(e.options,e.fetchOptions),x=async(b,_,C)=>{if(p)return Promise.reject();if(_==null&&b.pages.length)return Promise.resolve(b);const N=(()=>{const F={client:e.client,queryKey:e.queryKey,pageParam:_,direction:C?"backward":"forward",meta:e.options.meta};return v(F),F})(),A=await w(N),{maxPages:j}=e.options,O=C?RI:PI;return{pages:O(b.pages,A,j),pageParams:O(b.pageParams,_,j)}};if(s&&a.length){const b=s==="backward",_=b?GI:iw,C={pages:a,pageParams:o},E=_(n,C);i=await x(C,E,b)}else{const b=t??a.length;do{const _=c===0?o[0]??n.initialPageParam:iw(n,i);if(c>0&&_==null)break;i=await x(i,_),c++}while(c<b)}return i};e.options.persister?e.fetchFn=()=>{var p,v;return(v=(p=e.options).persister)==null?void 0:v.call(p,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function iw(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function GI(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var dt,la,ca,ki,Ti,ua,Pi,Ri,$_,qI=($_=class{constructor(t={}){Ge(this,dt);Ge(this,la);Ge(this,ca);Ge(this,ki);Ge(this,Ti);Ge(this,ua);Ge(this,Pi);Ge(this,Ri);ke(this,dt,t.queryCache||new zI),ke(this,la,t.mutationCache||new HI),ke(this,ca,t.defaultOptions||{}),ke(this,ki,new Map),ke(this,Ti,new Map),ke(this,ua,0)}mount(){vu(this,ua)._++,B(this,ua)===1&&(ke(this,Pi,sC.subscribe(async t=>{t&&(await this.resumePausedMutations(),B(this,dt).onFocus())})),ke(this,Ri,tf.subscribe(async t=>{t&&(await this.resumePausedMutations(),B(this,dt).onOnline())})))}unmount(){var t,e;vu(this,ua)._--,B(this,ua)===0&&((t=B(this,Pi))==null||t.call(this),ke(this,Pi,void 0),(e=B(this,Ri))==null||e.call(this),ke(this,Ri,void 0))}isFetching(t){return B(this,dt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return B(this,la).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=B(this,dt).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=B(this,dt).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(eg(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return B(this,dt).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=B(this,dt).get(n.queryHash),a=s==null?void 0:s.state.data,o=EI(e,a);if(o!==void 0)return B(this,dt).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return sr.batch(()=>B(this,dt).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=B(this,dt).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=B(this,dt);sr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=B(this,dt);return sr.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=sr.batch(()=>B(this,dt).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(rn).catch(rn)}invalidateQueries(t,e={}){return sr.batch(()=>(B(this,dt).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=sr.batch(()=>B(this,dt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,r);return r.throwOnError||(a=a.catch(rn)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(rn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=B(this,dt).build(this,e);return r.isStaleByTime(eg(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(rn).catch(rn)}fetchInfiniteQuery(t){return t.behavior=ow(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(rn).catch(rn)}ensureInfiniteQueryData(t){return t.behavior=ow(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return tf.isOnline()?B(this,la).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,dt)}getMutationCache(){return B(this,la)}getDefaultOptions(){return B(this,ca)}setDefaultOptions(t){ke(this,ca,t)}setQueryDefaults(t,e){B(this,ki).set(kc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...B(this,ki).values()],r={};return e.forEach(n=>{Tc(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){B(this,Ti).set(kc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...B(this,Ti).values()],r={};return e.forEach(n=>{Tc(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...B(this,ca).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Xv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Zv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...B(this,ca).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){B(this,dt).clear(),B(this,la).clear()}},dt=new WeakMap,la=new WeakMap,ca=new WeakMap,ki=new WeakMap,Ti=new WeakMap,ua=new WeakMap,Pi=new WeakMap,Ri=new WeakMap,$_),KI=g.createContext(void 0),YI=({client:t,children:e})=>(g.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),l.jsx(KI.Provider,{value:t,children:e}));const QI={theme:"system",setTheme:()=>null},cC=g.createContext(QI);function JI({children:t,defaultTheme:e="system",storageKey:r="vite-ui-theme",...n}){const[s,a]=g.useState(()=>localStorage.getItem(r)||e);g.useEffect(()=>{const i=window.document.documentElement;if(i.classList.remove("light","dark"),s==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";i.classList.add(c);return}i.classList.add(s)},[s]);const o={theme:s,setTheme:i=>{localStorage.setItem(r,i),a(i)}};return l.jsx(cC.Provider,{...n,value:o,children:t})}const uC=()=>{const t=g.useContext(cC);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t};function ce(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function lw(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function dC(...t){return e=>{let r=!1;const n=t.map(s=>{const a=lw(s,e);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():lw(t[s],null)}}}}function Le(...t){return g.useCallback(dC(...t),t)}function XI(t,e){const r=g.createContext(e),n=a=>{const{children:o,...i}=a,c=g.useMemo(()=>i,Object.values(i));return l.jsx(r.Provider,{value:c,children:o})};n.displayName=t+"Provider";function s(a){const o=g.useContext(r);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[n,s]}function br(t,e=[]){let r=[];function n(a,o){const i=g.createContext(o),c=r.length;r=[...r,o];const u=f=>{var w;const{scope:h,children:m,...y}=f,p=((w=h==null?void 0:h[t])==null?void 0:w[c])||i,v=g.useMemo(()=>y,Object.values(y));return l.jsx(p.Provider,{value:v,children:m})};u.displayName=a+"Provider";function d(f,h){var p;const m=((p=h==null?void 0:h[t])==null?void 0:p[c])||i,y=g.useContext(m);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=r.map(o=>g.createContext(o));return function(i){const c=(i==null?void 0:i[t])||a;return g.useMemo(()=>({[`__scope${t}`]:{...i,[t]:c}}),[i,c])}};return s.scopeName=t,[n,ZI(s,...e)]}function ZI(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=n.reduce((i,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...i,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function wo(t){const e=tO(t),r=g.forwardRef((n,s)=>{const{children:a,...o}=n,i=g.Children.toArray(a),c=i.find(rO);if(c){const u=c.props.children,d=i.map(f=>f===c?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:f);return l.jsx(e,{...o,ref:s,children:g.isValidElement(u)?g.cloneElement(u,void 0,d):null})}return l.jsx(e,{...o,ref:s,children:a})});return r.displayName=`${t}.Slot`,r}var eO=wo("Slot");function tO(t){const e=g.forwardRef((r,n)=>{const{children:s,...a}=r;if(g.isValidElement(s)){const o=sO(s),i=nO(a,s.props);return s.type!==g.Fragment&&(i.ref=n?dC(n,o):o),g.cloneElement(s,i)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var fC=Symbol("radix.slottable");function hC(t){const e=({children:r})=>l.jsx(l.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=fC,e}function rO(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===fC}function nO(t,e){const r={...e};for(const n in e){const s=t[n],a=e[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...i)=>{const c=a(...i);return s(...i),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...t,...r}}function sO(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var aO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ge=aO.reduce((t,e)=>{const r=wo(`Primitive.${e}`),n=g.forwardRef((s,a)=>{const{asChild:o,...i}=s,c=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...i,ref:a})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function mC(t,e){t&&To.flushSync(()=>t.dispatchEvent(e))}function _t(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function oO(t,e=globalThis==null?void 0:globalThis.document){const r=_t(t);g.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var iO="DismissableLayer",rg="dismissableLayer.update",lO="dismissableLayer.pointerDownOutside",cO="dismissableLayer.focusOutside",cw,pC=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),tl=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:i,...c}=t,u=g.useContext(pC),[d,f]=g.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=g.useState({}),y=Le(e,N=>f(N)),p=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=p.indexOf(v),x=d?p.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,_=x>=w,C=dO(N=>{const A=N.target,j=[...u.branches].some(O=>O.contains(A));!_||j||(s==null||s(N),o==null||o(N),N.defaultPrevented||i==null||i())},h),E=fO(N=>{const A=N.target;[...u.branches].some(O=>O.contains(A))||(a==null||a(N),o==null||o(N),N.defaultPrevented||i==null||i())},h);return oO(N=>{x===u.layers.size-1&&(n==null||n(N),!N.defaultPrevented&&i&&(N.preventDefault(),i()))},h),g.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(cw=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),uw(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=cw)}},[d,h,r,u]),g.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),uw())},[d,u]),g.useEffect(()=>{const N=()=>m({});return document.addEventListener(rg,N),()=>document.removeEventListener(rg,N)},[]),l.jsx(ge.div,{...c,ref:y,style:{pointerEvents:b?_?"auto":"none":void 0,...t.style},onFocusCapture:ce(t.onFocusCapture,E.onFocusCapture),onBlurCapture:ce(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ce(t.onPointerDownCapture,C.onPointerDownCapture)})});tl.displayName=iO;var uO="DismissableLayerBranch",gC=g.forwardRef((t,e)=>{const r=g.useContext(pC),n=g.useRef(null),s=Le(e,n);return g.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),l.jsx(ge.div,{...t,ref:s})});gC.displayName=uO;function dO(t,e=globalThis==null?void 0:globalThis.document){const r=_t(t),n=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const a=i=>{if(i.target&&!n.current){let c=function(){vC(lO,r,u,{discrete:!0})};const u={originalEvent:i};i.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function fO(t,e=globalThis==null?void 0:globalThis.document){const r=_t(t),n=g.useRef(!1);return g.useEffect(()=>{const s=a=>{a.target&&!n.current&&vC(cO,r,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function uw(){const t=new CustomEvent(rg);document.dispatchEvent(t)}function vC(t,e,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?mC(s,a):s.dispatchEvent(a)}var hO=tl,mO=gC,pt=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},pO=iv[" useId ".trim().toString()]||(()=>{}),gO=0;function vs(t){const[e,r]=g.useState(pO());return pt(()=>{r(n=>n??String(gO++))},[t]),e?`radix-${e}`:""}const vO=["top","right","bottom","left"],Aa=Math.min,jr=Math.max,rf=Math.round,$u=Math.floor,Wn=t=>({x:t,y:t}),yO={left:"right",right:"left",bottom:"top",top:"bottom"},xO={start:"end",end:"start"};function ng(t,e,r){return jr(t,Aa(e,r))}function Cs(t,e){return typeof t=="function"?t(e):t}function Es(t){return t.split("-")[0]}function rl(t){return t.split("-")[1]}function ey(t){return t==="x"?"y":"x"}function ty(t){return t==="y"?"height":"width"}function Mn(t){return["top","bottom"].includes(Es(t))?"y":"x"}function ry(t){return ey(Mn(t))}function wO(t,e,r){r===void 0&&(r=!1);const n=rl(t),s=ry(t),a=ty(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=nf(o)),[o,nf(o)]}function bO(t){const e=nf(t);return[sg(t),e,sg(e)]}function sg(t){return t.replace(/start|end/g,e=>xO[e])}function _O(t,e,r){const n=["left","right"],s=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return r?e?s:n:e?n:s;case"left":case"right":return e?a:o;default:return[]}}function SO(t,e,r,n){const s=rl(t);let a=_O(Es(t),r==="start",n);return s&&(a=a.map(o=>o+"-"+s),e&&(a=a.concat(a.map(sg)))),a}function nf(t){return t.replace(/left|right|bottom|top/g,e=>yO[e])}function CO(t){return{top:0,right:0,bottom:0,left:0,...t}}function yC(t){return typeof t!="number"?CO(t):{top:t,right:t,bottom:t,left:t}}function sf(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function dw(t,e,r){let{reference:n,floating:s}=t;const a=Mn(e),o=ry(e),i=ty(o),c=Es(e),u=a==="y",d=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,h=n[i]/2-s[i]/2;let m;switch(c){case"top":m={x:d,y:n.y-s.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-s.width,y:f};break;default:m={x:n.x,y:n.y}}switch(rl(e)){case"start":m[o]-=h*(r&&u?-1:1);break;case"end":m[o]+=h*(r&&u?-1:1);break}return m}const EO=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:o}=r,i=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:f}=dw(u,n,c),h=n,m={},y=0;for(let p=0;p<i.length;p++){const{name:v,fn:w}=i[p],{x,y:b,data:_,reset:C}=await w({x:d,y:f,initialPlacement:n,placement:h,strategy:s,middlewareData:m,rects:u,platform:o,elements:{reference:t,floating:e}});d=x??d,f=b??f,m={...m,[v]:{...m[v],..._}},C&&y<=50&&(y++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(u=C.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):C.rects),{x:d,y:f}=dw(u,h,c)),p=-1)}return{x:d,y:f,placement:h,strategy:s,middlewareData:m}};async function Pc(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:a,rects:o,elements:i,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=Cs(e,t),y=yC(m),v=i[h?f==="floating"?"reference":"floating":f],w=sf(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(v)))==null||r?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(i.floating)),boundary:u,rootBoundary:d,strategy:c})),x=f==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(a.getOffsetParent==null?void 0:a.getOffsetParent(i.floating)),_=await(a.isElement==null?void 0:a.isElement(b))?await(a.getScale==null?void 0:a.getScale(b))||{x:1,y:1}:{x:1,y:1},C=sf(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:x,offsetParent:b,strategy:c}):x);return{top:(w.top-C.top+y.top)/_.y,bottom:(C.bottom-w.bottom+y.bottom)/_.y,left:(w.left-C.left+y.left)/_.x,right:(C.right-w.right+y.right)/_.x}}const NO=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:a,platform:o,elements:i,middlewareData:c}=e,{element:u,padding:d=0}=Cs(t,e)||{};if(u==null)return{};const f=yC(d),h={x:r,y:n},m=ry(s),y=ty(m),p=await o.getDimensions(u),v=m==="y",w=v?"top":"left",x=v?"bottom":"right",b=v?"clientHeight":"clientWidth",_=a.reference[y]+a.reference[m]-h[m]-a.floating[y],C=h[m]-a.reference[m],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let N=E?E[b]:0;(!N||!await(o.isElement==null?void 0:o.isElement(E)))&&(N=i.floating[b]||a.floating[y]);const A=_/2-C/2,j=N/2-p[y]/2-1,O=Aa(f[w],j),F=Aa(f[x],j),P=O,V=N-p[y]-F,R=N/2-p[y]/2+A,H=ng(P,R,V),W=!c.arrow&&rl(s)!=null&&R!==H&&a.reference[y]/2-(R<P?O:F)-p[y]/2<0,I=W?R<P?R-P:R-V:0;return{[m]:h[m]+I,data:{[m]:H,centerOffset:R-H-I,...W&&{alignmentOffset:I}},reset:W}}}),AO=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:a,rects:o,initialPlacement:i,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:p=!0,...v}=Cs(t,e);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const w=Es(s),x=Mn(i),b=Es(i)===i,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),C=h||(b||!p?[nf(i)]:bO(i)),E=y!=="none";!h&&E&&C.push(...SO(i,p,y,_));const N=[i,...C],A=await Pc(e,v),j=[];let O=((n=a.flip)==null?void 0:n.overflows)||[];if(d&&j.push(A[w]),f){const R=wO(s,o,_);j.push(A[R[0]],A[R[1]])}if(O=[...O,{placement:s,overflows:j}],!j.every(R=>R<=0)){var F,P;const R=(((F=a.flip)==null?void 0:F.index)||0)+1,H=N[R];if(H&&(!(f==="alignment"?x!==Mn(H):!1)||O.every(k=>k.overflows[0]>0&&Mn(k.placement)===x)))return{data:{index:R,overflows:O},reset:{placement:H}};let W=(P=O.filter(I=>I.overflows[0]<=0).sort((I,k)=>I.overflows[1]-k.overflows[1])[0])==null?void 0:P.placement;if(!W)switch(m){case"bestFit":{var V;const I=(V=O.filter(k=>{if(E){const $=Mn(k.placement);return $===x||$==="y"}return!0}).map(k=>[k.placement,k.overflows.filter($=>$>0).reduce(($,Y)=>$+Y,0)]).sort((k,$)=>k[1]-$[1])[0])==null?void 0:V[0];I&&(W=I);break}case"initialPlacement":W=i;break}if(s!==W)return{reset:{placement:W}}}return{}}}};function fw(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function hw(t){return vO.some(e=>t[e]>=0)}const jO=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=Cs(t,e);switch(n){case"referenceHidden":{const a=await Pc(e,{...s,elementContext:"reference"}),o=fw(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:hw(o)}}}case"escaped":{const a=await Pc(e,{...s,altBoundary:!0}),o=fw(a,r.floating);return{data:{escapedOffsets:o,escaped:hw(o)}}}default:return{}}}}};async function kO(t,e){const{placement:r,platform:n,elements:s}=t,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=Es(r),i=rl(r),c=Mn(r)==="y",u=["left","top"].includes(o)?-1:1,d=a&&c?-1:1,f=Cs(e,t);let{mainAxis:h,crossAxis:m,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return i&&typeof y=="number"&&(m=i==="end"?y*-1:y),c?{x:m*d,y:h*u}:{x:h*u,y:m*d}}const TO=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:a,placement:o,middlewareData:i}=e,c=await kO(e,t);return o===((r=i.offset)==null?void 0:r.placement)&&(n=i.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},PO=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:i={fn:v=>{let{x:w,y:x}=v;return{x:w,y:x}}},...c}=Cs(t,e),u={x:r,y:n},d=await Pc(e,c),f=Mn(Es(s)),h=ey(f);let m=u[h],y=u[f];if(a){const v=h==="y"?"top":"left",w=h==="y"?"bottom":"right",x=m+d[v],b=m-d[w];m=ng(x,m,b)}if(o){const v=f==="y"?"top":"left",w=f==="y"?"bottom":"right",x=y+d[v],b=y-d[w];y=ng(x,y,b)}const p=i.fn({...e,[h]:m,[f]:y});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[h]:a,[f]:o}}}}}},RO=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:a,middlewareData:o}=e,{offset:i=0,mainAxis:c=!0,crossAxis:u=!0}=Cs(t,e),d={x:r,y:n},f=Mn(s),h=ey(f);let m=d[h],y=d[f];const p=Cs(i,e),v=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const b=h==="y"?"height":"width",_=a.reference[h]-a.floating[b]+v.mainAxis,C=a.reference[h]+a.reference[b]-v.mainAxis;m<_?m=_:m>C&&(m=C)}if(u){var w,x;const b=h==="y"?"width":"height",_=["top","left"].includes(Es(s)),C=a.reference[f]-a.floating[b]+(_&&((w=o.offset)==null?void 0:w[f])||0)+(_?0:v.crossAxis),E=a.reference[f]+a.reference[b]+(_?0:((x=o.offset)==null?void 0:x[f])||0)-(_?v.crossAxis:0);y<C?y=C:y>E&&(y=E)}return{[h]:m,[f]:y}}}},IO=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:a,platform:o,elements:i}=e,{apply:c=()=>{},...u}=Cs(t,e),d=await Pc(e,u),f=Es(s),h=rl(s),m=Mn(s)==="y",{width:y,height:p}=a.floating;let v,w;f==="top"||f==="bottom"?(v=f,w=h===(await(o.isRTL==null?void 0:o.isRTL(i.floating))?"start":"end")?"left":"right"):(w=f,v=h==="end"?"top":"bottom");const x=p-d.top-d.bottom,b=y-d.left-d.right,_=Aa(p-d[v],x),C=Aa(y-d[w],b),E=!e.middlewareData.shift;let N=_,A=C;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(A=b),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(N=x),E&&!h){const O=jr(d.left,0),F=jr(d.right,0),P=jr(d.top,0),V=jr(d.bottom,0);m?A=y-2*(O!==0||F!==0?O+F:jr(d.left,d.right)):N=p-2*(P!==0||V!==0?P+V:jr(d.top,d.bottom))}await c({...e,availableWidth:A,availableHeight:N});const j=await o.getDimensions(i.floating);return y!==j.width||p!==j.height?{reset:{rects:!0}}:{}}}};function Xf(){return typeof window<"u"}function nl(t){return xC(t)?(t.nodeName||"").toLowerCase():"#document"}function Pr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Kn(t){var e;return(e=(xC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function xC(t){return Xf()?t instanceof Node||t instanceof Pr(t).Node:!1}function yn(t){return Xf()?t instanceof Element||t instanceof Pr(t).Element:!1}function Gn(t){return Xf()?t instanceof HTMLElement||t instanceof Pr(t).HTMLElement:!1}function mw(t){return!Xf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Pr(t).ShadowRoot}function Yc(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=xn(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(s)}function OO(t){return["table","td","th"].includes(nl(t))}function Zf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function ny(t){const e=sy(),r=yn(t)?xn(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function LO(t){let e=ja(t);for(;Gn(e)&&!Ui(e);){if(ny(e))return e;if(Zf(e))return null;e=ja(e)}return null}function sy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ui(t){return["html","body","#document"].includes(nl(t))}function xn(t){return Pr(t).getComputedStyle(t)}function eh(t){return yn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ja(t){if(nl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||mw(t)&&t.host||Kn(t);return mw(e)?e.host:e}function wC(t){const e=ja(t);return Ui(e)?t.ownerDocument?t.ownerDocument.body:t.body:Gn(e)&&Yc(e)?e:wC(e)}function Rc(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=wC(t),a=s===((n=t.ownerDocument)==null?void 0:n.body),o=Pr(s);if(a){const i=ag(o);return e.concat(o,o.visualViewport||[],Yc(s)?s:[],i&&r?Rc(i):[])}return e.concat(s,Rc(s,[],r))}function ag(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function bC(t){const e=xn(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=Gn(t),a=s?t.offsetWidth:r,o=s?t.offsetHeight:n,i=rf(r)!==a||rf(n)!==o;return i&&(r=a,n=o),{width:r,height:n,$:i}}function ay(t){return yn(t)?t:t.contextElement}function xi(t){const e=ay(t);if(!Gn(e))return Wn(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:a}=bC(e);let o=(a?rf(r.width):r.width)/n,i=(a?rf(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!i||!Number.isFinite(i))&&(i=1),{x:o,y:i}}const $O=Wn(0);function _C(t){const e=Pr(t);return!sy()||!e.visualViewport?$O:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function MO(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Pr(t)?!1:e}function bo(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),a=ay(t);let o=Wn(1);e&&(n?yn(n)&&(o=xi(n)):o=xi(t));const i=MO(a,r,n)?_C(a):Wn(0);let c=(s.left+i.x)/o.x,u=(s.top+i.y)/o.y,d=s.width/o.x,f=s.height/o.y;if(a){const h=Pr(a),m=n&&yn(n)?Pr(n):n;let y=h,p=ag(y);for(;p&&n&&m!==y;){const v=xi(p),w=p.getBoundingClientRect(),x=xn(p),b=w.left+(p.clientLeft+parseFloat(x.paddingLeft))*v.x,_=w.top+(p.clientTop+parseFloat(x.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,f*=v.y,c+=b,u+=_,y=Pr(p),p=ag(y)}}return sf({width:d,height:f,x:c,y:u})}function oy(t,e){const r=eh(t).scrollLeft;return e?e.left+r:bo(Kn(t)).left+r}function SC(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-(r?0:oy(t,n)),a=n.top+e.scrollTop;return{x:s,y:a}}function DO(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const a=s==="fixed",o=Kn(n),i=e?Zf(e.floating):!1;if(n===o||i&&a)return r;let c={scrollLeft:0,scrollTop:0},u=Wn(1);const d=Wn(0),f=Gn(n);if((f||!f&&!a)&&((nl(n)!=="body"||Yc(o))&&(c=eh(n)),Gn(n))){const m=bo(n);u=xi(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const h=o&&!f&&!a?SC(o,c,!0):Wn(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-c.scrollTop*u.y+d.y+h.y}}function FO(t){return Array.from(t.getClientRects())}function UO(t){const e=Kn(t),r=eh(t),n=t.ownerDocument.body,s=jr(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=jr(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+oy(t);const i=-r.scrollTop;return xn(n).direction==="rtl"&&(o+=jr(e.clientWidth,n.clientWidth)-s),{width:s,height:a,x:o,y:i}}function VO(t,e){const r=Pr(t),n=Kn(t),s=r.visualViewport;let a=n.clientWidth,o=n.clientHeight,i=0,c=0;if(s){a=s.width,o=s.height;const u=sy();(!u||u&&e==="fixed")&&(i=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:i,y:c}}function zO(t,e){const r=bo(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,a=Gn(t)?xi(t):Wn(1),o=t.clientWidth*a.x,i=t.clientHeight*a.y,c=s*a.x,u=n*a.y;return{width:o,height:i,x:c,y:u}}function pw(t,e,r){let n;if(e==="viewport")n=VO(t,r);else if(e==="document")n=UO(Kn(t));else if(yn(e))n=zO(e,r);else{const s=_C(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return sf(n)}function CC(t,e){const r=ja(t);return r===e||!yn(r)||Ui(r)?!1:xn(r).position==="fixed"||CC(r,e)}function BO(t,e){const r=e.get(t);if(r)return r;let n=Rc(t,[],!1).filter(i=>yn(i)&&nl(i)!=="body"),s=null;const a=xn(t).position==="fixed";let o=a?ja(t):t;for(;yn(o)&&!Ui(o);){const i=xn(o),c=ny(o);!c&&i.position==="fixed"&&(s=null),(a?!c&&!s:!c&&i.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Yc(o)&&!c&&CC(t,o))?n=n.filter(d=>d!==o):s=i,o=ja(o)}return e.set(t,n),n}function WO(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const o=[...r==="clippingAncestors"?Zf(e)?[]:BO(e,this._c):[].concat(r),n],i=o[0],c=o.reduce((u,d)=>{const f=pw(e,d,s);return u.top=jr(f.top,u.top),u.right=Aa(f.right,u.right),u.bottom=Aa(f.bottom,u.bottom),u.left=jr(f.left,u.left),u},pw(e,i,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function HO(t){const{width:e,height:r}=bC(t);return{width:e,height:r}}function GO(t,e,r){const n=Gn(e),s=Kn(e),a=r==="fixed",o=bo(t,!0,a,e);let i={scrollLeft:0,scrollTop:0};const c=Wn(0);function u(){c.x=oy(s)}if(n||!n&&!a)if((nl(e)!=="body"||Yc(s))&&(i=eh(e)),n){const m=bo(e,!0,a,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&u();a&&!n&&s&&u();const d=s&&!n&&!a?SC(s,i):Wn(0),f=o.left+i.scrollLeft-c.x-d.x,h=o.top+i.scrollTop-c.y-d.y;return{x:f,y:h,width:o.width,height:o.height}}function vm(t){return xn(t).position==="static"}function gw(t,e){if(!Gn(t)||xn(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Kn(t)===r&&(r=r.ownerDocument.body),r}function EC(t,e){const r=Pr(t);if(Zf(t))return r;if(!Gn(t)){let s=ja(t);for(;s&&!Ui(s);){if(yn(s)&&!vm(s))return s;s=ja(s)}return r}let n=gw(t,e);for(;n&&OO(n)&&vm(n);)n=gw(n,e);return n&&Ui(n)&&vm(n)&&!ny(n)?r:n||LO(t)||r}const qO=async function(t){const e=this.getOffsetParent||EC,r=this.getDimensions,n=await r(t.floating);return{reference:GO(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function KO(t){return xn(t).direction==="rtl"}const YO={convertOffsetParentRelativeRectToViewportRelativeRect:DO,getDocumentElement:Kn,getClippingRect:WO,getOffsetParent:EC,getElementRects:qO,getClientRects:FO,getDimensions:HO,getScale:xi,isElement:yn,isRTL:KO};function NC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function QO(t,e){let r=null,n;const s=Kn(t);function a(){var i;clearTimeout(n),(i=r)==null||i.disconnect(),r=null}function o(i,c){i===void 0&&(i=!1),c===void 0&&(c=1),a();const u=t.getBoundingClientRect(),{left:d,top:f,width:h,height:m}=u;if(i||e(),!h||!m)return;const y=$u(f),p=$u(s.clientWidth-(d+h)),v=$u(s.clientHeight-(f+m)),w=$u(d),b={rootMargin:-y+"px "+-p+"px "+-v+"px "+-w+"px",threshold:jr(0,Aa(1,c))||1};let _=!0;function C(E){const N=E[0].intersectionRatio;if(N!==c){if(!_)return o();N?o(!1,N):n=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!NC(u,t.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(C,{...b,root:s.ownerDocument})}catch{r=new IntersectionObserver(C,b)}r.observe(t)}return o(!0),a}function JO(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:i=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=ay(t),d=s||a?[...u?Rc(u):[],...Rc(e)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",r,{passive:!0}),a&&w.addEventListener("resize",r)});const f=u&&i?QO(u,r):null;let h=-1,m=null;o&&(m=new ResizeObserver(w=>{let[x]=w;x&&x.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(e)})),r()}),u&&!c&&m.observe(u),m.observe(e));let y,p=c?bo(t):null;c&&v();function v(){const w=bo(t);p&&!NC(p,w)&&r(),p=w,y=requestAnimationFrame(v)}return r(),()=>{var w;d.forEach(x=>{s&&x.removeEventListener("scroll",r),a&&x.removeEventListener("resize",r)}),f==null||f(),(w=m)==null||w.disconnect(),m=null,c&&cancelAnimationFrame(y)}}const XO=TO,ZO=PO,e4=AO,t4=IO,r4=jO,vw=NO,n4=RO,s4=(t,e,r)=>{const n=new Map,s={platform:YO,...r},a={...s.platform,_c:n};return EO(t,e,{...s,platform:a})};var a4=typeof document<"u",o4=function(){},pd=a4?g.useLayoutEffect:o4;function af(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!af(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const a=s[n];if(!(a==="_owner"&&t.$$typeof)&&!af(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function AC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function yw(t,e){const r=AC(t);return Math.round(e*r)/r}function ym(t){const e=g.useRef(t);return pd(()=>{e.current=t}),e}function i4(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:o}={},transform:i=!0,whileElementsMounted:c,open:u}=t,[d,f]=g.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[h,m]=g.useState(n);af(h,n)||m(n);const[y,p]=g.useState(null),[v,w]=g.useState(null),x=g.useCallback(k=>{k!==E.current&&(E.current=k,p(k))},[]),b=g.useCallback(k=>{k!==N.current&&(N.current=k,w(k))},[]),_=a||y,C=o||v,E=g.useRef(null),N=g.useRef(null),A=g.useRef(d),j=c!=null,O=ym(c),F=ym(s),P=ym(u),V=g.useCallback(()=>{if(!E.current||!N.current)return;const k={placement:e,strategy:r,middleware:h};F.current&&(k.platform=F.current),s4(E.current,N.current,k).then($=>{const Y={...$,isPositioned:P.current!==!1};R.current&&!af(A.current,Y)&&(A.current=Y,To.flushSync(()=>{f(Y)}))})},[h,e,r,F,P]);pd(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(k=>({...k,isPositioned:!1})))},[u]);const R=g.useRef(!1);pd(()=>(R.current=!0,()=>{R.current=!1}),[]),pd(()=>{if(_&&(E.current=_),C&&(N.current=C),_&&C){if(O.current)return O.current(_,C,V);V()}},[_,C,V,O,j]);const H=g.useMemo(()=>({reference:E,floating:N,setReference:x,setFloating:b}),[x,b]),W=g.useMemo(()=>({reference:_,floating:C}),[_,C]),I=g.useMemo(()=>{const k={position:r,left:0,top:0};if(!W.floating)return k;const $=yw(W.floating,d.x),Y=yw(W.floating,d.y);return i?{...k,transform:"translate("+$+"px, "+Y+"px)",...AC(W.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:$,top:Y}},[r,i,W.floating,d.x,d.y]);return g.useMemo(()=>({...d,update:V,refs:H,elements:W,floatingStyles:I}),[d,V,H,W,I])}const l4=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?vw({element:n.current,padding:s}).fn(r):{}:n?vw({element:n,padding:s}).fn(r):{}}}},c4=(t,e)=>({...XO(t),options:[t,e]}),u4=(t,e)=>({...ZO(t),options:[t,e]}),d4=(t,e)=>({...n4(t),options:[t,e]}),f4=(t,e)=>({...e4(t),options:[t,e]}),h4=(t,e)=>({...t4(t),options:[t,e]}),m4=(t,e)=>({...r4(t),options:[t,e]}),p4=(t,e)=>({...l4(t),options:[t,e]});var g4="Arrow",jC=g.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...a}=t;return l.jsx(ge.svg,{...a,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});jC.displayName=g4;var v4=jC;function iy(t){const[e,r]=g.useState(void 0);return pt(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,i;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,i=u.blockSize}else o=t.offsetWidth,i=t.offsetHeight;r({width:o,height:i})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var ly="Popper",[kC,sl]=br(ly),[y4,TC]=kC(ly),PC=t=>{const{__scopePopper:e,children:r}=t,[n,s]=g.useState(null);return l.jsx(y4,{scope:e,anchor:n,onAnchorChange:s,children:r})};PC.displayName=ly;var RC="PopperAnchor",IC=g.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,a=TC(RC,r),o=g.useRef(null),i=Le(e,o);return g.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:l.jsx(ge.div,{...s,ref:i})});IC.displayName=RC;var cy="PopperContent",[x4,w4]=kC(cy),OC=g.forwardRef((t,e)=>{var U,ae,we,ve,Oe,De;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:i=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:y,...p}=t,v=TC(cy,r),[w,x]=g.useState(null),b=Le(e,vt=>x(vt)),[_,C]=g.useState(null),E=iy(_),N=(E==null?void 0:E.width)??0,A=(E==null?void 0:E.height)??0,j=n+(a!=="center"?"-"+a:""),O=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},F=Array.isArray(u)?u:[u],P=F.length>0,V={padding:O,boundary:F.filter(_4),altBoundary:P},{refs:R,floatingStyles:H,placement:W,isPositioned:I,middlewareData:k}=i4({strategy:"fixed",placement:j,whileElementsMounted:(...vt)=>JO(...vt,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[c4({mainAxis:s+A,alignmentAxis:o}),c&&u4({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?d4():void 0,...V}),c&&f4({...V}),h4({...V,apply:({elements:vt,rects:zt,availableWidth:yt,availableHeight:Sr})=>{const{width:Sn,height:Oo}=zt.reference,Xn=vt.floating.style;Xn.setProperty("--radix-popper-available-width",`${yt}px`),Xn.setProperty("--radix-popper-available-height",`${Sr}px`),Xn.setProperty("--radix-popper-anchor-width",`${Sn}px`),Xn.setProperty("--radix-popper-anchor-height",`${Oo}px`)}}),_&&p4({element:_,padding:i}),S4({arrowWidth:N,arrowHeight:A}),h&&m4({strategy:"referenceHidden",...V})]}),[$,Y]=MC(W),he=_t(y);pt(()=>{I&&(he==null||he())},[I,he]);const ue=(U=k.arrow)==null?void 0:U.x,xe=(ae=k.arrow)==null?void 0:ae.y,D=((we=k.arrow)==null?void 0:we.centerOffset)!==0,[X,oe]=g.useState();return pt(()=>{w&&oe(window.getComputedStyle(w).zIndex)},[w]),l.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:I?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[(ve=k.transformOrigin)==null?void 0:ve.x,(Oe=k.transformOrigin)==null?void 0:Oe.y].join(" "),...((De=k.hide)==null?void 0:De.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:l.jsx(x4,{scope:r,placedSide:$,onArrowChange:C,arrowX:ue,arrowY:xe,shouldHideArrow:D,children:l.jsx(ge.div,{"data-side":$,"data-align":Y,...p,ref:b,style:{...p.style,animation:I?void 0:"none"}})})})});OC.displayName=cy;var LC="PopperArrow",b4={top:"bottom",right:"left",bottom:"top",left:"right"},$C=g.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,a=w4(LC,n),o=b4[a.placedSide];return l.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:l.jsx(v4,{...s,ref:r,style:{...s.style,display:"block"}})})});$C.displayName=LC;function _4(t){return t!==null}var S4=t=>({name:"transformOrigin",options:t,fn(e){var v,w,x;const{placement:r,rects:n,middlewareData:s}=e,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,i=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=MC(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(((w=s.arrow)==null?void 0:w.x)??0)+i/2,m=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let y="",p="";return u==="bottom"?(y=o?f:`${h}px`,p=`${-c}px`):u==="top"?(y=o?f:`${h}px`,p=`${n.floating.height+c}px`):u==="right"?(y=`${-c}px`,p=o?f:`${m}px`):u==="left"&&(y=`${n.floating.width+c}px`,p=o?f:`${m}px`),{data:{x:y,y:p}}}});function MC(t){const[e,r="center"]=t.split("-");return[e,r]}var DC=PC,th=IC,uy=OC,dy=$C,C4="Portal",Qc=g.forwardRef((t,e)=>{var i;const{container:r,...n}=t,[s,a]=g.useState(!1);pt(()=>a(!0),[]);const o=r||s&&((i=globalThis==null?void 0:globalThis.document)==null?void 0:i.body);return o?QS.createPortal(l.jsx(ge.div,{...n,ref:e}),o):null});Qc.displayName=C4;function E4(t,e){return g.useReducer((r,n)=>e[r][n]??r,t)}var _r=t=>{const{present:e,children:r}=t,n=N4(e),s=typeof r=="function"?r({present:n.isPresent}):g.Children.only(r),a=Le(n.ref,A4(s));return typeof r=="function"||n.isPresent?g.cloneElement(s,{ref:a}):null};_r.displayName="Presence";function N4(t){const[e,r]=g.useState(),n=g.useRef(null),s=g.useRef(t),a=g.useRef("none"),o=t?"mounted":"unmounted",[i,c]=E4(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const u=Mu(n.current);a.current=i==="mounted"?u:"none"},[i]),pt(()=>{const u=n.current,d=s.current;if(d!==t){const h=a.current,m=Mu(u);t?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),pt(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=m=>{const p=Mu(n.current).includes(m.animationName);if(m.target===e&&p&&(c("ANIMATION_END"),!s.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},h=m=>{m.target===e&&(a.current=Mu(n.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:g.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Mu(t){return(t==null?void 0:t.animationName)||"none"}function A4(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var j4=iv[" useInsertionEffect ".trim().toString()]||pt;function Ns({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[s,a,o]=k4({defaultProp:e,onChange:r}),i=t!==void 0,c=i?t:s;{const d=g.useRef(t!==void 0);g.useEffect(()=>{const f=d.current;f!==i&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=i},[i,n])}const u=g.useCallback(d=>{var f;if(i){const h=T4(d)?d(t):d;h!==t&&((f=o.current)==null||f.call(o,h))}else a(d)},[i,t,a,o]);return[c,u]}function k4({defaultProp:t,onChange:e}){const[r,n]=g.useState(t),s=g.useRef(r),a=g.useRef(e);return j4(()=>{a.current=e},[e]),g.useEffect(()=>{var o;s.current!==r&&((o=a.current)==null||o.call(a,r),s.current=r)},[r,s]),[r,n,a]}function T4(t){return typeof t=="function"}var FC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),P4="VisuallyHidden",rh=g.forwardRef((t,e)=>l.jsx(ge.span,{...t,ref:e,style:{...FC,...t.style}}));rh.displayName=P4;var R4=rh,[nh,UB]=br("Tooltip",[sl]),fy=sl(),UC="TooltipProvider",I4=700,xw="tooltip.open",[O4,VC]=nh(UC),zC=t=>{const{__scopeTooltip:e,delayDuration:r=I4,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:a}=t,o=g.useRef(!0),i=g.useRef(!1),c=g.useRef(0);return g.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),l.jsx(O4,{scope:e,isOpenDelayedRef:o,delayDuration:r,onOpen:g.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:i,onPointerInTransitChange:g.useCallback(u=>{i.current=u},[]),disableHoverableContent:s,children:a})};zC.displayName=UC;var BC="Tooltip",[VB,sh]=nh(BC),og="TooltipTrigger",L4=g.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=sh(og,r),a=VC(og,r),o=fy(r),i=g.useRef(null),c=Le(e,i,s.onTriggerChange),u=g.useRef(!1),d=g.useRef(!1),f=g.useCallback(()=>u.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),l.jsx(th,{asChild:!0,...o,children:l.jsx(ge.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:ce(t.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:ce(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:ce(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ce(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:ce(t.onBlur,s.onClose),onClick:ce(t.onClick,s.onClose)})})});L4.displayName=og;var $4="TooltipPortal",[zB,M4]=nh($4,{forceMount:void 0}),Vi="TooltipContent",WC=g.forwardRef((t,e)=>{const r=M4(Vi,t.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...a}=t,o=sh(Vi,t.__scopeTooltip);return l.jsx(_r,{present:n||o.open,children:o.disableHoverableContent?l.jsx(HC,{side:s,...a,ref:e}):l.jsx(D4,{side:s,...a,ref:e})})}),D4=g.forwardRef((t,e)=>{const r=sh(Vi,t.__scopeTooltip),n=VC(Vi,t.__scopeTooltip),s=g.useRef(null),a=Le(e,s),[o,i]=g.useState(null),{trigger:c,onClose:u}=r,d=s.current,{onPointerInTransitChange:f}=n,h=g.useCallback(()=>{i(null),f(!1)},[f]),m=g.useCallback((y,p)=>{const v=y.currentTarget,w={x:y.clientX,y:y.clientY},x=B4(w,v.getBoundingClientRect()),b=W4(w,x),_=H4(p.getBoundingClientRect()),C=q4([...b,..._]);i(C),f(!0)},[f]);return g.useEffect(()=>()=>h(),[h]),g.useEffect(()=>{if(c&&d){const y=v=>m(v,d),p=v=>m(v,c);return c.addEventListener("pointerleave",y),d.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",y),d.removeEventListener("pointerleave",p)}}},[c,d,m,h]),g.useEffect(()=>{if(o){const y=p=>{const v=p.target,w={x:p.clientX,y:p.clientY},x=(c==null?void 0:c.contains(v))||(d==null?void 0:d.contains(v)),b=!G4(w,o);x?h():b&&(h(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,d,o,u,h]),l.jsx(HC,{...t,ref:a})}),[F4,U4]=nh(BC,{isInside:!1}),V4=hC("TooltipContent"),HC=g.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...i}=t,c=sh(Vi,r),u=fy(r),{onClose:d}=c;return g.useEffect(()=>(document.addEventListener(xw,d),()=>document.removeEventListener(xw,d)),[d]),g.useEffect(()=>{if(c.trigger){const f=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),l.jsx(tl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:l.jsxs(uy,{"data-state":c.stateAttribute,...u,...i,ref:e,style:{...i.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(V4,{children:n}),l.jsx(F4,{scope:r,isInside:!0,children:l.jsx(R4,{id:c.contentId,role:"tooltip",children:s||n})})]})})});WC.displayName=Vi;var GC="TooltipArrow",z4=g.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=fy(r);return U4(GC,r).isInside?null:l.jsx(dy,{...s,...n,ref:e})});z4.displayName=GC;function B4(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(r,n,s,a)){case a:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function W4(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function H4(t){const{top:e,right:r,bottom:n,left:s}=t;return[{x:s,y:e},{x:r,y:e},{x:r,y:n},{x:s,y:n}]}function G4(t,e){const{x:r,y:n}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const i=e[a],c=e[o],u=i.x,d=i.y,f=c.x,h=c.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(s=!s)}return s}function q4(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),K4(e)}function K4(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;r.length>=2;){const a=r[r.length-1],o=r[r.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var Y4=zC,qC=WC;function KC(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=KC(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function YC(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=KC(t))&&(n&&(n+=" "),n+=e);return n}const hy="-",Q4=t=>{const e=X4(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const i=o.split(hy);return i[0]===""&&i.length!==1&&i.shift(),QC(i,e)||J4(o)},getConflictingClassGroupIds:(o,i)=>{const c=r[o]||[];return i&&n[o]?[...c,...n[o]]:c}}},QC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?QC(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(hy);return(o=e.validators.find(({validator:i})=>i(a)))==null?void 0:o.classGroupId},ww=/^\[(.+)\]$/,J4=t=>{if(ww.test(t)){const e=ww.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},X4=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return e3(Object.entries(t.classGroups),r).forEach(([a,o])=>{ig(o,n,a,e)}),n},ig=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:bw(e,s);a.classGroupId=r;return}if(typeof s=="function"){if(Z4(s)){ig(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([a,o])=>{ig(o,bw(e,a),r,n)})})},bw=(t,e)=>{let r=t;return e.split(hy).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},Z4=t=>t.isThemeGetter,e3=(t,e)=>e?t.map(([r,n])=>{const s=n.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,i])=>[e+o,i])):a);return[r,s]}):t,t3=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(a,o)=>{r.set(a,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return s(a,o),o},set(a,o){r.has(a)?r.set(a,o):s(a,o)}}},JC="!",r3=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],a=e.length,o=i=>{const c=[];let u=0,d=0,f;for(let v=0;v<i.length;v++){let w=i[v];if(u===0){if(w===s&&(n||i.slice(v,v+a)===e)){c.push(i.slice(d,v)),d=v+a;continue}if(w==="/"){f=v;continue}}w==="["?u++:w==="]"&&u--}const h=c.length===0?i:i.substring(d),m=h.startsWith(JC),y=m?h.substring(1):h,p=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:p}};return r?i=>r({className:i,parseClassName:o}):o},n3=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},s3=t=>({cache:t3(t.cacheSize),parseClassName:r3(t),...Q4(t)}),a3=/\s+/,o3=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,a=[],o=t.trim().split(a3);let i="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=r(u);let y=!!m,p=n(y?h.substring(0,m):h);if(!p){if(!y){i=u+(i.length>0?" "+i:i);continue}if(p=n(h),!p){i=u+(i.length>0?" "+i:i);continue}y=!1}const v=n3(d).join(":"),w=f?v+JC:v,x=w+p;if(a.includes(x))continue;a.push(x);const b=s(p,y);for(let _=0;_<b.length;++_){const C=b[_];a.push(w+C)}i=u+(i.length>0?" "+i:i)}return i};function i3(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=XC(e))&&(n&&(n+=" "),n+=r);return n}const XC=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=XC(t[n]))&&(r&&(r+=" "),r+=e);return r};function l3(t,...e){let r,n,s,a=o;function o(c){const u=e.reduce((d,f)=>f(d),t());return r=s3(u),n=r.cache.get,s=r.cache.set,a=i,i(c)}function i(c){const u=n(c);if(u)return u;const d=o3(c,r);return s(c,d),d}return function(){return a(i3.apply(null,arguments))}}const nt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},ZC=/^\[(?:([a-z-]+):)?(.+)\]$/i,c3=/^\d+\/\d+$/,u3=new Set(["px","full","screen"]),d3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,f3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,h3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,m3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,p3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ts=t=>wi(t)||u3.has(t)||c3.test(t),Us=t=>al(t,"length",S3),wi=t=>!!t&&!Number.isNaN(Number(t)),xm=t=>al(t,"number",wi),bl=t=>!!t&&Number.isInteger(Number(t)),g3=t=>t.endsWith("%")&&wi(t.slice(0,-1)),Pe=t=>ZC.test(t),Vs=t=>d3.test(t),v3=new Set(["length","size","percentage"]),y3=t=>al(t,v3,eE),x3=t=>al(t,"position",eE),w3=new Set(["image","url"]),b3=t=>al(t,w3,E3),_3=t=>al(t,"",C3),_l=()=>!0,al=(t,e,r)=>{const n=ZC.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},S3=t=>f3.test(t)&&!h3.test(t),eE=()=>!1,C3=t=>m3.test(t),E3=t=>p3.test(t),N3=()=>{const t=nt("colors"),e=nt("spacing"),r=nt("blur"),n=nt("brightness"),s=nt("borderColor"),a=nt("borderRadius"),o=nt("borderSpacing"),i=nt("borderWidth"),c=nt("contrast"),u=nt("grayscale"),d=nt("hueRotate"),f=nt("invert"),h=nt("gap"),m=nt("gradientColorStops"),y=nt("gradientColorStopPositions"),p=nt("inset"),v=nt("margin"),w=nt("opacity"),x=nt("padding"),b=nt("saturate"),_=nt("scale"),C=nt("sepia"),E=nt("skew"),N=nt("space"),A=nt("translate"),j=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",Pe,e],P=()=>[Pe,e],V=()=>["",ts,Us],R=()=>["auto",wi,Pe],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],I=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],k=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Pe],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],he=()=>[wi,Pe];return{cacheSize:500,separator:":",theme:{colors:[_l],spacing:[ts,Us],blur:["none","",Vs,Pe],brightness:he(),borderColor:[t],borderRadius:["none","","full",Vs,Pe],borderSpacing:P(),borderWidth:V(),contrast:he(),grayscale:$(),hueRotate:he(),invert:$(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[g3,Us],inset:F(),margin:F(),opacity:he(),padding:P(),saturate:he(),scale:he(),sepia:$(),skew:he(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Pe]}],container:["container"],columns:[{columns:[Vs]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),Pe]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",bl,Pe]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Pe]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",bl,Pe]}],"grid-cols":[{"grid-cols":[_l]}],"col-start-end":[{col:["auto",{span:["full",bl,Pe]},Pe]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[_l]}],"row-start-end":[{row:["auto",{span:[bl,Pe]},Pe]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Pe]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...k()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...k(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...k(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Pe,e]}],"min-w":[{"min-w":[Pe,e,"min","max","fit"]}],"max-w":[{"max-w":[Pe,e,"none","full","min","max","fit","prose",{screen:[Vs]},Vs]}],h:[{h:[Pe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Pe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Pe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Pe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Vs,Us]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",xm]}],"font-family":[{font:[_l]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Pe]}],"line-clamp":[{"line-clamp":["none",wi,xm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ts,Pe]}],"list-image":[{"list-image":["none",Pe]}],"list-style-type":[{list:["none","disc","decimal",Pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ts,Us]}],"underline-offset":[{"underline-offset":["auto",ts,Pe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),x3]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",y3]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},b3]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:W()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[ts,Pe]}],"outline-w":[{outline:[ts,Us]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[ts,Us]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Vs,_3]}],"shadow-color":[{shadow:[_l]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...I(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":I()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Vs,Pe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Pe]}],duration:[{duration:he()}],ease:[{ease:["linear","in","out","in-out",Pe]}],delay:[{delay:he()}],animate:[{animate:["none","spin","ping","pulse","bounce",Pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[bl,Pe]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Pe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ts,Us,xm]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},A3=l3(N3);function S(...t){return A3(YC(t))}const j3=Y4,k3=g.forwardRef(({className:t,sideOffset:e=4,...r},n)=>l.jsx(qC,{ref:n,sideOffset:e,className:S("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));k3.displayName=qC.displayName;const T3=1,P3=1e6;let wm=0;function R3(){return wm=(wm+1)%Number.MAX_SAFE_INTEGER,wm.toString()}const bm=new Map,_w=t=>{if(bm.has(t))return;const e=setTimeout(()=>{bm.delete(t),ec({type:"REMOVE_TOAST",toastId:t})},P3);bm.set(t,e)},I3=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,T3)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?_w(r):t.toasts.forEach(n=>{_w(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},gd=[];let vd={toasts:[]};function ec(t){vd=I3(vd,t),gd.forEach(e=>{e(vd)})}function ta({...t}){const e=R3(),r=s=>ec({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>ec({type:"DISMISS_TOAST",toastId:e});return ec({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:r}}function Jt(){const[t,e]=g.useState(vd);return g.useEffect(()=>(gd.push(e),()=>{const r=gd.indexOf(e);r>-1&&gd.splice(r,1)}),[t]),{...t,toast:ta,dismiss:r=>ec({type:"DISMISS_TOAST",toastId:r})}}function my(t){const e=t+"CollectionProvider",[r,n]=br(e),[s,a]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:w}=p,x=G.useRef(null),b=G.useRef(new Map).current;return l.jsx(s,{scope:v,itemMap:b,collectionRef:x,children:w})};o.displayName=e;const i=t+"CollectionSlot",c=wo(i),u=G.forwardRef((p,v)=>{const{scope:w,children:x}=p,b=a(i,w),_=Le(v,b.collectionRef);return l.jsx(c,{ref:_,children:x})});u.displayName=i;const d=t+"CollectionItemSlot",f="data-radix-collection-item",h=wo(d),m=G.forwardRef((p,v)=>{const{scope:w,children:x,...b}=p,_=G.useRef(null),C=Le(v,_),E=a(d,w);return G.useEffect(()=>(E.itemMap.set(_,{ref:_,...b}),()=>void E.itemMap.delete(_))),l.jsx(h,{[f]:"",ref:C,children:x})});m.displayName=d;function y(p){const v=a(t+"CollectionConsumer",p);return G.useCallback(()=>{const x=v.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((E,N)=>b.indexOf(E.ref.current)-b.indexOf(N.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},y,n]}var py="ToastProvider",[gy,O3,L3]=my("Toast"),[tE,BB]=br("Toast",[L3]),[$3,ah]=tE(py),rE=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:o}=t,[i,c]=g.useState(null),[u,d]=g.useState(0),f=g.useRef(!1),h=g.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${py}\`. Expected non-empty \`string\`.`),l.jsx(gy.Provider,{scope:e,children:l.jsx($3,{scope:e,label:r,duration:n,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:i,onViewportChange:c,onToastAdd:g.useCallback(()=>d(m=>m+1),[]),onToastRemove:g.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};rE.displayName=py;var nE="ToastViewport",M3=["F8"],lg="toast.viewportPause",cg="toast.viewportResume",sE=g.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=M3,label:s="Notifications ({hotkey})",...a}=t,o=ah(nE,r),i=O3(r),c=g.useRef(null),u=g.useRef(null),d=g.useRef(null),f=g.useRef(null),h=Le(e,f,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;g.useEffect(()=>{const v=w=>{var b;n.length!==0&&n.every(_=>w[_]||w.code===_)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[n]),g.useEffect(()=>{const v=c.current,w=f.current;if(y&&v&&w){const x=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(lg);w.dispatchEvent(E),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(cg);w.dispatchEvent(E),o.isClosePausedRef.current=!1}},_=E=>{!v.contains(E.relatedTarget)&&b()},C=()=>{v.contains(document.activeElement)||b()};return v.addEventListener("focusin",x),v.addEventListener("focusout",_),v.addEventListener("pointermove",x),v.addEventListener("pointerleave",C),window.addEventListener("blur",x),window.addEventListener("focus",b),()=>{v.removeEventListener("focusin",x),v.removeEventListener("focusout",_),v.removeEventListener("pointermove",x),v.removeEventListener("pointerleave",C),window.removeEventListener("blur",x),window.removeEventListener("focus",b)}}},[y,o.isClosePausedRef]);const p=g.useCallback(({tabbingDirection:v})=>{const x=i().map(b=>{const _=b.ref.current,C=[_,...Q3(_)];return v==="forwards"?C:C.reverse()});return(v==="forwards"?x.reverse():x).flat()},[i]);return g.useEffect(()=>{const v=f.current;if(v){const w=x=>{var C,E,N;const b=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!b){const A=document.activeElement,j=x.shiftKey;if(x.target===v&&j){(C=u.current)==null||C.focus();return}const P=p({tabbingDirection:j?"backwards":"forwards"}),V=P.findIndex(R=>R===A);_m(P.slice(V+1))?x.preventDefault():j?(E=u.current)==null||E.focus():(N=d.current)==null||N.focus()}};return v.addEventListener("keydown",w),()=>v.removeEventListener("keydown",w)}},[i,p]),l.jsxs(mO,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&l.jsx(ug,{ref:u,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"forwards"});_m(v)}}),l.jsx(gy.Slot,{scope:r,children:l.jsx(ge.ol,{tabIndex:-1,...a,ref:h})}),y&&l.jsx(ug,{ref:d,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"backwards"});_m(v)}})]})});sE.displayName=nE;var aE="ToastFocusProxy",ug=g.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=t,a=ah(aE,r);return l.jsx(rh,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const i=o.relatedTarget;!((u=a.viewport)!=null&&u.contains(i))&&n()}})});ug.displayName=aE;var Jc="Toast",D3="toast.swipeStart",F3="toast.swipeMove",U3="toast.swipeCancel",V3="toast.swipeEnd",oE=g.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:a,...o}=t,[i,c]=Ns({prop:n,defaultProp:s??!0,onChange:a,caller:Jc});return l.jsx(_r,{present:r||i,children:l.jsx(W3,{open:i,...o,ref:e,onClose:()=>c(!1),onPause:_t(t.onPause),onResume:_t(t.onResume),onSwipeStart:ce(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ce(t.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:ce(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ce(t.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});oE.displayName=Jc;var[z3,B3]=tE(Jc,{onClose(){}}),W3=g.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:a,onClose:o,onEscapeKeyDown:i,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...y}=t,p=ah(Jc,r),[v,w]=g.useState(null),x=Le(e,R=>w(R)),b=g.useRef(null),_=g.useRef(null),C=s||p.duration,E=g.useRef(0),N=g.useRef(C),A=g.useRef(0),{onToastAdd:j,onToastRemove:O}=p,F=_t(()=>{var H;(v==null?void 0:v.contains(document.activeElement))&&((H=p.viewport)==null||H.focus()),o()}),P=g.useCallback(R=>{!R||R===1/0||(window.clearTimeout(A.current),E.current=new Date().getTime(),A.current=window.setTimeout(F,R))},[F]);g.useEffect(()=>{const R=p.viewport;if(R){const H=()=>{P(N.current),u==null||u()},W=()=>{const I=new Date().getTime()-E.current;N.current=N.current-I,window.clearTimeout(A.current),c==null||c()};return R.addEventListener(lg,W),R.addEventListener(cg,H),()=>{R.removeEventListener(lg,W),R.removeEventListener(cg,H)}}},[p.viewport,C,c,u,P]),g.useEffect(()=>{a&&!p.isClosePausedRef.current&&P(C)},[a,C,p.isClosePausedRef,P]),g.useEffect(()=>(j(),()=>O()),[j,O]);const V=g.useMemo(()=>v?hE(v):null,[v]);return p.viewport?l.jsxs(l.Fragment,{children:[V&&l.jsx(H3,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:V}),l.jsx(z3,{scope:r,onClose:F,children:To.createPortal(l.jsx(gy.ItemSlot,{scope:r,children:l.jsx(hO,{asChild:!0,onEscapeKeyDown:ce(i,()=>{p.isFocusedToastEscapeKeyDownRef.current||F(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(ge.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":p.swipeDirection,...y,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ce(t.onKeyDown,R=>{R.key==="Escape"&&(i==null||i(R.nativeEvent),R.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:ce(t.onPointerDown,R=>{R.button===0&&(b.current={x:R.clientX,y:R.clientY})}),onPointerMove:ce(t.onPointerMove,R=>{if(!b.current)return;const H=R.clientX-b.current.x,W=R.clientY-b.current.y,I=!!_.current,k=["left","right"].includes(p.swipeDirection),$=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,Y=k?$(0,H):0,he=k?0:$(0,W),ue=R.pointerType==="touch"?10:2,xe={x:Y,y:he},D={originalEvent:R,delta:xe};I?(_.current=xe,Du(F3,f,D,{discrete:!1})):Sw(xe,p.swipeDirection,ue)?(_.current=xe,Du(D3,d,D,{discrete:!1}),R.target.setPointerCapture(R.pointerId)):(Math.abs(H)>ue||Math.abs(W)>ue)&&(b.current=null)}),onPointerUp:ce(t.onPointerUp,R=>{const H=_.current,W=R.target;if(W.hasPointerCapture(R.pointerId)&&W.releasePointerCapture(R.pointerId),_.current=null,b.current=null,H){const I=R.currentTarget,k={originalEvent:R,delta:H};Sw(H,p.swipeDirection,p.swipeThreshold)?Du(V3,m,k,{discrete:!0}):Du(U3,h,k,{discrete:!0}),I.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),H3=t=>{const{__scopeToast:e,children:r,...n}=t,s=ah(Jc,e),[a,o]=g.useState(!1),[i,c]=g.useState(!1);return K3(()=>o(!0)),g.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),i?null:l.jsx(Qc,{asChild:!0,children:l.jsx(rh,{...n,children:a&&l.jsxs(l.Fragment,{children:[s.label," ",r]})})})},G3="ToastTitle",iE=g.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return l.jsx(ge.div,{...n,ref:e})});iE.displayName=G3;var q3="ToastDescription",lE=g.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return l.jsx(ge.div,{...n,ref:e})});lE.displayName=q3;var cE="ToastAction",uE=g.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?l.jsx(fE,{altText:r,asChild:!0,children:l.jsx(vy,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${cE}\`. Expected non-empty \`string\`.`),null)});uE.displayName=cE;var dE="ToastClose",vy=g.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,s=B3(dE,r);return l.jsx(fE,{asChild:!0,children:l.jsx(ge.button,{type:"button",...n,ref:e,onClick:ce(t.onClick,s.onClose)})})});vy.displayName=dE;var fE=g.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...s}=t;return l.jsx(ge.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function hE(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),Y3(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",a=n.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...hE(n))}}),e}function Du(t,e,r,{discrete:n}){const s=r.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?mC(s,a):s.dispatchEvent(a)}var Sw=(t,e,r=0)=>{const n=Math.abs(t.x),s=Math.abs(t.y),a=n>s;return e==="left"||e==="right"?a&&n>r:!a&&s>r};function K3(t=()=>{}){const e=_t(t);pt(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function Y3(t){return t.nodeType===t.ELEMENT_NODE}function Q3(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function _m(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var J3=rE,mE=sE,pE=oE,gE=iE,vE=lE,yE=uE,xE=vy;const Cw=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Ew=YC,oh=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return Ew(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:a}=e,o=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],f=a==null?void 0:a[u];if(d===null)return null;const h=Cw(d)||Cw(f);return s[u][h]}),i=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(y=>{let[p,v]=y;return Array.isArray(v)?v.includes({...a,...i}[p]):{...a,...i}[p]===v})?[...u,f,h]:u},[]);return Ew(t,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wE=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:o,...i},c)=>g.createElement("svg",{ref:c,...Z3,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:wE("lucide",s),...i},[...o.map(([u,d])=>g.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=(t,e)=>{const r=g.forwardRef(({className:n,...s},a)=>g.createElement(eL,{ref:a,iconNode:e,className:wE(`lucide-${X3(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=re("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=re("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=re("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=re("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=re("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=re("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=re("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=re("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=re("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=re("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=re("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=re("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=re("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=re("FileArchive",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=re("FileOutput",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4 7V4a2 2 0 0 1 2-2 2 2 0 0 0-2 2",key:"1vk7w2"}],["path",{d:"M4.063 20.999a2 2 0 0 0 2 1L18 22a2 2 0 0 0 2-2V7l-5-5H6",key:"1jink5"}],["path",{d:"m5 11-3 3",key:"1dgrs4"}],["path",{d:"m5 17-3-3h10",key:"1mvvaf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=re("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=re("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=re("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=re("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=re("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=re("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=re("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=re("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=re("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=re("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=re("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=re("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=re("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=re("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=re("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=re("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=re("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=re("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=re("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=re("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=re("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=re("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=re("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=re("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=re("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=re("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=re("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=re("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=re("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=re("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=re("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=re("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=re("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=re("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=re("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=re("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=re("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),TL=J3,ME=g.forwardRef(({className:t,...e},r)=>l.jsx(mE,{ref:r,className:S("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));ME.displayName=mE.displayName;const PL=oh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),DE=g.forwardRef(({className:t,variant:e,...r},n)=>l.jsx(pE,{ref:n,className:S(PL({variant:e}),t),...r}));DE.displayName=pE.displayName;const RL=g.forwardRef(({className:t,...e},r)=>l.jsx(yE,{ref:r,className:S("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));RL.displayName=yE.displayName;const FE=g.forwardRef(({className:t,...e},r)=>l.jsx(xE,{ref:r,className:S("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:l.jsx(Dn,{className:"h-4 w-4"})}));FE.displayName=xE.displayName;const UE=g.forwardRef(({className:t,...e},r)=>l.jsx(gE,{ref:r,className:S("text-sm font-semibold",t),...e}));UE.displayName=gE.displayName;const VE=g.forwardRef(({className:t,...e},r)=>l.jsx(vE,{ref:r,className:S("text-sm opacity-90",t),...e}));VE.displayName=vE.displayName;function IL(){const{toasts:t}=Jt();return l.jsxs(TL,{children:[t.map(function({id:e,title:r,description:n,action:s,...a}){return l.jsxs(DE,{...a,children:[l.jsxs("div",{className:"grid gap-1",children:[r&&l.jsx(UE,{children:r}),n&&l.jsx(VE,{children:n})]}),s,l.jsx(FE,{})]},e)}),l.jsx(ME,{})]})}var Ow=["light","dark"],OL="(prefers-color-scheme: dark)",LL=g.createContext(void 0),$L={setTheme:t=>{},themes:[]},ML=()=>{var t;return(t=g.useContext(LL))!=null?t:$L};g.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:a,value:o,attrs:i,nonce:c})=>{let u=a==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${i.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=s?Ow.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(y,p=!1,v=!0)=>{let w=o?o[y]:y,x=p?y+"|| ''":`'${w}'`,b="";return s&&v&&!p&&Ow.includes(y)&&(b+=`d.style.colorScheme = '${y}';`),r==="class"?p||w?b+=`c.add(${x})`:b+="null":w&&(b+=`d[s](n,${x})`),b},m=t?`!function(){${d}${h(t)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${OL}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${u?"":"else{"+h(a,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(a,!1,!1)};}${f}}catch(t){}}();`;return g.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var DL=t=>{switch(t){case"success":return VL;case"info":return BL;case"warning":return zL;case"error":return WL;default:return null}},FL=Array(12).fill(0),UL=({visible:t,className:e})=>G.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},G.createElement("div",{className:"sonner-spinner"},FL.map((r,n)=>G.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),VL=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),zL=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),BL=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),WL=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),HL=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},G.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),G.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),GL=()=>{let[t,e]=G.useState(document.hidden);return G.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},hg=1,qL=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:r,...n}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:hg++,a=this.toasts.find(i=>i.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(i=>i.id===s?(this.publish({...i,...t,id:s,title:r}),{...i,...t,id:s,dismissible:o,title:r}):i):this.addToast({title:r,...n,dismissible:o,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(r=>r({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let r;e.loading!==void 0&&(r=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=t instanceof Promise?t:t(),s=r!==void 0,a,o=n.then(async c=>{if(a=["resolve",c],G.isValidElement(c))s=!1,this.create({id:r,type:"default",message:c});else if(YL(c)&&!c.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:r,type:"error",message:u,description:d})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(c):e.success,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async c=>{if(a=["reject",c],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(c):e.error,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(r),r=void 0),(c=e.finally)==null||c.call(e)}),i=()=>new Promise((c,u)=>o.then(()=>a[0]==="reject"?u(a[1]):c(a[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:i}:Object.assign(r,{unwrap:i})},this.custom=(t,e)=>{let r=(e==null?void 0:e.id)||hg++;return this.create({jsx:t(r),id:r,...e}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},dr=new qL,KL=(t,e)=>{let r=(e==null?void 0:e.id)||hg++;return dr.addToast({title:t,...e,id:r}),r},YL=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",QL=KL,JL=()=>dr.toasts,XL=()=>dr.getActiveToasts(),Mo=Object.assign(QL,{success:dr.success,info:dr.info,warning:dr.warning,error:dr.error,custom:dr.custom,message:dr.message,promise:dr.promise,dismiss:dr.dismiss,loading:dr.loading},{getHistory:JL,getToasts:XL});function ZL(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}ZL(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Uu(t){return t.label!==void 0}var e$=3,t$="32px",r$="16px",Lw=4e3,n$=356,s$=14,a$=20,o$=200;function Xr(...t){return t.filter(Boolean).join(" ")}function i$(t){let[e,r]=t.split("-"),n=[];return e&&n.push(e),r&&n.push(r),n}var l$=t=>{var e,r,n,s,a,o,i,c,u,d,f;let{invert:h,toast:m,unstyled:y,interacting:p,setHeights:v,visibleToasts:w,heights:x,index:b,toasts:_,expanded:C,removeToast:E,defaultRichColors:N,closeButton:A,style:j,cancelButtonStyle:O,actionButtonStyle:F,className:P="",descriptionClassName:V="",duration:R,position:H,gap:W,loadingIcon:I,expandByDefault:k,classNames:$,icons:Y,closeButtonAriaLabel:he="Close toast",pauseWhenPageIsHidden:ue}=t,[xe,D]=G.useState(null),[X,oe]=G.useState(null),[U,ae]=G.useState(!1),[we,ve]=G.useState(!1),[Oe,De]=G.useState(!1),[vt,zt]=G.useState(!1),[yt,Sr]=G.useState(!1),[Sn,Oo]=G.useState(0),[Xn,T]=G.useState(0),L=G.useRef(m.duration||R||Lw),z=G.useRef(null),ee=G.useRef(null),Z=b===0,J=b+1<=w,ie=m.type,Ve=m.dismissible!==!1,Je=m.className||"",lr=m.descriptionClassName||"",Zn=G.useMemo(()=>x.findIndex(je=>je.toastId===m.id)||0,[x,m.id]),Cn=G.useMemo(()=>{var je;return(je=m.closeButton)!=null?je:A},[m.closeButton,A]),mu=G.useMemo(()=>m.duration||R||Lw,[m.duration,R]),Va=G.useRef(0),En=G.useRef(0),pu=G.useRef(0),es=G.useRef(null),[Vh,gu]=H.split("-"),D0=G.useMemo(()=>x.reduce((je,Xe,ot)=>ot>=Zn?je:je+Xe.height,0),[x,Zn]),F0=GL(),$T=m.invert||h,zh=ie==="loading";En.current=G.useMemo(()=>Zn*W+D0,[Zn,D0]),G.useEffect(()=>{L.current=mu},[mu]),G.useEffect(()=>{ae(!0)},[]),G.useEffect(()=>{let je=ee.current;if(je){let Xe=je.getBoundingClientRect().height;return T(Xe),v(ot=>[{toastId:m.id,height:Xe,position:m.position},...ot]),()=>v(ot=>ot.filter(Kr=>Kr.toastId!==m.id))}},[v,m.id]),G.useLayoutEffect(()=>{if(!U)return;let je=ee.current,Xe=je.style.height;je.style.height="auto";let ot=je.getBoundingClientRect().height;je.style.height=Xe,T(ot),v(Kr=>Kr.find(Yr=>Yr.toastId===m.id)?Kr.map(Yr=>Yr.toastId===m.id?{...Yr,height:ot}:Yr):[{toastId:m.id,height:ot,position:m.position},...Kr])},[U,m.title,m.description,v,m.id]);let $s=G.useCallback(()=>{ve(!0),Oo(En.current),v(je=>je.filter(Xe=>Xe.toastId!==m.id)),setTimeout(()=>{E(m)},o$)},[m,E,v,En]);G.useEffect(()=>{if(m.promise&&ie==="loading"||m.duration===1/0||m.type==="loading")return;let je;return C||p||ue&&F0?(()=>{if(pu.current<Va.current){let Xe=new Date().getTime()-Va.current;L.current=L.current-Xe}pu.current=new Date().getTime()})():L.current!==1/0&&(Va.current=new Date().getTime(),je=setTimeout(()=>{var Xe;(Xe=m.onAutoClose)==null||Xe.call(m,m),$s()},L.current)),()=>clearTimeout(je)},[C,p,m,ie,ue,F0,$s]),G.useEffect(()=>{m.delete&&$s()},[$s,m.delete]);function MT(){var je,Xe,ot;return Y!=null&&Y.loading?G.createElement("div",{className:Xr($==null?void 0:$.loader,(je=m==null?void 0:m.classNames)==null?void 0:je.loader,"sonner-loader"),"data-visible":ie==="loading"},Y.loading):I?G.createElement("div",{className:Xr($==null?void 0:$.loader,(Xe=m==null?void 0:m.classNames)==null?void 0:Xe.loader,"sonner-loader"),"data-visible":ie==="loading"},I):G.createElement(UL,{className:Xr($==null?void 0:$.loader,(ot=m==null?void 0:m.classNames)==null?void 0:ot.loader),visible:ie==="loading"})}return G.createElement("li",{tabIndex:0,ref:ee,className:Xr(P,Je,$==null?void 0:$.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,$==null?void 0:$.default,$==null?void 0:$[ie],(r=m==null?void 0:m.classNames)==null?void 0:r[ie]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:N,"data-styled":!(m.jsx||m.unstyled||y),"data-mounted":U,"data-promise":!!m.promise,"data-swiped":yt,"data-removed":we,"data-visible":J,"data-y-position":Vh,"data-x-position":gu,"data-index":b,"data-front":Z,"data-swiping":Oe,"data-dismissible":Ve,"data-type":ie,"data-invert":$T,"data-swipe-out":vt,"data-swipe-direction":X,"data-expanded":!!(C||k&&U),style:{"--index":b,"--toasts-before":b,"--z-index":_.length-b,"--offset":`${we?Sn:En.current}px`,"--initial-height":k?"auto":`${Xn}px`,...j,...m.style},onDragEnd:()=>{De(!1),D(null),es.current=null},onPointerDown:je=>{zh||!Ve||(z.current=new Date,Oo(En.current),je.target.setPointerCapture(je.pointerId),je.target.tagName!=="BUTTON"&&(De(!0),es.current={x:je.clientX,y:je.clientY}))},onPointerUp:()=>{var je,Xe,ot,Kr;if(vt||!Ve)return;es.current=null;let Yr=Number(((je=ee.current)==null?void 0:je.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ms=Number(((Xe=ee.current)==null?void 0:Xe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),za=new Date().getTime()-((ot=z.current)==null?void 0:ot.getTime()),Qr=xe==="x"?Yr:Ms,Ds=Math.abs(Qr)/za;if(Math.abs(Qr)>=a$||Ds>.11){Oo(En.current),(Kr=m.onDismiss)==null||Kr.call(m,m),oe(xe==="x"?Yr>0?"right":"left":Ms>0?"down":"up"),$s(),zt(!0),Sr(!1);return}De(!1),D(null)},onPointerMove:je=>{var Xe,ot,Kr,Yr;if(!es.current||!Ve||((Xe=window.getSelection())==null?void 0:Xe.toString().length)>0)return;let Ms=je.clientY-es.current.y,za=je.clientX-es.current.x,Qr=(ot=t.swipeDirections)!=null?ot:i$(H);!xe&&(Math.abs(za)>1||Math.abs(Ms)>1)&&D(Math.abs(za)>Math.abs(Ms)?"x":"y");let Ds={x:0,y:0};xe==="y"?(Qr.includes("top")||Qr.includes("bottom"))&&(Qr.includes("top")&&Ms<0||Qr.includes("bottom")&&Ms>0)&&(Ds.y=Ms):xe==="x"&&(Qr.includes("left")||Qr.includes("right"))&&(Qr.includes("left")&&za<0||Qr.includes("right")&&za>0)&&(Ds.x=za),(Math.abs(Ds.x)>0||Math.abs(Ds.y)>0)&&Sr(!0),(Kr=ee.current)==null||Kr.style.setProperty("--swipe-amount-x",`${Ds.x}px`),(Yr=ee.current)==null||Yr.style.setProperty("--swipe-amount-y",`${Ds.y}px`)}},Cn&&!m.jsx?G.createElement("button",{"aria-label":he,"data-disabled":zh,"data-close-button":!0,onClick:zh||!Ve?()=>{}:()=>{var je;$s(),(je=m.onDismiss)==null||je.call(m,m)},className:Xr($==null?void 0:$.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(a=Y==null?void 0:Y.close)!=null?a:HL):null,m.jsx||g.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:G.createElement(G.Fragment,null,ie||m.icon||m.promise?G.createElement("div",{"data-icon":"",className:Xr($==null?void 0:$.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||MT():null,m.type!=="loading"?m.icon||(Y==null?void 0:Y[ie])||DL(ie):null):null,G.createElement("div",{"data-content":"",className:Xr($==null?void 0:$.content,(i=m==null?void 0:m.classNames)==null?void 0:i.content)},G.createElement("div",{"data-title":"",className:Xr($==null?void 0:$.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?G.createElement("div",{"data-description":"",className:Xr(V,lr,$==null?void 0:$.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),g.isValidElement(m.cancel)?m.cancel:m.cancel&&Uu(m.cancel)?G.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||O,onClick:je=>{var Xe,ot;Uu(m.cancel)&&Ve&&((ot=(Xe=m.cancel).onClick)==null||ot.call(Xe,je),$s())},className:Xr($==null?void 0:$.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,g.isValidElement(m.action)?m.action:m.action&&Uu(m.action)?G.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||F,onClick:je=>{var Xe,ot;Uu(m.action)&&((ot=(Xe=m.action).onClick)==null||ot.call(Xe,je),!je.defaultPrevented&&$s())},className:Xr($==null?void 0:$.actionButton,(f=m==null?void 0:m.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function $w(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function c$(t,e){let r={};return[t,e].forEach((n,s)=>{let a=s===1,o=a?"--mobile-offset":"--offset",i=a?r$:t$;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=i:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(i)}),r}var u$=g.forwardRef(function(t,e){let{invert:r,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:o,className:i,offset:c,mobileOffset:u,theme:d="light",richColors:f,duration:h,style:m,visibleToasts:y=e$,toastOptions:p,dir:v=$w(),gap:w=s$,loadingIcon:x,icons:b,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:C}=t,[E,N]=G.useState([]),A=G.useMemo(()=>Array.from(new Set([n].concat(E.filter(ue=>ue.position).map(ue=>ue.position)))),[E,n]),[j,O]=G.useState([]),[F,P]=G.useState(!1),[V,R]=G.useState(!1),[H,W]=G.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),I=G.useRef(null),k=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=G.useRef(null),Y=G.useRef(!1),he=G.useCallback(ue=>{N(xe=>{var D;return(D=xe.find(X=>X.id===ue.id))!=null&&D.delete||dr.dismiss(ue.id),xe.filter(({id:X})=>X!==ue.id)})},[]);return G.useEffect(()=>dr.subscribe(ue=>{if(ue.dismiss){N(xe=>xe.map(D=>D.id===ue.id?{...D,delete:!0}:D));return}setTimeout(()=>{QS.flushSync(()=>{N(xe=>{let D=xe.findIndex(X=>X.id===ue.id);return D!==-1?[...xe.slice(0,D),{...xe[D],...ue},...xe.slice(D+1)]:[ue,...xe]})})})}),[]),G.useEffect(()=>{if(d!=="system"){W(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?W("dark"):W("light")),typeof window>"u")return;let ue=window.matchMedia("(prefers-color-scheme: dark)");try{ue.addEventListener("change",({matches:xe})=>{W(xe?"dark":"light")})}catch{ue.addListener(({matches:D})=>{try{W(D?"dark":"light")}catch(X){console.error(X)}})}},[d]),G.useEffect(()=>{E.length<=1&&P(!1)},[E]),G.useEffect(()=>{let ue=xe=>{var D,X;s.every(oe=>xe[oe]||xe.code===oe)&&(P(!0),(D=I.current)==null||D.focus()),xe.code==="Escape"&&(document.activeElement===I.current||(X=I.current)!=null&&X.contains(document.activeElement))&&P(!1)};return document.addEventListener("keydown",ue),()=>document.removeEventListener("keydown",ue)},[s]),G.useEffect(()=>{if(I.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,Y.current=!1)}},[I.current]),G.createElement("section",{ref:e,"aria-label":`${_} ${k}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((ue,xe)=>{var D;let[X,oe]=ue.split("-");return E.length?G.createElement("ol",{key:ue,dir:v==="auto"?$w():v,tabIndex:-1,ref:I,className:i,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":X,"data-lifted":F&&E.length>1&&!a,"data-x-position":oe,style:{"--front-toast-height":`${((D=j[0])==null?void 0:D.height)||0}px`,"--width":`${n$}px`,"--gap":`${w}px`,...m,...c$(c,u)},onBlur:U=>{Y.current&&!U.currentTarget.contains(U.relatedTarget)&&(Y.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||Y.current||(Y.current=!0,$.current=U.relatedTarget)},onMouseEnter:()=>P(!0),onMouseMove:()=>P(!0),onMouseLeave:()=>{V||P(!1)},onDragEnd:()=>P(!1),onPointerDown:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||R(!0)},onPointerUp:()=>R(!1)},E.filter(U=>!U.position&&xe===0||U.position===ue).map((U,ae)=>{var we,ve;return G.createElement(l$,{key:U.id,icons:b,index:ae,toast:U,defaultRichColors:f,duration:(we=p==null?void 0:p.duration)!=null?we:h,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:r,visibleToasts:y,closeButton:(ve=p==null?void 0:p.closeButton)!=null?ve:o,interacting:V,position:ue,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:he,toasts:E.filter(Oe=>Oe.position==U.position),heights:j.filter(Oe=>Oe.position==U.position),setHeights:O,expandByDefault:a,gap:w,loadingIcon:x,expanded:F,pauseWhenPageIsHidden:C,swipeDirections:t.swipeDirections})})):null}))});const d$=({...t})=>{const{theme:e="system"}=ML();return l.jsx(u$,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},f$="modulepreload",h$=function(t){return"/"+t},Mw={},il=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),i=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=h$(c),c in Mw)return;Mw[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":f$,u||(f.as="script"),f.crossOrigin="",f.href=c,i&&f.setAttribute("nonce",i),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o}return s.then(o=>{for(const i of o||[])i.status==="rejected"&&a(i.reason);return e().catch(a)})},m$=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>il(async()=>{const{default:n}=await Promise.resolve().then(()=>ll);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class _y extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class p$ extends _y{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class g$ extends _y{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class v$ extends _y{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var mg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(mg||(mg={}));var y$=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function i(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(i,c)}u((n=n.apply(t,e||[])).next())})};class x${constructor(e,{headers:r={},customFetch:n,region:s=mg.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=m$(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return y$(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:o}=r;let i={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(i["x-region"]=c);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(i["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(i["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),s),body:u}).catch(y=>{throw new p$(y)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new g$(d);if(!d.ok)throw new v$(d);let h=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return h==="application/json"?m=yield d.json():h==="application/octet-stream"?m=yield d.blob():h==="text/event-stream"?m=d:h==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null}}catch(s){return{data:null,error:s}}})}}var mr={},Sy={},uh={},tu={},dh={},fh={},w$=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},zi=w$();const b$=zi.fetch,zE=zi.fetch.bind(zi),BE=zi.Headers,_$=zi.Request,S$=zi.Response,ll=Object.freeze(Object.defineProperty({__proto__:null,Headers:BE,Request:_$,Response:S$,default:zE,fetch:b$},Symbol.toStringTag,{value:"Module"})),C$=VT(ll);var hh={};Object.defineProperty(hh,"__esModule",{value:!0});let E$=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};hh.default=E$;var WE=Br&&Br.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fh,"__esModule",{value:!0});const N$=WE(C$),A$=WE(hh);let j$=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=N$.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,i,c;let u=null,d=null,f=null,h=a.status,m=a.statusText;if(a.ok){if(this.method!=="HEAD"){const w=await a.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=w:d=JSON.parse(w))}const p=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(i=a.headers.get("content-range"))===null||i===void 0?void 0:i.split("/");p&&v&&v.length>1&&(f=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const p=await a.text();try{u=JSON.parse(p),Array.isArray(u)&&a.status===404&&(d=[],u=null,h=200,m="OK")}catch{a.status===404&&p===""?(h=204,m="No Content"):u={message:p}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,m="OK"),u&&this.shouldThrowOnError)throw new A$.default(u)}return{error:u,data:d,count:f,status:h,statusText:m}});return this.shouldThrowOnError||(s=s.catch(a=>{var o,i,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(i=a==null?void 0:a.stack)!==null&&i!==void 0?i:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};fh.default=j$;var k$=Br&&Br.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dh,"__esModule",{value:!0});const T$=k$(fh);let P$=class extends T$.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",i=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${i?`${i},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var i;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(i=this.headers.Accept)!==null&&i!==void 0?i:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};dh.default=P$;var R$=Br&&Br.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tu,"__esModule",{value:!0});const I$=R$(dh);let O$=class extends I$.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};tu.default=O$;var L$=Br&&Br.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(uh,"__esModule",{value:!0});const Cl=L$(tu);let $$=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=r,this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(i=>/\s/.test(i)&&!a?"":(i==='"'&&(a=!a),i)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Cl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const o=e.reduce((i,c)=>i.concat(Object.keys(c)),[]);if(o.length>0){const i=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",i.join(","))}}return new Cl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){const o="POST",i=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),a||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Cl.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Cl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Cl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};uh.default=$$;var mh={},ph={};Object.defineProperty(ph,"__esModule",{value:!0});ph.version=void 0;ph.version="0.0.0-automated";Object.defineProperty(mh,"__esModule",{value:!0});mh.DEFAULT_HEADERS=void 0;const M$=ph;mh.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${M$.version}`};var HE=Br&&Br.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sy,"__esModule",{value:!0});const D$=HE(uh),F$=HE(tu),U$=mh;let V$=class GE{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},U$.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new D$.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new GE(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:a}={}){let o;const i=new URL(`${this.url}/rpc/${e}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{i.searchParams.append(d,f)})):(o="POST",c=r);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new F$.default({method:o,url:i,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Sy.default=V$;var cl=Br&&Br.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mr,"__esModule",{value:!0});mr.PostgrestError=mr.PostgrestBuilder=mr.PostgrestTransformBuilder=mr.PostgrestFilterBuilder=mr.PostgrestQueryBuilder=mr.PostgrestClient=void 0;const qE=cl(Sy);mr.PostgrestClient=qE.default;const KE=cl(uh);mr.PostgrestQueryBuilder=KE.default;const YE=cl(tu);mr.PostgrestFilterBuilder=YE.default;const QE=cl(dh);mr.PostgrestTransformBuilder=QE.default;const JE=cl(fh);mr.PostgrestBuilder=JE.default;const XE=cl(hh);mr.PostgrestError=XE.default;var z$=mr.default={PostgrestClient:qE.default,PostgrestQueryBuilder:KE.default,PostgrestFilterBuilder:YE.default,PostgrestTransformBuilder:QE.default,PostgrestBuilder:JE.default,PostgrestError:XE.default};const{PostgrestClient:B$,PostgrestQueryBuilder:YB,PostgrestFilterBuilder:QB,PostgrestTransformBuilder:JB,PostgrestBuilder:XB,PostgrestError:ZB}=z$;let pg;typeof window>"u"?pg=require("ws"):pg=window.WebSocket;const W$="2.11.10",H$={"X-Client-Info":`realtime-js/${W$}`},G$="1.0.0",ZE=1e4,q$=1e3;var bi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(bi||(bi={}));var Xt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Xt||(Xt={}));var ln;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ln||(ln={}));var gg;(function(t){t.websocket="websocket"})(gg||(gg={}));var Ya;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ya||(Ya={}));class K${constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const i=n.decode(e.slice(o,o+s));o=o+s;const c=n.decode(e.slice(o,o+a));o=o+a;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:i,event:c,payload:u}}}class eN{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var et;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(et||(et={}));const Dw=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,o)=>(a[o]=Y$(o,t,e,s),a),{})},Y$=(t,e,r,n)=>{const s=e.find(i=>i.name===t),a=s==null?void 0:s.type,o=r[t];return a&&!n.includes(a)?tN(a,o):vg(o)},tN=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Z$(e,r)}switch(t){case et.bool:return Q$(e);case et.float4:case et.float8:case et.int2:case et.int4:case et.int8:case et.numeric:case et.oid:return J$(e);case et.json:case et.jsonb:return X$(e);case et.timestamp:return eM(e);case et.abstime:case et.date:case et.daterange:case et.int4range:case et.int8range:case et.money:case et.reltime:case et.text:case et.time:case et.timestamptz:case et.timetz:case et.tsrange:case et.tstzrange:return vg(e);default:return vg(e)}},vg=t=>t,Q$=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},J$=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},X$=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Z$=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const o=t.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(i=>tN(e,i))}return t},eM=t=>typeof t=="string"?t.replace(" ","T"):t,rN=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Cm{constructor(e,r,n={},s=ZE){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Fw;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Fw||(Fw={}));class tc{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:o,onSync:i}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tc.syncState(this.state,s,a,o),this.pendingDiffs.forEach(c=>{this.state=tc.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],i()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:i}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=tc.syncDiff(this.state,s,a,o),i())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const a=this.cloneDeep(e),o=this.transformState(r),i={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=a[u];if(f){const h=d.map(v=>v.presence_ref),m=f.map(v=>v.presence_ref),y=d.filter(v=>m.indexOf(v.presence_ref)<0),p=f.filter(v=>h.indexOf(v.presence_ref)<0);y.length>0&&(i[u]=y),p.length>0&&(c[u]=p)}else i[u]=d}),this.syncDiff(a,{joins:i,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(i,c)=>{var u;const d=(u=e[i])!==null&&u!==void 0?u:[];if(e[i]=this.cloneDeep(c),d.length>0){const f=e[i].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);e[i].unshift(...h)}n(i,d,c)}),this.map(o,(i,c)=>{let u=e[i];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[i]=u,s(i,u,c),u.length===0&&delete e[i]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Uw;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Uw||(Uw={}));var Vw;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Vw||(Vw={}));var cs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(cs||(cs={}));class Cy{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Xt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Cm(this,ln.join,this.params,this.timeout),this.rejoinTimer=new eN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ln.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new tc(this),this.broadcastEndpointURL=rN(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:o,private:i}}=this.params;this._onError(d=>e==null?void 0:e(cs.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(cs.CLOSED));const c={},u={broadcast:a,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:i};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){e==null||e(cs.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,y=[];for(let p=0;p<m;p++){const v=h[p],{filter:{event:w,schema:x,table:b,filter:_}}=v,C=d&&d[p];if(C&&C.event===w&&C.schema===x&&C.table===b&&C.filter===_)y.push(Object.assign(Object.assign({},v),{id:C.id}));else{this.unsubscribe(),this.state=Xt.errored,e==null||e(cs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(cs.SUBSCRIBED);return}}).receive("error",d=>{this.state=Xt.errored,e==null||e(cs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(cs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,i,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(i=(o=this.params)===null||o===void 0?void 0:o.config)===null||i===void 0?void 0:i.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Xt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ln.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const s=new Cm(this,ln.leave,{},e);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Cm(this,e,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,a;const o=e.toLocaleLowerCase(),{close:i,error:c,leave:u,join:d}=ln;if(n&&[i,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var y,p,v;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((v=(p=m.filter)===null||p===void 0?void 0:p.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(m=>m.callback(h,n)):(a=this.bindings[o])===null||a===void 0||a.filter(m=>{var y,p,v,w,x,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const _=m.id,C=(y=m.filter)===null||y===void 0?void 0:y.event;return _&&((p=r.ids)===null||p===void 0?void 0:p.includes(_))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(x=(w=m==null?void 0:m.filter)===null||w===void 0?void 0:w.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:p,table:v,commit_timestamp:w,type:x,errors:b}=y;h=Object.assign(Object.assign({},{schema:p,table:v,commit_timestamp:w,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(y))}m.callback(h,n)})}_isClosed(){return this.state===Xt.closed}_isJoined(){return this.state===Xt.joined}_isJoining(){return this.state===Xt.joining}_isLeaving(){return this.state===Xt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Cy.isEqual(s.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ln.close,{},e)}_onError(e){this._on(ln.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Dw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Dw(e.columns,e.old_record)),r}}const zw=()=>{},tM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class rM{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=H$,this.params={},this.timeout=ZE,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zw,this.ref=0,this.logger=zw,this.conn=null,this.sendBuffer=[],this.serializer=new K$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...i)=>il(async()=>{const{default:c}=await Promise.resolve().then(()=>ll);return{default:c}},void 0).then(({default:c})=>c(...i)):o=fetch,(...i)=>o(...i)},this.endPoint=`${e}/${gg.websocket}`,this.httpEndpoint=rN(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,o)=>o(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new eN(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=pg),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new nM(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:G$}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case bi.connecting:return Ya.Connecting;case bi.open:return Ya.Open;case bi.closing:return Ya.Closing;default:return Ya.Closed}}isConnected(){return this.connectionState()===Ya.Open}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new Cy(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:s,ref:a}=e,o=()=>{this.encode(e,i=>{var c;(c=this.conn)===null||c===void 0||c.send(i)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(ln.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(q$,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:s,payload:a,ref:o}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,a),Array.from(this.channels).filter(i=>i._isMember(n)).forEach(i=>i._trigger(s,a,o)),this.stateChangeCallbacks.message.forEach(i=>i(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ln.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([tM],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class nM{constructor(e,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=bi.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Ey extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Rt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class sM extends Ey{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class yg extends Ey{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var aM=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function i(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(i,c)}u((n=n.apply(t,e||[])).next())})};const nN=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>il(async()=>{const{default:n}=await Promise.resolve().then(()=>ll);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},oM=()=>aM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield il(()=>Promise.resolve().then(()=>ll),void 0)).Response:Response}),xg=t=>{if(Array.isArray(t))return t.map(r=>xg(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=xg(n)}),e};var Ro=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function i(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(i,c)}u((n=n.apply(t,e||[])).next())})};const Em=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),iM=(t,e,r)=>Ro(void 0,void 0,void 0,function*(){const n=yield oM();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{e(new sM(Em(s),t.status||500))}).catch(s=>{e(new yg(Em(s),s))}):e(new yg(Em(t),t))}),lM=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function ru(t,e,r,n,s,a){return Ro(this,void 0,void 0,function*(){return new Promise((o,i)=>{t(r,lM(e,n,s,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>iM(c,i,n))})})}function of(t,e,r,n){return Ro(this,void 0,void 0,function*(){return ru(t,"GET",e,r,n)})}function Js(t,e,r,n,s){return Ro(this,void 0,void 0,function*(){return ru(t,"POST",e,n,s,r)})}function cM(t,e,r,n,s){return Ro(this,void 0,void 0,function*(){return ru(t,"PUT",e,n,s,r)})}function uM(t,e,r,n){return Ro(this,void 0,void 0,function*(){return ru(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function sN(t,e,r,n,s){return Ro(this,void 0,void 0,function*(){return ru(t,"DELETE",e,n,s,r)})}var cr=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function i(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(i,c)}u((n=n.apply(t,e||[])).next())})};const dM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class fM{constructor(e,r={},n,s){this.url=e,this.headers=r,this.bucketId=n,this.fetch=nN(s)}uploadOrUpdate(e,r,n,s){return cr(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},Bw),s);let i=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,i["cache-control"]=`max-age=${o.cacheControl}`,i["content-type"]=o.contentType,c&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(i=Object.assign(Object.assign({},i),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:a,headers:i},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield f.json();return f.ok?{data:{path:u,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(a){if(Rt(a))return{data:null,error:a};throw a}})}upload(e,r,n){return cr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return cr(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),i=new URL(this.url+`/object/upload/sign/${o}`);i.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Bw.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(i.toString(),{method:"PUT",body:c,headers:d}),h=yield f.json();return f.ok?{data:{path:a,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(Rt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return cr(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield Js(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+a.url),i=o.searchParams.get("token");if(!i)throw new Ey("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:i},error:null}}catch(n){if(Rt(n))return{data:null,error:n};throw n}})}update(e,r,n){return cr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return cr(this,void 0,void 0,function*(){try{return{data:yield Js(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Rt(s))return{data:null,error:s};throw s}})}copy(e,r,n){return cr(this,void 0,void 0,function*(){try{return{data:{path:(yield Js(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Rt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return cr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield Js(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(Rt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return cr(this,void 0,void 0,function*(){try{const s=yield Js(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(Rt(s))return{data:null,error:s};throw s}})}download(e,r){return cr(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"";try{const i=this._getFinalPath(e);return{data:yield(yield of(this.fetch,`${this.url}/${s}/${i}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(i){if(Rt(i))return{data:null,error:i};throw i}})}info(e){return cr(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield of(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:xg(n),error:null}}catch(n){if(Rt(n))return{data:null,error:n};throw n}})}exists(e){return cr(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield uM(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Rt(n)&&n instanceof yg){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const i=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${u}`)}}}remove(e){return cr(this,void 0,void 0,function*(){try{return{data:yield sN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(Rt(r))return{data:null,error:r};throw r}})}list(e,r,n){return cr(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},dM),r),{prefix:e||""});return{data:yield Js(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Rt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const hM="2.7.1",mM={"X-Client-Info":`storage-js/${hM}`};var Do=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function i(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(i,c)}u((n=n.apply(t,e||[])).next())})};class pM{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},mM),r),this.fetch=nN(n)}listBuckets(){return Do(this,void 0,void 0,function*(){try{return{data:yield of(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Rt(e))return{data:null,error:e};throw e}})}getBucket(e){return Do(this,void 0,void 0,function*(){try{return{data:yield of(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(Rt(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Do(this,void 0,void 0,function*(){try{return{data:yield Js(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Rt(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Do(this,void 0,void 0,function*(){try{return{data:yield cM(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Rt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Do(this,void 0,void 0,function*(){try{return{data:yield Js(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Rt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Do(this,void 0,void 0,function*(){try{return{data:yield sN(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(Rt(r))return{data:null,error:r};throw r}})}}class gM extends pM{constructor(e,r={},n){super(e,r,n)}from(e){return new fM(this.url,this.headers,e,this.fetch)}}const vM="2.50.0";let Ol="";typeof Deno<"u"?Ol="deno":typeof document<"u"?Ol="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ol="react-native":Ol="node";const yM={"X-Client-Info":`supabase-js-${Ol}/${vM}`},xM={headers:yM},wM={schema:"public"},bM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_M={};var SM=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function i(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(i,c)}u((n=n.apply(t,e||[])).next())})};const CM=t=>{let e;return t?e=t:typeof fetch>"u"?e=zE:e=fetch,(...r)=>e(...r)},EM=()=>typeof Headers>"u"?BE:Headers,NM=(t,e,r)=>{const n=CM(r),s=EM();return(a,o)=>SM(void 0,void 0,void 0,function*(){var i;const c=(i=yield e())!==null&&i!==void 0?i:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},o),{headers:u}))})};var AM=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function i(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(i,c)}u((n=n.apply(t,e||[])).next())})};function jM(t){return t.endsWith("/")?t:t+"/"}function kM(t,e){var r,n;const{db:s,auth:a,realtime:o,global:i}=t,{db:c,auth:u,realtime:d,global:f}=e,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},f),i),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=i==null?void 0:i.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>AM(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const aN="2.70.0",Yo=30*1e3,wg=3,Nm=wg*Yo,TM="http://localhost:9999",PM="supabase.auth.token",RM={"X-Client-Info":`gotrue-js/${aN}`},bg="X-Supabase-Api-Version",oN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},IM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,OM=6e5;class Ny extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Te(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class LM extends Ny{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function $M(t){return Te(t)&&t.name==="AuthApiError"}class iN extends Ny{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class $a extends Ny{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class qs extends $a{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function MM(t){return Te(t)&&t.name==="AuthSessionMissingError"}class Vu extends $a{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zu extends $a{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Bu extends $a{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function DM(t){return Te(t)&&t.name==="AuthImplicitGrantRedirectError"}class Ww extends $a{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _g extends $a{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Am(t){return Te(t)&&t.name==="AuthRetryableFetchError"}class Hw extends $a{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class rc extends $a{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const lf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Gw=` 	
\r=`.split(""),FM=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Gw.length;e+=1)t[Gw[e].charCodeAt(0)]=-2;for(let e=0;e<lf.length;e+=1)t[lf[e].charCodeAt(0)]=e;return t})();function qw(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(lf[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(lf[n]),e.queuedBits-=6}}function lN(t,e,r){const n=FM[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Kw(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{zM(o,n,r)};for(let o=0;o<t.length;o+=1)lN(t.charCodeAt(o),s,a);return e.join("")}function UM(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function VM(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}UM(n,e)}}function zM(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function BM(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)lN(t.charCodeAt(s),r,n);return new Uint8Array(e)}function WM(t){const e=[];return VM(t,r=>e.push(r)),new Uint8Array(e)}function HM(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>qw(s,r,n)),qw(null,r,n),e.join("")}function GM(t){return Math.round(Date.now()/1e3)+t}function qM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Zr=()=>typeof window<"u"&&typeof document<"u",Ba={tested:!1,writable:!1},nc=()=>{if(!Zr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ba.tested)return Ba.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ba.tested=!0,Ba.writable=!0}catch{Ba.tested=!0,Ba.writable=!1}return Ba.writable};function KM(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const cN=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>il(async()=>{const{default:n}=await Promise.resolve().then(()=>ll);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},YM=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",uN=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Wu=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Hu=async(t,e)=>{await t.removeItem(e)};class gh{constructor(){this.promise=new gh.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}gh.promiseConstructor=Promise;function jm(t){const e=t.split(".");if(e.length!==3)throw new rc("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!IM.test(e[n]))throw new rc("JWT not in base64url format");return{header:JSON.parse(Kw(e[0])),payload:JSON.parse(Kw(e[1])),signature:BM(e[2]),raw:{header:e[0],payload:e[1]}}}async function QM(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function JM(t,e){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){s(o);return}}})()})}function XM(t){return("0"+t.toString(16)).substr(-2)}function ZM(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,XM).join("")}async function e5(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function t5(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await e5(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fo(t,e,r=!1){const n=ZM();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await uN(t,`${e}-code-verifier`,s);const a=await t5(n);return[a,n===a?"plain":"s256"]}const r5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function n5(t){const e=t.headers.get(bg);if(!e||!e.match(r5))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function s5(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function a5(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const o5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Uo(t){if(!o5.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var i5=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const Ga=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),l5=[502,503,504];async function Yw(t){var e;if(!YM(t))throw new _g(Ga(t),0);if(l5.includes(t.status))throw new _g(Ga(t),t.status);let r;try{r=await t.json()}catch(a){throw new iN(Ga(a),a)}let n;const s=n5(t);if(s&&s.getTime()>=oN["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Hw(Ga(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new qs}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new Hw(Ga(r),t.status,r.weak_password.reasons);throw new LM(Ga(r),t.status||500,n)}const c5=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Fe(t,e,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[bg]||(a[bg]=oN["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const i=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await u5(t,e,r+i,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function u5(t,e,r,n,s,a){const o=c5(e,n,s,a);let i;try{i=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new _g(Ga(c),0)}if(i.ok||await Yw(i),n!=null&&n.noResolveJson)return i;try{return await i.json()}catch(c){await Yw(c)}}function os(t){var e;let r=null;m5(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=GM(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Qw(t){const e=os(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ra(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function d5(t){return{data:t,error:null}}function f5(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=t,o=i5(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),i={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},o);return{data:{properties:i,user:c},error:null}}function h5(t){return t}function m5(t){return t.access_token&&t.refresh_token&&t.expires_in}const km=["global","local","others"];var p5=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class g5{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=cN(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=km[0]){if(km.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${km.join(", ")}`);try{return await Fe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Te(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ra})}catch(n){if(Te(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=p5(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:f5,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Te(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Fe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ra})}catch(r){if(Te(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,a,o,i,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:h5});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(i=d.headers.get("link"))===null||i===void 0?void 0:i.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(y=>{const p=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);u[`${v}Page`]=p}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Te(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Uo(e);try{return await Fe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ra})}catch(r){if(Te(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Uo(e);try{return await Fe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:ra})}catch(n){if(Te(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Uo(e);try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:ra})}catch(n){if(Te(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Uo(e.userId);try{const{data:r,error:n}=await Fe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Uo(e.userId),Uo(e.id);try{return{data:await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}}}const v5={getItem:t=>nc()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{nc()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{nc()&&globalThis.localStorage.removeItem(t)}};function Jw(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function y5(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Vo={debug:!!(globalThis&&nc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dN extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class x5 extends dN{}async function w5(t,e,r){Vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Vo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new x5(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Vo.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}y5();const b5={url:TM,storageKey:PM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:RM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Xw(t,e,r){return await r()}class Ic{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ic.nextInstanceID,Ic.nextInstanceID+=1,this.instanceID>0&&Zr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},b5),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new g5({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=cN(s.fetch),this.lock=s.lock||Xw,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Zr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=w5:this.lock=Xw,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:nc()?this.storage=v5:(this.memoryStorage={},this.storage=Jw(this.memoryStorage)):(this.memoryStorage={},this.storage=Jw(this.memoryStorage)),Zr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${aN}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=KM(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Zr()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),DM(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",i),await this._saveSession(o),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Te(r)?{error:r}:{error:new iN("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const a=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:os}),{data:o,error:i}=a;if(i||!o)return{data:{user:null,session:null},error:i};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Te(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var r,n,s;try{let a;if("email"in e){const{email:d,password:f,options:h}=e;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await Fo(this.storage,this.storageKey)),a=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:y},xform:os})}else if("phone"in e){const{phone:d,password:f,options:h}=e;a=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:os})}else throw new zu("You must provide either an email or phone number and a password");const{data:o,error:i}=a;if(i||!o)return{data:{user:null,session:null},error:i};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Te(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:i}=e;r=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Qw})}else if("phone"in e){const{phone:a,password:o,options:i}=e;r=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Qw})}else throw new zu("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Vu}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Te(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,s,a,o,i,c,u,d,f,h,m;let y,p;if("message"in e)y=e.message,p=e.signature;else{const{chain:v,wallet:w,statement:x,options:b}=e;let _;if(Zr())if(typeof w=="object")_=w;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))_=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=w}const C=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const E=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),x?{statement:x}:null));let N;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")N=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)N=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)y=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),p=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${C.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(s=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const E=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=E}}try{const{data:v,error:w}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:HM(p)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:os});if(w)throw w;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Vu}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:w})}catch(v){if(Te(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const r=await Wu(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:o}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:os});if(await Hu(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Vu}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(Te(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:a,nonce:o}=e,i=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:os}),{data:c,error:u}=i;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Vu}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(Te(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,a,o;try{if("email"in e){const{email:i,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Fo(this.storage,this.storageKey));const{error:f}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:i,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:i,options:c}=e,{data:u,error:d}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:i,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new zu("You must provide either an email or phone number.")}catch(i){if(Te(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var r,n;try{let s,a;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:i}=await Fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:os});if(i)throw i;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(Te(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Fo(this.storage,this.storageKey)),await Fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:d5})}catch(a){if(Te(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new qs;const{error:s}=await Fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Te(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:a}=e,{error:o}=await Fe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:a}=e,{data:o,error:i}=await Fe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:i}}throw new zu("You must provide either an email or phone number and a type")}catch(r){if(Te(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Wu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Nm:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ra}):await this._useSession(async r=>{var n,s,a;const{data:o,error:i}=r;if(i)throw i;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qs}:await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:ra})})}catch(r){if(Te(r))return MM(r)&&(await this._removeSession(),await Hu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new qs;const o=s.session;let i=null,c=null;this.flowType==="pkce"&&e.email!=null&&([i,c]=await Fo(this.storage,this.storageKey));const{data:u,error:d}=await Fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:c}),jwt:o.access_token,xform:ra});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Te(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new qs;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:o}=jm(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:i,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!i)return{data:{user:null,session:null},error:null};a=i}else{const{data:i,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:i.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(Te(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:i}=r;if(i)throw i;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new qs;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Te(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Zr())throw new Bu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Bu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ww("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Bu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ww("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:i,expires_at:c,token_type:u}=e;if(!a||!i||!o||!u)throw new Bu("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(i);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=Yo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const y=h-f;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,d);const{data:p,error:v}=await this._getUser(a);if(v)throw v;const w={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(n){if(Te(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Wu(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:i}=await this.admin.signOut(o,e);if(i&&!($M(i)&&(i.status===404||i.status===401||i.status===403)))return{error:i}}return e!=="others"&&(await this._removeSession(),await Hu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=qM(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Fo(this.storage,this.storageKey,!0));try{return await Fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(Te(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var o,i,c,u,d;const{data:f,error:h}=a;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Fe(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Zr()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Te(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)throw o;return await Fe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await JM(async s=>(s>0&&await QM(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:os})),(s,a)=>{const o=200*Math.pow(2,s);return a&&Am(a)&&Date.now()+o-n<Yo})}catch(n){if(this._debug(r,"error",n),Te(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Zr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Wu(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Nm;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Nm}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),Am(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new qs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new gh;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new qs;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const i={session:a.session,error:null};return this.refreshingDeferred.resolve(i),i}catch(a){if(this._debug(s,"error",a),Te(a)){const o={session:null,error:a};return Am(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async i=>{try{await i.callback(e,r)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let i=0;i<a.length;i+=1)console.error(a[i]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await uN(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Hu(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Zr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Yo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Yo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Yo}ms, refresh threshold is ${wg} ticks`),s<=wg&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof dN)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Zr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await Fo(this.storage,this.storageKey),i=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(i.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await Fe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)return{data:null,error:o};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await Fe(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:i}=await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:i})})}catch(r){if(Te(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Te(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=jm(s.access_token);let i=null;o.aal&&(i=o.aal);let c=i;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:i,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+OM>Date.now()))return n;const{data:s,error:a}=await Fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!s.keys||s.keys.length===0)throw new rc("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(o=>o.kid===e),!n)throw new rc("No matching signing key found in JWKS");return n}async getClaims(e,r={keys:[]}){try{let n=e;if(!n){const{data:m,error:y}=await this.getSession();if(y||!m.session)return{data:null,error:y};n=m.session.access_token}const{header:s,payload:a,signature:o,raw:{header:i,payload:c}}=jm(n);if(s5(a.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:a,header:s,signature:o},error:null}}const u=a5(s.alg),d=await this.fetchJwk(s.kid,r),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,WM(`${i}.${c}`)))throw new rc("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(n){if(Te(n))return{data:null,error:n};throw n}}}Ic.nextInstanceID=0;const _5=Ic;class S5 extends _5{constructor(e){super(e)}}var C5=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function i(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(i,c)}u((n=n.apply(t,e||[])).next())})};class E5{constructor(e,r,n){var s,a,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const i=jM(e),c=new URL(i);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:wM,realtime:_M,auth:Object.assign(Object.assign({},bM),{storageKey:u}),global:xM},f=kM(n??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=NM(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new B$(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new x$(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new gM(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return C5(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:a,flowType:o,lock:i,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new S5({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:i,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new rM(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const N5=(t,e,r)=>new E5(t,e,r),A5="https://uxccfhptochnfomurulr.supabase.co",j5="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV4Y2NmaHB0b2NobmZvbXVydWxyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgxOTg2MDAsImV4cCI6MjA2Mzc3NDYwMH0.FSxZR0jk7HjNxKegdULP49BnkFUmwiiUbgbZUucE_no",ne=N5(A5,j5),fN=g.createContext(void 0),k5=({children:t})=>{const[e,r]=g.useState({user:null,isAuthenticated:!1});console.log(" [AUTH_PROVIDER] Inicializando AuthProvider"),g.useEffect(()=>{console.log(" [AUTH_PROVIDER] Verificando usurio salvo no localStorage");const a=localStorage.getItem("villa_glamour_user");if(a)try{const o=JSON.parse(a);console.log(" [AUTH_PROVIDER] Usurio restaurado:",o.name),r({user:o,isAuthenticated:!0})}catch(o){console.error(" [AUTH_PROVIDER] Erro ao parsear usurio:",o),localStorage.removeItem("villa_glamour_user")}else console.log(" [AUTH_PROVIDER] Nenhum usurio no localStorage")},[]);const n=async a=>{try{console.log(" [AUTH_PROVIDER] Tentando login:",a.username);const{data:o,error:i}=await ne.rpc("verify_user_credentials",{input_username:a.username,input_password:a.password});if(console.log(" [AUTH_PROVIDER] Resultado verificao:",{userData:o,userError:i}),!i&&o&&o.length>0){const c=o[0],u={id:c.user_id,username:c.user_username,name:c.user_name,role:c.user_role,assignedTabs:c.user_assigned_tabs||[],assignedChannels:c.user_assigned_channels||[],createdAt:new Date().toISOString()};return r({user:u,isAuthenticated:!0}),localStorage.setItem("villa_glamour_user",JSON.stringify(u)),console.log(" [AUTH_PROVIDER] Login realizado com sucesso:",u.role),!0}return console.log(" [AUTH_PROVIDER] Credenciais invlidas"),!1}catch(o){return console.error(" [AUTH_PROVIDER] Erro durante login:",o),!1}},s=()=>{console.log(" [AUTH_PROVIDER] Fazendo logout"),r({user:null,isAuthenticated:!1}),localStorage.removeItem("villa_glamour_user")};return g.useEffect(()=>{var a;console.log(" [AUTH_PROVIDER] Estado atual:",{isAuthenticated:e.isAuthenticated,user:((a=e.user)==null?void 0:a.name)||"nenhum"})},[e]),l.jsx(fN.Provider,{value:{...e,login:n,logout:s},children:t})},Tt=()=>{const t=g.useContext(fN);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Zw={"Yelena-AI":"chat","ticas Villa Glamour":"chat",Canarana:"canarana","Souto Soares":"souto-soares","Joo Dourado":"joao-dourado","Amrica Dourada":"america-dourada","Gerente das Lojas":"gerente-lojas","Andressa Gerente Externo":"gerente-externo"},Ay=()=>{const[t,e]=g.useState([]),[r,n]=g.useState(!0),{toast:s}=Jt();g.useEffect(()=>{(async()=>{n(!0);const{data:c,error:u}=await ne.from("channels").select("*").order("created_at",{ascending:!0});if(u)console.error("[useInternalChannels] Erro ao buscar canais do Supabase:",u),s({title:"Erro ao carregar canais",description:"No foi possvel obter a lista de canais. Verifique sua conexo.",variant:"destructive"}),e([]);else{const d=(c||[]).map(f=>({id:f.id,name:f.name,type:f.type,isActive:f.is_active,isDefault:f.is_default,legacyId:Zw[f.name]||f.id}));e(d)}n(!1)})()},[]);const a=async()=>{n(!0);const{data:i,error:c}=await ne.from("channels").select("*").order("created_at",{ascending:!0});if(!c&&i){const u=i.map(d=>({id:d.id,name:d.name,type:d.type,isActive:d.is_active,isDefault:d.is_default,legacyId:Zw[d.name]||d.id}));e(u)}n(!1)};return{channels:t,loading:r,updateChannelStatus:async(i,c)=>{try{const{error:u}=await ne.from("channels").update({is_active:c}).eq("id",i);if(u)throw u;s({title:"Sucesso",description:`Canal ${c?"ativado":"desativado"} com sucesso`,variant:"default"}),await a()}catch(u){console.error("Erro ao atualizar canal:",u),s({title:"Erro",description:"Erro ao atualizar canal. Tente novamente.",variant:"destructive"})}},refetch:a}},hN=g.createContext(void 0),T5=({children:t})=>{const{channels:e,updateChannelStatus:r,loading:n,refetch:s}=Ay(),a=e.filter(o=>o.name!=="Pedro").map(o=>({id:o.id,name:o.name,type:o.type,isActive:o.isActive,isDefault:o.isDefault}));return l.jsx(hN.Provider,{value:{channels:a,updateChannelStatus:r,loading:n,refetch:s},children:t})},ul=()=>{const t=g.useContext(hN);if(t===void 0)throw new Error("useChannels must be used within a ChannelProvider");return t},Oc=oh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 btn-animate",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 btn-animate",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground btn-animate",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 btn-animate",ghost:"hover:bg-accent hover:text-accent-foreground btn-animate-sm",link:"text-primary underline-offset-4 hover:underline btn-animate-sm"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3 btn-animate-sm",lg:"h-11 rounded-md px-8 btn-float",icon:"h-10 w-10 btn-animate-icon"}},defaultVariants:{variant:"default",size:"default"}}),q=g.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},a)=>{const o=n?eO:"button";return l.jsx(o,{className:S(Oc({variant:e,size:r,className:t})),ref:a,...s})});q.displayName="Button";const Ke=g.forwardRef(({className:t,type:e,...r},n)=>l.jsx("input",{type:e,className:S("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));Ke.displayName="Input";var P5="Label",mN=g.forwardRef((t,e)=>l.jsx(ge.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));mN.displayName=P5;var pN=mN;const R5=oh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),pe=g.forwardRef(({className:t,...e},r)=>l.jsx(pN,{ref:r,className:S(R5(),t),...e}));pe.displayName=pN.displayName;const Re=g.forwardRef(({className:t,...e},r)=>l.jsx("div",{ref:r,className:S("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Re.displayName="Card";const jt=g.forwardRef(({className:t,...e},r)=>l.jsx("div",{ref:r,className:S("flex flex-col space-y-1.5 p-6",t),...e}));jt.displayName="CardHeader";const kt=g.forwardRef(({className:t,...e},r)=>l.jsx("h3",{ref:r,className:S("text-2xl font-semibold leading-none tracking-tight",t),...e}));kt.displayName="CardTitle";const sc=g.forwardRef(({className:t,...e},r)=>l.jsx("p",{ref:r,className:S("text-sm text-muted-foreground",t),...e}));sc.displayName="CardDescription";const Ie=g.forwardRef(({className:t,...e},r)=>l.jsx("div",{ref:r,className:S("p-6 pt-0",t),...e}));Ie.displayName="CardContent";const I5=g.forwardRef(({className:t,...e},r)=>l.jsx("div",{ref:r,className:S("flex items-center p-6 pt-0",t),...e}));I5.displayName="CardFooter";function jy(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var vh="Checkbox",[O5,eW]=br(vh),[L5,ky]=O5(vh);function $5(t){const{__scopeCheckbox:e,checked:r,children:n,defaultChecked:s,disabled:a,form:o,name:i,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:f}=t,[h,m]=Ns({prop:r,defaultProp:s??!1,onChange:c,caller:vh}),[y,p]=g.useState(null),[v,w]=g.useState(null),x=g.useRef(!1),b=y?!!o||!!y.closest("form"):!0,_={checked:h,disabled:a,setChecked:m,control:y,setControl:p,name:i,form:o,value:d,hasConsumerStoppedPropagationRef:x,required:u,defaultChecked:_a(s)?!1:s,isFormControl:b,bubbleInput:v,setBubbleInput:w};return l.jsx(L5,{scope:e,..._,children:M5(f)?f(_):n})}var gN="CheckboxTrigger",vN=g.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:r,...n},s)=>{const{control:a,value:o,disabled:i,checked:c,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:y}=ky(gN,t),p=Le(s,d),v=g.useRef(c);return g.useEffect(()=>{const w=a==null?void 0:a.form;if(w){const x=()=>f(v.current);return w.addEventListener("reset",x),()=>w.removeEventListener("reset",x)}},[a,f]),l.jsx(ge.button,{type:"button",role:"checkbox","aria-checked":_a(c)?"mixed":c,"aria-required":u,"data-state":_N(c),"data-disabled":i?"":void 0,disabled:i,value:o,...n,ref:p,onKeyDown:ce(e,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:ce(r,w=>{f(x=>_a(x)?!0:!x),y&&m&&(h.current=w.isPropagationStopped(),h.current||w.stopPropagation())})})});vN.displayName=gN;var Ty=g.forwardRef((t,e)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:a,required:o,disabled:i,value:c,onCheckedChange:u,form:d,...f}=t;return l.jsx($5,{__scopeCheckbox:r,checked:s,defaultChecked:a,disabled:i,required:o,onCheckedChange:u,name:n,form:d,value:c,internal_do_not_use_render:({isFormControl:h})=>l.jsxs(l.Fragment,{children:[l.jsx(vN,{...f,ref:e,__scopeCheckbox:r}),h&&l.jsx(bN,{__scopeCheckbox:r})]})})});Ty.displayName=vh;var yN="CheckboxIndicator",xN=g.forwardRef((t,e)=>{const{__scopeCheckbox:r,forceMount:n,...s}=t,a=ky(yN,r);return l.jsx(_r,{present:n||_a(a.checked)||a.checked===!0,children:l.jsx(ge.span,{"data-state":_N(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});xN.displayName=yN;var wN="CheckboxBubbleInput",bN=g.forwardRef(({__scopeCheckbox:t,...e},r)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:o,required:i,disabled:c,name:u,value:d,form:f,bubbleInput:h,setBubbleInput:m}=ky(wN,t),y=Le(r,m),p=jy(a),v=iy(n);g.useEffect(()=>{const x=h;if(!x)return;const b=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(b,"checked").set,E=!s.current;if(p!==a&&C){const N=new Event("click",{bubbles:E});x.indeterminate=_a(a),C.call(x,_a(a)?!1:a),x.dispatchEvent(N)}},[h,p,a,s]);const w=g.useRef(_a(a)?!1:a);return l.jsx(ge.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??w.current,required:i,disabled:c,name:u,value:d,form:f,...e,tabIndex:-1,ref:y,style:{...e.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});bN.displayName=wN;function M5(t){return typeof t=="function"}function _a(t){return t==="indeterminate"}function _N(t){return _a(t)?"indeterminate":t?"checked":"unchecked"}const xs=g.forwardRef(({className:t,...e},r)=>l.jsx(Ty,{ref:r,className:S("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:l.jsx(xN,{className:S("flex items-center justify-center text-current"),children:l.jsx(xy,{className:"h-4 w-4"})})}));xs.displayName=Ty.displayName;const D5=()=>{const[t,e]=g.useState(()=>localStorage.getItem("villa_glamour_remember")==="true");return g.useEffect(()=>{localStorage.setItem("villa_glamour_remember",t.toString())},[t]),{rememberMe:t,setRememberMe:e,saveCredentials:(a,o)=>{t&&(localStorage.setItem("villa_glamour_username",a),localStorage.setItem("villa_glamour_password",o),localStorage.setItem("villa_glamour_last_login",new Date().toISOString()))},getSavedCredentials:()=>{if(t){const a=localStorage.getItem("villa_glamour_username"),o=localStorage.getItem("villa_glamour_password"),i=localStorage.getItem("villa_glamour_last_login");if(a&&o&&i){const c=new Date(i);if((new Date().getTime()-c.getTime())/(1e3*3600*24)<=30)return{username:a,password:o}}}return null},clearSavedCredentials:()=>{localStorage.removeItem("villa_glamour_username"),localStorage.removeItem("villa_glamour_password"),localStorage.removeItem("villa_glamour_last_login"),localStorage.removeItem("villa_glamour_remember"),e(!1)}}},F5=()=>{const[t,e]=g.useState(""),[r,n]=g.useState(""),[s,a]=g.useState(!1),[o,i]=g.useState(!1),{login:c}=Tt(),{toast:u}=Jt(),{rememberMe:d,setRememberMe:f,saveCredentials:h,getSavedCredentials:m,clearSavedCredentials:y}=D5();g.useEffect(()=>{const v=m();v&&(e(v.username),n(v.password))},[m]);const p=async v=>{if(v.preventDefault(),!t.trim()||!r.trim()){u({title:"Erro",description:"Por favor, preencha todos os campos",variant:"destructive"});return}i(!0);try{await c({username:t,password:r})?(d?h(t,r):y(),u({title:"Sucesso",description:"Login realizado com sucesso!"})):u({title:"Erro",description:"Credenciais invlidas",variant:"destructive"})}catch(w){console.error("Erro no login:",w),u({title:"Erro",description:"Erro interno do servidor",variant:"destructive"})}finally{i(!1)}};return l.jsx("div",{className:"w-full min-h-screen flex items-center justify-start px-8 md:px-16 lg:px-24",style:{background:"url('/lovable-uploads/1c661b9c-0e2b-4ca8-a326-90cdc8c73635.png') center center / cover no-repeat"},children:l.jsxs("div",{className:"bg-white dark:bg-[#18181b] rounded-2xl shadow-2xl w-full p-8 md:p-10 flex flex-col justify-center",style:{minHeight:"480px",maxWidth:"410px"},children:[l.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[l.jsx("img",{src:"/lovable-uploads/ea397861-5fcd-451b-872e-727208c03a67.png",alt:"Villa Glamour Logo",className:"w-20 h-20 object-contain mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-[#b5103c]",children:"Villa Glamour"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Sistema de Atendimento"})]}),l.jsx(Re,{className:"border-0 shadow-none bg-transparent p-0",children:l.jsx(Ie,{className:"p-0",children:l.jsxs("form",{onSubmit:p,className:"space-y-5",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{htmlFor:"username",className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Usurio"}),l.jsx(Ke,{id:"username",type:"text",value:t,onChange:v=>e(v.target.value),placeholder:"Digite seu usurio",disabled:o,autoComplete:"username",className:"h-12 transition-all duration-200 focus:ring-2 focus:ring-[#b5103c] border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900/50"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{htmlFor:"password",className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Senha"}),l.jsxs("div",{className:"relative",children:[l.jsx(Ke,{id:"password",type:s?"text":"password",value:r,onChange:v=>n(v.target.value),placeholder:"Digite sua senha",disabled:o,autoComplete:"current-password",className:"h-12 pr-12 transition-all duration-200 focus:ring-2 focus:ring-[#b5103c] border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900/50"}),l.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 transition-colors",disabled:o,children:s?l.jsx(EE,{size:20}):l.jsx(by,{size:20})})]})]}),l.jsxs("div",{className:"flex items-center space-x-3 py-2",children:[l.jsx(xs,{id:"remember",checked:d,onCheckedChange:v=>f(v),disabled:o,className:"data-[state=checked]:bg-[#b5103c] data-[state=checked]:border-[#b5103c]"}),l.jsx(pe,{htmlFor:"remember",className:"text-sm text-slate-600 dark:text-slate-400 cursor-pointer font-medium",children:"Lembrar usurio por 30 dias"})]}),l.jsx(q,{type:"submit",className:"w-full h-12 bg-[#9f1239] hover:bg-[#b5103c] text-white font-semibold transition-all duration-300 transform hover:scale-[1.02] shadow-lg",disabled:o,children:o?l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx(IE,{className:"w-4 h-4 animate-spin"}),l.jsx("span",{children:"Entrando..."})]}):"Entrar"})]})})})]})})},U5=t=>{g.useEffect(()=>{t.title&&(document.title=`${t.title} | Glamour Chat Center`);const e=document.querySelector('meta[name="description"]');e&&t.description&&e.setAttribute("content",t.description);let r=document.querySelector('meta[name="keywords"]');t.keywords&&(r||(r=document.createElement("meta"),r.setAttribute("name","keywords"),document.head.appendChild(r)),r.setAttribute("content",t.keywords));const n=(s,a)=>{let o=document.querySelector(`meta[property="${s}"]`);o||(o=document.createElement("meta"),o.setAttribute("property",s),document.head.appendChild(o)),o.setAttribute("content",a)};t.title&&n("og:title",t.title),t.description&&n("og:description",t.description),t.type&&n("og:type",t.type),t.image&&n("og:image",t.image),n("og:url",window.location.href)},[t])},SN=({title:t,description:e,keywords:r,children:n})=>(U5({title:t,description:e,keywords:r,type:"website"}),l.jsx(l.Fragment,{children:n})),CN=g.createContext(void 0),Py=()=>{const t=g.useContext(CN);if(!t)throw new Error("useLayout must be used within a LayoutProvider");return t},V5=({children:t})=>{const[e,r]=g.useState("dashboard"),[n,s]=g.useState(!0),[a,o]=g.useState(!1),[i,c]=g.useState(new URLSearchParams(window.location.search)),{theme:u,setTheme:d}=uC(),f=u==="dark"||u==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches;g.useEffect(()=>{const p=new URLSearchParams(window.location.search);c(p);const v=p.get("section");v&&(console.log(" [LAYOUT_PROVIDER] URL section detected:",v),r(v))},[]),g.useEffect(()=>{const p=()=>{const v=new URLSearchParams(window.location.search);c(v);const w=v.get("section");w&&r(w)};return window.addEventListener("popstate",p),()=>window.removeEventListener("popstate",p)},[]);const y={activeSection:e,setActiveSection:r,isSidebarVisible:n,setIsSidebarVisible:s,isSidebarCollapsed:a,setIsSidebarCollapsed:o,isDarkMode:f,setIsDarkMode:p=>{d(p?"dark":"light")},toggleDarkMode:()=>{d(f?"light":"dark")},urlParams:i};return l.jsx(CN.Provider,{value:y,children:t})},z5=({activeSection:t,children:e})=>{const r=g.useMemo(()=>{const n={dashboard:{title:"Painel de Controle",description:"Central de controle do Glamour Chat Center. Gerencie conversas, monitore estatsticas e acesse todas as funcionalidades.",keywords:"painel controle, chat center, gesto conversas, atendimento cliente"},channels:{title:"Canais de Atendimento",description:"Acesse todos os canais de atendimento disponveis. Gerencie conversas por WhatsApp e outros canais de comunicao.",keywords:"canais atendimento, whatsapp, comunicao, chat"},exames:{title:"Gesto de Exames",description:"Sistema completo para gesto de exames mdicos. Consulte, edite e monitore exames de forma eficiente.",keywords:"gesto exames, exames mdicos, sistema mdico"},settings:{title:"Configuraes",description:"Configure suas preferncias, gerencie usurios e personalize o sistema conforme suas necessidades.",keywords:"configuraes, preferncias, gesto usurios, personalizao"}};return n[t]||n.dashboard},[t]);return l.jsx(SN,{...r,children:e})},B5=()=>{const[t,e]=g.useState({}),[r,n]=g.useState(!1),{toast:s}=Jt(),{user:a}=Tt(),o=g.useCallback(m=>t[m]||null,[t]),i=g.useCallback(async m=>{if(!m)return null;n(!0);try{const{data:y,error:p}=await ne.from("user_profiles").select("*").eq("id",m).maybeSingle();return p?(console.error("Erro ao carregar perfil:",p),null):y?(e(v=>({...v,[m]:y})),y):null}finally{n(!1)}},[]),c=g.useCallback(async m=>{if(!a)return s({title:"Erro",description:"Usurio no autenticado",variant:"destructive"}),null;n(!0);try{const y=m.name.split(".").pop(),p=`${a.id}-${Date.now()}.${y}`,{error:v}=await ne.storage.from("avatars").upload(p,m,{upsert:!0});if(v)throw v;const{data:w}=ne.storage.from("avatars").getPublicUrl(p);return(w==null?void 0:w.publicUrl)||null}catch(y){return console.error("Erro ao fazer upload do avatar:",y),s({title:"Erro",description:"Erro ao fazer upload do avatar",variant:"destructive"}),null}finally{n(!1)}},[a,s]),u=g.useCallback(async m=>{if(!(a!=null&&a.id))return null;n(!0);try{const y={id:a.id,...m,updated_at:new Date().toISOString()},{data:p,error:v}=await ne.from("user_profiles").upsert(y,{onConflict:"id"}).select().maybeSingle();if(v)throw v;return e(w=>({...w,[a.id]:p})),s({title:"Sucesso",description:"Perfil atualizado com sucesso"}),p}catch(y){return console.error("Erro ao atualizar perfil:",y),s({title:"Erro",description:"Erro ao atualizar perfil",variant:"destructive"}),null}finally{n(!1)}},[a,s]),d=g.useCallback(async()=>await u({avatar_url:null}),[u]),f=g.useCallback(async m=>await u({bio:m}),[u]),h=g.useCallback(async()=>a!=null&&a.id?await i(a.id):null,[a==null?void 0:a.id,i]);return{profiles:t,loading:r,getProfileByUserId:o,loadProfile:i,loadCurrentUserProfile:h,uploadAvatar:c,updateProfile:u,updateBio:f,removeAvatar:d}};var Tm="focusScope.autoFocusOnMount",Pm="focusScope.autoFocusOnUnmount",eb={bubbles:!1,cancelable:!0},W5="FocusScope",yh=g.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=t,[i,c]=g.useState(null),u=_t(s),d=_t(a),f=g.useRef(null),h=Le(e,p=>c(p)),m=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(n){let p=function(b){if(m.paused||!i)return;const _=b.target;i.contains(_)?f.current=_:Ks(f.current,{select:!0})},v=function(b){if(m.paused||!i)return;const _=b.relatedTarget;_!==null&&(i.contains(_)||Ks(f.current,{select:!0}))},w=function(b){if(document.activeElement===document.body)for(const C of b)C.removedNodes.length>0&&Ks(i)};document.addEventListener("focusin",p),document.addEventListener("focusout",v);const x=new MutationObserver(w);return i&&x.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",v),x.disconnect()}}},[n,i,m.paused]),g.useEffect(()=>{if(i){rb.add(m);const p=document.activeElement;if(!i.contains(p)){const w=new CustomEvent(Tm,eb);i.addEventListener(Tm,u),i.dispatchEvent(w),w.defaultPrevented||(H5(Q5(EN(i)),{select:!0}),document.activeElement===p&&Ks(i))}return()=>{i.removeEventListener(Tm,u),setTimeout(()=>{const w=new CustomEvent(Pm,eb);i.addEventListener(Pm,d),i.dispatchEvent(w),w.defaultPrevented||Ks(p??document.body,{select:!0}),i.removeEventListener(Pm,d),rb.remove(m)},0)}}},[i,u,d,m]);const y=g.useCallback(p=>{if(!r&&!n||m.paused)return;const v=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,w=document.activeElement;if(v&&w){const x=p.currentTarget,[b,_]=G5(x);b&&_?!p.shiftKey&&w===_?(p.preventDefault(),r&&Ks(b,{select:!0})):p.shiftKey&&w===b&&(p.preventDefault(),r&&Ks(_,{select:!0})):w===x&&p.preventDefault()}},[r,n,m.paused]);return l.jsx(ge.div,{tabIndex:-1,...o,ref:h,onKeyDown:y})});yh.displayName=W5;function H5(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(Ks(n,{select:e}),document.activeElement!==r)return}function G5(t){const e=EN(t),r=tb(e,t),n=tb(e.reverse(),t);return[r,n]}function EN(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function tb(t,e){for(const r of t)if(!q5(r,{upTo:e}))return r}function q5(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function K5(t){return t instanceof HTMLInputElement&&"select"in t}function Ks(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&K5(t)&&e&&t.select()}}var rb=Y5();function Y5(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=nb(t,e),t.unshift(e)},remove(e){var r;t=nb(t,e),(r=t[0])==null||r.resume()}}}function nb(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function Q5(t){return t.filter(e=>e.tagName!=="A")}var Rm=0;function Ry(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??sb()),document.body.insertAdjacentElement("beforeend",t[1]??sb()),Rm++,()=>{Rm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Rm--}},[])}function sb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var $n=function(){return $n=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$n.apply(this,arguments)};function NN(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function J5(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}var yd="right-scroll-bar-position",xd="width-before-scroll-bar",X5="with-scroll-bars-hidden",Z5="--removed-body-scroll-bar-size";function Im(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function eD(t,e){var r=g.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var tD=typeof window<"u"?g.useLayoutEffect:g.useEffect,ab=new WeakMap;function rD(t,e){var r=eD(null,function(n){return t.forEach(function(s){return Im(s,n)})});return tD(function(){var n=ab.get(r);if(n){var s=new Set(n),a=new Set(t),o=r.current;s.forEach(function(i){a.has(i)||Im(i,null)}),a.forEach(function(i){s.has(i)||Im(i,o)})}ab.set(r,t)},[t]),r}function nD(t){return t}function sD(t,e){e===void 0&&(e=nD);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(a){var o=e(a,n);return r.push(o),function(){r=r.filter(function(i){return i!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(i){return a(i)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var i=r;r=[],i.forEach(a),o=r}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return s}function aD(t){t===void 0&&(t={});var e=sD(null);return e.options=$n({async:!0,ssr:!1},t),e}var AN=function(t){var e=t.sideCar,r=NN(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return g.createElement(n,$n({},r))};AN.isSideCarExport=!0;function oD(t,e){return t.useMedium(e),AN}var jN=aD(),Om=function(){},xh=g.forwardRef(function(t,e){var r=g.useRef(null),n=g.useState({onScrollCapture:Om,onWheelCapture:Om,onTouchMoveCapture:Om}),s=n[0],a=n[1],o=t.forwardProps,i=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,h=t.sideCar,m=t.noRelative,y=t.noIsolation,p=t.inert,v=t.allowPinchZoom,w=t.as,x=w===void 0?"div":w,b=t.gapMode,_=NN(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=h,E=rD([r,e]),N=$n($n({},_),s);return g.createElement(g.Fragment,null,d&&g.createElement(C,{sideCar:jN,removeScrollBar:u,shards:f,noRelative:m,noIsolation:y,inert:p,setCallbacks:a,allowPinchZoom:!!v,lockRef:r,gapMode:b}),o?g.cloneElement(g.Children.only(i),$n($n({},N),{ref:E})):g.createElement(x,$n({},N,{className:c,ref:E}),i))});xh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};xh.classNames={fullWidth:xd,zeroRight:yd};var iD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function lD(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=iD();return e&&t.setAttribute("nonce",e),t}function cD(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function uD(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var dD=function(){var t=0,e=null;return{add:function(r){t==0&&(e=lD())&&(cD(e,r),uD(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},fD=function(){var t=dD();return function(e,r){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},kN=function(){var t=fD(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},hD={left:0,top:0,right:0,gap:0},Lm=function(t){return parseInt(t||"",10)||0},mD=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Lm(r),Lm(n),Lm(s)]},pD=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return hD;var e=mD(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},gD=kN(),_i="data-scroll-locked",vD=function(t,e,r,n){var s=t.left,a=t.top,o=t.right,i=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(X5,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(i,"px ").concat(n,`;
  }
  body[`).concat(_i,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(i,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(yd,` {
    right: `).concat(i,"px ").concat(n,`;
  }
  
  .`).concat(xd,` {
    margin-right: `).concat(i,"px ").concat(n,`;
  }
  
  .`).concat(yd," .").concat(yd,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(xd," .").concat(xd,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(_i,`] {
    `).concat(Z5,": ").concat(i,`px;
  }
`)},ob=function(){var t=parseInt(document.body.getAttribute(_i)||"0",10);return isFinite(t)?t:0},yD=function(){g.useEffect(function(){return document.body.setAttribute(_i,(ob()+1).toString()),function(){var t=ob()-1;t<=0?document.body.removeAttribute(_i):document.body.setAttribute(_i,t.toString())}},[])},xD=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;yD();var a=g.useMemo(function(){return pD(s)},[s]);return g.createElement(gD,{styles:vD(a,!e,s,r?"":"!important")})},Sg=!1;if(typeof window<"u")try{var Gu=Object.defineProperty({},"passive",{get:function(){return Sg=!0,!0}});window.addEventListener("test",Gu,Gu),window.removeEventListener("test",Gu,Gu)}catch{Sg=!1}var zo=Sg?{passive:!1}:!1,wD=function(t){return t.tagName==="TEXTAREA"},TN=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!wD(t)&&r[e]==="visible")},bD=function(t){return TN(t,"overflowY")},_D=function(t){return TN(t,"overflowX")},ib=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=PN(t,n);if(s){var a=RN(t,n),o=a[1],i=a[2];if(o>i)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},SD=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},CD=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},PN=function(t,e){return t==="v"?bD(e):_D(e)},RN=function(t,e){return t==="v"?SD(e):CD(e)},ED=function(t,e){return t==="h"&&e==="rtl"?-1:1},ND=function(t,e,r,n,s){var a=ED(t,window.getComputedStyle(e).direction),o=a*n,i=r.target,c=e.contains(i),u=!1,d=o>0,f=0,h=0;do{if(!i)break;var m=RN(t,i),y=m[0],p=m[1],v=m[2],w=p-v-a*y;(y||w)&&PN(t,i)&&(f+=w,h+=y);var x=i.parentNode;i=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&i!==document.body||c&&(e.contains(i)||e===i));return(d&&Math.abs(f)<1||!d&&Math.abs(h)<1)&&(u=!0),u},qu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},lb=function(t){return[t.deltaX,t.deltaY]},cb=function(t){return t&&"current"in t?t.current:t},AD=function(t,e){return t[0]===e[0]&&t[1]===e[1]},jD=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},kD=0,Bo=[];function TD(t){var e=g.useRef([]),r=g.useRef([0,0]),n=g.useRef(),s=g.useState(kD++)[0],a=g.useState(kN)[0],o=g.useRef(t);g.useEffect(function(){o.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var p=J5([t.lockRef.current],(t.shards||[]).map(cb),!0).filter(Boolean);return p.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var i=g.useCallback(function(p,v){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var w=qu(p),x=r.current,b="deltaX"in p?p.deltaX:x[0]-w[0],_="deltaY"in p?p.deltaY:x[1]-w[1],C,E=p.target,N=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in p&&N==="h"&&E.type==="range")return!1;var A=ib(N,E);if(!A)return!0;if(A?C=N:(C=N==="v"?"h":"v",A=ib(N,E)),!A)return!1;if(!n.current&&"changedTouches"in p&&(b||_)&&(n.current=C),!C)return!0;var j=n.current||C;return ND(j,v,p,j==="h"?b:_)},[]),c=g.useCallback(function(p){var v=p;if(!(!Bo.length||Bo[Bo.length-1]!==a)){var w="deltaY"in v?lb(v):qu(v),x=e.current.filter(function(C){return C.name===v.type&&(C.target===v.target||v.target===C.shadowParent)&&AD(C.delta,w)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(cb).filter(Boolean).filter(function(C){return C.contains(v.target)}),_=b.length>0?i(v,b[0]):!o.current.noIsolation;_&&v.cancelable&&v.preventDefault()}}},[]),u=g.useCallback(function(p,v,w,x){var b={name:p,delta:v,target:w,should:x,shadowParent:PD(w)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(_){return _!==b})},1)},[]),d=g.useCallback(function(p){r.current=qu(p),n.current=void 0},[]),f=g.useCallback(function(p){u(p.type,lb(p),p.target,i(p,t.lockRef.current))},[]),h=g.useCallback(function(p){u(p.type,qu(p),p.target,i(p,t.lockRef.current))},[]);g.useEffect(function(){return Bo.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,zo),document.addEventListener("touchmove",c,zo),document.addEventListener("touchstart",d,zo),function(){Bo=Bo.filter(function(p){return p!==a}),document.removeEventListener("wheel",c,zo),document.removeEventListener("touchmove",c,zo),document.removeEventListener("touchstart",d,zo)}},[]);var m=t.removeScrollBar,y=t.inert;return g.createElement(g.Fragment,null,y?g.createElement(a,{styles:jD(s)}):null,m?g.createElement(xD,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function PD(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const RD=oD(jN,TD);var wh=g.forwardRef(function(t,e){return g.createElement(xh,$n({},t,{ref:e,sideCar:RD}))});wh.classNames=xh.classNames;var ID=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Wo=new WeakMap,Ku=new WeakMap,Yu={},$m=0,IN=function(t){return t&&(t.host||IN(t.parentNode))},OD=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=IN(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},LD=function(t,e,r,n){var s=OD(e,Array.isArray(t)?t:[t]);Yu[r]||(Yu[r]=new WeakMap);var a=Yu[r],o=[],i=new Set,c=new Set(s),u=function(f){!f||i.has(f)||(i.add(f),u(f.parentNode))};s.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(i.has(h))d(h);else try{var m=h.getAttribute(n),y=m!==null&&m!=="false",p=(Wo.get(h)||0)+1,v=(a.get(h)||0)+1;Wo.set(h,p),a.set(h,v),o.push(h),p===1&&y&&Ku.set(h,!0),v===1&&h.setAttribute(r,"true"),y||h.setAttribute(n,"true")}catch(w){console.error("aria-hidden: cannot operate on ",h,w)}})};return d(e),i.clear(),$m++,function(){o.forEach(function(f){var h=Wo.get(f)-1,m=a.get(f)-1;Wo.set(f,h),a.set(f,m),h||(Ku.has(f)||f.removeAttribute(n),Ku.delete(f)),m||f.removeAttribute(r)}),$m--,$m||(Wo=new WeakMap,Wo=new WeakMap,Ku=new WeakMap,Yu={})}},Iy=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=ID(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),LD(n,s,r,"aria-hidden")):function(){return null}},bh="Dialog",[ON,LN]=br(bh),[$D,_n]=ON(bh),$N=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,i=g.useRef(null),c=g.useRef(null),[u,d]=Ns({prop:n,defaultProp:s??!1,onChange:a,caller:bh});return l.jsx($D,{scope:e,triggerRef:i,contentRef:c,contentId:vs(),titleId:vs(),descriptionId:vs(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:o,children:r})};$N.displayName=bh;var MN="DialogTrigger",DN=g.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=_n(MN,r),a=Le(e,s.triggerRef);return l.jsx(ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":$y(s.open),...n,ref:a,onClick:ce(t.onClick,s.onOpenToggle)})});DN.displayName=MN;var Oy="DialogPortal",[MD,FN]=ON(Oy,{forceMount:void 0}),UN=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:s}=t,a=_n(Oy,e);return l.jsx(MD,{scope:e,forceMount:r,children:g.Children.map(n,o=>l.jsx(_r,{present:r||a.open,children:l.jsx(Qc,{asChild:!0,container:s,children:o})}))})};UN.displayName=Oy;var cf="DialogOverlay",VN=g.forwardRef((t,e)=>{const r=FN(cf,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,a=_n(cf,t.__scopeDialog);return a.modal?l.jsx(_r,{present:n||a.open,children:l.jsx(FD,{...s,ref:e})}):null});VN.displayName=cf;var DD=wo("DialogOverlay.RemoveScroll"),FD=g.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=_n(cf,r);return l.jsx(wh,{as:DD,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(ge.div,{"data-state":$y(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),_o="DialogContent",zN=g.forwardRef((t,e)=>{const r=FN(_o,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,a=_n(_o,t.__scopeDialog);return l.jsx(_r,{present:n||a.open,children:a.modal?l.jsx(UD,{...s,ref:e}):l.jsx(VD,{...s,ref:e})})});zN.displayName=_o;var UD=g.forwardRef((t,e)=>{const r=_n(_o,t.__scopeDialog),n=g.useRef(null),s=Le(e,r.contentRef,n);return g.useEffect(()=>{const a=n.current;if(a)return Iy(a)},[]),l.jsx(BN,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ce(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ce(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,i=o.button===0&&o.ctrlKey===!0;(o.button===2||i)&&a.preventDefault()}),onFocusOutside:ce(t.onFocusOutside,a=>a.preventDefault())})}),VD=g.forwardRef((t,e)=>{const r=_n(_o,t.__scopeDialog),n=g.useRef(!1),s=g.useRef(!1);return l.jsx(BN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,i;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(n.current||(i=r.triggerRef.current)==null||i.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),BN=g.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=t,i=_n(_o,r),c=g.useRef(null),u=Le(e,c);return Ry(),l.jsxs(l.Fragment,{children:[l.jsx(yh,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:l.jsx(tl,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":$y(i.open),...o,ref:u,onDismiss:()=>i.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(BD,{titleId:i.titleId}),l.jsx(HD,{contentRef:c,descriptionId:i.descriptionId})]})]})}),Ly="DialogTitle",WN=g.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=_n(Ly,r);return l.jsx(ge.h2,{id:s.titleId,...n,ref:e})});WN.displayName=Ly;var HN="DialogDescription",GN=g.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=_n(HN,r);return l.jsx(ge.p,{id:s.descriptionId,...n,ref:e})});GN.displayName=HN;var qN="DialogClose",KN=g.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=_n(qN,r);return l.jsx(ge.button,{type:"button",...n,ref:e,onClick:ce(t.onClick,()=>s.onOpenChange(!1))})});KN.displayName=qN;function $y(t){return t?"open":"closed"}var YN="DialogTitleWarning",[zD,QN]=XI(YN,{contentName:_o,titleName:Ly,docsSlug:"dialog"}),BD=({titleId:t})=>{const e=QN(YN),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},WD="DialogDescriptionWarning",HD=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${QN(WD).contentName}}.`;return g.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},JN=$N,GD=DN,XN=UN,My=VN,Dy=zN,Fy=WN,Uy=GN,Vy=KN,ZN="AlertDialog",[qD,tW]=br(ZN,[LN]),Rs=LN(),eA=t=>{const{__scopeAlertDialog:e,...r}=t,n=Rs(e);return l.jsx(JN,{...n,...r,modal:!0})};eA.displayName=ZN;var KD="AlertDialogTrigger",YD=g.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Rs(r);return l.jsx(GD,{...s,...n,ref:e})});YD.displayName=KD;var QD="AlertDialogPortal",tA=t=>{const{__scopeAlertDialog:e,...r}=t,n=Rs(e);return l.jsx(XN,{...n,...r})};tA.displayName=QD;var JD="AlertDialogOverlay",rA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Rs(r);return l.jsx(My,{...s,...n,ref:e})});rA.displayName=JD;var Si="AlertDialogContent",[XD,ZD]=qD(Si),e6=hC("AlertDialogContent"),nA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:r,children:n,...s}=t,a=Rs(r),o=g.useRef(null),i=Le(e,o),c=g.useRef(null);return l.jsx(zD,{contentName:Si,titleName:sA,docsSlug:"alert-dialog",children:l.jsx(XD,{scope:r,cancelRef:c,children:l.jsxs(Dy,{role:"alertdialog",...a,...s,ref:i,onOpenAutoFocus:ce(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[l.jsx(e6,{children:n}),l.jsx(r6,{contentRef:o})]})})})});nA.displayName=Si;var sA="AlertDialogTitle",aA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Rs(r);return l.jsx(Fy,{...s,...n,ref:e})});aA.displayName=sA;var oA="AlertDialogDescription",iA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Rs(r);return l.jsx(Uy,{...s,...n,ref:e})});iA.displayName=oA;var t6="AlertDialogAction",lA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Rs(r);return l.jsx(Vy,{...s,...n,ref:e})});lA.displayName=t6;var cA="AlertDialogCancel",uA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:s}=ZD(cA,r),a=Rs(r),o=Le(e,s);return l.jsx(Vy,{...a,...n,ref:o})});uA.displayName=cA;var r6=({contentRef:t})=>{const e=`\`${Si}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Si}\` by passing a \`${oA}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Si}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},n6=eA,s6=tA,dA=rA,fA=nA,hA=lA,mA=uA,pA=aA,gA=iA;const a6=n6,o6=s6,vA=g.forwardRef(({className:t,...e},r)=>l.jsx(dA,{className:S("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));vA.displayName=dA.displayName;const yA=g.forwardRef(({className:t,...e},r)=>l.jsxs(o6,{children:[l.jsx(vA,{}),l.jsx(fA,{ref:r,className:S("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));yA.displayName=fA.displayName;const xA=({className:t,...e})=>l.jsx("div",{className:S("flex flex-col space-y-2 text-center sm:text-left",t),...e});xA.displayName="AlertDialogHeader";const wA=({className:t,...e})=>l.jsx("div",{className:S("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});wA.displayName="AlertDialogFooter";const bA=g.forwardRef(({className:t,...e},r)=>l.jsx(pA,{ref:r,className:S("text-lg font-semibold",t),...e}));bA.displayName=pA.displayName;const _A=g.forwardRef(({className:t,...e},r)=>l.jsx(gA,{ref:r,className:S("text-sm text-muted-foreground",t),...e}));_A.displayName=gA.displayName;const SA=g.forwardRef(({className:t,...e},r)=>l.jsx(hA,{ref:r,className:S(Oc(),t),...e}));SA.displayName=hA.displayName;const CA=g.forwardRef(({className:t,...e},r)=>l.jsx(mA,{ref:r,className:S(Oc({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));CA.displayName=mA.displayName;var EA={exports:{}},NA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bi=g;function i6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var l6=typeof Object.is=="function"?Object.is:i6,c6=Bi.useState,u6=Bi.useEffect,d6=Bi.useLayoutEffect,f6=Bi.useDebugValue;function h6(t,e){var r=e(),n=c6({inst:{value:r,getSnapshot:e}}),s=n[0].inst,a=n[1];return d6(function(){s.value=r,s.getSnapshot=e,Mm(s)&&a({inst:s})},[t,r,e]),u6(function(){return Mm(s)&&a({inst:s}),t(function(){Mm(s)&&a({inst:s})})},[t]),f6(r),r}function Mm(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!l6(t,r)}catch{return!0}}function m6(t,e){return e()}var p6=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m6:h6;NA.useSyncExternalStore=Bi.useSyncExternalStore!==void 0?Bi.useSyncExternalStore:p6;EA.exports=NA;var g6=EA.exports;function v6(){return g6.useSyncExternalStore(y6,()=>!0,()=>!1)}function y6(){return()=>{}}var zy="Avatar",[x6,rW]=br(zy),[w6,AA]=x6(zy),jA=g.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[s,a]=g.useState("idle");return l.jsx(w6,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:l.jsx(ge.span,{...n,ref:e})})});jA.displayName=zy;var kA="AvatarImage",TA=g.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...a}=t,o=AA(kA,r),i=b6(n,a),c=_t(u=>{s(u),o.onImageLoadingStatusChange(u)});return pt(()=>{i!=="idle"&&c(i)},[i,c]),i==="loaded"?l.jsx(ge.img,{...a,ref:e,src:n}):null});TA.displayName=kA;var PA="AvatarFallback",RA=g.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...s}=t,a=AA(PA,r),[o,i]=g.useState(n===void 0);return g.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>i(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&a.imageLoadingStatus!=="loaded"?l.jsx(ge.span,{...s,ref:e}):null});RA.displayName=PA;function ub(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function b6(t,{referrerPolicy:e,crossOrigin:r}){const n=v6(),s=g.useRef(null),a=n?(s.current||(s.current=new window.Image),s.current):null,[o,i]=g.useState(()=>ub(a,t));return pt(()=>{i(ub(a,t))},[a,t]),pt(()=>{const c=f=>()=>{i(f)};if(!a)return;const u=c("loaded"),d=c("error");return a.addEventListener("load",u),a.addEventListener("error",d),e&&(a.referrerPolicy=e),typeof r=="string"&&(a.crossOrigin=r),()=>{a.removeEventListener("load",u),a.removeEventListener("error",d)}},[a,r,e]),o}var IA=jA,OA=TA,LA=RA;const uf=g.forwardRef(({className:t,...e},r)=>l.jsx(IA,{ref:r,className:S("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));uf.displayName=IA.displayName;const df=g.forwardRef(({className:t,...e},r)=>l.jsx(OA,{ref:r,className:S("aspect-square h-full w-full",t),...e}));df.displayName=OA.displayName;const ff=g.forwardRef(({className:t,...e},r)=>l.jsx(LA,{ref:r,className:S("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));ff.displayName=LA.displayName;const _6=({user:t,avatarUrl:e,isDarkMode:r,isCollapsed:n,onProfileClick:s})=>{if(!t)return null;const a=o=>o.split(" ").map(i=>i[0]).join("").toUpperCase().slice(0,2);return G.useEffect(()=>{console.log(" [SidebarUserProfileButton] avatarUrl:",e,"| user:",t)},[e,t]),n?l.jsx("div",{className:"flex flex-col items-center space-y-3 mb-4",children:l.jsx("button",{onClick:s,"aria-label":"Alterar credenciais",children:l.jsxs(uf,{className:"w-12 h-12 hover:ring-2 hover:ring-[#b5103c]/50 transition-all",children:[l.jsx(df,{src:e||void 0,alt:t.name,onError:o=>{o.currentTarget.src=void 0}}),l.jsx(ff,{className:"bg-[#b5103c] text-white text-sm font-semibold",children:a(t.name)})]})})}):l.jsxs("button",{onClick:s,className:S("flex items-center px-4 py-3 rounded-xl w-full mb-4 border transition-all duration-200",r?"bg-[#b5103c]/10 border-[#b5103c]/40 hover:bg-[#b5103c]/20":"bg-[#b5103c]/5 border-[#b5103c]/20 hover:bg-[#b5103c]/10"),style:{boxShadow:"0 0 0 1.5px #b5103c22"},"aria-label":"Alterar foto e credenciais",children:[l.jsxs(uf,{className:"w-10 h-10 mr-3",children:[l.jsx(df,{src:e||void 0,alt:t.name,onError:o=>{o.currentTarget.src=void 0},style:{objectFit:"cover",background:"transparent"}}),l.jsx(ff,{className:"bg-[#b5103c] text-white text-sm font-semibold",children:a(t.name)})]}),l.jsxs("div",{className:"flex flex-col items-start min-w-0",children:[l.jsx("span",{className:S("text-base font-medium truncate",r?"text-white":"text-gray-900"),children:t.name}),l.jsx("span",{className:S("text-sm truncate",r?"text-[#a1a1aa]":"text-gray-600"),children:t.role==="admin"?"Administrador":"Usurio"})]})]})},S6=({activeSection:t,onSectionChange:e,isDarkMode:r,toggleDarkMode:n,isVisible:s,isCollapsed:a,onToggleCollapse:o,showCollapseButton:i=!0})=>{const{user:c,logout:u}=Tt(),{getProfileByUserId:d}=B5(),[f,h]=g.useState(!1),m=c?d(c.id):null;g.useEffect(()=>{c&&console.log(" [SIDEBAR] userProfile.avatar_url:",m==null?void 0:m.avatar_url,"| user:",c)},[c,m==null?void 0:m.avatar_url]);const y=[{id:"dashboard",label:"Painel",icon:yy},{id:"mensagens",label:"Mensagens",icon:As},{id:"exams",label:"Exames",icon:pn},{id:"reports",label:"Relatrios",icon:LE},{id:"settings",label:"Configuraes",icon:ys}],p=async()=>{h(!1);try{await u()}catch(v){console.error("Erro ao fazer logout:",v)}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:S("h-full transition-all duration-300 flex flex-col",r?"bg-[#18181b] border-[#3f3f46]":"bg-white border-gray-200","border-r",s?"translate-x-0":"-translate-x-full md:translate-x-0",a?"w-16":"w-64"),children:[l.jsx("div",{className:"p-4 border-b border-inherit",children:l.jsxs("div",{className:"flex items-center justify-between",children:[a?i&&l.jsx(q,{variant:"ghost",size:"icon",onClick:o,className:S("h-8 w-8 mx-auto",r?"text-white hover:bg-[#b5103c]":"text-gray-600 hover:bg-gray-100"),children:l.jsx(Tw,{size:24,className:"text-[#b5103c]",strokeWidth:1.5})}):l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",children:l.jsx("img",{src:"/lovable-uploads/2e823263-bd82-49e9-84f6-6327c136da53.png",alt:"Villa Glamour Logo",className:"w-8 h-8 object-contain",style:{background:"transparent"}})}),l.jsxs("div",{children:[l.jsx("span",{className:S("font-bold text-lg",r?"text-white":"text-gray-900"),children:"Villa Glamour"}),l.jsx("p",{className:S("text-xs",r?"text-[#a1a1aa]":"text-gray-600"),children:"Sistema de Atendimento"})]})]}),i&&!a&&l.jsx(q,{variant:"ghost",size:"icon",onClick:o,className:S("h-8 w-8",r?"text-white hover:bg-[#b5103c]":"text-gray-600 hover:bg-gray-100"),children:l.jsx(Tw,{size:24,className:"text-[#b5103c]",strokeWidth:1.5})})]})}),l.jsx("nav",{className:"flex-1 p-4",children:l.jsx("div",{className:"space-y-2",children:y.map(v=>l.jsxs("button",{onClick:()=>e(v.id),className:S("w-full flex items-center space-x-3 px-3 py-3 rounded-xl text-left transition-all duration-200",t===v.id?"bg-[#b5103c] text-white shadow-lg":r?"text-white hover:bg-[#b5103c] hover:text-white":"text-gray-700 hover:bg-gray-100",a&&"justify-center px-2"),children:[l.jsx(v.icon,{size:a?28:20,className:t===v.id?"text-white":"text-[#b5103c]",strokeWidth:1.5}),!a&&l.jsx("span",{className:"font-medium",children:v.label})]},v.id))})}),l.jsxs("div",{className:"p-4 border-t border-inherit",children:[l.jsx(_6,{user:c,avatarUrl:m==null?void 0:m.avatar_url,isDarkMode:r,isCollapsed:a,onProfileClick:()=>e("credentials")}),l.jsxs("div",{className:S("space-y-2",a?"flex flex-col items-center space-y-3":""),children:[l.jsxs(q,{variant:"ghost",size:a?"icon":"sm",onClick:n,className:S(a?"w-10 h-10":"w-full justify-start",r?"text-[#a1a1aa] hover:bg-[#18181b]":"text-gray-600 hover:bg-gray-100"),children:[r?l.jsx(OE,{size:a?24:18,className:"text-[#b5103c]",strokeWidth:1.5}):l.jsx(kE,{size:a?24:18,className:"text-[#b5103c]",strokeWidth:1.5}),!a&&l.jsx("span",{className:"ml-3 font-medium",children:r?"Modo Claro":"Modo Escuro"})]}),l.jsxs(q,{variant:"ghost",size:a?"icon":"sm",onClick:()=>h(!0),className:S(a?"w-10 h-10":"w-full justify-start","text-red-600 hover:bg-red-50 hover:text-red-700",r&&"hover:bg-red-900/20"),children:[l.jsx(ih,{size:a?24:18,strokeWidth:1.5}),!a&&l.jsx("span",{className:"ml-3 font-medium",children:"Sair"})]})]})]})]}),l.jsx(a6,{open:f,onOpenChange:h,children:l.jsxs(yA,{className:S(r?"bg-[#18181b] border-[#3f3f46]":"bg-white"),children:[l.jsxs(xA,{children:[l.jsx(bA,{className:S(r?"text-white":"text-gray-900"),children:"Confirmar Logout"}),l.jsx(_A,{className:S(r?"text-[#a1a1aa]":"text-gray-600"),children:"Tem certeza que deseja sair do sistema?"})]}),l.jsxs(wA,{children:[l.jsx(CA,{className:S(r?"border-[#3f3f46] text-[#a1a1aa] hover:bg-[#27272a]":""),children:"Cancelar"}),l.jsx(SA,{onClick:p,className:"bg-red-600 hover:bg-red-700 text-white",children:"Sair"})]})]})})]})},C6=({activeSection:t,onSectionChange:e,isDarkMode:r})=>{const n=[{id:"dashboard",icon:hL,label:"Painel"},{id:"mensagens",icon:As,label:"Mensagens"},{id:"exames",icon:pn,label:"Exames"},{id:"settings",icon:ys,label:"Config"}];return l.jsx("div",{className:S("md:hidden fixed bottom-0 left-0 right-0 z-50 border-t",r?"bg-[#09090b] border-[#3f3f46]":"bg-white border-gray-200"),children:l.jsx("div",{className:"flex items-center justify-around py-2 px-1 safe-area-bottom",children:n.map(s=>{const a=s.icon,o=t===s.id;return l.jsxs("button",{onClick:()=>e(s.id),className:S("flex flex-col items-center justify-center py-1 px-2 rounded-lg transition-colors min-h-[60px]",o?"text-[#b5103c]":r?"text-gray-400":"text-gray-600"),children:[l.jsx(a,{size:20,className:S("mb-1",o&&"text-[#b5103c]")}),l.jsx("span",{className:S("text-xs font-medium",o&&"text-[#b5103c]"),children:s.label})]},s.id)})})})},Io=()=>{const{user:t}=Tt(),e=()=>(t==null?void 0:t.role)==="admin",r=()=>(t==null?void 0:t.role)==="admin",n=()=>(t==null?void 0:t.role)==="admin",s=()=>!!t,a=()=>(t==null?void 0:t.role)==="admin",o=()=>{if(!t)return[];if(t.role==="admin")return["chat","canarana","souto-soares","joao-dourado","america-dourada","gerente-lojas","gerente-externo"];if(t.role==="manager_external")return["chat","gerente-externo"];if(t.role==="manager_store")return["canarana","souto-soares","joao-dourado","america-dourada","gerente-lojas"];if(t.role==="salesperson"){const u=["chat"],d=t.assignedChannels||[];return u.push(...d.filter(Boolean)),Array.from(new Set(u))}return["chat"]};return{canManageUsers:e,canAccessAuditHistory:r,canManageTabs:n,canAccessCredentials:s,canAccessReports:a,canAccessChannel:u=>o().includes(u),canSendMessage:()=>!!t,getAccessibleChannels:o}},$A=()=>{const[t,e]=g.useState(!1),{toast:r}=Jt(),n=(d,f)=>`conversation_status_${d}_${f}`,s=g.useCallback((d,f)=>{const h=n(d,f),m=localStorage.getItem(h);if(m)try{const y=JSON.parse(m);return{status:y.status||"unread",lastActivity:y.lastActivity||new Date().toISOString(),lastViewed:y.lastViewed||new Date().toISOString()}}catch(y){console.error(" [STATUS] Error parsing saved status:",y)}return{status:"unread",lastActivity:new Date().toISOString(),lastViewed:new Date().toISOString()}},[]),a=g.useCallback((d,f,h)=>{const m=n(d,f);localStorage.setItem(m,JSON.stringify(h));const y="conversation_stats_cache",p=JSON.parse(localStorage.getItem(y)||"{}");p[d]||(p[d]={}),p[d][f]=h,localStorage.setItem(y,JSON.stringify(p))},[]);g.useEffect(()=>{const d=()=>{console.log(" [STATUS] Checking for auto-resolve candidates");const h=new Date,m=new Date(h.getTime()-24*60*60*1e3);Object.keys(localStorage).forEach(y=>{if(y.startsWith("conversation_status_"))try{const p=JSON.parse(localStorage.getItem(y)||"{}");if(p.status==="in_progress"&&p.lastActivity&&new Date(p.lastActivity)<m){const w={...p,status:"resolved"};localStorage.setItem(y,JSON.stringify(w)),console.log(` [STATUS] Auto-resolved conversation: ${y}`)}}catch(p){console.error(" [STATUS] Error in auto-resolve:",p)}})};d();const f=setInterval(d,60*60*1e3);return()=>clearInterval(f)},[]);const o=g.useCallback(async(d,f,h,m=!0)=>{if(!d||!f)return console.error(" [STATUS] Missing channelId or conversationId"),!1;try{e(!0),console.log(` [STATUS] Updating conversation ${f} in ${d} to ${h}`);const p={...s(d,f),status:h,lastActivity:new Date().toISOString()};if(a(d,f,p),h==="in_progress"||h==="resolved")try{const{error:v}=await ne.rpc("mark_messages_as_read",{table_name:`${d}_conversas`,p_session_id:f});v?console.error(" [STATUS] Error marking messages as read:",v):console.log(" [STATUS] Messages marked as read in database")}catch(v){console.error(" [STATUS] Database error:",v)}return m&&r({title:"Status atualizado",description:`Conversa marcada como ${{unread:"no lida",in_progress:"em andamento",resolved:"resolvida"}[h]}`}),console.log(" [STATUS] Status updated successfully"),!0}catch(y){return console.error(" [STATUS] Error updating conversation status:",y),m&&r({title:"Erro",description:"Erro ao atualizar status da conversa",variant:"destructive"}),!1}finally{e(!1)}},[r,s,a]),i=g.useCallback((d,f)=>s(d,f).status,[s]),c=g.useCallback(async(d,f)=>{console.log(` [STATUS] Marking conversation ${f} as viewed`);const h=s(d,f);if(h.status==="unread")await o(d,f,"in_progress",!1);else{const m={...h,lastViewed:new Date().toISOString()};a(d,f,m)}},[s,o,a]),u=g.useCallback(()=>JSON.parse(localStorage.getItem("conversation_stats_cache")||"{}"),[]);return{updateConversationStatus:o,getConversationStatus:i,markConversationAsViewed:c,getAllConversationStats:u,updating:t}};class E6{constructor(e){Ee(this,"tableName");this.tableName=e}getTableName(){return this.tableName}async findAll(e){const r=ne.from(this.tableName).select("*").order("id",{ascending:!1});e&&r.limit(e);const{data:n,error:s}=await r;if(s)throw console.error(` [BASE_REPOSITORY] Error fetching from ${this.tableName}:`,s),s;return n||[]}async findById(e){const{data:r,error:n}=await ne.from(this.tableName).select("*").eq("id",e).maybeSingle();if(n)throw console.error(` [BASE_REPOSITORY] Error fetching by ID from ${this.tableName}:`,n),n;return r}async create(e){const{data:r,error:n}=await ne.from(this.tableName).insert(e).select().single();if(n)throw console.error(` [BASE_REPOSITORY] Error creating in ${this.tableName}:`,n),n;return r}async update(e,r){const{data:n,error:s}=await ne.from(this.tableName).update(r).eq("id",e).select().single();if(s)throw console.error(` [BASE_REPOSITORY] Error updating in ${this.tableName}:`,s),s;return n}async delete(e){const{error:r}=await ne.from(this.tableName).delete().eq("id",e);if(r)throw console.error(` [BASE_REPOSITORY] Error deleting from ${this.tableName}:`,r),r}}class N6 extends E6{constructor(e){super(e)}mapDatabaseRowToRawMessage(e){var n;const r=e.Nome_do_contato||e.nome_do_contato||"Contato Annimo";return{id:((n=e.id)==null?void 0:n.toString())||"",session_id:e.session_id||"",message:e.message||"",sender:this.determineSender(e),timestamp:e.read_at||new Date().toISOString(),content:e.message||"",tipo_remetente:e.tipo_remetente,mensagemtype:e.mensagemtype,Nome_do_contato:r,nome_do_contato:r,media_base64:e.media_base64,read_at:e.read_at,is_read:e.is_read}}determineSender(e){return e.tipo_remetente==="USUARIO_INTERNO"||e.tipo_remetente==="Yelena-ai"?"agent":"customer"}async findAll(e=50){console.log(` [MESSAGE_REPOSITORY] Fetching ${e} messages from ${this.tableName}`);try{const{data:r,error:n}=await ne.from(this.tableName).select("*").order("id",{ascending:!1}).limit(Math.min(e,100));if(n)return console.error(` [MESSAGE_REPOSITORY] Error fetching from ${this.tableName}:`,n),[];const s=(r||[]).map(a=>this.mapDatabaseRowToRawMessage(a));return console.log(` [MESSAGE_REPOSITORY] Successfully fetched ${s.length} messages from ${this.tableName}`),s}catch(r){return console.error(` [MESSAGE_REPOSITORY] Error in findAll for ${this.tableName}:`,r),[]}}async findByPhoneNumber(e){console.log(` [MESSAGE_REPOSITORY] Finding messages by phone ${e} in ${this.tableName}`);try{const{data:r,error:n}=await ne.from(this.tableName).select("*").ilike("session_id",`%${e}%`).order("id",{ascending:!0}).limit(100);if(n)return console.error(` [MESSAGE_REPOSITORY] Error fetching by phone from ${this.tableName}:`,n),[];const s=(r||[]).map(a=>this.mapDatabaseRowToRawMessage(a));return console.log(` [MESSAGE_REPOSITORY] Found ${s.length} messages for phone ${e}`),s}catch(r){return console.error(" [MESSAGE_REPOSITORY] Error in findByPhoneNumber:",r),[]}}async insertMessage(e,r,n){const s={session_id:e,message:r,...this.tableName==="yelena_ai_conversas"||this.tableName==="gerente_externo_conversas"?{Nome_do_contato:n||"Contato Annimo"}:{nome_do_contato:n||"Contato Annimo"},read_at:new Date().toISOString(),mensagemtype:"conversation",tipo_remetente:"sistema"};console.log(` [MESSAGE_REPOSITORY] Inserting message into ${this.tableName}`);try{const a=await this.create(s);return this.mapDatabaseRowToRawMessage(a)}catch(a){throw console.error(" [MESSAGE_REPOSITORY] Error inserting message:",a),a}}async findMessagesAfterTimestamp(e){console.log(` [MESSAGE_REPOSITORY] Finding messages after ${e} in ${this.tableName}`);try{const{data:r,error:n}=await ne.from(this.tableName).select("*").gt("read_at",e).order("id",{ascending:!0}).limit(50);if(n)return console.error(` [MESSAGE_REPOSITORY] Error fetching messages after timestamp from ${this.tableName}:`,n),{data:null,error:n};const s=(r||[]).map(a=>this.mapDatabaseRowToRawMessage(a));return console.log(` [MESSAGE_REPOSITORY] Found ${s.length} new messages after ${e}`),{data:s,error:null}}catch(r){return console.error(" [MESSAGE_REPOSITORY] Error in findMessagesAfterTimestamp:",r),{data:null,error:r}}}async markAsRead(e){console.log(` [MESSAGE_REPOSITORY] Marking messages as read for session ${e}`);try{const r={read_at:new Date().toISOString()};this.tableName!=="yelena_ai_conversas"&&(r.is_read=!0);const{error:n}=await ne.from(this.tableName).update(r).eq("session_id",e);if(n)throw console.error(" [MESSAGE_REPOSITORY] Error marking messages as read:",n),n;console.log(` [MESSAGE_REPOSITORY] Successfully marked messages as read for session ${e}`)}catch(r){throw console.error(" [MESSAGE_REPOSITORY] Error in markAsRead:",r),r}}}const _h=t=>({"af1e5797-edc6-4ba3-a57a-25cf7297c4d6":"yelena_ai_conversas","011b69ba-cf25-4f63-af2e-4ad0260d9516":"canarana_conversas","b7996f75-41a7-4725-8229-564f31868027":"souto_soares_conversas","621abb21-60b2-4ff2-a0a6-172a94b4b65c":"joao_dourado_conversas","64d8acad-c645-4544-a1e6-2f0825fae00b":"america_dourada_conversas","d8087e7b-5b06-4e26-aa05-6fc51fd4cdce":"gerente_lojas_conversas","d2892900-ca8f-4b08-a73f-6b7aa5866ff7":"gerente_externo_conversas",chat:"yelena_ai_conversas",canarana:"canarana_conversas","souto-soares":"souto_soares_conversas","joao-dourado":"joao_dourado_conversas","america-dourada":"america_dourada_conversas","gerente-lojas":"gerente_lojas_conversas","gerente-externo":"gerente_externo_conversas"})[t]||"yelena_ai_conversas",MA=t=>({"af1e5797-edc6-4ba3-a57a-25cf7297c4d6":"Yelena AI","011b69ba-cf25-4f63-af2e-4ad0260d9516":"Canarana","b7996f75-41a7-4725-8229-564f31868027":"Souto Soares","621abb21-60b2-4ff2-a0a6-172a94b4b65c":"Joo Dourado","64d8acad-c645-4544-a1e6-2f0825fae00b":"Amrica Dourada","d8087e7b-5b06-4e26-aa05-6fc51fd4cdce":"Gerente Lojas","d2892900-ca8f-4b08-a73f-6b7aa5866ff7":"Gerente Externo",chat:"Yelena AI",canarana:"Canarana","souto-soares":"Souto Soares","joao-dourado":"Joo Dourado","america-dourada":"Amrica Dourada","gerente-lojas":"Gerente Lojas","gerente-externo":"Gerente Externo"})[t]||t,Lt=class Lt{constructor(e){Ee(this,"repositories",new Map);Ee(this,"channelId");this.channelId=e||""}getRepository(e){const r=e||this.channelId;if(!this.repositories.has(r)){const n=_h(r);this.repositories.set(r,new N6(n))}return this.repositories.get(r)}getCacheKey(e,r={}){return`${this.channelId}-${e}-${JSON.stringify(r)}`}getFromCache(e){const r=Lt.queryCache.get(e);return r&&Date.now()-r.timestamp<Lt.CACHE_DURATION?(console.log(` [MESSAGE_SERVICE] Cache hit for ${e}`),r.data):null}setCache(e,r){Lt.queryCache.set(e,{data:r,timestamp:Date.now()})}async getMessagesForChannel(e=50){const r=this.getCacheKey("getMessages",{limit:e}),n=this.getFromCache(r);if(n)return n;const s=this.getRepository();console.log(` [MESSAGE_SERVICE] Getting messages for channel ${this.channelId} from table ${s.getTableName()}`);try{const a=await s.findAll(e);return this.setCache(r,a),a}catch(a){return console.error(` [MESSAGE_SERVICE] Error getting messages for channel ${this.channelId}:`,a),[]}}async saveMessage(e){const r=this.getRepository();console.log(` [MESSAGE_SERVICE] Saving message to channel ${this.channelId}`);try{const n=await r.create(e);return Lt.queryCache.clear(),n}catch(n){throw console.error(` [MESSAGE_SERVICE] Error saving message to channel ${this.channelId}:`,n),n}}async getMessagesByPhoneNumber(e){const r=this.getCacheKey("getByPhone",{phoneNumber:e}),n=this.getFromCache(r);if(n)return n;const s=this.getRepository();console.log(` [MESSAGE_SERVICE] Getting messages by phone ${e} for channel ${this.channelId}`);try{const a=await s.findByPhoneNumber(e);return this.setCache(r,a),a}catch(a){return console.error(` [MESSAGE_SERVICE] Error getting messages by phone for channel ${this.channelId}:`,a),[]}}async getNewMessages(e){const r=this.getRepository();console.log(` [MESSAGE_SERVICE] Getting new messages after ${e} for channel ${this.channelId}`);try{const{data:n,error:s}=await r.findMessagesAfterTimestamp(e);return s?(console.error(" [MESSAGE_SERVICE] Error getting new messages:",s),[]):n||[]}catch(n){return console.error(` [MESSAGE_SERVICE] Error getting new messages for channel ${this.channelId}:`,n),[]}}async markConversationAsRead(e){const r=this.getRepository();console.log(` [MESSAGE_SERVICE] Marking conversation as read: ${e} in channel ${this.channelId}`);try{await r.markAsRead(e),Lt.queryCache.clear()}catch(n){console.error(" [MESSAGE_SERVICE] Error marking conversation as read:",n)}}async getConversations(e=20){const r=this.getCacheKey("getConversations",{limit:e}),n=this.getFromCache(r);if(n)return n;const a=this.getRepository().getTableName();try{console.log(` [MESSAGE_SERVICE] Getting conversations from ${a} with limit ${e}`);const{data:o,error:i}=await ne.from(a).select("*").order("read_at",{ascending:!1}).limit(e);if(i)return console.error(" [MESSAGE_SERVICE] Database error:",i),[];const c=new Map;(o||[]).forEach(d=>{const f=d.session_id;c.has(f)||c.set(f,{id:f,contact_name:d.nome_do_contato||d.Nome_do_contato||"Unknown",contact_phone:this.extractPhoneFromSessionId(f),last_message:d.message,last_message_time:d.read_at||new Date().toISOString(),status:d.is_read?"resolved":"unread",updated_at:d.read_at||new Date().toISOString(),unread_count:d.is_read?0:1})});const u=Array.from(c.values());return console.log(` [MESSAGE_SERVICE] Loaded ${u.length} conversations from ${a}`),this.setCache(r,u),u}catch(o){return console.error(" [MESSAGE_SERVICE] Error getting conversations:",o),[]}}async getMessagesByConversation(e,r=50){const n=this.getCacheKey("getByConversation",{sessionId:e,limit:r}),s=this.getFromCache(n);if(s)return s;const a=this.getRepository(),o=a.getTableName();try{const{data:i,error:c}=await ne.from(o).select("*").eq("session_id",e).order("read_at",{ascending:!0}).limit(r);if(c)return console.error(" [MESSAGE_SERVICE] Error getting messages by conversation:",c),{data:[]};const d={data:(i||[]).map(f=>a.mapDatabaseRowToRawMessage(f))};return this.setCache(n,d),d}catch(i){return console.error(" [MESSAGE_SERVICE] Error getting messages by conversation:",i),{data:[]}}}async getAllMessages(e=50){return this.getMessagesForChannel(e)}extractPhoneFromSessionId(e){const r=e.match(/(\d+)@/);return r?r[1]:e}createRealtimeSubscription(e,r=""){const s=this.getRepository().getTableName(),a=`${s}-${r}`;if(Lt.activeSubscriptions.has(a))return console.log(` [MESSAGE_SERVICE] Subscription already exists for ${a}, reusing`),Lt.activeSubscriptions.get(a);const o=ne.channel(`${s}-changes${r}`).on("postgres_changes",{event:"*",schema:"public",table:s},i=>{console.log(` [MESSAGE_SERVICE] Realtime update for ${s}:`,i),Lt.queryCache.clear(),e(i)});return Lt.activeSubscriptions.set(a,o),o}static unsubscribeChannel(e,r){const n=`${r}-${e}`,s=Lt.activeSubscriptions.get(n);s&&(console.log(` [MESSAGE_SERVICE] Unsubscribing from ${n}`),ne.removeChannel(s),Lt.activeSubscriptions.delete(n))}static clearCache(){Lt.queryCache.clear(),console.log(" [MESSAGE_SERVICE] Cache cleared")}async getChannelStats(){const e=this.getCacheKey("getStats"),r=this.getFromCache(e);if(r)return r;const n=this.getRepository();console.log(` [MESSAGE_SERVICE] Getting stats for channel ${this.channelId} from table ${n.getTableName()}`);try{const s=await this.getConversations(10),a={totalMessages:0,totalConversations:s.length,unreadMessages:s.filter(o=>o.status==="unread").length};return this.setCache(e,a),a}catch(s){return console.error(" [MESSAGE_SERVICE] Error getting channel stats:",s),{totalMessages:0,totalConversations:0,unreadMessages:0}}}async getNewMessagesAfterTimestamp(e){return this.getNewMessages(e)}async fetchMessages(e=50){return this.getMessagesForChannel(e)}};Ee(Lt,"activeSubscriptions",new Map),Ee(Lt,"queryCache",new Map),Ee(Lt,"CACHE_DURATION",3e4);let Sa=Lt;const A6=()=>{const[t,e]=g.useState({total:0,pending:0,inProgress:0,resolved:0,unreadMessages:0}),[r,n]=g.useState(!0),[s,a]=g.useState(null),{channels:o}=ul(),{getAccessibleChannels:i}=Io(),{getConversationStatus:c}=$A(),u=async()=>{try{n(!0),console.log(" [REAL_STATS] Starting optimized conversation statistics calculation");const d=i();console.log(" [REAL_STATS] Accessible channels:",d);const f={"Yelena-AI":"chat",Canarana:"canarana","Souto Soares":"souto-soares","Joo Dourado":"joao-dourado","Amrica Dourada":"america-dourada","Gustavo Gerente das Lojas":"gerente-lojas","Andressa Gerente Externo":"gerente-externo"},h=[];let m=null;console.log(" [REAL_STATS] Processing channels with delay to avoid overwhelming database...");for(let _=0;_<o.length;_++){const C=o[_];if(!C.isActive)continue;const E=f[C.name];if(console.log(` [REAL_STATS] Processing channel ${_+1}/${o.length}: ${C.name} -> ${E}`),!E){console.log(` [REAL_STATS] Channel ${C.name} not found in mapping, skipping`);continue}if(!d.includes(E)){console.log(` [REAL_STATS] Channel ${E} not accessible, skipping`);continue}try{const A=await new Sa(E).getConversations(15);console.log(` [REAL_STATS] Channel ${E}: found ${A.length} conversations`),A.forEach(j=>{const O=j.contact_phone;console.log(` [REAL_STATS] Processing conversation: ${O} - ${j.contact_name} in channel ${E}`);const F=c(E,j.id),P=`${E}-${j.id}`;j.last_message_time&&(!m||new Date(j.last_message_time)>new Date(m))&&(m=j.last_message_time),h.push({id:P,phone:O,name:j.contact_name||`Cliente ${O.slice(-4)}`,lastMessage:j.last_message||"Sem mensagem",lastMessageTime:j.last_message_time||"",channel:E,status:F}),console.log(` [REAL_STATS] Added conversation: ${P} for ${O} in ${E}`)}),_<o.length-1&&await new Promise(j=>setTimeout(j,500))}catch(N){console.error(` [REAL_STATS] Error loading stats for channel ${E}:`,N)}}let y=0,p=0,v=0,w=0;h.forEach(_=>{switch(console.log(` [REAL_STATS] Final processing for ${_.id}: phone=${_.phone}, status=${_.status}, channel=${_.channel}`),_.status){case"unread":y++,w++;break;case"in_progress":p++;break;case"resolved":v++;break;default:y++,w++;break}});const x=h.length;console.log(" [REAL_STATS] Final count summary:"),console.log(`   Total conversations across all channels: ${x}`),console.log(`   Pending: ${y}`),console.log(`   In Progress: ${p}`),console.log(`   Resolved: ${v}`),console.log(`   Unread Messages: ${w}`),console.log(`   Most recent activity: ${m}`);const b={total:x,pending:y,inProgress:p,resolved:v,unreadMessages:w};console.log(" [REAL_STATS] Final statistics:",b),e(b),a(m)}catch(d){console.error(" [REAL_STATS] Error loading real conversation statistics:",d),e({total:0,pending:0,inProgress:0,resolved:0,unreadMessages:0})}finally{n(!1)}};return g.useEffect(()=>{if(o.length>0){u();const d=setInterval(u,3e5);return()=>clearInterval(d)}},[o]),{stats:t,loading:r,lastActivity:s,refreshStats:u}},j6=({isDarkMode:t,onCardClick:e})=>{const{stats:r,loading:n}=A6();console.log(" [STATS_CARDS] Rendering with stats:",r);const s=[{title:"Total",value:r.total,filter:"total",icon:As,color:"bg-[#b5103c]"},{title:"Pendentes",value:r.pending,filter:"pending",icon:iL,color:"bg-red-500"},{title:"Em Andamento",value:r.inProgress,filter:"inProgress",icon:SE,color:"bg-yellow-500"},{title:"Resolvidas",value:r.resolved,filter:"resolved",icon:wy,color:"bg-green-500"}];return n?l.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((a,o)=>l.jsxs("div",{className:S("rounded-lg border p-4 flex flex-col justify-between min-h-[100px] animate-pulse",t?"bg-[#18181b] border-[#3f3f46]":"bg-white border-gray-200"),children:[l.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),l.jsx("div",{className:"h-8 bg-gray-300 rounded"})]},o))}):l.jsx("div",{className:"space-y-4",children:l.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:s.map((a,o)=>{const i=e&&a.filter!=="total",c=a.icon;return console.log(` [STATS_CARDS] Card ${a.title}: ${a.value}`),l.jsx("div",{onClick:()=>i&&e(a.filter),className:S("rounded-lg border p-4 flex flex-col justify-between min-h-[100px] transition-all duration-200",t?"bg-[#18181b] border-[#3f3f46]":"bg-white border-gray-200",i&&"cursor-pointer hover:shadow-lg transform hover:scale-105",i&&t&&"hover:bg-[#1f1f23]",i&&!t&&"hover:bg-gray-50"),children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(c,{size:16,className:"text-[#b5103c]"}),l.jsx("h3",{className:S("text-xs font-medium",t?"text-gray-400":"text-gray-600"),children:a.title})]}),l.jsx("p",{className:S("text-2xl font-bold",t?"text-white":"text-gray-900"),children:a.value})]}),i&&l.jsx("div",{className:S("text-xs opacity-0 transition-opacity hover:opacity-100",t?"text-zinc-400":"text-gray-500"),children:"Clique para filtrar"})]})},o)})})})},k6=({isDarkMode:t,totalExams:e,examsThisMonth:r,examsThisWeek:n})=>{const s=[{title:"Total de Exames",value:e,icon:Po,bgColor:"bg-[#b5103c]/10"},{title:"Este Ms",value:r,icon:LE,bgColor:"bg-[#b5103c]/10"},{title:"Esta Semana",value:n,icon:SE,bgColor:"bg-[#b5103c]/10"}];return l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:s.map((a,o)=>l.jsx(Re,{className:S("transition-all duration-200",t?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"),children:l.jsx(Ie,{className:"p-4",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:S("p-2 rounded-lg",a.bgColor),children:l.jsx(a.icon,{className:"w-4 h-4 text-[#b5103c]"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:S("text-xs font-medium",t?"text-zinc-400":"text-gray-600"),children:a.title}),l.jsx("p",{className:S("text-lg font-bold",t?"text-zinc-100":"text-gray-900"),children:a.value})]})]})})},o))})},T6=oh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function gn({className:t,variant:e,...r}){return l.jsx("div",{className:S(T6({variant:e}),t),...r})}class DA{constructor(e){Ee(this,"messageService");Ee(this,"channelId");this.channelId=e,this.messageService=new Sa(e)}async getConversations(){try{return console.log(` [CHANNEL_SERVICE] Getting conversations for channel: ${this.channelId}`),await this.messageService.getConversations()}catch(e){throw console.error(` [CHANNEL_SERVICE] Error getting conversations for channel ${this.channelId}:`,e),e}}async getMessages(e){try{return console.log(` [CHANNEL_SERVICE] Getting messages for channel: ${this.channelId}`),await this.messageService.getMessagesForChannel(e)}catch(r){throw console.error(` [CHANNEL_SERVICE] Error getting messages for channel ${this.channelId}:`,r),r}}async fetchMessages(e){return this.getMessages(e)}async getNewMessagesAfterTimestamp(e){try{return await this.messageService.getNewMessagesAfterTimestamp(e)}catch(r){throw console.error(` [CHANNEL_SERVICE] Error getting new messages for channel ${this.channelId}:`,r),r}}async getChannelStats(){try{return await this.messageService.getChannelStats()}catch(e){throw console.error(` [CHANNEL_SERVICE] Error getting stats for channel ${this.channelId}:`,e),e}}}const ds=class ds{constructor(e){this.context=e}static log(e,r,n,s){const a={debug:0,info:1,warn:2,error:3};if(a[e]>=a[this.logLevel]){const o=new Date().toISOString(),i=`[${o}] [${e.toUpperCase()}] [${r}] ${n}`,c={timestamp:o,level:e,category:r,message:n,data:s};this.logs.push(c),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),s?console[e](i,s):console[e](i)}}static debug(e,r,n){this.log("debug",e,r,n)}static info(e,r,n){this.log("info",e,r,n)}static warn(e,r,n){this.log("warn",e,r,n)}static error(e,r,n){this.log("error",e,r,n)}debug(e,r){ds.debug(this.context,e,r)}info(e,r){ds.info(this.context,e,r)}warn(e,r){ds.warn(this.context,e,r)}error(e,r){ds.error(this.context,e,r)}static setLogLevel(e){this.logLevel=e}static getLogs(e){let r=[...this.logs];if(e){if(e.level){const n={debug:0,info:1,warn:2,error:3},s=n[e.level];r=r.filter(a=>n[a.level]>=s)}e.category&&(r=r.filter(n=>n.category.toLowerCase().includes(e.category.toLowerCase()))),e.channelId&&(r=r.filter(n=>n.channelId===e.channelId)),e.searchTerm&&(r=r.filter(n=>n.message.toLowerCase().includes(e.searchTerm.toLowerCase())||n.data&&JSON.stringify(n.data).toLowerCase().includes(e.searchTerm.toLowerCase())))}return r.reverse()}static exportLogs(e){const r=this.getLogs(e);return JSON.stringify(r,null,2)}static clearLogs(){this.logs=[]}};Ee(ds,"logs",[]),Ee(ds,"maxLogs",1e3),Ee(ds,"logLevel","info");let ze=ds;const P6=t=>{const[e,r]=g.useState([]),[n,s]=g.useState(!0),[a,o]=g.useState(!1),[i,c]=g.useState(null),u=g.useCallback(async(f=!1)=>{if(!t){ze.warn("useChannelConversationsRefactored","Nenhum channelId fornecido"),r([]),s(!1);return}try{f?(o(!0),ze.info("useChannelConversationsRefactored",`Atualizao manual para o canal: ${t}`)):s(!0),c(null),ze.info("useChannelConversationsRefactored",`Carregando conversas para o canal: ${t}`);const m=await new DA(t).getConversations();ze.info("useChannelConversationsRefactored","Conversas carregadas com sucesso",{count:m.length}),r(m)}catch(h){ze.error("useChannelConversationsRefactored",`Erro ao carregar conversas para o canal ${t}`,{error:h}),c(h instanceof Error?h.message:"Erro desconhecido"),r([])}finally{s(!1),o(!1)}},[t]),d=g.useCallback(()=>{ze.info("useChannelConversationsRefactored",`Atualizao manual acionada para o canal: ${t}`),u(!0)},[t,u]);return g.useEffect(()=>{u();let f=null;if(t){const h=new Sa(t),m=`-conversations-${Date.now()}`;f=h.createRealtimeSubscription(y=>{ze.info("useChannelConversationsRefactored","Nova mensagem via realtime:",y),u()},m),f.subscribe(),ze.info("useChannelConversationsRefactored",`Realtime subscription iniciado para o canal ${t}`)}return()=>{if(f&&t){ze.info("useChannelConversationsRefactored",`Realtime subscription interrompido para o canal ${t}`);const y=new Sa(t).getRepository().getTableName();Sa.unsubscribeChannel(`-conversations-${Date.now()}`,y)}}},[t,u]),{conversations:e,loading:n,refreshing:a,error:i,refreshConversations:d}},FA=()=>{const[t,e]=g.useState(!1),{toast:r}=Jt();g.useEffect(()=>{const a=()=>{["af1e5797-edc6-4ba3-a57a-25cf7297c4d6","011b69ba-cf25-4f63-af2e-4ad0260d9516","b7996f75-41a7-4725-8229-564f31868027","621abb21-60b2-4ff2-a0a6-172a94b4b65c","64d8acad-c645-4544-a1e6-2f0825fae00b","d8087e7b-5b06-4e26-aa05-6fc51fd4cdce","d2892900-ca8f-4b08-a73f-6b7aa5866ff7","1e233898-5235-40d7-bf9c-55d46e4c16a1"].forEach(c=>{Object.keys(localStorage).forEach(u=>{if(u.startsWith(`conversation_status_${c}_`)){const d=u.split("_").pop();if(localStorage.getItem(u)!=="resolved"&&d){const h=`last_activity_${c}_${d}`,m=localStorage.getItem(h);if(m){const y=new Date(m),p=new Date;p.setHours(p.getHours()-24),y<p&&(localStorage.setItem(u,"resolved"),console.log(` Auto-resolved conversation ${d} after 24h`))}}}})})};a();const o=setInterval(a,60*60*1e3);return()=>clearInterval(o)},[]);const n=g.useCallback(async(a,o,i,c=!0)=>{if(!a||!o)return console.error(" [CONVERSATION_STATUS] Missing channelId or conversationId"),!1;try{e(!0);const u=_h(a);if(i==="in_progress"||i==="resolved"){const{error:h}=await ne.rpc("mark_messages_as_read",{table_name:u,p_session_id:o});h&&console.error(" [CONVERSATION_STATUS] Error marking messages as read:",h)}const d=`conversation_status_${a}_${o}`;localStorage.setItem(d,i);const f=`last_activity_${a}_${o}`;return localStorage.setItem(f,new Date().toISOString()),c&&r({title:"Status atualizado",description:`Conversa marcada como ${{unread:"no lida",in_progress:"em andamento",resolved:"resolvida"}[i]}`}),!0}catch(u){return console.error(" [CONVERSATION_STATUS] Error updating conversation status:",u),r({title:"Erro",description:"Erro ao atualizar status da conversa",variant:"destructive"}),!1}finally{e(!1)}},[r]),s=g.useCallback((a,o)=>{const i=`conversation_status_${a}_${o}`;return localStorage.getItem(i)||"unread"},[]);return{updateConversationStatus:n,getConversationStatus:s,updating:t}},R6=t=>{const{conversations:e,loading:r}=P6(t),{getConversationStatus:n}=FA(),[s,a]=g.useState({total:0,pending:0,inProgress:0,resolved:0});return g.useEffect(()=>{if(!r&&e.length>0){let o=0,i=0,c=0;e.forEach(u=>{switch(n(t,u.id)){case"unread":o++;break;case"in_progress":i++;break;case"resolved":c++;break}}),a({total:e.length,pending:o,inProgress:i,resolved:c})}else r||a({total:0,pending:0,inProgress:0,resolved:0})},[e,r,t,n]),{counts:s,loading:r}},I6=t=>{const[e,r]=g.useState(null),[n,s]=g.useState(!0);return g.useEffect(()=>{(async()=>{if(!t){r(null),s(!1);return}try{s(!0),console.log(` [CHANNEL_ACTIVITY] Loading last activity for channel: ${t}`);const c=await new Sa(t).getConversations();let u=null;c.forEach(d=>{d.last_message_time&&(!u||new Date(d.last_message_time)>new Date(u))&&(u=d.last_message_time)}),console.log(` [CHANNEL_ACTIVITY] Channel ${t} last activity: ${u}`),r(u)}catch(i){console.error(` [CHANNEL_ACTIVITY] Error loading last activity for channel ${t}:`,i),r(null)}finally{s(!1)}})()},[t]),{lastActivity:e,lastActivityText:(()=>{if(!e)return"Sem atividade recente";try{const o=new Date,i=new Date(e),c=Math.floor((o.getTime()-i.getTime())/(1e3*60));if(c<1)return"Agora mesmo";if(c===1)return"1 minuto atrs";if(c<60)return`${c} minutos atrs`;const u=Math.floor(c/60);if(u===1)return"1 hora atrs";if(u<24)return`${u} horas atrs`;const d=Math.floor(u/24);return d===1?"1 dia atrs":`${d} dias atrs`}catch{return"Sem atividade recente"}})(),loading:n}},O6=()=>{const[t,e]=g.useState([]);return g.useEffect(()=>{const s=localStorage.getItem("pinnedChannels");s&&e(JSON.parse(s))},[]),{pinnedChannels:t,togglePin:s=>{const a=t.includes(s)?t.filter(o=>o!==s):[...t,s];e(a),localStorage.setItem("pinnedChannels",JSON.stringify(a))},isPinned:s=>t.includes(s)}},UA=({channelId:t,name:e,type:r,isDarkMode:n,onClick:s})=>{const{counts:a,loading:o}=R6(t),{lastActivityText:i,loading:c}=I6(t),{isPinned:u,togglePin:d}=O6(),f=o||c,h=u(t),m=a.pending+a.inProgress,y=_=>_.includes("Yelena")||_.includes("AI")?dg:_.includes("Andressa")||_.includes("Gustavo")?eu:_.includes("Canarana")||_.includes("Souto Soares")||_.includes("Joo Dourado")||_.includes("Amrica Dourada")?EL:dg,p=_=>_.includes("Yelena")||_.includes("AI")?"Yelena-AI":_.includes("Canarana")?"Canarana":_.includes("Souto Soares")?"Souto Soares":_.includes("Joo Dourado")?"Joo Dourado":_.includes("Amrica Dourada")?"Amrica Dourada":_.includes("Andressa")||_.includes("Gerente do Externo")?"Andressa Gerente Externo":_.includes("Gustavo")||_.includes("Gerente das Lojas")?"Gustavo Gerente das Lojas":_,v=_=>_.includes("Yelena")||_.includes("AI")?"IA Assistant":_.includes("Canarana")||_.includes("Souto Soares")||_.includes("Joo Dourado")||_.includes("Amrica Dourada")?"Loja":_.includes("Andressa")?"Gerente Externo":_.includes("Gustavo")?"Gerente":r,w=y(e),x=p(e),b=v(e);return f?l.jsx(Re,{className:S("cursor-pointer transition-all hover:shadow-md animate-pulse",n?"bg-[#18181b] border-[#3f3f46]":"bg-white border-gray-200"),children:l.jsx(Ie,{className:"p-4",children:l.jsx("div",{className:"h-20 bg-gray-300 rounded"})})}):l.jsx(Re,{className:S("cursor-pointer transition-all hover:shadow-md hover:scale-[1.01] relative group",n?"bg-[#18181b] border-[#3f3f46] hover:bg-[#27272a]":"bg-white border-gray-200 hover:bg-gray-50",h&&"ring-2 ring-[#b5103c]/30"),onClick:()=>s(t),children:l.jsxs(Ie,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:S("p-2 rounded-md relative",n?"bg-[#27272a]":"bg-gray-100"),children:[l.jsx(w,{size:18,className:"text-[#b5103c]"}),m>0&&l.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:m>99?"99+":m})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("h3",{className:S("font-medium text-sm truncate flex items-center gap-1",n?"text-white":"text-gray-900"),children:[x,h&&l.jsx(Pw,{size:12,className:"text-[#b5103c] fill-current"})]}),l.jsx("p",{className:S("text-xs",n?"text-gray-400":"text-gray-600"),children:b})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[a.total>0&&l.jsx(gn,{className:"bg-[#b5103c] text-white text-xs px-2 py-1",children:a.total}),l.jsx("button",{onClick:_=>{_.stopPropagation(),d(t)},className:S("p-1 rounded-md",h&&"opacity-100",n?"hover:bg-zinc-700":"hover:bg-gray-200"),children:l.jsx(Pw,{size:14,className:S(h?"text-[#b5103c] fill-current":n?"text-gray-400":"text-gray-600")})})]})]}),l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("p",{className:S("text-xs","text-gray-500"),children:f?"Carregando...":i})})]})})},L6=({isDarkMode:t,onChannelClick:e})=>{const{channels:r,loading:n}=ul(),{getAccessibleChannels:s}=Io(),{user:a}=Tt(),o=f=>({"Yelena-AI":"chat","ticas Villa Glamour":"chat",Canarana:"canarana","Souto Soares":"souto-soares","Joo Dourado":"joao-dourado","Amrica Dourada":"america-dourada","Gerente das Lojas":"gerente-lojas","Andressa Gerente Externo":"gerente-externo"})[f.name]||f.id,i=f=>({"Andressa Gerente Externo":"Andressa","Gerente das Lojas":"Gustavo","Yelena-AI":"ticas Villa Glamour"})[f.name]||f.name,c=s();let u=[];(a==null?void 0:a.role)==="admin"?u=r.filter(f=>f.isActive&&f.name!=="Pedro").map(f=>({...f,legacyId:o(f),displayName:i(f)})):u=r.filter(f=>f.isActive&&f.name!=="Pedro"&&c.includes(o(f))).map(f=>({...f,legacyId:o(f),displayName:i(f)}));const d=f=>{console.log(" Dashboard channel clicked:",f),e(f)};return n?l.jsx("div",{className:"space-y-4",children:[...Array(3)].map((f,h)=>l.jsx("div",{className:S("h-24 rounded-xl animate-pulse",t?"bg-[#18181b]":"bg-white")},h))}):l.jsxs(Re,{className:S("border-0 shadow-sm",t?"bg-[#18181b] border-[#3f3f46]":"bg-white border-gray-200"),children:[l.jsx(jt,{children:l.jsxs(kt,{className:S("text-xl flex items-center gap-3",t?"text-white":"text-gray-900"),children:[l.jsx(NE,{className:"text-[#b5103c]",size:24}),"Canais de Atendimento"]})}),l.jsx(Ie,{children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(f=>l.jsx(UA,{channelId:f.legacyId,name:f.displayName,type:"Canal de atendimento",isDarkMode:t,onClick:d},f.id))})})]})};class $6{static extractPhoneFromSessionId(e){if(!e)return"";const r=e.match(/(\d{10,15})/);return r?r[1]:e.replace(/@.*$/,"")}static isValidPhoneNumber(e){return/^\d{10,15}$/.test(e)}}class Cg{static resolveContactName(e,r,n,s=new Date().toISOString()){console.log(` [CONTACT_RESOLVER] Resolving name for phone: ${e}, provided: ${n}`);const a=this.contactCache.get(e);if(a)return console.log(` [CONTACT_RESOLVER] Using cached name: ${a.finalName} for ${e}`),a.finalName;if(n&&n.trim()){const i=n.trim(),c={phone:e,finalName:i,timestamp:s};return this.contactCache.set(e,c),this.pendingContacts.delete(e),console.log(` [CONTACT_RESOLVER] Name fixed from database for ${e}: ${i}`),i}const o=e.length>4?e.slice(-4):e;return console.log(` [CONTACT_RESOLVER] No name available, showing phone: ${o} for ${e}`),o}static forceResolveName(e,r){if(!r||!r.trim())return;const n=r.trim(),s={phone:e,finalName:n,timestamp:new Date().toISOString()};this.contactCache.set(e,s),this.pendingContacts.delete(e),console.log(` [CONTACT_RESOLVER] Forced name resolution for ${e}: ${n}`)}static getResolvedName(e){const r=this.contactCache.get(e);return r?r.finalName:null}static isPending(e){return this.pendingContacts.has(e)}static getStats(){return{resolved:this.contactCache.size,pending:this.pendingContacts.size}}static clearCache(){this.contactCache.clear(),this.pendingContacts.clear(),console.log(" [CONTACT_RESOLVER] Cache cleared")}static processPendingMessages(e){const r=this.pendingContacts.get(e)||[];return this.pendingContacts.delete(e),r}}Ee(Cg,"contactCache",new Map),Ee(Cg,"pendingContacts",new Map);class M6{static groupMessagesByPhone(e,r){console.log(` [CONVERSATION_GROUPER] Grouping messages by phone for channel: ${r}`);const n=new Map;e.forEach(a=>{if(!a.session_id)return;const o=$6.extractPhoneFromSessionId(a.session_id);if(!o)return;const i=Cg.getResolvedName(o)||a.Nome_do_contato||`Cliente ${o.slice(-4)}`,c=a.read_at||null,u=`${o}_${i}`;if(n.has(u)){const d=n.get(u);c&&(!d.last_message_time||c>d.last_message_time)&&n.set(u,{...d,last_message:a.message,last_message_time:c,updated_at:c})}else n.set(u,{id:u,contact_name:i,contact_phone:o,last_message:a.message,last_message_time:c,status:"unread",updated_at:c||new Date().toISOString(),unread_count:0})});const s=Array.from(n.values());return console.log(` [CONVERSATION_GROUPER] Grouped into ${s.length} conversations`),s}}const D6=()=>{const[t,e]=g.useState([]),[r,n]=g.useState(!0),{channels:s}=ul(),{getAccessibleChannels:a}=Io(),o=async()=>{try{n(!0);const i=a(),c={"Yelena-AI":"chat",Canarana:"canarana","Souto Soares":"souto-soares","Joo Dourado":"joao-dourado","Amrica Dourada":"america-dourada","Gerente das Lojas":"gerente-lojas","Gerente do Externo":"gerente-externo"},u=[];for(const f of s.filter(h=>h.isActive)){const h=c[f.name];if(!(!h||!i.includes(h)))try{const y=await new DA(h).fetchMessages();y.length>0&&M6.groupMessagesByPhone(y,h).forEach(v=>{const w=new Date(v.last_message_time||0),b=(new Date().getTime()-w.getTime())/(1e3*60*60);if(b<=24){let _="";b<1?_=`${Math.floor(b*60)}min`:b<24?_=`${Math.floor(b)}h`:_=`${Math.floor(b/24)}d`,u.push({id:`${h}-${v.contact_phone}-${w.getTime()}`,type:"new_message",title:"Nova mensagem",description:`${v.contact_name} enviou uma mensagem`,time:_,channelName:f.name,contactName:v.contact_name})}})}catch(m){console.error(`Erro ao carregar atividades do canal ${h}:`,m)}}const d=u.sort((f,h)=>{const m=parseInt(f.time),y=parseInt(h.time);return m-y}).slice(0,10);e(d)}catch(i){console.error("Erro ao carregar atividades recentes:",i)}finally{n(!1)}};return g.useEffect(()=>{if(s.length>0){o();const i=setInterval(o,12e4);return()=>clearInterval(i)}},[s]),{activities:t,loading:r,refreshActivities:o}},F6=({isDarkMode:t})=>{const{activities:e,loading:r}=D6(),n=s=>{switch(s){case"new_message":return vL;case"status_change":return NL;case"new_conversation":return eu;default:return ro}};return r?l.jsxs(Re,{className:S("border-0 shadow-sm",t?"bg-[#18181b] border-[#3f3f46]":"bg-white border-gray-200"),children:[l.jsx(jt,{children:l.jsxs(kt,{className:S("text-xl flex items-center gap-3",t?"text-white":"text-gray-900"),children:[l.jsx(ro,{className:"text-[#b5103c]",size:24}),"Atividades Recentes"]})}),l.jsx(Ie,{children:l.jsx("div",{className:"space-y-3",children:[...Array(5)].map((s,a)=>l.jsxs("div",{className:"flex items-center space-x-3 animate-pulse",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"h-4 bg-gray-300 rounded mb-1"}),l.jsx("div",{className:"h-3 bg-gray-300 rounded w-2/3"})]}),l.jsx("div",{className:"w-12 h-3 bg-gray-300 rounded"})]},a))})})]}):l.jsxs(Re,{className:S("border-0 shadow-sm",t?"bg-[#18181b] border-[#3f3f46]":"bg-white border-gray-200"),children:[l.jsx(jt,{children:l.jsxs(kt,{className:S("text-xl flex items-center gap-3",t?"text-white":"text-gray-900"),children:[l.jsx(ro,{className:"text-[#b5103c]",size:24}),"Atividades Recentes"]})}),l.jsx(Ie,{children:e.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(ro,{className:S("mx-auto mb-4",t?"text-gray-600":"text-gray-400"),size:48}),l.jsx("p",{className:S("text-sm",t?"text-gray-400":"text-gray-500"),children:"Nenhuma atividade recente encontrada"})]}):l.jsx("div",{className:"space-y-3",children:e.map(s=>{const a=n(s.type);return l.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-red-50 transition-colors",children:[l.jsx("div",{className:"p-2 rounded-full bg-[#b5103c]/10 text-[#b5103c]",children:l.jsx(a,{size:16})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:S("text-sm font-medium truncate",t?"text-white":"text-gray-900"),children:s.title}),l.jsxs("p",{className:S("text-xs truncate",t?"text-gray-400":"text-gray-500"),children:[s.description,"  ",s.channelName]})]}),l.jsx("div",{className:S("text-xs flex-shrink-0",t?"text-gray-400":"text-gray-500"),children:s.time})]},s.id)})})})]})},U6=({channelId:t,conversations:e=[],isDarkMode:r,onClose:n,onSidebarToggle:s,onRefresh:a})=>l.jsxs("div",{className:S("p-4 border-b flex items-center justify-between",r?"border-[#3f3f46]":"border-gray-200"),children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(q,{variant:"ghost",size:"icon",onClick:n,"aria-label":"Voltar",children:l.jsx(bE,{size:20})}),l.jsxs("div",{children:[l.jsx("h3",{className:S("font-semibold",r?"text-white":"text-gray-900"),children:MA(t)}),l.jsxs("p",{className:S("text-sm",r?"text-gray-400":"text-gray-600"),children:[(e==null?void 0:e.length)||0," conversas"]})]})]}),l.jsx("div",{className:"flex items-center gap-1",children:l.jsx(q,{variant:"ghost",size:"icon",onClick:()=>s(!1),"aria-label":"Fechar barra lateral",children:l.jsx(Dn,{size:20})})})]});var V6=g.createContext(void 0);function Sh(t){const e=g.useContext(V6);return t||e||"ltr"}function Eg(t,[e,r]){return Math.min(r,Math.max(e,t))}function z6(t,e){return g.useReducer((r,n)=>e[r][n]??r,t)}var By="ScrollArea",[VA,nW]=br(By),[B6,Gr]=VA(By),zA=g.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:a=600,...o}=t,[i,c]=g.useState(null),[u,d]=g.useState(null),[f,h]=g.useState(null),[m,y]=g.useState(null),[p,v]=g.useState(null),[w,x]=g.useState(0),[b,_]=g.useState(0),[C,E]=g.useState(!1),[N,A]=g.useState(!1),j=Le(e,F=>c(F)),O=Sh(s);return l.jsx(B6,{scope:r,type:n,dir:O,scrollHideDelay:a,scrollArea:i,viewport:u,onViewportChange:d,content:f,onContentChange:h,scrollbarX:m,onScrollbarXChange:y,scrollbarXEnabled:C,onScrollbarXEnabledChange:E,scrollbarY:p,onScrollbarYChange:v,scrollbarYEnabled:N,onScrollbarYEnabledChange:A,onCornerWidthChange:x,onCornerHeightChange:_,children:l.jsx(ge.div,{dir:O,...o,ref:j,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":b+"px",...t.style}})})});zA.displayName=By;var BA="ScrollAreaViewport",WA=g.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,nonce:s,...a}=t,o=Gr(BA,r),i=g.useRef(null),c=Le(e,i,o.onViewportChange);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),l.jsx(ge.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:l.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});WA.displayName=BA;var Yn="ScrollAreaScrollbar",Wy=g.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Gr(Yn,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,i=t.orientation==="horizontal";return g.useEffect(()=>(i?a(!0):o(!0),()=>{i?a(!1):o(!1)}),[i,a,o]),s.type==="hover"?l.jsx(W6,{...n,ref:e,forceMount:r}):s.type==="scroll"?l.jsx(H6,{...n,ref:e,forceMount:r}):s.type==="auto"?l.jsx(HA,{...n,ref:e,forceMount:r}):s.type==="always"?l.jsx(Hy,{...n,ref:e}):null});Wy.displayName=Yn;var W6=g.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Gr(Yn,t.__scopeScrollArea),[a,o]=g.useState(!1);return g.useEffect(()=>{const i=s.scrollArea;let c=0;if(i){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return i.addEventListener("pointerenter",u),i.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),i.removeEventListener("pointerenter",u),i.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),l.jsx(_r,{present:r||a,children:l.jsx(HA,{"data-state":a?"visible":"hidden",...n,ref:e})})}),H6=g.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Gr(Yn,t.__scopeScrollArea),a=t.orientation==="horizontal",o=Eh(()=>c("SCROLL_END"),100),[i,c]=z6("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(i==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[i,s.scrollHideDelay,c]),g.useEffect(()=>{const u=s.viewport,d=a?"scrollLeft":"scrollTop";if(u){let f=u[d];const h=()=>{const m=u[d];f!==m&&(c("SCROLL"),o()),f=m};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[s.viewport,a,c,o]),l.jsx(_r,{present:r||i!=="hidden",children:l.jsx(Hy,{"data-state":i==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:ce(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ce(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),HA=g.forwardRef((t,e)=>{const r=Gr(Yn,t.__scopeScrollArea),{forceMount:n,...s}=t,[a,o]=g.useState(!1),i=t.orientation==="horizontal",c=Eh(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(i?u:d)}},10);return Wi(r.viewport,c),Wi(r.content,c),l.jsx(_r,{present:n||a,children:l.jsx(Hy,{"data-state":a?"visible":"hidden",...s,ref:e})})}),Hy=g.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,s=Gr(Yn,t.__scopeScrollArea),a=g.useRef(null),o=g.useRef(0),[i,c]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=QA(i.viewport,i.content),d={...n,sizes:i,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>a.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function f(h,m){return J6(h,o.current,i,m)}return r==="horizontal"?l.jsx(G6,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const h=s.viewport.scrollLeft,m=db(h,i,s.dir);a.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=f(h,s.dir))}}):r==="vertical"?l.jsx(q6,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const h=s.viewport.scrollTop,m=db(h,i);a.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=f(h))}}):null}),G6=g.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,a=Gr(Yn,t.__scopeScrollArea),[o,i]=g.useState(),c=g.useRef(null),u=Le(e,c,a.onScrollbarXChange);return g.useEffect(()=>{c.current&&i(getComputedStyle(c.current))},[c]),l.jsx(qA,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ch(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(a.viewport){const h=a.viewport.scrollLeft+d.deltaX;t.onWheelScroll(h),XA(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:mf(o.paddingLeft),paddingEnd:mf(o.paddingRight)}})}})}),q6=g.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,a=Gr(Yn,t.__scopeScrollArea),[o,i]=g.useState(),c=g.useRef(null),u=Le(e,c,a.onScrollbarYChange);return g.useEffect(()=>{c.current&&i(getComputedStyle(c.current))},[c]),l.jsx(qA,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ch(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(a.viewport){const h=a.viewport.scrollTop+d.deltaY;t.onWheelScroll(h),XA(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:mf(o.paddingTop),paddingEnd:mf(o.paddingBottom)}})}})}),[K6,GA]=VA(Yn),qA=g.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:i,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...h}=t,m=Gr(Yn,r),[y,p]=g.useState(null),v=Le(e,j=>p(j)),w=g.useRef(null),x=g.useRef(""),b=m.viewport,_=n.content-n.viewport,C=_t(d),E=_t(c),N=Eh(f,10);function A(j){if(w.current){const O=j.clientX-w.current.left,F=j.clientY-w.current.top;u({x:O,y:F})}}return g.useEffect(()=>{const j=O=>{const F=O.target;(y==null?void 0:y.contains(F))&&C(O,_)};return document.addEventListener("wheel",j,{passive:!1}),()=>document.removeEventListener("wheel",j,{passive:!1})},[b,y,_,C]),g.useEffect(E,[n,E]),Wi(y,N),Wi(m.content,N),l.jsx(K6,{scope:r,scrollbar:y,hasThumb:s,onThumbChange:_t(a),onThumbPointerUp:_t(o),onThumbPositionChange:E,onThumbPointerDown:_t(i),children:l.jsx(ge.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:ce(t.onPointerDown,j=>{j.button===0&&(j.target.setPointerCapture(j.pointerId),w.current=y.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),A(j))}),onPointerMove:ce(t.onPointerMove,A),onPointerUp:ce(t.onPointerUp,j=>{const O=j.target;O.hasPointerCapture(j.pointerId)&&O.releasePointerCapture(j.pointerId),document.body.style.webkitUserSelect=x.current,m.viewport&&(m.viewport.style.scrollBehavior=""),w.current=null})})})}),hf="ScrollAreaThumb",KA=g.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=GA(hf,t.__scopeScrollArea);return l.jsx(_r,{present:r||s.hasThumb,children:l.jsx(Y6,{ref:e,...n})})}),Y6=g.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...s}=t,a=Gr(hf,r),o=GA(hf,r),{onThumbPositionChange:i}=o,c=Le(e,f=>o.onThumbChange(f)),u=g.useRef(void 0),d=Eh(()=>{u.current&&(u.current(),u.current=void 0)},100);return g.useEffect(()=>{const f=a.viewport;if(f){const h=()=>{if(d(),!u.current){const m=X6(f,i);u.current=m,i()}};return i(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[a.viewport,d,i]),l.jsx(ge.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ce(t.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),y=f.clientX-m.left,p=f.clientY-m.top;o.onThumbPointerDown({x:y,y:p})}),onPointerUp:ce(t.onPointerUp,o.onThumbPointerUp)})});KA.displayName=hf;var Gy="ScrollAreaCorner",YA=g.forwardRef((t,e)=>{const r=Gr(Gy,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?l.jsx(Q6,{...t,ref:e}):null});YA.displayName=Gy;var Q6=g.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,s=Gr(Gy,r),[a,o]=g.useState(0),[i,c]=g.useState(0),u=!!(a&&i);return Wi(s.scrollbarX,()=>{var f;const d=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),Wi(s.scrollbarY,()=>{var f;const d=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?l.jsx(ge.div,{...n,ref:e,style:{width:a,height:i,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function mf(t){return t?parseInt(t,10):0}function QA(t,e){const r=t/e;return isNaN(r)?0:r}function Ch(t){const e=QA(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function J6(t,e,r,n="ltr"){const s=Ch(r),a=s/2,o=e||a,i=s-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-i,d=r.content-r.viewport,f=n==="ltr"?[0,d]:[d*-1,0];return JA([c,u],f)(t)}function db(t,e,r="ltr"){const n=Ch(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-s,o=e.content-e.viewport,i=a-n,c=r==="ltr"?[0,o]:[o*-1,0],u=Eg(t,c);return JA([0,o],[0,i])(u)}function JA(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function XA(t,e){return t>0&&t<e}var X6=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function s(){const a={left:t.scrollLeft,top:t.scrollTop},o=r.left!==a.left,i=r.top!==a.top;(o||i)&&e(),r=a,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function Eh(t,e){const r=_t(t),n=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(n.current),[]),g.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function Wi(t,e){const r=_t(e);pt(()=>{let n=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(t),()=>{window.cancelAnimationFrame(n),s.unobserve(t)}}},[t,r])}var ZA=zA,Z6=WA,eF=YA;const ej=g.forwardRef(({className:t,children:e,...r},n)=>l.jsxs(ZA,{ref:n,className:S("relative overflow-hidden",t),...r,children:[l.jsx(Z6,{className:"h-full w-full rounded-[inherit]",children:e}),l.jsx(tj,{}),l.jsx(eF,{})]}));ej.displayName=ZA.displayName;const tj=g.forwardRef(({className:t,orientation:e="vertical",...r},n)=>l.jsx(Wy,{ref:n,orientation:e,className:S("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:l.jsx(KA,{className:"relative flex-1 rounded-full bg-border"})}));tj.displayName=Wy.displayName;const tF=({conversation:t,channelId:e,selectedConversation:r,isDarkMode:n,status:s,onConversationSelect:a,getStatusColor:o,getStatusLabel:i})=>{const c=(u,d=35)=>u?u.length>d?u.slice(0,d-3)+"...":u:"";return l.jsx(Re,{className:S("cursor-pointer transition-all relative",r===t.id?n?"bg-red-100/10 border-red-400/50":"bg-red-50 border-red-200":n?"bg-[#18181b] border-[#3f3f46] hover:bg-[#27272a]":"bg-white border-gray-200 hover:bg-gray-50"),onClick:()=>a(t.id),children:l.jsxs(Ie,{className:"p-3",children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsx("h4",{className:S("font-medium text-sm truncate",r===t.id?"text-red-600":n?"text-white":"text-gray-900"),children:t.contact_name}),t.unread_count&&t.unread_count>0&&s!=="resolved"&&l.jsx(gn,{className:"bg-[#b5103c] text-white text-xs ml-2",children:t.unread_count})]}),l.jsx("p",{className:S("text-xs truncate mb-2",n?"text-gray-400":"text-gray-600"),children:c(t.last_message||"")}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:S("text-xs","text-gray-500"),children:t.last_message_time&&new Date(t.last_message_time).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("div",{className:S("w-2 h-2 rounded-full",o(s))}),l.jsx("span",{className:S("text-xs",n?"text-gray-400":"text-gray-500"),children:i(s)})]})]})]})},t.id)},rF=({channelId:t,conversations:e,selectedConversation:r,isDarkMode:n,onConversationSelect:s})=>{const{getConversationStatus:a}=$A(),o=c=>{switch(c){case"unread":return"bg-red-500";case"in_progress":return"bg-yellow-500";case"resolved":return"bg-green-500";default:return"bg-gray-500"}},i=c=>{switch(c){case"unread":return"Pendente";case"in_progress":return"Em Andamento";case"resolved":return"Resolvida";default:return"Desconhecido"}};return l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsx(ej,{className:"h-full",children:l.jsx("div",{className:"p-2 space-y-1",children:e.map(c=>{const u=a(t,c.id);return l.jsx(tF,{conversation:c,channelId:t,selectedConversation:r,isDarkMode:n,status:u,onConversationSelect:s,getStatusColor:o,getStatusLabel:i},c.id)})})})})},nF=({channelId:t,conversations:e=[],selectedConversation:r,isSidebarOpen:n,isDarkMode:s,onClose:a,onConversationSelect:o,onSidebarToggle:i,onRefresh:c})=>n?l.jsxs("div",{className:S("w-80 border-r flex flex-col",s?"bg-[#18181b] border-[#3f3f46]":"bg-white border-gray-200"),children:[l.jsx(U6,{channelId:t,conversations:e,isDarkMode:s,onClose:a,onSidebarToggle:i,onRefresh:c}),l.jsx(rF,{channelId:t,conversations:e,selectedConversation:r,onConversationSelect:o,isDarkMode:s})]}):null,Lc=g.forwardRef(({className:t,...e},r)=>l.jsx("textarea",{className:S("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));Lc.displayName="Textarea";const fb={Frequentes:["","","","","","","","","","","",""],Rostos:["","","","","","","","","","","","","","","","","","","","","","","",""],Gestos:["","","","","","","","","","","","","","","","","","",""],Objetos:["","","","","","","","","","","","","","","","","","",""]},sF=({onEmojiSelect:t,isDarkMode:e})=>{const[r,n]=g.useState(!1),[s,a]=g.useState("Frequentes");return l.jsxs("div",{className:"relative",children:[l.jsx(q,{type:"button",variant:"ghost",size:"icon",onClick:()=>n(!r),className:S("h-9 w-9",e?"text-gray-400 hover:bg-[#27272a]":"text-gray-600 hover:bg-gray-100"),children:l.jsx(SL,{size:20})}),r&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),l.jsxs("div",{className:S("absolute bottom-12 left-0 z-50 w-80 rounded-lg border shadow-lg",e?"bg-[#27272a] border-[#3f3f46]":"bg-white border-gray-200"),children:[l.jsx("div",{className:S("flex border-b",e?"border-[#3f3f46]":"border-gray-200"),children:Object.keys(fb).map(o=>l.jsx("button",{onClick:()=>a(o),className:S("flex-1 px-2 py-2 text-xs font-medium transition-colors",s===o?e?"bg-[#3f3f46] text-white":"bg-gray-100 text-gray-900":e?"text-gray-400 hover:bg-[#3f3f46]":"text-gray-600 hover:bg-gray-50"),children:o},o))}),l.jsx("div",{className:"p-3 max-h-48 overflow-y-auto",children:l.jsx("div",{className:"grid grid-cols-8 gap-1",children:fb[s].map((o,i)=>l.jsx("button",{onClick:()=>{t(o),n(!1)},className:S("p-2 rounded text-lg hover:scale-110 transition-transform text-center",e?"hover:bg-[#3f3f46]":"hover:bg-gray-100"),children:o},i))})})]})]})]})};function Se(t,e,r,n,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}function M(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}let rj=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return rj=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),r=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^r()&15>>+n/4).toString(16))};function Ng(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Ag=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class _e extends Error{}class Vt extends _e{constructor(e,r,n,s){super(`${Vt.makeMessage(e,r,n)}`),this.status=e,this.headers=s,this.requestID=s==null?void 0:s.get("x-request-id"),this.error=r;const a=r;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,r,n){const s=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,r,n,s){if(!e||!s)return new Nh({message:n,cause:Ag(r)});const a=r==null?void 0:r.error;return e===400?new nj(e,a,n,s):e===401?new sj(e,a,n,s):e===403?new aj(e,a,n,s):e===404?new oj(e,a,n,s):e===409?new ij(e,a,n,s):e===422?new lj(e,a,n,s):e===429?new cj(e,a,n,s):e>=500?new uj(e,a,n,s):new Vt(e,a,n,s)}}class Vr extends Vt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Nh extends Vt{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}}class qy extends Nh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class nj extends Vt{}class sj extends Vt{}class aj extends Vt{}class oj extends Vt{}class ij extends Vt{}class lj extends Vt{}class cj extends Vt{}class uj extends Vt{}class dj extends _e{constructor(){super("Could not parse response content as the length limit was reached")}}class fj extends _e{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}const aF=/^[a-z][a-z0-9+.-]*:/i,oF=t=>aF.test(t);let fr=t=>(fr=Array.isArray,fr(t)),hb=fr;function iF(t){return typeof t!="object"?{}:t??{}}function lF(t){if(!t)return!0;for(const e in t)return!1;return!0}function cF(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Dm(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const uF=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new _e(`${t} must be an integer`);if(e<0)throw new _e(`${t} must be a positive integer`);return e},dF=t=>{try{return JSON.parse(t)}catch{return}},nu=t=>new Promise(e=>setTimeout(e,t)),Qo="5.5.0",fF=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function hF(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const mF=()=>{var r;const t=hF();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qo,"X-Stainless-OS":pb(Deno.build.os),"X-Stainless-Arch":mb(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((r=Deno.version)==null?void 0:r.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qo,"X-Stainless-OS":pb(globalThis.process.platform??"unknown"),"X-Stainless-Arch":mb(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=pF();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function pF(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:r}of t){const n=r.exec(navigator.userAgent);if(n){const s=n[1]||0,a=n[2]||0,o=n[3]||0;return{browser:e,version:`${s}.${a}.${o}`}}}return null}const mb=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",pb=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let gb;const gF=()=>gb??(gb=mF());function vF(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function hj(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function mj(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return hj({start(){},async pull(r){const{done:n,value:s}=await e.next();n?r.close():r.enqueue(s)},async cancel(){var r;await((r=e.return)==null?void 0:r.call(e))}})}function pj(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const r=await e.read();return r!=null&&r.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){const r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function yF(t){var n,s;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((s=(n=t[Symbol.asyncIterator]()).return)==null?void 0:s.call(n));return}const e=t.getReader(),r=e.cancel();e.releaseLock(),await r}const xF=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),gj="RFC3986",vj=t=>String(t),vb={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:vj},wF="RFC1738";let jg=(t,e)=>(jg=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),jg(t,e));const An=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Fm=1024,bF=(t,e,r,n,s)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),r==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(i){return"%26%23"+parseInt(i.slice(2),16)+"%3B"});let o="";for(let i=0;i<a.length;i+=Fm){const c=a.length>=Fm?a.slice(i,i+Fm):a,u=[];for(let d=0;d<c.length;++d){let f=c.charCodeAt(d);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||s===wF&&(f===40||f===41)){u[u.length]=c.charAt(d);continue}if(f<128){u[u.length]=An[f];continue}if(f<2048){u[u.length]=An[192|f>>6]+An[128|f&63];continue}if(f<55296||f>=57344){u[u.length]=An[224|f>>12]+An[128|f>>6&63]+An[128|f&63];continue}d+=1,f=65536+((f&1023)<<10|c.charCodeAt(d)&1023),u[u.length]=An[240|f>>18]+An[128|f>>12&63]+An[128|f>>6&63]+An[128|f&63]}o+=u.join("")}return o};function _F(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function yb(t,e){if(fr(t)){const r=[];for(let n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)}const yj={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},xj=function(t,e){Array.prototype.push.apply(t,fr(e)?e:[e])};let xb;const Et={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:bF,encodeValuesOnly:!1,format:gj,formatter:vj,indices:!1,serializeDate(t){return(xb??(xb=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function SF(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Um={};function wj(t,e,r,n,s,a,o,i,c,u,d,f,h,m,y,p,v,w){let x=t,b=w,_=0,C=!1;for(;(b=b.get(Um))!==void 0&&!C;){const O=b.get(t);if(_+=1,typeof O<"u"){if(O===_)throw new RangeError("Cyclic object value");C=!0}typeof b.get(Um)>"u"&&(_=0)}if(typeof u=="function"?x=u(e,x):x instanceof Date?x=h==null?void 0:h(x):r==="comma"&&fr(x)&&(x=yb(x,function(O){return O instanceof Date?h==null?void 0:h(O):O})),x===null){if(a)return c&&!p?c(e,Et.encoder,v,"key",m):e;x=""}if(SF(x)||_F(x)){if(c){const O=p?e:c(e,Et.encoder,v,"key",m);return[(y==null?void 0:y(O))+"="+(y==null?void 0:y(c(x,Et.encoder,v,"value",m)))]}return[(y==null?void 0:y(e))+"="+(y==null?void 0:y(String(x)))]}const E=[];if(typeof x>"u")return E;let N;if(r==="comma"&&fr(x))p&&c&&(x=yb(x,c)),N=[{value:x.length>0?x.join(",")||null:void 0}];else if(fr(u))N=u;else{const O=Object.keys(x);N=d?O.sort(d):O}const A=i?String(e).replace(/\./g,"%2E"):String(e),j=n&&fr(x)&&x.length===1?A+"[]":A;if(s&&fr(x)&&x.length===0)return j+"[]";for(let O=0;O<N.length;++O){const F=N[O],P=typeof F=="object"&&typeof F.value<"u"?F.value:x[F];if(o&&P===null)continue;const V=f&&i?F.replace(/\./g,"%2E"):F,R=fr(x)?typeof r=="function"?r(j,V):j:j+(f?"."+V:"["+V+"]");w.set(t,_);const H=new WeakMap;H.set(Um,w),xj(E,wj(P,R,r,n,s,a,o,i,r==="comma"&&p&&fr(x)?null:c,u,d,f,h,m,y,p,v,H))}return E}function CF(t=Et){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Et.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=gj;if(typeof t.format<"u"){if(!jg(vb,t.format))throw new TypeError("Unknown format option provided.");r=t.format}const n=vb[r];let s=Et.filter;(typeof t.filter=="function"||fr(t.filter))&&(s=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in yj?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=Et.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Et.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Et.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Et.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Et.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Et.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Et.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Et.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Et.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Et.encodeValuesOnly,filter:s,format:r,formatter:n,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Et.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Et.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Et.strictNullHandling}}function EF(t,e={}){let r=t;const n=CF(e);let s,a;typeof n.filter=="function"?(a=n.filter,r=a("",r)):fr(n.filter)&&(a=n.filter,s=a);const o=[];if(typeof r!="object"||r===null)return"";const i=yj[n.arrayFormat],c=i==="comma"&&n.commaRoundTrip;s||(s=Object.keys(r)),n.sort&&s.sort(n.sort);const u=new WeakMap;for(let h=0;h<s.length;++h){const m=s[h];n.skipNulls&&r[m]===null||xj(o,wj(r[m],m,i,c,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}const d=o.join(n.delimiter);let f=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),d.length>0?f+d:""}function NF(t){let e=0;for(const s of t)e+=s.length;const r=new Uint8Array(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return r}let wb;function Ky(t){let e;return(wb??(e=new globalThis.TextEncoder,wb=e.encode.bind(e)))(t)}let bb;function _b(t){let e;return(bb??(e=new globalThis.TextDecoder,bb=e.decode.bind(e)))(t)}var Cr,Er;class Ah{constructor(){Cr.set(this,void 0),Er.set(this,void 0),Se(this,Cr,new Uint8Array),Se(this,Er,null)}decode(e){if(e==null)return[];const r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Ky(e):e;Se(this,Cr,NF([M(this,Cr,"f"),r]));const n=[];let s;for(;(s=AF(M(this,Cr,"f"),M(this,Er,"f")))!=null;){if(s.carriage&&M(this,Er,"f")==null){Se(this,Er,s.index);continue}if(M(this,Er,"f")!=null&&(s.index!==M(this,Er,"f")+1||s.carriage)){n.push(_b(M(this,Cr,"f").subarray(0,M(this,Er,"f")-1))),Se(this,Cr,M(this,Cr,"f").subarray(M(this,Er,"f"))),Se(this,Er,null);continue}const a=M(this,Er,"f")!==null?s.preceding-1:s.preceding,o=_b(M(this,Cr,"f").subarray(0,a));n.push(o),Se(this,Cr,M(this,Cr,"f").subarray(s.index)),Se(this,Er,null)}return n}flush(){return M(this,Cr,"f").length?this.decode(`
`):[]}}Cr=new WeakMap,Er=new WeakMap;Ah.NEWLINE_CHARS=new Set([`
`,"\r"]);Ah.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function AF(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function jF(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}class Fn{constructor(e,r){this.iterator=e,this.controller=r}static fromSSEResponse(e,r){let n=!1;async function*s(){if(n)throw new _e("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let a=!1;try{for await(const o of kF(e,r))if(!a){if(o.data.startsWith("[DONE]")){a=!0;continue}if(o.event===null||o.event.startsWith("response.")||o.event.startsWith("transcript.")){let i;try{i=JSON.parse(o.data)}catch(c){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),c}if(i&&i.error)throw new Vt(void 0,i.error,void 0,e.headers);yield i}else{let i;try{i=JSON.parse(o.data)}catch(c){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),c}if(o.event=="error")throw new Vt(void 0,i.error,i.message,void 0);yield{event:o.event,data:i}}}a=!0}catch(o){if(Ng(o))return;throw o}finally{a||r.abort()}}return new Fn(s,r)}static fromReadableStream(e,r){let n=!1;async function*s(){const o=new Ah,i=pj(e);for await(const c of i)for(const u of o.decode(c))yield u;for(const c of o.flush())yield c}async function*a(){if(n)throw new _e("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let o=!1;try{for await(const i of s())o||i&&(yield JSON.parse(i));o=!0}catch(i){if(Ng(i))return;throw i}finally{o||r.abort()}}return new Fn(a,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],r=[],n=this.iterator(),s=a=>({next:()=>{if(a.length===0){const o=n.next();e.push(o),r.push(o)}return a.shift()}});return[new Fn(()=>s(e),this.controller),new Fn(()=>s(r),this.controller)]}toReadableStream(){const e=this;let r;return hj({async start(){r=e[Symbol.asyncIterator]()},async pull(n){try{const{value:s,done:a}=await r.next();if(a)return n.close();const o=Ky(JSON.stringify(s)+`
`);n.enqueue(o)}catch(s){n.error(s)}},async cancel(){var n;await((n=r.return)==null?void 0:n.call(r))}})}}async function*kF(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new _e("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new _e("Attempted to iterate over a response with no body");const r=new PF,n=new Ah,s=pj(t.body);for await(const a of TF(s))for(const o of n.decode(a)){const i=r.decode(o);i&&(yield i)}for(const a of n.flush()){const o=r.decode(a);o&&(yield o)}}async function*TF(t){let e=new Uint8Array;for await(const r of t){if(r==null)continue;const n=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?Ky(r):r;let s=new Uint8Array(e.length+n.length);s.set(e),s.set(n,e.length),e=s;let a;for(;(a=jF(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class PF{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,s]=RF(e,":");return s.startsWith(" ")&&(s=s.substring(1)),r==="event"?this.event=s:r==="data"&&this.data.push(s),null}}function RF(t,e){const r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}const pf={off:0,error:200,warn:300,info:400,debug:500},Sb=(t,e,r)=>{if(t){if(cF(pf,t))return t;Kt(r).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(pf))}`)}};function Ll(){}function Qu(t,e,r){return!e||pf[t]>pf[r]?Ll:e[t].bind(e)}const IF={error:Ll,warn:Ll,info:Ll,debug:Ll};let Cb=new WeakMap;function Kt(t){const e=t.logger,r=t.logLevel??"off";if(!e)return IF;const n=Cb.get(e);if(n&&n[0]===r)return n[1];const s={error:Qu("error",e,r),warn:Qu("warn",e,r),info:Qu("info",e,r),debug:Qu("debug",e,r)};return Cb.set(e,[r,s]),s}const qa=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,r])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);async function bj(t,e){const{response:r,requestLogID:n,retryOfRequestLogID:s,startTime:a}=e,o=await(async()=>{var f;if(e.options.stream)return Kt(t).debug("response",r.status,r.url,r.headers,r.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(r,e.controller):Fn.fromSSEResponse(r,e.controller);if(r.status===204)return null;if(e.options.__binaryResponse)return r;const i=r.headers.get("content-type"),c=(f=i==null?void 0:i.split(";")[0])==null?void 0:f.trim();if((c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))){const h=await r.json();return _j(h,r)}return await r.text()})();return Kt(t).debug(`[${n}] response parsed`,qa({retryOfRequestLogID:s,url:r.url,status:r.status,body:o,durationMs:Date.now()-a})),o}function _j(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var $l;class jh extends Promise{constructor(e,r,n=bj){super(s=>{s(null)}),this.responsePromise=r,this.parseResponse=n,$l.set(this,void 0),Se(this,$l,e)}_thenUnwrap(e){return new jh(M(this,$l,"f"),this.responsePromise,async(r,n)=>_j(e(await this.parseResponse(r,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r,request_id:r.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(M(this,$l,"f"),e))),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}$l=new WeakMap;var Ju;class Sj{constructor(e,r,n,s){Ju.set(this,void 0),Se(this,Ju,e),this.options=s,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new _e("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await M(this,Ju,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Ju=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const r of e.getPaginatedItems())yield r}}class OF extends jh{constructor(e,r,n){super(e,r,async(s,a)=>new n(s,a.response,await bj(s,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const r of e)yield r}}class kh extends Sj{constructor(e,r,n,s){super(e,r,n,s),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class gt extends Sj{constructor(e,r,n,s){super(e,r,n,s),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var n;const e=this.getPaginatedItems(),r=(n=e[e.length-1])==null?void 0:n.id;return r?{...this.options,query:{...iF(this.options.query),after:r}}:null}}const Cj=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,r=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(r?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ac(t,e,r){return Cj(),new File(t,e??"unknown_file",r)}function wd(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Ej=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",So=async(t,e)=>({...t,body:await $F(t.body,e)}),Eb=new WeakMap;function LF(t){const e=typeof t=="function"?t:t.fetch,r=Eb.get(e);if(r)return r;const n=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new s(a).text()}catch{return!0}})();return Eb.set(e,n),n}const $F=async(t,e)=>{if(!await LF(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const r=new FormData;return await Promise.all(Object.entries(t||{}).map(([n,s])=>kg(r,n,s))),r},MF=t=>t instanceof Blob&&"name"in t,kg=async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(r instanceof Response)t.append(e,ac([await r.blob()],wd(r)));else if(Ej(r))t.append(e,ac([await new Response(mj(r)).blob()],wd(r)));else if(MF(r))t.append(e,r,wd(r));else if(Array.isArray(r))await Promise.all(r.map(n=>kg(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,s])=>kg(t,`${e}[${n}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}},Nj=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",DF=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Nj(t),FF=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function UF(t,e,r){if(Cj(),t=await t,DF(t))return t instanceof File?t:ac([await t.arrayBuffer()],t.name);if(FF(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),ac(await Tg(s),e,r)}const n=await Tg(t);if(e||(e=wd(t)),!(r!=null&&r.type)){const s=n.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(r={...r,type:s})}return ac(n,e,r)}async function Tg(t){var r;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Nj(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Ej(t))for await(const n of t)e.push(...await Tg(n));else{const n=(r=t==null?void 0:t.constructor)==null?void 0:r.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${VF(t)}`)}return e}function VF(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}class Ce{constructor(e){this._client=e}}function Aj(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const zF=(t=Aj)=>function(r,...n){if(r.length===1)return r[0];let s=!1;const a=r.reduce((d,f,h)=>(/[?#]/.test(f)&&(s=!0),d+f+(h===n.length?"":(s?encodeURIComponent:t)(String(n[h])))),""),o=a.split(/[?#]/,1)[0],i=[],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=c.exec(o))!==null;)i.push({start:u.index,length:u[0].length});if(i.length>0){let d=0;const f=i.reduce((h,m)=>{const y=" ".repeat(m.start-d),p="^".repeat(m.length);return d=m.start+m.length,h+y+p},"");throw new _e(`Path parameters result in path with invalid segments:
${a}
${f}`)}return a},te=zF(Aj);let jj=class extends Ce{list(e,r={},n){return this._client.getAPIList(te`/chat/completions/${e}/messages`,gt,{query:r,...n})}};function BF(t){return typeof t.parse=="function"}const gf=t=>(t==null?void 0:t.role)==="assistant",kj=t=>(t==null?void 0:t.role)==="tool";var Pg,bd,_d,Ml,Dl,Sd,Fl,is,Ul,vf,yf,Jo,Tj;class Yy{constructor(){Pg.add(this),this.controller=new AbortController,bd.set(this,void 0),_d.set(this,()=>{}),Ml.set(this,()=>{}),Dl.set(this,void 0),Sd.set(this,()=>{}),Fl.set(this,()=>{}),is.set(this,{}),Ul.set(this,!1),vf.set(this,!1),yf.set(this,!1),Jo.set(this,!1),Se(this,bd,new Promise((e,r)=>{Se(this,_d,e,"f"),Se(this,Ml,r,"f")})),Se(this,Dl,new Promise((e,r)=>{Se(this,Sd,e,"f"),Se(this,Fl,r,"f")})),M(this,bd,"f").catch(()=>{}),M(this,Dl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},M(this,Pg,"m",Tj).bind(this))},0)}_connected(){this.ended||(M(this,_d,"f").call(this),this._emit("connect"))}get ended(){return M(this,Ul,"f")}get errored(){return M(this,vf,"f")}get aborted(){return M(this,yf,"f")}abort(){this.controller.abort()}on(e,r){return(M(this,is,"f")[e]||(M(this,is,"f")[e]=[])).push({listener:r}),this}off(e,r){const n=M(this,is,"f")[e];if(!n)return this;const s=n.findIndex(a=>a.listener===r);return s>=0&&n.splice(s,1),this}once(e,r){return(M(this,is,"f")[e]||(M(this,is,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{Se(this,Jo,!0),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){Se(this,Jo,!0),await M(this,Dl,"f")}_emit(e,...r){if(M(this,Ul,"f"))return;e==="end"&&(Se(this,Ul,!0),M(this,Sd,"f").call(this));const n=M(this,is,"f")[e];if(n&&(M(this,is,"f")[e]=n.filter(s=>!s.once),n.forEach(({listener:s})=>s(...r))),e==="abort"){const s=r[0];!M(this,Jo,"f")&&!(n!=null&&n.length)&&Promise.reject(s),M(this,Ml,"f").call(this,s),M(this,Fl,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=r[0];!M(this,Jo,"f")&&!(n!=null&&n.length)&&Promise.reject(s),M(this,Ml,"f").call(this,s),M(this,Fl,"f").call(this,s),this._emit("end")}}_emitFinal(){}}bd=new WeakMap,_d=new WeakMap,Ml=new WeakMap,Dl=new WeakMap,Sd=new WeakMap,Fl=new WeakMap,is=new WeakMap,Ul=new WeakMap,vf=new WeakMap,yf=new WeakMap,Jo=new WeakMap,Pg=new WeakSet,Tj=function(e){if(Se(this,vf,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Vr),e instanceof Vr)return Se(this,yf,!0),this._emit("abort",e);if(e instanceof _e)return this._emit("error",e);if(e instanceof Error){const r=new _e(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new _e(String(e)))};function Qy(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function su(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function WF(t,e){return!e||!Pj(e)?{...t,choices:t.choices.map(r=>({...r,message:{...r.message,parsed:null,...r.message.tool_calls?{tool_calls:r.message.tool_calls}:void 0}}))}:Jy(t,e)}function Jy(t,e){const r=t.choices.map(n=>{var s;if(n.finish_reason==="length")throw new dj;if(n.finish_reason==="content_filter")throw new fj;return{...n,message:{...n.message,...n.message.tool_calls?{tool_calls:((s=n.message.tool_calls)==null?void 0:s.map(a=>GF(e,a)))??void 0}:void 0,parsed:n.message.content&&!n.message.refusal?HF(e,n.message.content):null}}});return{...t,choices:r}}function HF(t,e){var r,n;return((r=t.response_format)==null?void 0:r.type)!=="json_schema"?null:((n=t.response_format)==null?void 0:n.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function GF(t,e){var n;const r=(n=t.tools)==null?void 0:n.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:su(r)?r.$parseRaw(e.function.arguments):r!=null&&r.function.strict?JSON.parse(e.function.arguments):null}}}function qF(t,e){var n;if(!t)return!1;const r=(n=t.tools)==null?void 0:n.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===e.function.name});return su(r)||(r==null?void 0:r.function.strict)||!1}function Pj(t){var e;return Qy(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(r=>su(r)||r.type==="function"&&r.function.strict===!0))??!1}function KF(t){for(const e of t??[]){if(e.type!=="function")throw new _e(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new _e(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Zt,Rg,xf,Ig,Og,Lg,Rj,Ij;const YF=10;class Oj extends Yy{constructor(){super(...arguments),Zt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var n;this._chatCompletions.push(e),this._emit("chatCompletion",e);const r=(n=e.choices[0])==null?void 0:n.message;return r&&this._addMessage(r),e}_addMessage(e,r=!0){if("content"in e||(e.content=null),this.messages.push(e),r){if(this._emit("message",e),kj(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(gf(e)&&e.tool_calls)for(const n of e.tool_calls)n.type==="function"&&this._emit("functionToolCall",n.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new _e("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),M(this,Zt,"m",Rg).call(this)}async finalMessage(){return await this.done(),M(this,Zt,"m",xf).call(this)}async finalFunctionToolCall(){return await this.done(),M(this,Zt,"m",Ig).call(this)}async finalFunctionToolCallResult(){return await this.done(),M(this,Zt,"m",Og).call(this)}async totalUsage(){return await this.done(),M(this,Zt,"m",Lg).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const r=M(this,Zt,"m",xf).call(this);r&&this._emit("finalMessage",r);const n=M(this,Zt,"m",Rg).call(this);n&&this._emit("finalContent",n);const s=M(this,Zt,"m",Ig).call(this);s&&this._emit("finalFunctionToolCall",s);const a=M(this,Zt,"m",Og).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",M(this,Zt,"m",Lg).call(this))}async _createChatCompletion(e,r,n){const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),M(this,Zt,"m",Rj).call(this,r);const a=await e.chat.completions.create({...r,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Jy(a,r))}async _runChatCompletion(e,r,n){for(const s of r.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,r,n)}async _runTools(e,r,n){var m,y,p;const s="tool",{tool_choice:a="auto",stream:o,...i}=r,c=typeof a!="string"&&((m=a==null?void 0:a.function)==null?void 0:m.name),{maxChatCompletions:u=YF}=n||{},d=r.tools.map(v=>{if(su(v)){if(!v.$callback)throw new _e("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:v.$callback,name:v.function.name,description:v.function.description||"",parameters:v.function.parameters,parse:v.$parseRaw,strict:!0}}}return v}),f={};for(const v of d)v.type==="function"&&(f[v.function.name||v.function.function.name]=v.function);const h="tools"in r?d.map(v=>v.type==="function"?{type:"function",function:{name:v.function.name||v.function.function.name,parameters:v.function.parameters,description:v.function.description,strict:v.function.strict}}:v):void 0;for(const v of r.messages)this._addMessage(v,!1);for(let v=0;v<u;++v){const x=(y=(await this._createChatCompletion(e,{...i,tool_choice:a,tools:h,messages:[...this.messages]},n)).choices[0])==null?void 0:y.message;if(!x)throw new _e("missing message in ChatCompletion response");if(!((p=x.tool_calls)!=null&&p.length))return;for(const b of x.tool_calls){if(b.type!=="function")continue;const _=b.id,{name:C,arguments:E}=b.function,N=f[C];if(N){if(c&&c!==C){const F=`Invalid tool_call: ${JSON.stringify(C)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:s,tool_call_id:_,content:F});continue}}else{const F=`Invalid tool_call: ${JSON.stringify(C)}. Available options are: ${Object.keys(f).map(P=>JSON.stringify(P)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:_,content:F});continue}let A;try{A=BF(N)?await N.parse(E):E}catch(F){const P=F instanceof Error?F.message:String(F);this._addMessage({role:s,tool_call_id:_,content:P});continue}const j=await N.function(A,this),O=M(this,Zt,"m",Ij).call(this,j);if(this._addMessage({role:s,tool_call_id:_,content:O}),c)return}}}}Zt=new WeakSet,Rg=function(){return M(this,Zt,"m",xf).call(this).content??null},xf=function(){let e=this.messages.length;for(;e-- >0;){const r=this.messages[e];if(gf(r))return{...r,content:r.content??null,refusal:r.refusal??null}}throw new _e("stream ended without producing a ChatCompletionMessage with role=assistant")},Ig=function(){var e,r;for(let n=this.messages.length-1;n>=0;n--){const s=this.messages[n];if(gf(s)&&((e=s==null?void 0:s.tool_calls)!=null&&e.length))return(r=s.tool_calls.at(-1))==null?void 0:r.function}},Og=function(){for(let e=this.messages.length-1;e>=0;e--){const r=this.messages[e];if(kj(r)&&r.content!=null&&typeof r.content=="string"&&this.messages.some(n=>{var s;return n.role==="assistant"&&((s=n.tool_calls)==null?void 0:s.some(a=>a.type==="function"&&a.id===r.tool_call_id))}))return r.content}},Lg=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:r}of this._chatCompletions)r&&(e.completion_tokens+=r.completion_tokens,e.prompt_tokens+=r.prompt_tokens,e.total_tokens+=r.total_tokens);return e},Rj=function(e){if(e.n!=null&&e.n>1)throw new _e("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Ij=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Xy extends Oj{static runTools(e,r,n){const s=new Xy,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,r,a)),s}_addMessage(e,r=!0){super._addMessage(e,r),gf(e)&&e.content&&this._emit("content",e.content)}}const Lj=1,$j=2,Mj=4,Dj=8,Fj=16,Uj=32,Vj=64,zj=128,Bj=256,Wj=zj|Bj,Hj=Fj|Uj|Wj|Vj,Gj=Lj|$j|Hj,qj=Mj|Dj,QF=Gj|qj,Pt={STR:Lj,NUM:$j,ARR:Mj,OBJ:Dj,NULL:Fj,BOOL:Uj,NAN:Vj,INFINITY:zj,MINUS_INFINITY:Bj,INF:Wj,SPECIAL:Hj,ATOM:Gj,COLLECTION:qj,ALL:QF};class JF extends Error{}class XF extends Error{}function ZF(t,e=Pt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return eU(t.trim(),e)}const eU=(t,e)=>{const r=t.length;let n=0;const s=h=>{throw new JF(`${h} at position ${n}`)},a=h=>{throw new XF(`${h} at position ${n}`)},o=()=>(f(),n>=r&&s("Unexpected end of input"),t[n]==='"'?i():t[n]==="{"?c():t[n]==="["?u():t.substring(n,n+4)==="null"||Pt.NULL&e&&r-n<4&&"null".startsWith(t.substring(n))?(n+=4,null):t.substring(n,n+4)==="true"||Pt.BOOL&e&&r-n<4&&"true".startsWith(t.substring(n))?(n+=4,!0):t.substring(n,n+5)==="false"||Pt.BOOL&e&&r-n<5&&"false".startsWith(t.substring(n))?(n+=5,!1):t.substring(n,n+8)==="Infinity"||Pt.INFINITY&e&&r-n<8&&"Infinity".startsWith(t.substring(n))?(n+=8,1/0):t.substring(n,n+9)==="-Infinity"||Pt.MINUS_INFINITY&e&&1<r-n&&r-n<9&&"-Infinity".startsWith(t.substring(n))?(n+=9,-1/0):t.substring(n,n+3)==="NaN"||Pt.NAN&e&&r-n<3&&"NaN".startsWith(t.substring(n))?(n+=3,NaN):d()),i=()=>{const h=n;let m=!1;for(n++;n<r&&(t[n]!=='"'||m&&t[n-1]==="\\");)m=t[n]==="\\"?!m:!1,n++;if(t.charAt(n)=='"')try{return JSON.parse(t.substring(h,++n-Number(m)))}catch(y){a(String(y))}else if(Pt.STR&e)try{return JSON.parse(t.substring(h,n-Number(m))+'"')}catch{return JSON.parse(t.substring(h,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},c=()=>{n++,f();const h={};try{for(;t[n]!=="}";){if(f(),n>=r&&Pt.OBJ&e)return h;const m=i();f(),n++;try{const y=o();Object.defineProperty(h,m,{value:y,writable:!0,enumerable:!0,configurable:!0})}catch(y){if(Pt.OBJ&e)return h;throw y}f(),t[n]===","&&n++}}catch{if(Pt.OBJ&e)return h;s("Expected '}' at end of object")}return n++,h},u=()=>{n++;const h=[];try{for(;t[n]!=="]";)h.push(o()),f(),t[n]===","&&n++}catch{if(Pt.ARR&e)return h;s("Expected ']' at end of array")}return n++,h},d=()=>{if(n===0){t==="-"&&Pt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(m){if(Pt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(m))}}const h=n;for(t[n]==="-"&&n++;t[n]&&!",]}".includes(t[n]);)n++;n==r&&!(Pt.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(h,n))}catch{t.substring(h,n)==="-"&&Pt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(h,t.lastIndexOf("e")))}catch(y){a(String(y))}}},f=()=>{for(;n<r&&` 
\r	`.includes(t[n]);)n++};return o()},Nb=t=>ZF(t,Pt.ALL^Pt.NUM);var St,rs,Ho,zs,Vm,Xu,zm,Bm,Wm,Zu,Hm,Ab;class $c extends Oj{constructor(e){super(),St.add(this),rs.set(this,void 0),Ho.set(this,void 0),zs.set(this,void 0),Se(this,rs,e),Se(this,Ho,[])}get currentChatCompletionSnapshot(){return M(this,zs,"f")}static fromReadableStream(e){const r=new $c(null);return r._run(()=>r._fromReadableStream(e)),r}static createChatCompletion(e,r,n){const s=new $c(r);return s._run(()=>s._runChatCompletion(e,{...r,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,r,n){var o;super._createChatCompletion;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),M(this,St,"m",Vm).call(this);const a=await e.chat.completions.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const i of a)M(this,St,"m",zm).call(this,i);if((o=a.controller.signal)!=null&&o.aborted)throw new Vr;return this._addChatCompletion(M(this,St,"m",Zu).call(this))}async _fromReadableStream(e,r){var o;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),M(this,St,"m",Vm).call(this),this._connected();const s=Fn.fromReadableStream(e,this.controller);let a;for await(const i of s)a&&a!==i.id&&this._addChatCompletion(M(this,St,"m",Zu).call(this)),M(this,St,"m",zm).call(this,i),a=i.id;if((o=s.controller.signal)!=null&&o.aborted)throw new Vr;return this._addChatCompletion(M(this,St,"m",Zu).call(this))}[(rs=new WeakMap,Ho=new WeakMap,zs=new WeakMap,St=new WeakSet,Vm=function(){this.ended||Se(this,zs,void 0)},Xu=function(r){let n=M(this,Ho,"f")[r.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},M(this,Ho,"f")[r.index]=n,n)},zm=function(r){var s,a,o,i,c,u,d,f,h,m,y,p,v,w,x;if(this.ended)return;const n=M(this,St,"m",Ab).call(this,r);this._emit("chunk",r,n);for(const b of r.choices){const _=n.choices[b.index];b.delta.content!=null&&((s=_.message)==null?void 0:s.role)==="assistant"&&((a=_.message)!=null&&a.content)&&(this._emit("content",b.delta.content,_.message.content),this._emit("content.delta",{delta:b.delta.content,snapshot:_.message.content,parsed:_.message.parsed})),b.delta.refusal!=null&&((o=_.message)==null?void 0:o.role)==="assistant"&&((i=_.message)!=null&&i.refusal)&&this._emit("refusal.delta",{delta:b.delta.refusal,snapshot:_.message.refusal}),((c=b.logprobs)==null?void 0:c.content)!=null&&((u=_.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(d=b.logprobs)==null?void 0:d.content,snapshot:((f=_.logprobs)==null?void 0:f.content)??[]}),((h=b.logprobs)==null?void 0:h.refusal)!=null&&((m=_.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(y=b.logprobs)==null?void 0:y.refusal,snapshot:((p=_.logprobs)==null?void 0:p.refusal)??[]});const C=M(this,St,"m",Xu).call(this,_);_.finish_reason&&(M(this,St,"m",Wm).call(this,_),C.current_tool_call_index!=null&&M(this,St,"m",Bm).call(this,_,C.current_tool_call_index));for(const E of b.delta.tool_calls??[])C.current_tool_call_index!==E.index&&(M(this,St,"m",Wm).call(this,_),C.current_tool_call_index!=null&&M(this,St,"m",Bm).call(this,_,C.current_tool_call_index)),C.current_tool_call_index=E.index;for(const E of b.delta.tool_calls??[]){const N=(v=_.message.tool_calls)==null?void 0:v[E.index];N!=null&&N.type&&((N==null?void 0:N.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(w=N.function)==null?void 0:w.name,index:E.index,arguments:N.function.arguments,parsed_arguments:N.function.parsed_arguments,arguments_delta:((x=E.function)==null?void 0:x.arguments)??""}):(N==null||N.type,void 0))}}},Bm=function(r,n){var o,i,c;if(M(this,St,"m",Xu).call(this,r).done_tool_calls.has(n))return;const a=(o=r.message.tool_calls)==null?void 0:o[n];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const u=(c=(i=M(this,rs,"f"))==null?void 0:i.tools)==null?void 0:c.find(d=>d.type==="function"&&d.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:n,arguments:a.function.arguments,parsed_arguments:su(u)?u.$parseRaw(a.function.arguments):u!=null&&u.function.strict?JSON.parse(a.function.arguments):null})}else a.type},Wm=function(r){var s,a;const n=M(this,St,"m",Xu).call(this,r);if(r.message.content&&!n.content_done){n.content_done=!0;const o=M(this,St,"m",Hm).call(this);this._emit("content.done",{content:r.message.content,parsed:o?o.$parseRaw(r.message.content):null})}r.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:r.message.refusal})),(s=r.logprobs)!=null&&s.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:r.logprobs.content})),(a=r.logprobs)!=null&&a.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:r.logprobs.refusal}))},Zu=function(){if(this.ended)throw new _e("stream has ended, this shouldn't happen");const r=M(this,zs,"f");if(!r)throw new _e("request ended without sending any chunks");return Se(this,zs,void 0),Se(this,Ho,[]),tU(r,M(this,rs,"f"))},Hm=function(){var n;const r=(n=M(this,rs,"f"))==null?void 0:n.response_format;return Qy(r)?r:null},Ab=function(r){var n,s,a,o;let i=M(this,zs,"f");const{choices:c,...u}=r;i?Object.assign(i,u):i=Se(this,zs,{...u,choices:[]});for(const{delta:d,finish_reason:f,index:h,logprobs:m=null,...y}of r.choices){let p=i.choices[h];if(p||(p=i.choices[h]={finish_reason:f,index:h,message:{},logprobs:m,...y}),m)if(!p.logprobs)p.logprobs=Object.assign({},m);else{const{content:E,refusal:N,...A}=m;Object.assign(p.logprobs,A),E&&((n=p.logprobs).content??(n.content=[]),p.logprobs.content.push(...E)),N&&((s=p.logprobs).refusal??(s.refusal=[]),p.logprobs.refusal.push(...N))}if(f&&(p.finish_reason=f,M(this,rs,"f")&&Pj(M(this,rs,"f")))){if(f==="length")throw new dj;if(f==="content_filter")throw new fj}if(Object.assign(p,y),!d)continue;const{content:v,refusal:w,function_call:x,role:b,tool_calls:_,...C}=d;if(Object.assign(p.message,C),w&&(p.message.refusal=(p.message.refusal||"")+w),b&&(p.message.role=b),x&&(p.message.function_call?(x.name&&(p.message.function_call.name=x.name),x.arguments&&((a=p.message.function_call).arguments??(a.arguments=""),p.message.function_call.arguments+=x.arguments)):p.message.function_call=x),v&&(p.message.content=(p.message.content||"")+v,!p.message.refusal&&M(this,St,"m",Hm).call(this)&&(p.message.parsed=Nb(p.message.content))),_){p.message.tool_calls||(p.message.tool_calls=[]);for(const{index:E,id:N,type:A,function:j,...O}of _){const F=(o=p.message.tool_calls)[E]??(o[E]={});Object.assign(F,O),N&&(F.id=N),A&&(F.type=A),j&&(F.function??(F.function={name:j.name??"",arguments:""})),j!=null&&j.name&&(F.function.name=j.name),j!=null&&j.arguments&&(F.function.arguments+=j.arguments,qF(M(this,rs,"f"),F)&&(F.function.parsed_arguments=Nb(F.function.arguments)))}}}return i},Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("chunk",s=>{const a=r.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),this.on("error",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,o)=>r.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Fn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function tU(t,e){const{id:r,choices:n,created:s,model:a,system_fingerprint:o,...i}=t,c={...i,id:r,choices:n.map(({message:u,finish_reason:d,index:f,logprobs:h,...m})=>{if(!d)throw new _e(`missing finish_reason for choice ${f}`);const{content:y=null,function_call:p,tool_calls:v,...w}=u,x=u.role;if(!x)throw new _e(`missing role for choice ${f}`);if(p){const{arguments:b,name:_}=p;if(b==null)throw new _e(`missing function_call.arguments for choice ${f}`);if(!_)throw new _e(`missing function_call.name for choice ${f}`);return{...m,message:{content:y,function_call:{arguments:b,name:_},role:x,refusal:u.refusal??null},finish_reason:d,index:f,logprobs:h}}return v?{...m,index:f,finish_reason:d,logprobs:h,message:{...w,role:x,content:y,refusal:u.refusal??null,tool_calls:v.map((b,_)=>{const{function:C,type:E,id:N,...A}=b,{arguments:j,name:O,...F}=C||{};if(N==null)throw new _e(`missing choices[${f}].tool_calls[${_}].id
${ed(t)}`);if(E==null)throw new _e(`missing choices[${f}].tool_calls[${_}].type
${ed(t)}`);if(O==null)throw new _e(`missing choices[${f}].tool_calls[${_}].function.name
${ed(t)}`);if(j==null)throw new _e(`missing choices[${f}].tool_calls[${_}].function.arguments
${ed(t)}`);return{...A,id:N,type:E,function:{...F,name:O,arguments:j}}})}}:{...m,message:{...w,content:y,role:x,refusal:u.refusal??null},finish_reason:d,index:f,logprobs:h}}),created:s,model:a,object:"chat.completion",...o?{system_fingerprint:o}:{}};return WF(c,e)}function ed(t){return JSON.stringify(t)}class wf extends $c{static fromReadableStream(e){const r=new wf(null);return r._run(()=>r._fromReadableStream(e)),r}static runTools(e,r,n){const s=new wf(r),a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,r,a)),s}}let Zy=class extends Ce{constructor(){super(...arguments),this.messages=new jj(this._client)}create(e,r){return this._client.post("/chat/completions",{body:e,...r,stream:e.stream??!1})}retrieve(e,r){return this._client.get(te`/chat/completions/${e}`,r)}update(e,r,n){return this._client.post(te`/chat/completions/${e}`,{body:r,...n})}list(e={},r){return this._client.getAPIList("/chat/completions",gt,{query:e,...r})}delete(e,r){return this._client.delete(te`/chat/completions/${e}`,r)}parse(e,r){return KF(e.tools),this._client.chat.completions.create(e,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(n=>Jy(n,e))}runTools(e,r){return e.stream?wf.runTools(this._client,e,r):Xy.runTools(this._client,e,r)}stream(e,r){return $c.createChatCompletion(this._client,e,r)}};Zy.Messages=jj;class e0 extends Ce{constructor(){super(...arguments),this.completions=new Zy(this._client)}}e0.Completions=Zy;const Kj=Symbol("brand.privateNullableHeaders");function*rU(t){if(!t)return;if(Kj in t){const{values:n,nulls:s}=t;yield*n.entries();for(const a of s)yield[a,null];return}let e=!1,r;t instanceof Headers?r=t.entries():hb(t)?r=t:(e=!0,r=Object.entries(t??{}));for(let n of r){const s=n[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=hb(n[1])?n[1]:[n[1]];let o=!1;for(const i of a)i!==void 0&&(e&&!o&&(o=!0,yield[s,null]),yield[s,i])}}const ye=t=>{const e=new Headers,r=new Set;for(const n of t){const s=new Set;for(const[a,o]of rU(n)){const i=a.toLowerCase();s.has(i)||(e.delete(a),s.add(i)),o===null?(e.delete(a),r.add(i)):(e.append(a,o),r.delete(i))}}return{[Kj]:!0,values:e,nulls:r}};class Yj extends Ce{create(e,r){return this._client.post("/audio/speech",{body:e,...r,headers:ye([{Accept:"application/octet-stream"},r==null?void 0:r.headers]),__binaryResponse:!0})}}class Qj extends Ce{create(e,r){return this._client.post("/audio/transcriptions",So({body:e,...r,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class Jj extends Ce{create(e,r){return this._client.post("/audio/translations",So({body:e,...r,__metadata:{model:e.model}},this._client))}}class au extends Ce{constructor(){super(...arguments),this.transcriptions=new Qj(this._client),this.translations=new Jj(this._client),this.speech=new Yj(this._client)}}au.Transcriptions=Qj;au.Translations=Jj;au.Speech=Yj;class Xj extends Ce{create(e,r){return this._client.post("/batches",{body:e,...r})}retrieve(e,r){return this._client.get(te`/batches/${e}`,r)}list(e={},r){return this._client.getAPIList("/batches",gt,{query:e,...r})}cancel(e,r){return this._client.post(te`/batches/${e}/cancel`,r)}}class Zj extends Ce{create(e,r){return this._client.post("/assistants",{body:e,...r,headers:ye([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,r){return this._client.get(te`/assistants/${e}`,{...r,headers:ye([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,r,n){return this._client.post(te`/assistants/${e}`,{body:r,...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e={},r){return this._client.getAPIList("/assistants",gt,{query:e,...r,headers:ye([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,r){return this._client.delete(te`/assistants/${e}`,{...r,headers:ye([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class e2 extends Ce{create(e,r){return this._client.post("/realtime/sessions",{body:e,...r,headers:ye([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class t2 extends Ce{create(e,r){return this._client.post("/realtime/transcription_sessions",{body:e,...r,headers:ye([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Th extends Ce{constructor(){super(...arguments),this.sessions=new e2(this._client),this.transcriptionSessions=new t2(this._client)}}Th.Sessions=e2;Th.TranscriptionSessions=t2;class r2 extends Ce{create(e,r,n){return this._client.post(te`/threads/${e}/messages`,{body:r,...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,r,n){const{thread_id:s}=r;return this._client.get(te`/threads/${s}/messages/${e}`,{...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,r,n){const{thread_id:s,...a}=r;return this._client.post(te`/threads/${s}/messages/${e}`,{body:a,...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e,r={},n){return this._client.getAPIList(te`/threads/${e}/messages`,gt,{query:r,...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,r,n){const{thread_id:s}=r;return this._client.delete(te`/threads/${s}/messages/${e}`,{...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}class n2 extends Ce{retrieve(e,r,n){const{thread_id:s,run_id:a,...o}=r;return this._client.get(te`/threads/${s}/runs/${a}/steps/${e}`,{query:o,...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e,r,n){const{thread_id:s,...a}=r;return this._client.getAPIList(te`/threads/${s}/runs/${e}/steps`,gt,{query:a,...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}const nU=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),r=e.length,n=new Uint8Array(r);for(let s=0;s<r;s++)n[s]=e.charCodeAt(s);return Array.from(new Float32Array(n.buffer))}};var Gm={};const El=t=>{var e,r,n,s;if(typeof globalThis.process<"u")return((e=Gm==null?void 0:Gm[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(s=(n=(r=globalThis.Deno.env)==null?void 0:r.get)==null?void 0:n.call(r,t))==null?void 0:s.trim()};var Mt,no,$g,Tn,Cd,nn,so,fi,Qa,bf,Nr,Ed,Nd,oc,Vl,zl,jb,kb,Tb,Pb,Rb,Ib,Ob;class ic extends Yy{constructor(){super(...arguments),Mt.add(this),$g.set(this,[]),Tn.set(this,{}),Cd.set(this,{}),nn.set(this,void 0),so.set(this,void 0),fi.set(this,void 0),Qa.set(this,void 0),bf.set(this,void 0),Nr.set(this,void 0),Ed.set(this,void 0),Nd.set(this,void 0),oc.set(this,void 0)}[($g=new WeakMap,Tn=new WeakMap,Cd=new WeakMap,nn=new WeakMap,so=new WeakMap,fi=new WeakMap,Qa=new WeakMap,bf=new WeakMap,Nr=new WeakMap,Ed=new WeakMap,Nd=new WeakMap,oc=new WeakMap,Mt=new WeakSet,Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("event",s=>{const a=r.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),this.on("error",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,o)=>r.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const r=new no;return r._run(()=>r._fromReadableStream(e)),r}async _fromReadableStream(e,r){var a;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Fn.fromReadableStream(e,this.controller);for await(const o of s)M(this,Mt,"m",Vl).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new Vr;return this._addRun(M(this,Mt,"m",zl).call(this))}toReadableStream(){return new Fn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,r,n,s){const a=new no;return a._run(()=>a._runToolAssistantStream(e,r,n,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,r,n,s){var c;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},i=await e.submitToolOutputs(r,o,{...s,signal:this.controller.signal});this._connected();for await(const u of i)M(this,Mt,"m",Vl).call(this,u);if((c=i.controller.signal)!=null&&c.aborted)throw new Vr;return this._addRun(M(this,Mt,"m",zl).call(this))}static createThreadAssistantStream(e,r,n){const s=new no;return s._run(()=>s._threadAssistantStream(e,r,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,r,n,s){const a=new no;return a._run(()=>a._runAssistantStream(e,r,n,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return M(this,Ed,"f")}currentRun(){return M(this,Nd,"f")}currentMessageSnapshot(){return M(this,nn,"f")}currentRunStepSnapshot(){return M(this,oc,"f")}async finalRunSteps(){return await this.done(),Object.values(M(this,Tn,"f"))}async finalMessages(){return await this.done(),Object.values(M(this,Cd,"f"))}async finalRun(){if(await this.done(),!M(this,so,"f"))throw Error("Final run was not received.");return M(this,so,"f")}async _createThreadAssistantStream(e,r,n){var i;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},o=await e.createAndRun(a,{...n,signal:this.controller.signal});this._connected();for await(const c of o)M(this,Mt,"m",Vl).call(this,c);if((i=o.controller.signal)!=null&&i.aborted)throw new Vr;return this._addRun(M(this,Mt,"m",zl).call(this))}async _createAssistantStream(e,r,n,s){var c;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},i=await e.create(r,o,{...s,signal:this.controller.signal});this._connected();for await(const u of i)M(this,Mt,"m",Vl).call(this,u);if((c=i.controller.signal)!=null&&c.aborted)throw new Vr;return this._addRun(M(this,Mt,"m",zl).call(this))}static accumulateDelta(e,r){for(const[n,s]of Object.entries(r)){if(!e.hasOwnProperty(n)){e[n]=s;continue}let a=e[n];if(a==null){e[n]=s;continue}if(n==="index"||n==="type"){e[n]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(Dm(a)&&Dm(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(o=>typeof o=="string"||typeof o=="number")){a.push(...s);continue}for(const o of s){if(!Dm(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const i=o.index;if(i==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof i!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${i}`);const c=a[i];c==null?a.push(o):a[i]=this.accumulateDelta(c,o)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${s}, accValue: ${a}`);e[n]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,r,n){return await this._createThreadAssistantStream(r,e,n)}async _runAssistantStream(e,r,n,s){return await this._createAssistantStream(r,e,n,s)}async _runToolAssistantStream(e,r,n,s){return await this._createToolAssistantStream(r,e,n,s)}}no=ic,Vl=function(e){if(!this.ended)switch(Se(this,Ed,e),M(this,Mt,"m",Tb).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":M(this,Mt,"m",Ob).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":M(this,Mt,"m",kb).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":M(this,Mt,"m",jb).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},zl=function(){if(this.ended)throw new _e("stream has ended, this shouldn't happen");if(!M(this,so,"f"))throw Error("Final run has not been received");return M(this,so,"f")},jb=function(e){const[r,n]=M(this,Mt,"m",Rb).call(this,e,M(this,nn,"f"));Se(this,nn,r),M(this,Cd,"f")[r.id]=r;for(const s of n){const a=r.content[s.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,r),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,o=r.content[s.index];if(o&&o.type=="text")this._emit("textDelta",a,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=M(this,fi,"f")){if(M(this,Qa,"f"))switch(M(this,Qa,"f").type){case"text":this._emit("textDone",M(this,Qa,"f").text,M(this,nn,"f"));break;case"image_file":this._emit("imageFileDone",M(this,Qa,"f").image_file,M(this,nn,"f"));break}Se(this,fi,s.index)}Se(this,Qa,r.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(M(this,fi,"f")!==void 0){const s=e.data.content[M(this,fi,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,M(this,nn,"f"));break;case"text":this._emit("textDone",s.text,M(this,nn,"f"));break}}M(this,nn,"f")&&this._emit("messageDone",e.data),Se(this,nn,void 0)}},kb=function(e){const r=M(this,Mt,"m",Pb).call(this,e);switch(Se(this,oc,r),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&r.step_details.type=="tool_calls")for(const a of n.step_details.tool_calls)a.index==M(this,bf,"f")?this._emit("toolCallDelta",a,r.step_details.tool_calls[a.index]):(M(this,Nr,"f")&&this._emit("toolCallDone",M(this,Nr,"f")),Se(this,bf,a.index),Se(this,Nr,r.step_details.tool_calls[a.index]),M(this,Nr,"f")&&this._emit("toolCallCreated",M(this,Nr,"f")));this._emit("runStepDelta",e.data.delta,r);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Se(this,oc,void 0),e.data.step_details.type=="tool_calls"&&M(this,Nr,"f")&&(this._emit("toolCallDone",M(this,Nr,"f")),Se(this,Nr,void 0)),this._emit("runStepDone",e.data,r);break}},Tb=function(e){M(this,$g,"f").push(e),this._emit("event",e)},Pb=function(e){switch(e.event){case"thread.run.step.created":return M(this,Tn,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let r=M(this,Tn,"f")[e.data.id];if(!r)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const s=no.accumulateDelta(r,n.delta);M(this,Tn,"f")[e.data.id]=s}return M(this,Tn,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":M(this,Tn,"f")[e.data.id]=e.data;break}if(M(this,Tn,"f")[e.data.id])return M(this,Tn,"f")[e.data.id];throw new Error("No snapshot available")},Rb=function(e,r){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!r)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in r.content){let o=r.content[a.index];r.content[a.index]=M(this,Mt,"m",Ib).call(this,a,o)}else r.content[a.index]=a,n.push(a);return[r,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(r)return[r,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Ib=function(e,r){return no.accumulateDelta(r,e)},Ob=function(e){switch(Se(this,Nd,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Se(this,so,e.data),M(this,Nr,"f")&&(this._emit("toolCallDone",M(this,Nr,"f")),Se(this,Nr,void 0));break}};let t0=class extends Ce{constructor(){super(...arguments),this.steps=new n2(this._client)}create(e,r,n){const{include:s,...a}=r;return this._client.post(te`/threads/${e}/runs`,{query:{include:s},body:a,...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:r.stream??!1})}retrieve(e,r,n){const{thread_id:s}=r;return this._client.get(te`/threads/${s}/runs/${e}`,{...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,r,n){const{thread_id:s,...a}=r;return this._client.post(te`/threads/${s}/runs/${e}`,{body:a,...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e,r={},n){return this._client.getAPIList(te`/threads/${e}/runs`,gt,{query:r,...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}cancel(e,r,n){const{thread_id:s}=r;return this._client.post(te`/threads/${s}/runs/${e}/cancel`,{...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}async createAndPoll(e,r,n){const s=await this.create(e,r,n);return await this.poll(s.id,{thread_id:e},n)}createAndStream(e,r,n){return ic.createAssistantStream(e,this._client.beta.threads.runs,r,n)}async poll(e,r,n){var a;const s=ye([n==null?void 0:n.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=n==null?void 0:n.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const{data:o,response:i}=await this.retrieve(e,r,{...n,headers:{...n==null?void 0:n.headers,...s}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(n!=null&&n.pollIntervalMs)c=n.pollIntervalMs;else{const u=i.headers.get("openai-poll-after-ms");if(u){const d=parseInt(u);isNaN(d)||(c=d)}}await nu(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,r,n){return ic.createAssistantStream(e,this._client.beta.threads.runs,r,n)}submitToolOutputs(e,r,n){const{thread_id:s,...a}=r;return this._client.post(te`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:a,...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:r.stream??!1})}async submitToolOutputsAndPoll(e,r,n){const s=await this.submitToolOutputs(e,r,n);return await this.poll(s.id,r,n)}submitToolOutputsStream(e,r,n){return ic.createToolAssistantStream(e,this._client.beta.threads.runs,r,n)}};t0.Steps=n2;class Ph extends Ce{constructor(){super(...arguments),this.runs=new t0(this._client),this.messages=new r2(this._client)}create(e={},r){return this._client.post("/threads",{body:e,...r,headers:ye([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,r){return this._client.get(te`/threads/${e}`,{...r,headers:ye([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,r,n){return this._client.post(te`/threads/${e}`,{body:r,...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,r){return this._client.delete(te`/threads/${e}`,{...r,headers:ye([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}createAndRun(e,r){return this._client.post("/threads/runs",{body:e,...r,headers:ye([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:e.stream??!1})}async createAndRunPoll(e,r){const n=await this.createAndRun(e,r);return await this.runs.poll(n.id,{thread_id:n.thread_id},r)}createAndRunStream(e,r){return ic.createThreadAssistantStream(e,this._client.beta.threads,r)}}Ph.Runs=t0;Ph.Messages=r2;class ou extends Ce{constructor(){super(...arguments),this.realtime=new Th(this._client),this.assistants=new Zj(this._client),this.threads=new Ph(this._client)}}ou.Realtime=Th;ou.Assistants=Zj;ou.Threads=Ph;class s2 extends Ce{create(e,r){return this._client.post("/completions",{body:e,...r,stream:e.stream??!1})}}let a2=class extends Ce{retrieve(e,r,n){const{container_id:s}=r;return this._client.get(te`/containers/${s}/files/${e}/content`,{...n,headers:ye([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}},r0=class extends Ce{constructor(){super(...arguments),this.content=new a2(this._client)}create(e,r,n){return this._client.post(te`/containers/${e}/files`,So({body:r,...n},this._client))}retrieve(e,r,n){const{container_id:s}=r;return this._client.get(te`/containers/${s}/files/${e}`,n)}list(e,r={},n){return this._client.getAPIList(te`/containers/${e}/files`,gt,{query:r,...n})}delete(e,r,n){const{container_id:s}=r;return this._client.delete(te`/containers/${s}/files/${e}`,{...n,headers:ye([{Accept:"*/*"},n==null?void 0:n.headers])})}};r0.Content=a2;class n0 extends Ce{constructor(){super(...arguments),this.files=new r0(this._client)}create(e,r){return this._client.post("/containers",{body:e,...r})}retrieve(e,r){return this._client.get(te`/containers/${e}`,r)}list(e={},r){return this._client.getAPIList("/containers",gt,{query:e,...r})}delete(e,r){return this._client.delete(te`/containers/${e}`,{...r,headers:ye([{Accept:"*/*"},r==null?void 0:r.headers])})}}n0.Files=r0;class o2 extends Ce{create(e,r){const n=!!e.encoding_format;let s=n?e.encoding_format:"base64";n&&Kt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:s},...r});return n?a:(Kt(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(o=>(o&&o.data&&o.data.forEach(i=>{const c=i.embedding;i.embedding=nU(c)}),o)))}}class i2 extends Ce{retrieve(e,r,n){const{eval_id:s,run_id:a}=r;return this._client.get(te`/evals/${s}/runs/${a}/output_items/${e}`,n)}list(e,r,n){const{eval_id:s,...a}=r;return this._client.getAPIList(te`/evals/${s}/runs/${e}/output_items`,gt,{query:a,...n})}}class s0 extends Ce{constructor(){super(...arguments),this.outputItems=new i2(this._client)}create(e,r,n){return this._client.post(te`/evals/${e}/runs`,{body:r,...n})}retrieve(e,r,n){const{eval_id:s}=r;return this._client.get(te`/evals/${s}/runs/${e}`,n)}list(e,r={},n){return this._client.getAPIList(te`/evals/${e}/runs`,gt,{query:r,...n})}delete(e,r,n){const{eval_id:s}=r;return this._client.delete(te`/evals/${s}/runs/${e}`,n)}cancel(e,r,n){const{eval_id:s}=r;return this._client.post(te`/evals/${s}/runs/${e}`,n)}}s0.OutputItems=i2;class a0 extends Ce{constructor(){super(...arguments),this.runs=new s0(this._client)}create(e,r){return this._client.post("/evals",{body:e,...r})}retrieve(e,r){return this._client.get(te`/evals/${e}`,r)}update(e,r,n){return this._client.post(te`/evals/${e}`,{body:r,...n})}list(e={},r){return this._client.getAPIList("/evals",gt,{query:e,...r})}delete(e,r){return this._client.delete(te`/evals/${e}`,r)}}a0.Runs=s0;let l2=class extends Ce{create(e,r){return this._client.post("/files",So({body:e,...r},this._client))}retrieve(e,r){return this._client.get(te`/files/${e}`,r)}list(e={},r){return this._client.getAPIList("/files",gt,{query:e,...r})}delete(e,r){return this._client.delete(te`/files/${e}`,r)}content(e,r){return this._client.get(te`/files/${e}/content`,{...r,headers:ye([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:r=5e3,maxWait:n=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let o=await this.retrieve(e);for(;!o.status||!s.has(o.status);)if(await nu(r),o=await this.retrieve(e),Date.now()-a>n)throw new qy({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return o}};class c2 extends Ce{}let u2=class extends Ce{run(e,r){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...r})}validate(e,r){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...r})}};class o0 extends Ce{constructor(){super(...arguments),this.graders=new u2(this._client)}}o0.Graders=u2;class d2 extends Ce{create(e,r,n){return this._client.getAPIList(te`/fine_tuning/checkpoints/${e}/permissions`,kh,{body:r,method:"post",...n})}retrieve(e,r={},n){return this._client.getAPIList(te`/fine_tuning/checkpoints/${e}/permissions`,gt,{query:r,...n})}delete(e,r,n){const{fine_tuned_model_checkpoint:s}=r;return this._client.delete(te`/fine_tuning/checkpoints/${s}/permissions/${e}`,n)}}let i0=class extends Ce{constructor(){super(...arguments),this.permissions=new d2(this._client)}};i0.Permissions=d2;class f2 extends Ce{list(e,r={},n){return this._client.getAPIList(te`/fine_tuning/jobs/${e}/checkpoints`,gt,{query:r,...n})}}class l0 extends Ce{constructor(){super(...arguments),this.checkpoints=new f2(this._client)}create(e,r){return this._client.post("/fine_tuning/jobs",{body:e,...r})}retrieve(e,r){return this._client.get(te`/fine_tuning/jobs/${e}`,r)}list(e={},r){return this._client.getAPIList("/fine_tuning/jobs",gt,{query:e,...r})}cancel(e,r){return this._client.post(te`/fine_tuning/jobs/${e}/cancel`,r)}listEvents(e,r={},n){return this._client.getAPIList(te`/fine_tuning/jobs/${e}/events`,gt,{query:r,...n})}pause(e,r){return this._client.post(te`/fine_tuning/jobs/${e}/pause`,r)}resume(e,r){return this._client.post(te`/fine_tuning/jobs/${e}/resume`,r)}}l0.Checkpoints=f2;class dl extends Ce{constructor(){super(...arguments),this.methods=new c2(this._client),this.jobs=new l0(this._client),this.checkpoints=new i0(this._client),this.alpha=new o0(this._client)}}dl.Methods=c2;dl.Jobs=l0;dl.Checkpoints=i0;dl.Alpha=o0;class h2 extends Ce{}class c0 extends Ce{constructor(){super(...arguments),this.graderModels=new h2(this._client)}}c0.GraderModels=h2;class m2 extends Ce{createVariation(e,r){return this._client.post("/images/variations",So({body:e,...r},this._client))}edit(e,r){return this._client.post("/images/edits",So({body:e,...r},this._client))}generate(e,r){return this._client.post("/images/generations",{body:e,...r})}}class p2 extends Ce{retrieve(e,r){return this._client.get(te`/models/${e}`,r)}list(e){return this._client.getAPIList("/models",kh,e)}delete(e,r){return this._client.delete(te`/models/${e}`,r)}}class g2 extends Ce{create(e,r){return this._client.post("/moderations",{body:e,...r})}}function sU(t,e){return!e||!oU(e)?{...t,output_parsed:null,output:t.output.map(r=>r.type==="function_call"?{...r,parsed_arguments:null}:r.type==="message"?{...r,content:r.content.map(n=>({...n,parsed:null}))}:r)}:v2(t,e)}function v2(t,e){const r=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:cU(e,s)};if(s.type==="message"){const a=s.content.map(o=>o.type==="output_text"?{...o,parsed:aU(e,o.text)}:o);return{...s,content:a}}return s}),n=Object.assign({},t,{output:r});return Object.getOwnPropertyDescriptor(t,"output_text")||y2(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(const s of n.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),n}function aU(t,e){var r,n,s,a;return((n=(r=t.text)==null?void 0:r.format)==null?void 0:n.type)!=="json_schema"?null:"$parseRaw"in((s=t.text)==null?void 0:s.format)?((a=t.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function oU(t){var e;return!!Qy((e=t.text)==null?void 0:e.format)}function iU(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function lU(t,e){return t.find(r=>r.type==="function"&&r.name===e)}function cU(t,e){const r=lU(t.tools??[],e.name);return{...e,...e,parsed_arguments:iU(r)?r.$parseRaw(e.arguments):r!=null&&r.strict?JSON.parse(e.arguments):null}}function y2(t){const e=[];for(const r of t.output)if(r.type==="message")for(const n of r.content)n.type==="output_text"&&e.push(n.text);t.output_text=e.join("")}var Go,td,Bs,rd,Lb,$b,Mb,Db;class u0 extends Yy{constructor(e){super(),Go.add(this),td.set(this,void 0),Bs.set(this,void 0),rd.set(this,void 0),Se(this,td,e)}static createResponse(e,r,n){const s=new u0(r);return s._run(()=>s._createOrRetrieveResponse(e,r,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,r,n){var i;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),M(this,Go,"m",Lb).call(this);let a,o=null;"response_id"in r?(a=await e.responses.retrieve(r.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),o=r.starting_after??null):a=await e.responses.create({...r,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(const c of a)M(this,Go,"m",$b).call(this,c,o);if((i=a.controller.signal)!=null&&i.aborted)throw new Vr;return M(this,Go,"m",Mb).call(this)}[(td=new WeakMap,Bs=new WeakMap,rd=new WeakMap,Go=new WeakSet,Lb=function(){this.ended||Se(this,Bs,void 0)},$b=function(r,n){if(this.ended)return;const s=(o,i)=>{(n==null||i.sequence_number>n)&&this._emit(o,i)},a=M(this,Go,"m",Db).call(this,r);switch(s("event",r),r.type){case"response.output_text.delta":{const o=a.output[r.output_index];if(!o)throw new _e(`missing output at index ${r.output_index}`);if(o.type==="message"){const i=o.content[r.content_index];if(!i)throw new _e(`missing content at index ${r.content_index}`);if(i.type!=="output_text")throw new _e(`expected content to be 'output_text', got ${i.type}`);s("response.output_text.delta",{...r,snapshot:i.text})}break}case"response.function_call_arguments.delta":{const o=a.output[r.output_index];if(!o)throw new _e(`missing output at index ${r.output_index}`);o.type==="function_call"&&s("response.function_call_arguments.delta",{...r,snapshot:o.arguments});break}default:s(r.type,r);break}},Mb=function(){if(this.ended)throw new _e("stream has ended, this shouldn't happen");const r=M(this,Bs,"f");if(!r)throw new _e("request ended without sending any events");Se(this,Bs,void 0);const n=uU(r,M(this,td,"f"));return Se(this,rd,n),n},Db=function(r){let n=M(this,Bs,"f");if(!n){if(r.type!=="response.created")throw new _e(`When snapshot hasn't been set yet, expected 'response.created' event, got ${r.type}`);return n=Se(this,Bs,r.response),n}switch(r.type){case"response.output_item.added":{n.output.push(r.item);break}case"response.content_part.added":{const s=n.output[r.output_index];if(!s)throw new _e(`missing output at index ${r.output_index}`);s.type==="message"&&s.content.push(r.part);break}case"response.output_text.delta":{const s=n.output[r.output_index];if(!s)throw new _e(`missing output at index ${r.output_index}`);if(s.type==="message"){const a=s.content[r.content_index];if(!a)throw new _e(`missing content at index ${r.content_index}`);if(a.type!=="output_text")throw new _e(`expected content to be 'output_text', got ${a.type}`);a.text+=r.delta}break}case"response.function_call_arguments.delta":{const s=n.output[r.output_index];if(!s)throw new _e(`missing output at index ${r.output_index}`);s.type==="function_call"&&(s.arguments+=r.delta);break}case"response.completed":{Se(this,Bs,r.response);break}}return n},Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("event",s=>{const a=r.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),this.on("error",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,o)=>r.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=M(this,rd,"f");if(!e)throw new _e("stream ended without producing a ChatCompletion");return e}}function uU(t,e){return sU(t,e)}class x2 extends Ce{list(e,r={},n){return this._client.getAPIList(te`/responses/${e}/input_items`,gt,{query:r,...n})}}class d0 extends Ce{constructor(){super(...arguments),this.inputItems=new x2(this._client)}create(e,r){return this._client.post("/responses",{body:e,...r,stream:e.stream??!1})._thenUnwrap(n=>("object"in n&&n.object==="response"&&y2(n),n))}retrieve(e,r={},n){return this._client.get(te`/responses/${e}`,{query:r,...n,stream:(r==null?void 0:r.stream)??!1})}delete(e,r){return this._client.delete(te`/responses/${e}`,{...r,headers:ye([{Accept:"*/*"},r==null?void 0:r.headers])})}parse(e,r){return this._client.responses.create(e,r)._thenUnwrap(n=>v2(n,e))}stream(e,r){return u0.createResponse(this._client,e,r)}cancel(e,r){return this._client.post(te`/responses/${e}/cancel`,r)}}d0.InputItems=x2;class w2 extends Ce{create(e,r,n){return this._client.post(te`/uploads/${e}/parts`,So({body:r,...n},this._client))}}class f0 extends Ce{constructor(){super(...arguments),this.parts=new w2(this._client)}create(e,r){return this._client.post("/uploads",{body:e,...r})}cancel(e,r){return this._client.post(te`/uploads/${e}/cancel`,r)}complete(e,r,n){return this._client.post(te`/uploads/${e}/complete`,{body:r,...n})}}f0.Parts=w2;const dU=async t=>{const e=await Promise.allSettled(t),r=e.filter(s=>s.status==="rejected");if(r.length){for(const s of r)console.error(s.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}const n=[];for(const s of e)s.status==="fulfilled"&&n.push(s.value);return n};class b2 extends Ce{create(e,r,n){return this._client.post(te`/vector_stores/${e}/file_batches`,{body:r,...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,r,n){const{vector_store_id:s}=r;return this._client.get(te`/vector_stores/${s}/file_batches/${e}`,{...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}cancel(e,r,n){const{vector_store_id:s}=r;return this._client.post(te`/vector_stores/${s}/file_batches/${e}/cancel`,{...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}async createAndPoll(e,r,n){const s=await this.create(e,r);return await this.poll(e,s.id,n)}listFiles(e,r,n){const{vector_store_id:s,...a}=r;return this._client.getAPIList(te`/vector_stores/${s}/file_batches/${e}/files`,gt,{query:a,...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}async poll(e,r,n){var a;const s=ye([n==null?void 0:n.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=n==null?void 0:n.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const{data:o,response:i}=await this.retrieve(r,{vector_store_id:e},{...n,headers:s}).withResponse();switch(o.status){case"in_progress":let c=5e3;if(n!=null&&n.pollIntervalMs)c=n.pollIntervalMs;else{const u=i.headers.get("openai-poll-after-ms");if(u){const d=parseInt(u);isNaN(d)||(c=d)}}await nu(c);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:r,fileIds:n=[]},s){if(r==null||r.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(s==null?void 0:s.maxConcurrency)??5,o=Math.min(a,r.length),i=this._client,c=r.values(),u=[...n];async function d(h){for(let m of h){const y=await i.files.create({file:m,purpose:"assistants"},s);u.push(y.id)}}const f=Array(o).fill(c).map(d);return await dU(f),await this.createAndPoll(e,{file_ids:u})}}class _2 extends Ce{create(e,r,n){return this._client.post(te`/vector_stores/${e}/files`,{body:r,...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,r,n){const{vector_store_id:s}=r;return this._client.get(te`/vector_stores/${s}/files/${e}`,{...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,r,n){const{vector_store_id:s,...a}=r;return this._client.post(te`/vector_stores/${s}/files/${e}`,{body:a,...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e,r={},n){return this._client.getAPIList(te`/vector_stores/${e}/files`,gt,{query:r,...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,r,n){const{vector_store_id:s}=r;return this._client.delete(te`/vector_stores/${s}/files/${e}`,{...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}async createAndPoll(e,r,n){const s=await this.create(e,r,n);return await this.poll(e,s.id,n)}async poll(e,r,n){var a;const s=ye([n==null?void 0:n.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=n==null?void 0:n.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const o=await this.retrieve(r,{vector_store_id:e},{...n,headers:s}).withResponse(),i=o.data;switch(i.status){case"in_progress":let c=5e3;if(n!=null&&n.pollIntervalMs)c=n.pollIntervalMs;else{const u=o.response.headers.get("openai-poll-after-ms");if(u){const d=parseInt(u);isNaN(d)||(c=d)}}await nu(c);break;case"failed":case"completed":return i}}}async upload(e,r,n){const s=await this._client.files.create({file:r,purpose:"assistants"},n);return this.create(e,{file_id:s.id},n)}async uploadAndPoll(e,r,n){const s=await this.upload(e,r,n);return await this.poll(e,s.id,n)}content(e,r,n){const{vector_store_id:s}=r;return this._client.getAPIList(te`/vector_stores/${s}/files/${e}/content`,kh,{...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}class Rh extends Ce{constructor(){super(...arguments),this.files=new _2(this._client),this.fileBatches=new b2(this._client)}create(e,r){return this._client.post("/vector_stores",{body:e,...r,headers:ye([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,r){return this._client.get(te`/vector_stores/${e}`,{...r,headers:ye([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,r,n){return this._client.post(te`/vector_stores/${e}`,{body:r,...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e={},r){return this._client.getAPIList("/vector_stores",gt,{query:e,...r,headers:ye([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,r){return this._client.delete(te`/vector_stores/${e}`,{...r,headers:ye([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}search(e,r,n){return this._client.getAPIList(te`/vector_stores/${e}/search`,kh,{body:r,method:"post",...n,headers:ye([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}Rh.Files=_2;Rh.FileBatches=b2;var Mg,h0,Ad,S2;class Me{constructor({baseURL:e=El("OPENAI_BASE_URL"),apiKey:r=El("OPENAI_API_KEY"),organization:n=El("OPENAI_ORG_ID")??null,project:s=El("OPENAI_PROJECT_ID")??null,...a}={}){if(Mg.add(this),Ad.set(this,void 0),this.completions=new s2(this),this.chat=new e0(this),this.embeddings=new o2(this),this.files=new l2(this),this.images=new m2(this),this.audio=new au(this),this.moderations=new g2(this),this.models=new p2(this),this.fineTuning=new dl(this),this.graders=new c0(this),this.vectorStores=new Rh(this),this.beta=new ou(this),this.batches=new Xj(this),this.uploads=new f0(this),this.responses=new d0(this),this.evals=new a0(this),this.containers=new n0(this),r===void 0)throw new _e("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:r,organization:n,project:s,...a,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&fF())throw new _e(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=o.baseURL,this.timeout=o.timeout??h0.DEFAULT_TIMEOUT,this.logger=o.logger??console;const i="warn";this.logLevel=i,this.logLevel=Sb(o.logLevel,"ClientOptions.logLevel",this)??Sb(El("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??i,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??vF(),Se(this,Ad,xF),this._options=o,this.apiKey=r,this.organization=n,this.project=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:r}){}authHeaders(e){return ye([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return EF(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Qo}`}defaultIdempotencyKey(){return`stainless-node-retry-${rj()}`}makeStatusError(e,r,n,s){return Vt.generate(e,r,n,s)}buildURL(e,r,n){const s=!M(this,Mg,"m",S2).call(this)&&n||this.baseURL,a=oF(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return lF(o)||(r={...o,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(a.search=this.stringifyQuery(r)),a.toString()}async prepareOptions(e){}async prepareRequest(e,{url:r,options:n}){}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(s=>({method:e,path:r,...s})))}request(e,r=null){return new jh(this,this.makeRequest(e,r,void 0))}async makeRequest(e,r,n){var w,x;const s=await e,a=s.maxRetries??this.maxRetries;r==null&&(r=a),await this.prepareOptions(s);const{req:o,url:i,timeout:c}=this.buildRequest(s,{retryCount:a-r});await this.prepareRequest(o,{url:i,options:s});const u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=n===void 0?"":`, retryOf: ${n}`,f=Date.now();if(Kt(this).debug(`[${u}] sending request`,qa({retryOfRequestLogID:n,method:s.method,url:i,options:s,headers:o.headers})),(w=s.signal)!=null&&w.aborted)throw new Vr;const h=new AbortController,m=await this.fetchWithTimeout(i,o,c,h).catch(Ag),y=Date.now();if(m instanceof Error){const b=`retrying, ${r} attempts remaining`;if((x=s.signal)!=null&&x.aborted)throw new Vr;const _=Ng(m)||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(r)return Kt(this).info(`[${u}] connection ${_?"timed out":"failed"} - ${b}`),Kt(this).debug(`[${u}] connection ${_?"timed out":"failed"} (${b})`,qa({retryOfRequestLogID:n,url:i,durationMs:y-f,message:m.message})),this.retryRequest(s,r,n??u);throw Kt(this).info(`[${u}] connection ${_?"timed out":"failed"} - error; no more retries left`),Kt(this).debug(`[${u}] connection ${_?"timed out":"failed"} (error; no more retries left)`,qa({retryOfRequestLogID:n,url:i,durationMs:y-f,message:m.message})),_?new qy:new Nh({cause:m})}const p=[...m.headers.entries()].filter(([b])=>b==="x-request-id").map(([b,_])=>", "+b+": "+JSON.stringify(_)).join(""),v=`[${u}${d}${p}] ${o.method} ${i} ${m.ok?"succeeded":"failed"} with status ${m.status} in ${y-f}ms`;if(!m.ok){const b=this.shouldRetry(m);if(r&&b){const j=`retrying, ${r} attempts remaining`;return await yF(m.body),Kt(this).info(`${v} - ${j}`),Kt(this).debug(`[${u}] response error (${j})`,qa({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,durationMs:y-f})),this.retryRequest(s,r,n??u,m.headers)}const _=b?"error; no more retries left":"error; not retryable";Kt(this).info(`${v} - ${_}`);const C=await m.text().catch(j=>Ag(j).message),E=dF(C),N=E?void 0:C;throw Kt(this).debug(`[${u}] response error (${_})`,qa({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,message:N,durationMs:Date.now()-f})),this.makeStatusError(m.status,E,N,m.headers)}return Kt(this).info(v),Kt(this).debug(`[${u}] response start`,qa({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,durationMs:y-f})),{response:m,options:s,controller:h,requestLogID:u,retryOfRequestLogID:n,startTime:f}}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}requestAPIList(e,r){const n=this.makeRequest(r,null,void 0);return new OF(this,n,e)}async fetchWithTimeout(e,r,n,s){const{signal:a,method:o,...i}=r||{};a&&a.addEventListener("abort",()=>s.abort());const c=setTimeout(()=>s.abort(),n),u=globalThis.ReadableStream&&i.body instanceof globalThis.ReadableStream||typeof i.body=="object"&&i.body!==null&&Symbol.asyncIterator in i.body,d={signal:s.signal,...u?{duplex:"half"}:{},method:"GET",...i};o&&(d.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(c)}}shouldRetry(e){const r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n,s){let a;const o=s==null?void 0:s.get("retry-after-ms");if(o){const c=parseFloat(o);Number.isNaN(c)||(a=c)}const i=s==null?void 0:s.get("retry-after");if(i&&!a){const c=parseFloat(i);Number.isNaN(c)?a=Date.parse(i)-Date.now():a=c*1e3}if(!(a&&0<=a&&a<60*1e3)){const c=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(r,c)}return await nu(a),this.makeRequest(e,r-1,n)}calculateDefaultRetryTimeoutMillis(e,r){const a=r-e,o=Math.min(.5*Math.pow(2,a),8),i=1-Math.random()*.25;return o*i*1e3}buildRequest(e,{retryCount:r=0}={}){const n={...e},{method:s,path:a,query:o,defaultBaseURL:i}=n,c=this.buildURL(a,o,i);"timeout"in n&&uF("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const{bodyHeaders:u,body:d}=this.buildBody({options:n}),f=this.buildHeaders({options:e,method:s,bodyHeaders:u,retryCount:r});return{req:{method:s,headers:f,...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&d instanceof globalThis.ReadableStream&&{duplex:"half"},...d&&{body:d},...this.fetchOptions??{},...n.fetchOptions??{}},url:c,timeout:n.timeout}}buildHeaders({options:e,method:r,bodyHeaders:n,retryCount:s}){let a={};this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const o=ye([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...gF(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},this.authHeaders(e),this._options.defaultHeaders,n,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:r}}){if(!e)return{bodyHeaders:void 0,body:void 0};const n=ye([r]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:mj(e)}:M(this,Ad,"f").call(this,{body:e,headers:n})}}h0=Me,Ad=new WeakMap,Mg=new WeakSet,S2=function(){return this.baseURL!=="https://api.openai.com/v1"};Me.OpenAI=h0;Me.DEFAULT_TIMEOUT=6e5;Me.OpenAIError=_e;Me.APIError=Vt;Me.APIConnectionError=Nh;Me.APIConnectionTimeoutError=qy;Me.APIUserAbortError=Vr;Me.NotFoundError=oj;Me.ConflictError=ij;Me.RateLimitError=cj;Me.BadRequestError=nj;Me.AuthenticationError=sj;Me.InternalServerError=uj;Me.PermissionDeniedError=aj;Me.UnprocessableEntityError=lj;Me.toFile=UF;Me.Completions=s2;Me.Chat=e0;Me.Embeddings=o2;Me.Files=l2;Me.Images=m2;Me.Audio=au;Me.Moderations=g2;Me.Models=p2;Me.FineTuning=dl;Me.Graders=c0;Me.VectorStores=Rh;Me.Beta=ou;Me.Batches=Xj;Me.Uploads=f0;Me.Responses=d0;Me.Evals=a0;Me.Containers=n0;class na{static async getProviders(e){console.log(" [AI_PROVIDER_SERVICE] Getting providers with direct query. userId:",e);let r=ne.from("ai_providers").select("*").eq("is_active",!0);e&&(r=r.or(`user_id.is.null,user_id.eq.${e}`));const{data:n,error:s}=await r.order("created_at",{ascending:!1});if(s)throw console.error(" [AI_PROVIDER_SERVICE] Error fetching AI providers:",s),new Error("Erro ao carregar provedores de IA");return console.log(` [AI_PROVIDER_SERVICE] Found ${(n==null?void 0:n.length)||0} providers`),(n||[]).map(a=>({...a,provider_type:a.provider_type,advanced_settings:a.advanced_settings||{},created_at:a.created_at||new Date().toISOString(),updated_at:a.updated_at||new Date().toISOString(),is_active:a.is_active??!0,api_key:a.api_key||"",base_url:a.base_url||"",default_model:a.default_model||"",user_id:a.user_id||null}))}static async getActiveProviders(){return this.getProviders()}static async createProvider(e,r){try{console.log(" [AI_PROVIDER_SERVICE] Creating provider with custom user ID:",r);const n={name:e.name,provider_type:e.provider_type,api_key:e.api_key,base_url:e.base_url,default_model:e.default_model,is_active:e.is_active,advanced_settings:e.advanced_settings||{},user_id:r||null},{error:s}=await ne.from("ai_providers").insert(n);return s?(console.error(" [AI_PROVIDER_SERVICE] Error creating AI provider:",s),{success:!1,error:s.message,message:s.message}):(console.log(" [AI_PROVIDER_SERVICE] Provider created successfully"),{success:!0,message:"Provedor criado com sucesso"})}catch(n){return console.error(" [AI_PROVIDER_SERVICE] Unexpected error:",n),{success:!1,error:n instanceof Error?n.message:"Erro desconhecido",message:n instanceof Error?n.message:"Erro desconhecido"}}}static async updateProvider(e,r,n){try{console.log(" [AI_PROVIDER_SERVICE] Updating provider:",e,"for user:",n);const s={name:r.name,provider_type:r.provider_type,api_key:r.api_key,base_url:r.base_url,default_model:r.default_model,is_active:r.is_active,advanced_settings:r.advanced_settings||{}};let a=ne.from("ai_providers").update(s).eq("id",e);n&&(a=a.eq("user_id",n));const{error:o}=await a;return o?(console.error(" [AI_PROVIDER_SERVICE] Error updating AI provider:",o),{success:!1,error:o.message,message:o.message}):(console.log(" [AI_PROVIDER_SERVICE] Provider updated successfully"),{success:!0,message:"Provedor atualizado com sucesso"})}catch(s){return console.error(" [AI_PROVIDER_SERVICE] Unexpected error:",s),{success:!1,error:s instanceof Error?s.message:"Erro desconhecido",message:s instanceof Error?s.message:"Erro desconhecido"}}}static async deleteProvider(e,r){console.log(" [AI_PROVIDER_SERVICE] Deleting provider:",e,"for user:",r);let n=ne.from("ai_providers").delete().eq("id",e);r&&(n=n.eq("user_id",r));const{error:s}=await n;if(s)throw console.error(" [AI_PROVIDER_SERVICE] Error deleting AI provider:",s),new Error("Erro ao excluir provedor");console.log(" [AI_PROVIDER_SERVICE] Provider deleted successfully")}static async testProvider(e){return console.log(" [AI_PROVIDER_SERVICE] Testing provider:",e),new Promise(r=>{setTimeout(()=>{r({success:!0,message:"Provedor testado com sucesso"})},1e3)})}static getProviderTypeLabel(e){return{openai:"OpenAI",anthropic:"Anthropic",google:"Google",custom:"Personalizado"}[e]||e}}const Dg={async getOpenAIInstance(t="openai"){ze.info("OpenAIService",`Buscando provedor OpenAI ativo... Tipo: ${t}`);try{const r=await na.getProviders(void 0);let n=null;return Array.isArray(r)?(console.log("[OpenAIService] Lista de provedores disponveis:",r.map(s=>`${s.name} (${s.provider_type}) ativo=${s.is_active}, user_id=${s.user_id}`)),n=r.find(s=>s.provider_type===t&&s.is_active===!0),n||ze.warn("OpenAIService",`Nenhum provedor OpenAI ativo encontrado para o tipo '${t}'.`)):r&&typeof r=="object"&&(n=r,n.provider_type===t&&n.is_active===!0||(n=null)),n&&n.api_key?(ze.info("OpenAIService",`Provedor OpenAI '${n.name}' encontrado. BaseURL: ${n.base_url||"Padro OpenAI"}`),new Me({apiKey:n.api_key,baseURL:n.base_url||void 0,dangerouslyAllowBrowser:!0})):(ze.warn("OpenAIService","Provedor OpenAI no encontrado ou chave de API no configurada. Resultado da busca:",n),null)}catch(e){return ze.error("OpenAIService","Erro ao obter instncia OpenAI:",e),null}},async generateConversationSummary(t,e,r){var i,c,u,d;ze.info("OpenAIService",`Gerando resumo para canal ${t}, conversa ${e}`);const n=await this.getOpenAIInstance();if(!n)throw ze.error("OpenAIService","Instncia OpenAI no disponvel para resumo."),new Error("OpenAI no configurado.");const s=await this.getMessagesForConversation(t,e);if(s.length===0)return ze.info("OpenAIService","Nenhuma mensagem encontrada para resumir."),"No h mensagens nesta conversa para resumir.";let o=`Resuma a seguinte conversa com ${((i=s[0])==null?void 0:i.nome_do_contato)||e}. Destaque os pontos principais e quaisquer aes pendentes. Seja conciso e direto.

`;r&&(o+=`Instrues adicionais: ${r}

`),o+=`Conversa:
`,s.slice(-20).forEach(f=>{const h=f.tipo_remetente==="customer"||f.tipo_remetente==="CONTATO_EXTERNO"?f.nome_do_contato||"Cliente":"Atendente";o+=`${h}: ${f.message}
`});try{ze.info("OpenAIService","Enviando requisio de resumo para OpenAI...");const h=(d=(u=(c=(await n.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:"Voc  um assistente til que resume conversas."},{role:"user",content:o}],max_tokens:200})).choices[0])==null?void 0:c.message)==null?void 0:u.content)==null?void 0:d.trim();return h?(ze.info("OpenAIService","Resumo gerado com sucesso."),h):(ze.warn("OpenAIService","OpenAI retornou um resumo vazio."),"No foi possvel gerar o resumo.")}catch(f){throw ze.error("OpenAIService","Erro ao chamar API da OpenAI para resumo:",f),f instanceof Me.APIError?new Error(`Erro da API OpenAI: ${f.status} ${f.name} ${f.message}`):new Error("Falha ao gerar resumo da conversa.")}},async getMessagesForConversation(t,e){const r=_h(t);ze.info("OpenAIService",`Buscando mensagens da tabela '${r}' para conversa ${e}`);try{const{data:n,error:s}=await ne.from(r).select("*").eq("session_id",e).order("read_at",{ascending:!0});if(s)throw ze.error("OpenAIService",`Erro ao buscar mensagens da tabela '${r}':`,s),s;const a=(n||[]).map(o=>({id:String(o.id),message:o.message||"",nome_do_contato:o.nome_do_contato,session_id:o.session_id,tipo_remetente:o.tipo_remetente||"unknown",created_at:o.read_at||new Date().toISOString(),mensagemtype:o.mensagemtype,media_url:o.media_url||o.media_base64,media_caption:o.media_caption,is_read:o.is_read}));return ze.info("OpenAIService",`Mensagens encontradas para ${e} em ${r}: ${a.length}`),a}catch(n){return ze.error("OpenAIService",`Exceo ao buscar mensagens para ${e} em ${r}:`,n),[]}},async generateSuggestedResponse(t,e,r){var u,d,f,h;ze.info("OpenAIService",`Gerando resposta sugerida para canal ${t}, conversa ${e}`);const n=await this.getOpenAIInstance();if(!n)throw ze.error("OpenAIService","Instncia OpenAI no disponvel para resposta sugerida."),new Error("OpenAI no configurado.");const s=await this.getMessagesForConversation(t,e);if(s.length===0)return ze.info("OpenAIService","Nenhuma mensagem na conversa para gerar sugesto."),"Nenhuma mensagem disponvel nesta conversa.";const a=((u=s[0])==null?void 0:u.nome_do_contato)||"Cliente",o=[...s].reverse().find(m=>m.tipo_remetente==="customer"||m.tipo_remetente==="CONTATO_EXTERNO"),i=(o==null?void 0:o.message)||s[s.length-1].message||"";let c=`Voc  um assistente de atendimento ao cliente.
`;c+=`Baseando-se em todo o histrico da conversa abaixo, sugira uma resposta apropriada, breve e profissional para a LTIMA mensagem enviada pelo cliente.

`,r&&(c+=`Instrues adicionais: ${r}

`),c+=`Histrico da Conversa:
`,s.slice(-50).forEach(m=>{const y=m.tipo_remetente==="customer"||m.tipo_remetente==="CONTATO_EXTERNO"?m.nome_do_contato||a:"Atendente";c+=`${y}: ${m.message}
`}),c+=`
Responder a seguinte mensagem do cliente:
"${i}"
Resposta:
`;try{ze.info("OpenAIService","Enviando requisio de sugesto de resposta para OpenAI...");const y=(h=(f=(d=(await n.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:"Voc  um assistente prestativo que sugere respostas em um chat de atendimento."},{role:"user",content:c}],max_tokens:100,temperature:.7})).choices[0])==null?void 0:d.message)==null?void 0:f.content)==null?void 0:h.trim();return y?(ze.info("OpenAIService","Resposta sugerida gerada com sucesso."),y):(ze.warn("OpenAIService","OpenAI retornou uma sugesto vazia."),"No foi possvel gerar uma sugesto no momento.")}catch(m){throw ze.error("OpenAIService","Erro ao chamar API da OpenAI para sugesto de resposta:",m),m instanceof Me.APIError?new Error(`Erro da API OpenAI: ${m.status} ${m.name} ${m.message}`):new Error("Falha ao gerar sugesto de resposta.")}}};class ao{static async fetchMappings(){return this.mappings!==null?this.mappings:this.isFetching?this.fetchPromise||null:(this.isFetching=!0,this.fetchPromise=new Promise(async e=>{try{const{data:r,error:n}=await ne.from("channel_instance_mappings").select("*");n?(console.error("Error fetching channel instance mappings:",n),e(null)):(this.mappings=r,e(r))}catch(r){console.error("Unexpected error fetching channel instance mappings:",r),e(null)}finally{this.isFetching=!1,this.fetchPromise=null}}),this.fetchPromise)}static async getMappings(){return this.mappings===null&&await this.fetchMappings(),this.mappings}static async getApiInstanceForChannel(e){const r=await this.getMappings();if(!r)return console.warn("Channel mappings not yet loaded."),null;const n=r.find(s=>s.channel_id===e);return n?{base_url:n.base_url,api_key:n.api_key,instance_name:n.instance_name,id:n.instance_id}:null}static clearCache(){this.mappings=null}}Ee(ao,"mappings",null),Ee(ao,"isFetching",!1),Ee(ao,"fetchPromise",null);class m0{static async getChannelUuid(e){if(/^[0-9a-fA-F-]{36}$/.test(e))return e;if(this.legacyIdToUuidCache[e])return this.legacyIdToUuidCache[e];const r={chat:"Yelena-AI",canarana:"Canarana","souto-soares":"Souto Soares","joao-dourado":"Joo Dourado","america-dourada":"Amrica Dourada","gerente-lojas":"Gerente das Lojas","gerente-externo":"Andressa Gerente Externo"};try{const{data:n,error:s}=await ne.from("channels").select("id, name");if(s)return console.warn("[ChannelUuidResolver] Falha ao buscar canais:",s.message),null;if(n){n.forEach(o=>{Object.entries(r).forEach(([i,c])=>{o.name===c&&(this.legacyIdToUuidCache[i]=o.id,this.legacyIdToUuidCache[o.name]=o.id)}),this.legacyIdToUuidCache[o.name]=o.id,this.legacyIdToUuidCache[o.id]=o.id});const a=this.legacyIdToUuidCache[e]||null;return console.log(`[ChannelUuidResolver:getChannelUuid] legacyId='${e}'  uuid='${a}'`),a}}catch(n){console.error("[ChannelUuidResolver] Erro inesperado:",n)}return null}}Ee(m0,"legacyIdToUuidCache",{});class Fg{static async sendMessage(e){try{console.log(" [N8N_SERVICE] Enviando mensagem:",{channel:e.channel,instanceName:e.instanceName,phoneNumber:e.phoneNumber,messageType:e.messageType});const r={channel:e.channel,instanceName:e.instanceName,phoneNumber:e.phoneNumber,content:e.content,messageType:e.messageType,fileData:e.fileData||null,fileName:e.fileName||null,timestamp:new Date().toISOString()},n=await fetch(this.N8N_SEND_WEBHOOK,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok){const a=await n.text();return console.error(" [N8N_SERVICE] Erro na resposta:",n.status,a),{success:!1,error:`HTTP ${n.status}: ${a}`}}const s=await n.json();return console.log(" [N8N_SERVICE] Mensagem enviada com sucesso:",s),{success:!0}}catch(r){return console.error(" [N8N_SERVICE] Erro ao enviar mensagem:",r),{success:!1,error:r instanceof Error?r.message:"Erro desconhecido"}}}static async sendTextMessage(e,r,n,s){return this.sendMessage({channel:e,instanceName:r,phoneNumber:n,content:s,messageType:"text"})}static async sendMediaMessage(e,r,n,s,a,o,i){return this.sendMessage({channel:e,instanceName:r,phoneNumber:n,content:a,messageType:o,fileData:s,fileName:i})}static async validateWebhook(){try{console.log(" [N8N_SERVICE] Validando webhook N8N...");const e={test:!0,timestamp:new Date().toISOString()},r=await fetch(this.N8N_SEND_WEBHOOK,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const n=await r.text();return console.error(" [N8N_SERVICE] Webhook no acessvel:",r.status,n),{success:!1,error:`Webhook no acessvel: HTTP ${r.status}`}}return console.log(" [N8N_SERVICE] Webhook N8N validado com sucesso"),{success:!0}}catch(e){return console.error(" [N8N_SERVICE] Erro ao validar webhook:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}}Ee(Fg,"N8N_SEND_WEBHOOK","https://n8n.estudioonmp.com/webhook/3a0b2487-21d0-43c7-bc7f-07404879df5434232");class fU{static async sendMessageViaEvolution(e,r,n,s){try{console.log(" [EVOLUTION_MESSAGING] Enviando mensagem via N8N:",{channelId:e,conversationId:r,hasMedia:!!s});const{data:a,error:o}=await ne.from("channel_instance_mappings").select("*").eq("channel_id",e).maybeSingle();return o||!a?(console.error(" [EVOLUTION_MESSAGING] Mapping no encontrado para canal:",e),!1):s?(await Fg.sendMediaMessage(a.channel_name,a.instance_name,r,s,n,"image")).success:(await Fg.sendTextMessage(a.channel_name,a.instance_name,r,n)).success}catch(a){return console.error(" [EVOLUTION_MESSAGING] Erro ao enviar mensagem:",a),!1}}static async sendMessageViaEvolutionLegacy(e,r,n,s){return console.warn(" [EVOLUTION_MESSAGING] Mtodo legado chamado, redirecionando para N8N"),this.sendMessageViaEvolution(e,r,n,s)}}class hU{static async saveMessageToChannel(e,r){const n={"af1e5797-edc6-4ba3-a57a-25cf7297c4d6":"yelena_ai_conversas","011b69ba-cf25-4f63-af2e-4ad0260d9516":"canarana_conversas","b7996f75-41a7-4725-8229-564f31868027":"souto_soares_conversas","621abb21-60b2-4ff2-a0a6-172a94b4b65c":"joao_dourado_conversas","64d8acad-c645-4544-a1e6-2f0825fae00b":"america_dourada_conversas","d8087e7b-5b06-4e26-aa05-6fc51fd4cdce":"gerente_lojas_conversas","d2892900-ca8f-4b08-a73f-6b7aa5866ff7":"gerente_externo_conversas",yelena:"yelena_ai_conversas",chat:"yelena_ai_conversas",canarana:"canarana_conversas","souto-soares":"souto_soares_conversas","joao-dourado":"joao_dourado_conversas","america-dourada":"america_dourada_conversas","gerente-lojas":"gerente_lojas_conversas","gerente-externo":"gerente_externo_conversas"},s=n[e]||n[await m0.getChannelUuid(e)||""]||"yelena_ai_conversas",a={session_id:r.session_id,message:r.message,read_at:r.read_at,nome_do_contato:r.nome_do_contato||r.Nome_do_contato||"Atendente",mensagemtype:r.mensagemtype==="conversation"&&r.media_base64?"file":r.mensagemtype||"text",tipo_remetente:r.tipo_remetente};if(r.media_base64&&typeof r.media_base64=="string"&&r.media_base64.trim()!==""){let i=r.media_base64.trim();if(!i.startsWith("data:")){let c=(a.mensagemtype||"").toLowerCase(),u="application/octet-stream";c==="image"?u="image/jpeg":c==="audio"?u="audio/mpeg":c==="video"?u="video/mp4":(c==="document"||c==="file")&&(u="application/pdf"),i=`data:${u};base64,${i}`}a.media_base64=i,(!a.message||a.message.trim()==="")&&["image","audio","video","document","file"].includes(a.mensagemtype)&&(a.mensagemtype==="image"?a.message="[Imagem]":a.mensagemtype==="audio"?a.message="[udio]":a.mensagemtype==="video"?a.message="[Vdeo]":a.mensagemtype==="document"||a.mensagemtype==="file"?a.message="[Documento]":a.message="[Mdia]"),console.log(`[saveMessageToChannel:REFORMULADO] media_base64 est presente. Tipo: ${a.mensagemtype}. Tamanho: ${(i||"").length}. Caption: ${a.message}`)}else a.media_base64=null;console.log("[saveMessageToChannel:REFORMULADO] Salvando mensagem:",a);const{error:o}=await ne.from(s).insert(a);if(o)throw console.error(`[saveMessageToChannel] Error saving message to ${s}:`,o),o}}class jn{constructor(){}static async fetchMappings(){return ao.fetchMappings()}static async getMappings(){return ao.getMappings()}static async getChannelUuid(e){return m0.getChannelUuid(e)}static async getApiInstanceForChannel(e){return ao.getApiInstanceForChannel(e)}static async sendMessageViaEvolution(e,r,n,s){return fU.sendMessageViaEvolution(e,r,n,s)}static async saveMessageToChannel(e,r){return hU.saveMessageToChannel(e,r)}static clearCache(){ao.clearCache()}}class mU{static async compressAudio(e,r={quality:.7,maxSizeKB:500,format:"ogg"}){try{console.log(" [AUDIO_COMPRESSOR] Iniciando compresso:",{originalSize:e.length,targetFormat:r.format,quality:r.quality,maxSizeKB:r.maxSizeKB});const n=e.length,s=n*3/4/1024;if(s<=r.maxSizeKB)return console.log(" [AUDIO_COMPRESSOR] udio j est em tamanho aceitvel"),{success:!0,compressedData:e,originalSize:n,compressedSize:n,compressionRatio:1};const a=this.base64ToBlob(e);if(!a)throw new Error("Falha ao converter base64 para blob");const o=await this.compressAudioBlob(a,r),i=await this.blobToBase64(o),c=i.length,u=c/n;return console.log(" [AUDIO_COMPRESSOR] Compresso concluda:",{originalSizeKB:Math.round(s),compressedSizeKB:Math.round(c*3/4/1024),compressionRatio:Math.round(u*100)/100}),{success:!0,compressedData:i,originalSize:n,compressedSize:c,compressionRatio:u}}catch(n){return console.error(" [AUDIO_COMPRESSOR] Erro na compresso:",n),{success:!1,originalSize:e.length,compressedSize:0,compressionRatio:0,error:n instanceof Error?n.message:"Erro desconhecido"}}}static base64ToBlob(e){try{let r=e;e.startsWith("data:")&&(r=e.split(",")[1]);const n=atob(r),s=new Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);const a=new Uint8Array(s);return new Blob([a],{type:"audio/webm"})}catch(r){return console.error(" [AUDIO_COMPRESSOR] Erro ao converter base64:",r),null}}static async blobToBase64(e){return new Promise((r,n)=>{const s=new FileReader;s.onload=()=>{const a=s.result;r(a)},s.onerror=n,s.readAsDataURL(e)})}static async compressAudioBlob(e,r){try{const n=new(window.AudioContext||window.webkitAudioContext),s=await e.arrayBuffer(),a=await n.decodeAudioData(s),o=Math.min(a.sampleRate,22050),i=Math.min(a.numberOfChannels,1),c=n.createBuffer(i,Math.floor(a.length*o/a.sampleRate),o);for(let d=0;d<i;d++){const f=a.getChannelData(Math.min(d,a.numberOfChannels-1)),h=c.getChannelData(d);for(let m=0;m<h.length;m++){const y=Math.floor(m*a.length/h.length);h[m]=f[y]*r.quality}}const u=this.audioBufferToArrayBuffer(c);return new Blob([u],{type:`audio/${r.format||"webm"}`})}catch(n){return console.error(" [AUDIO_COMPRESSOR] Erro na compresso Web Audio:",n),e}}static audioBufferToArrayBuffer(e){const r=e.length*e.numberOfChannels*2,n=new ArrayBuffer(r),s=new DataView(n);let a=0;for(let o=0;o<e.length;o++)for(let i=0;i<e.numberOfChannels;i++){const c=e.getChannelData(i)[o],u=Math.max(-1,Math.min(1,c))*32767;s.setInt16(a,u,!0),a+=2}return n}static validateAudioForWhatsApp(e){const r=[],n=e.length*3/4/1024;if(n>16*1024&&r.push(`Arquivo muito grande: ${Math.round(n)}KB (mximo 16MB)`),e.startsWith("data:")){const s=e.match(/data:([^;,]+)/);if(s){const a=s[1];["audio/ogg","audio/mpeg","audio/mp4","audio/webm"].some(i=>a.includes(i))||r.push(`Formato no suportado: ${a}`)}}return{isValid:r.length===0,issues:r}}static estimateAudioDuration(e){try{return null}catch(r){return console.error(" [AUDIO_COMPRESSOR] Erro ao estimar durao:",r),null}}}class pU{static async compressVideo(e,r={quality:.6,maxSizeKB:15*1024,maxWidth:1280,maxHeight:720,frameRate:30,format:"mp4"},n){try{console.log(" [VIDEO_COMPRESSOR] Iniciando compresso:",{originalSize:e.length,targetFormat:r.format,quality:r.quality,maxSizeKB:r.maxSizeKB});const s=e.length;n==null||n(10);const a=s*3/4/1024;if(a<=r.maxSizeKB)return console.log(" [VIDEO_COMPRESSOR] Vdeo j est em tamanho aceitvel"),n==null||n(100),{success:!0,compressedData:e,originalSize:s,compressedSize:s,compressionRatio:1};n==null||n(20);const o=this.base64ToBlob(e);if(!o)throw new Error("Falha ao converter base64 para blob");n==null||n(30);const i=await this.compressVideoBlob(o,r,f=>{n==null||n(30+f*.6)});n==null||n(90);const c=await this.blobToBase64(i),u=c.length,d=u/s;return n==null||n(100),console.log(" [VIDEO_COMPRESSOR] Compresso concluda:",{originalSizeKB:Math.round(a),compressedSizeKB:Math.round(u*3/4/1024),compressionRatio:Math.round(d*100)/100}),{success:!0,compressedData:c,originalSize:s,compressedSize:u,compressionRatio:d}}catch(s){return console.error(" [VIDEO_COMPRESSOR] Erro na compresso:",s),n==null||n(0),{success:!1,originalSize:e.length,compressedSize:0,compressionRatio:0,error:s instanceof Error?s.message:"Erro desconhecido"}}}static base64ToBlob(e){try{let r=e,n="video/mp4";if(e.startsWith("data:")){const i=e.split(","),c=i[0];r=i[1];const u=c.match(/data:([^;,]+)/);u&&(n=u[1])}const s=atob(r),a=new Array(s.length);for(let i=0;i<s.length;i++)a[i]=s.charCodeAt(i);const o=new Uint8Array(a);return new Blob([o],{type:n})}catch(r){return console.error(" [VIDEO_COMPRESSOR] Erro ao converter base64:",r),null}}static async blobToBase64(e){return new Promise((r,n)=>{const s=new FileReader;s.onload=()=>{const a=s.result;r(a)},s.onerror=n,s.readAsDataURL(e)})}static async compressVideoBlob(e,r,n){return new Promise((s,a)=>{const o=document.createElement("video"),i=document.createElement("canvas"),c=i.getContext("2d");if(!c){a(new Error("No foi possvel criar contexto do canvas"));return}o.onloadedmetadata=()=>{try{const{width:u,height:d}=this.calculateDimensions(o.videoWidth,o.videoHeight,r.maxWidth||1280,r.maxHeight||720);i.width=u,i.height=d;const f=i.captureStream(r.frameRate||30),h=new MediaRecorder(f,{mimeType:`video/${r.format||"mp4"}`,videoBitsPerSecond:this.calculateBitrate(u,d,r.quality)}),m=[];let y=0;const p=o.duration;h.ondataavailable=w=>{w.data.size>0&&m.push(w.data)},h.onstop=()=>{const w=new Blob(m,{type:`video/${r.format||"mp4"}`});s(w)},h.onerror=w=>{a(new Error("Erro no MediaRecorder: "+w))},h.start();const v=()=>{if(y>=p){h.stop();return}o.currentTime=y,o.onseeked=()=>{c.imageSmoothingEnabled=!0,c.imageSmoothingQuality="medium",c.drawImage(o,0,0,u,d);const w=y/p*100;n==null||n(w),y+=1/(r.frameRate||30),setTimeout(v,1e3/(r.frameRate||30))}};o.currentTime=0,v()}catch(u){a(u)}},o.onerror=()=>{a(new Error("Erro ao carregar vdeo"))},o.src=URL.createObjectURL(e),o.load()})}static calculateDimensions(e,r,n,s){const a=e/r;let o=e,i=r;return o>n&&(o=n,i=o/a),i>s&&(i=s,o=i*a),o=Math.floor(o/2)*2,i=Math.floor(i/2)*2,{width:o,height:i}}static calculateBitrate(e,r,n){const a=e*r*.1;return Math.floor(a*n)}static validateVideoForWhatsApp(e){const r=[],n=e.length*3/4/1024;if(n>16*1024&&r.push(`Arquivo muito grande: ${Math.round(n)}KB (mximo 16MB)`),e.startsWith("data:")){const s=e.match(/data:([^;,]+)/);if(s){const a=s[1];["video/mp4","video/webm","video/3gpp"].some(i=>a.includes(i))||r.push(`Formato no suportado: ${a}`)}}return{isValid:r.length===0,issues:r}}static async extractThumbnail(e){try{const r=this.base64ToBlob(e);return r?new Promise(n=>{const s=document.createElement("video"),a=document.createElement("canvas"),o=a.getContext("2d");if(!o){n(null);return}s.onloadedmetadata=()=>{a.width=s.videoWidth,a.height=s.videoHeight,s.currentTime=1},s.onseeked=()=>{o.drawImage(s,0,0);const i=a.toDataURL("image/jpeg",.8);n(i)},s.onerror=()=>n(null),s.src=URL.createObjectURL(r),s.load()}):null}catch(r){return console.error(" [VIDEO_COMPRESSOR] Erro ao extrair thumbnail:",r),null}}static async estimateVideoDuration(e){try{const r=this.base64ToBlob(e);return r?new Promise(n=>{const s=document.createElement("video");s.onloadedmetadata=()=>{n(s.duration)},s.onerror=()=>n(null),s.src=URL.createObjectURL(r),s.load()}):null}catch(r){return console.error(" [VIDEO_COMPRESSOR] Erro ao estimar durao:",r),null}}}class lc{constructor(e){Ee(this,"options");this.options=e}static async executeWithRetry(e,r){let n;for(let s=0;s<=r.maxRetries;s++)try{return await e()}catch(a){if(n=a,s===r.maxRetries)throw n;const o=Math.min(r.baseDelay*Math.pow(r.backoffMultiplier,s),r.maxDelay);console.warn(`Attempt ${s+1} failed, retrying in ${o}ms:`,a),await new Promise(i=>setTimeout(i,o))}throw n}async executeWithRetry(e){return lc.executeWithRetry(e,this.options)}}function _f({sender:t,contactName:e}){return t==="customer"&&e&&e.trim()!==""&&isNaN(Number(e.trim()))?e.trim():null}class gU{constructor(){Ee(this,"retryCount",3);Ee(this,"retryDelay",1e3);Ee(this,"retryManager");Ee(this,"logger");this.retryManager=new lc({maxRetries:this.retryCount,baseDelay:this.retryDelay,maxDelay:5e3,backoffMultiplier:2}),this.logger=new ze("MESSAGE_SENDER")}getMessageTypeForMedia(e){return e}formatPhoneNumber(e){let r=e.replace(/[^\d+]/g,"");return r.startsWith("+")&&(r=r.substring(1)),!r.startsWith("55")&&r.length===11&&(r=`55${r}`),r}async validateApiConfiguration(e){const r=await jn.getApiInstanceForChannel(e);return r?await this.checkInstanceConnection(r.base_url,r.api_key,r.instance_name)?(this.logger.info(`API Evolution configurada e conectada para canal ${e}: ${r.instance_name}`),!0):(this.logger.error(`Instncia ${r.instance_name} no est conectada`),!1):(this.logger.error(`Nenhuma instncia da API configurada para o canal ${e}`),!1)}async checkInstanceConnection(e,r,n){var s;try{const a=await fetch(`${e}/instance/connectionState/${n}`,{method:"GET",headers:{apikey:r,"Content-Type":"application/json"}});return a.ok?((s=(await a.json()).instance)==null?void 0:s.state)==="open":!1}catch{return!1}}async reconnectInstance(e,r,n){try{return(await fetch(`${e}/instance/restart/${n}`,{method:"PUT",headers:{apikey:r,"Content-Type":"application/json"}})).ok?(await new Promise(a=>setTimeout(a,5e3)),await this.checkInstanceConnection(e,r,n)):!1}catch{return!1}}async sendTextMessage(e,r,n,s="agent",a){const o=await jn.getChannelUuid(e)||e;return await lc.executeWithRetry(async()=>{var v,w;if(this.logger.info("Iniciando envio de mensagem de texto",{channelId:e,to:r}),!await this.validateApiConfiguration(o)){const x=await jn.getApiInstanceForChannel(o);if(x){if(!await this.reconnectInstance(x.base_url,x.api_key,x.instance_name))throw new Error(`API Evolution no configurada ou no conectada para o canal ${o}`)}else throw new Error(`API Evolution no configurada ou no conectada para o canal ${o}`)}const c=await jn.getApiInstanceForChannel(o);if(!c)throw new Error(`Falha ao obter instncia da API para canal ${o}`);const u=this.formatPhoneNumber(r);let d=_f({sender:s,contactName:a});const f={number:u,text:n};this.logger.debug("Enviando texto para API Evolution",{endpoint:`${c.base_url}/message/sendText/${c.instance_name}`,payload:f});const h=await fetch(`${c.base_url}/message/sendText/${c.instance_name}`,{method:"POST",headers:{"Content-Type":"application/json",apikey:c.api_key},body:JSON.stringify(f)});if(!h.ok){const x=await h.text();throw this.logger.error("Erro na resposta da API Evolution",{status:h.status,statusText:h.statusText,body:x}),new Error(`Falha ao enviar mensagem: ${h.statusText} - ${x}`)}const m=await h.json();this.logger.debug("Resposta da API Evolution",{result:m});const y=new Date().toISOString(),p={session_id:u,message:n,read_at:y,nome_do_contato:d,mensagemtype:"conversation",tipo_remetente:s==="agent"?"USUARIO_INTERNO":"CLIENTE",id:((v=m.key)==null?void 0:v.id)||m.messageId||Date.now().toString(),sender:s,timestamp:y,content:n,media_base64:null};return this.logger.debug("Salvando mensagem no canal",{realChannelId:o,table:"...",messageData:p}),await jn.saveMessageToChannel(o,p),this.logger.info("Mensagem de texto enviada com sucesso",{messageId:(w=m.key)==null?void 0:w.id}),p},{maxRetries:this.retryCount,baseDelay:this.retryDelay,maxDelay:5e3,backoffMultiplier:2})}extractBase64FromDataUrl(e){return e.includes("base64,")?e.split("base64,")[1]:e}getMimeTypeFromDataUrl(e){const r=e.match(/data:([^;]+)/);return r?r[1]:"application/octet-stream"}getFileExtensionFromMimeType(e){return{"image/jpeg":"jpg","image/png":"png","image/gif":"gif","image/webp":"webp","audio/mpeg":"mp3","audio/wav":"wav","audio/ogg":"ogg","video/mp4":"mp4","video/webm":"webm","application/pdf":"pdf"}[e]||"bin"}async sendMediaMessage(e,r,n,s,a,o="agent",i){const c=await jn.getChannelUuid(e)||e;return await lc.executeWithRetry(async()=>{var E,N;if(this.logger.info(`Iniciando envio de mdia ${a}`,{channelId:e,to:r,mediaType:a}),!await this.validateApiConfiguration(c)){const A=await jn.getApiInstanceForChannel(c);if(A){if(!await this.reconnectInstance(A.base_url,A.api_key,A.instance_name))throw new Error(`API Evolution no configurada ou no conectada para o canal ${c}`)}else throw new Error(`API Evolution no configurada ou no conectada para o canal ${c}`)}const d=await jn.getApiInstanceForChannel(c);if(!d)throw new Error(`Falha ao obter instncia da API para canal ${c}`);const f=this.formatPhoneNumber(r);let h=this.extractBase64FromDataUrl(n);const m=this.getMimeTypeFromDataUrl(n),y=this.getFileExtensionFromMimeType(m);if(a==="audio"){this.logger.info("Comprimindo udio antes do envio");const A=await mU.compressAudio(h,{quality:.7,maxSizeKB:500,format:"ogg"});A.success&&A.compressedData?(h=this.extractBase64FromDataUrl(A.compressedData),this.logger.info("udio comprimido com sucesso",{originalSize:A.originalSize,compressedSize:A.compressedSize,compressionRatio:A.compressionRatio})):this.logger.warn("Falha na compresso de udio, usando original",{error:A.error})}else if(a==="video"){this.logger.info("Comprimindo vdeo antes do envio");const A=await pU.compressVideo(h,{quality:.7,maxSizeKB:2e3,format:"mp4"});A.success&&A.compressedData?(h=this.extractBase64FromDataUrl(A.compressedData),this.logger.info("Vdeo comprimido com sucesso",{originalSize:A.originalSize,compressedSize:A.compressedSize,compressionRatio:A.compressionRatio})):this.logger.warn("Falha na compresso de vdeo, usando original",{error:A.error})}const p=`/message/sendMedia/${d.instance_name}`,v={number:f,mediatype:a,mimetype:m,caption:s||"",media:`data:${m};base64,${h}`,fileName:`media_${Date.now()}.${y}`};this.logger.debug("Enviando mdia para API Evolution",{endpoint:`${d.base_url}${p}`,mediaType:a,payload:{...v,media:"[BASE64_DATA]"}});const w=await fetch(`${d.base_url}${p}`,{method:"POST",headers:{"Content-Type":"application/json",apikey:d.api_key},body:JSON.stringify(v)});if(!w.ok){const A=await w.text();throw this.logger.error("Erro na resposta da API Evolution",{status:w.status,statusText:w.statusText,body:A}),new Error(`Falha ao enviar mensagem de mdia: ${w.statusText} - ${A}`)}const x=await w.json();this.logger.debug("Resposta da API Evolution para mdia",{result:x});const b=new Date().toISOString();let _=_f({sender:o,contactName:i});const C={session_id:f,message:`data:${m};base64,${h}`,read_at:b,nome_do_contato:_,mensagemtype:a,tipo_remetente:o==="agent"?"USUARIO_INTERNO":"CLIENTE",id:((E=x.key)==null?void 0:E.id)||x.messageId||Date.now().toString(),sender:o,timestamp:b,content:`data:${m};base64,${h}`,media_base64:`data:${m};base64,${h}`};return this.logger.debug("Salvando mensagem de mdia no canal",{realChannelId:c,table:"...",messageData:C}),await jn.saveMessageToChannel(c,C),this.logger.info("Mensagem de mdia enviada com sucesso",{messageId:(N=x.key)==null?void 0:N.id,mediaType:a}),C},{maxRetries:this.retryCount,baseDelay:this.retryDelay,maxDelay:5e3,backoffMultiplier:2})}async sendMessage(e,r,n,s,a="agent",o){return!s||s==="text"?await this.sendTextMessage(e,r,n,a,o):await this.sendMediaMessage(e,r,n,"",s,a,o)}}class qm{static async convertToMp3(e){try{if(e.type==="audio/mp3"||e.type==="audio/mpeg")return console.log(" [AUDIO_CONVERTER] Audio is already MP3, skipping conversion"),e;console.log(" [AUDIO_CONVERTER] Starting conversion to MP3...");const r=new(window.AudioContext||window.webkitAudioContext),n=await e.arrayBuffer(),s=await r.decodeAudioData(n),a=new Blob([n],{type:"audio/mpeg"});return console.log(" [AUDIO_CONVERTER] Audio converted to MP3 successfully"),a}catch(r){return console.error(" [AUDIO_CONVERTER] Error converting audio:",r),new Blob([e],{type:"audio/mpeg"})}}static async audioToBase64Mp3(e){const r=await this.convertToMp3(e);return new Promise((n,s)=>{const a=new FileReader;a.onload=()=>{const c=`data:audio/mpeg;base64,${a.result.split(",")[1]}`;n(c)},a.onerror=s,a.readAsDataURL(r)})}static getSupportedAudioFormats(){return["audio/mp3","audio/mpeg","audio/wav","audio/ogg","audio/webm","audio/m4a","audio/aac"]}static isAudioFormat(e){return this.getSupportedAudioFormats().includes(e)||e.startsWith("audio/")}}class Ug{static async convertToBase64(e){return new Promise((r,n)=>{const s=new FileReader;s.onload=()=>r(s.result),s.onerror=n,s.readAsDataURL(e)})}static async convertAudioToMp3Base64(e){try{console.log(" [FILE_SERVICE] Converting audio to MP3...");const r=new Blob([e],{type:e.type}),n=await qm.audioToBase64Mp3(r);return console.log(" [FILE_SERVICE] Audio converted to MP3 successfully"),n}catch(r){return console.error(" [FILE_SERVICE] Error converting audio to MP3:",r),this.convertToBase64(e)}}static getFileType(e){return qm.isAudioFormat(e)||e.startsWith("audio/")?"audio":e.startsWith("image/")?"image":e.startsWith("video/")?"video":"document"}static formatFileSize(e){if(e===0)return"0 Bytes";const r=1024,n=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(r));return parseFloat((e/Math.pow(r,s)).toFixed(2))+" "+n[s]}static isValidFileType(e){return["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","image/jpeg","image/png","image/gif","image/webp","audio/mpeg","audio/mp3","audio/wav","audio/ogg","audio/webm","audio/m4a","audio/aac","video/mp4","video/webm"].includes(e.type)||qm.isAudioFormat(e.type)}static getUnsupportedFileMessage(e){return e.type.startsWith("audio/")&&!this.isValidFileType(e)?`Formato de udio "${e.type}" no suportado. Use: MP3, WAV, OGG, WebM, M4A ou AAC.`:e.type.startsWith("image/")&&!this.isValidFileType(e)?`Formato de imagem "${e.type}" no suportado. Use: JPEG, PNG, GIF ou WebP.`:e.type.startsWith("video/")&&!this.isValidFileType(e)?`Formato de vdeo "${e.type}" no suportado. Use: MP4 ou WebM.`:`Tipo de arquivo "${e.type}" no suportado. Verifique os formatos permitidos.`}}const vU=()=>{const[t,e]=g.useState(!1),{toast:r}=Jt(),n=new gU;return{sendMessage:async(a,o)=>{e(!0),console.log("[useMessageSenderExtended] Incio de sendMessage. messageData:",a);try{let i=a.conversationId;i.includes("_")&&(i=i.split("_")[0]);const c=await jn.getChannelUuid(a.channelId);let u;const d=a.sender,f=_f({sender:d,contactName:a.agentName});if(a.fileData){const h=Ug.getFileType(a.fileData.mimeType);let m=a.fileData.base64;m.startsWith("data:")||(m=`data:${a.fileData.mimeType};base64,${m}`),u=await n.sendMediaMessage(c||a.channelId,i,m,a.content||a.fileData.fileName,h,d,a.agentName)}else u=await n.sendTextMessage(c||a.channelId,i,a.content,d,a.agentName);return o&&u&&o(u),!0}catch(i){return console.error("Erro ao enviar mensagem:",i),i instanceof Error?(console.error("Detalhes do erro:",i.message),console.error("Pilha de chamadas (stack):",i.stack)):console.error("Erro desconhecido:",i),r({title:"Erro",description:"Erro ao enviar mensagem",variant:"destructive"}),console.log("[useMessageSenderExtended] Toast de erro exibido."),!1}finally{e(!1),console.log("[useMessageSenderExtended] Finalizando sendMessage. setSending(false).")}},sending:t}};function yU(t=700){const e=g.useRef(!1);function r(){return e.current?!1:(e.current=!0,setTimeout(()=>{e.current=!1},t),!0)}return{beginLock:r}}const xU=["Ol! Como posso ajud-lo hoje?","Obrigado pelo contato. Vou verificar essa informao para voc.","Perfeito! Vou agendar isso para voc agora mesmo.","Entendi sua solicitao. Preciso de alguns dados adicionais.","Muito obrigado! Seu atendimento foi finalizado com sucesso.","Vou transferir voc para o setor responsvel."],wU=({isDarkMode:t,selectedConv:e,channelId:r,onSendMessage:n})=>{const[s,a]=g.useState(""),[o,i]=g.useState(null),[c,u]=g.useState(!1),[d,f]=g.useState(0),[h,m]=g.useState(!1),[y,p]=g.useState(!1),v=g.useRef(null),w=g.useRef(null),x=g.useRef(null),b=g.useRef([]),_=g.useRef(0),[C,E]=g.useState(!1),{sendMessage:N,sending:A}=vU(),{user:j}=Tt(),{beginLock:O}=yU(),[F,P]=g.useState(!1),V=async U=>{if(!O()||A||F||!s.trim()&&!o||!j||!e||!r||o&&h)return;P(!0),_f({sender:"agent",contactName:e.contact_name});let ae=null,we;try{if(o){let yt,Sr=o.file.type;yt=await Ug.convertToBase64(o.file),ae={base64:bU(yt,Sr),fileName:o.file.name,mimeType:Sr,size:o.file.size},we=o.type}}catch{alert("Erro ao processar arquivo de anexo."),P(!1);return}let ve=e.contact_phone||e.id;ve!=null&&ve.includes("_")&&(ve=ve.split("_")[0]);const De=ae?(yt=>yt?yt==="file"?"file":yt==="audio"?"audio":yt==="image"?"image":yt==="video"?"video":"text":"text")(we):"text",vt={conversationId:ve,channelId:r,content:U!==void 0?U:s.trim()||(o?o.file.name:""),sender:"agent",agentName:j.name,messageType:De,fileData:ae||void 0};await N(vt,n)&&(a(""),i(null),m(!1),f(0)),P(!1)},R=U=>{a(U),p(!1)},H=async()=>{if(!e||!r){console.error(" [AI_QUICK_RESPONSE] Conversa ou canal no selecionado");return}if(typeof Dg.generateSuggestedResponse!="function"){console.error(" [AI_QUICK_RESPONSE] openaiService.generateSuggestedResponse is not a function."),a("Desculpe, no consigo gerar uma sugesto agora.");return}try{console.log(" [AI_QUICK_RESPONSE] Gerando resposta rpida com IA...");const U=e.contact_phone||e.id;if(!U){console.error(" [AI_QUICK_RESPONSE] Identificador de conversa invlido."),a("No foi possvel identificar a conversa para gerar uma sugesto.");return}const ae=await Dg.generateSuggestedResponse(r,U);a(ae),console.log(" [AI_QUICK_RESPONSE] Resposta sugerida gerada:",ae)}catch(U){console.error(" [AI_QUICK_RESPONSE] Erro ao gerar resposta:",U);const ae=["Obrigado pelo contato. Como posso ajud-lo hoje?","Entendi sua solicitao. Vou verificar isso para voc.","Agradeo sua pacincia. Estou analisando sua situao."],we=ae[Math.floor(Math.random()*ae.length)];a(we)}},W=U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),o&&(o.type==="image"||o.type==="video"||o.type==="audio")?m(!0):V())},I=U=>{var Oe;const ae=(Oe=U.target.files)==null?void 0:Oe[0];if(!ae)return;const we=URL.createObjectURL(ae);let ve="file";ae.type.startsWith("image/")?ve="image":ae.type.startsWith("video/")?ve="video":ae.type.startsWith("audio/")&&(ve="audio"),i({file:ae,url:we,type:ve}),(ve==="image"||ve==="video"||ve==="audio")&&m(!0),U.target.value=""},[k,$]=g.useState(!1),Y=async()=>{$(!0);try{console.log(" [AUDIO_RECORDING] Iniciando gravao de udio...");const U=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:44100}});b.current=[];const ae=new MediaRecorder(U,{mimeType:"audio/webm;codecs=opus"});ae.ondataavailable=we=>{we.data.size>0&&b.current.push(we.data)},x.current=ae,_.current=Date.now(),ae.start(100),u(!0),f(0),w.current=setInterval(()=>{f(we=>we+1)},1e3),console.log(" [AUDIO_RECORDING] Gravao iniciada com sucesso")}catch(U){console.error(" [AUDIO_RECORDING] Erro ao iniciar gravao:",U),alert("Erro ao acessar o microfone. Verifique as permisses.")}},he=()=>{$(!1),x.current&&x.current.state==="recording"&&(x.current.onstop=async()=>{const U=new Blob(b.current,{type:"audio/webm;codecs=opus"}),ae=new File([U],`audio-${Date.now()}.webm`,{type:"audio/webm"});P(!0),E(!0);let we="";try{we=await Ug.convertToBase64(ae)}catch{alert("Erro ao codificar udio"),P(!1),E(!1);return}await N({conversationId:(e==null?void 0:e.contact_phone)||(e==null?void 0:e.id),channelId:r,content:"[udio]",sender:"agent",agentName:j==null?void 0:j.name,messageType:"audio",fileData:{base64:we.startsWith("data:")?we.split(",")[1]:we,fileName:ae.name,mimeType:ae.type,size:ae.size}},n),P(!1),E(!1),u(!1),f(0),w.current&&clearInterval(w.current)},x.current.stop())},ue=()=>{$(!1),console.log(" [AUDIO_RECORDING] Cancelando gravao..."),x.current&&x.current.state==="recording"&&x.current.stop(),b.current=[],u(!1),f(0),w.current&&clearInterval(w.current)},xe=U=>{const ae=Math.floor(U/60),we=U%60;return`${ae}:${we.toString().padStart(2,"0")}`},D=U=>{switch(U){case"image":return l.jsx(dL,{size:20});case"video":return l.jsx(jL,{size:20});case"audio":return l.jsx(xL,{size:20});default:return l.jsx(pn,{size:20})}},X=U=>{a(ae=>ae+U)},oe=()=>o?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",children:l.jsxs("div",{className:S("w-full max-w-lg mx-4 rounded-lg shadow-xl",t?"bg-[#27272a]":"bg-white"),children:[l.jsxs("div",{className:S("flex items-center justify-between p-4 border-b",t?"border-[#3f3f46]":"border-gray-200"),children:[l.jsx("h3",{className:S("text-lg font-semibold",t?"text-white":"text-gray-900"),children:"Enviar Arquivo"}),l.jsx(q,{variant:"ghost",size:"icon",onClick:()=>{m(!1),i(null)},children:l.jsx(Dn,{size:18})})]}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"mb-4 flex justify-center",children:[o.type==="image"&&l.jsx("img",{src:o.url,alt:"Preview",className:"max-w-full max-h-64 object-contain rounded-lg"}),o.type==="video"&&l.jsx("video",{src:o.url,className:"max-w-full max-h-64 rounded-lg",controls:!0}),o.type==="audio"&&l.jsx("div",{className:"w-full p-4 bg-gray-100 rounded-lg",children:l.jsx("audio",{src:o.url,className:"w-full",controls:!0})}),o.type==="file"&&l.jsxs("div",{className:"w-full p-4 bg-gray-100 rounded-lg flex flex-col items-center text-center",children:[D(o.type),l.jsx("p",{className:"mt-2 text-sm font-medium",children:o.file.name})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:S("text-sm font-medium",t?"text-white":"text-gray-900"),children:o.file.name}),l.jsxs("p",{className:S("text-xs",t?"text-gray-400":"text-gray-600"),children:[(o.file.size/1024/1024).toFixed(2)," MB"]})]}),l.jsx(Lc,{value:s,onChange:U=>a(U.target.value),placeholder:"Adicione uma legenda...",className:S("mb-4 resize-none",t?"bg-[#18181b] border-[#3f3f46] text-white":"bg-white border-gray-300"),rows:3})]}),l.jsxs("div",{className:S("flex justify-end gap-2 p-4 border-t",t?"border-[#3f3f46]":"border-gray-200"),children:[l.jsx(q,{variant:"outline",onClick:()=>{m(!1),i(null)},children:"Cancelar"}),l.jsxs(q,{onClick:()=>V(s),className:S("bg-[#b5103c] hover:bg-[#9d0e34] text-white",F&&"opacity-70 cursor-not-allowed"),disabled:A||F,children:[l.jsx(Rw,{size:16,className:"mr-2"}),F?"Enviando...":"Enviar"]})]})]})}):null;return c||C?l.jsx("div",{className:S("p-4 border-t",t?"border-[#3f3f46] bg-[#18181b]":"border-gray-200 bg-white"),children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[l.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),l.jsx("span",{className:S("text-sm",t?"text-white":"text-gray-900"),children:C?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"animate-spin inline-block mr-2 rounded-full h-4 w-4 border-b-2 border-white align-middle"}),"Enviando udio..."]}):l.jsxs(l.Fragment,{children:["Gravando udio... ",xe(d)]})})]}),!C&&l.jsxs(l.Fragment,{children:[l.jsx(q,{onPointerUp:ue,variant:"ghost",size:"icon",className:"text-red-500 hover:bg-red-100",children:l.jsx(Dn,{size:18})}),l.jsx(q,{onPointerUp:he,className:"bg-[#b5103c] hover:bg-[#9d0e34] text-white",children:l.jsx(xy,{size:18})})]})]})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:S("border-t",t?"border-[#3f3f46] bg-[#18181b]":"border-gray-200 bg-white"),children:[y&&l.jsxs("div",{className:S("p-3 border-b",t?"border-[#3f3f46] bg-[#27272a]":"border-gray-200 bg-gray-50"),children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:S("text-sm font-medium",t?"text-white":"text-gray-900"),children:"Respostas Rpidas"}),l.jsx(q,{onClick:()=>p(!1),variant:"ghost",size:"icon",className:"h-6 w-6",children:l.jsx(Dn,{size:14})})]}),l.jsx("div",{className:"grid grid-cols-1 gap-2",children:xU.map((U,ae)=>l.jsx("button",{onClick:()=>R(U),className:S("text-left text-sm p-2 rounded-lg transition-colors",t?"bg-[#3f3f46] text-white hover:bg-[#52525b]":"bg-white text-gray-900 hover:bg-gray-100"),children:U},ae))})]}),o&&!h&&l.jsxs("div",{className:S("p-3 border-b flex items-center gap-3",t?"border-[#3f3f46] bg-[#27272a]":"border-gray-200 bg-gray-50"),children:[l.jsx("div",{className:S("w-10 h-10 rounded-lg flex items-center justify-center text-gray-500",t?"bg-[#3f3f46]":"bg-gray-200"),children:D(o.type)}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:S("text-sm font-medium truncate",t?"text-white":"text-gray-900"),children:o.file.name}),l.jsxs("p",{className:S("text-xs",t?"text-gray-400":"text-gray-600"),children:[(o.file.size/1024/1024).toFixed(2)," MB"]})]}),l.jsx(q,{onClick:()=>m(!0),variant:"ghost",size:"sm",className:S(t?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-700"),children:"Ver"}),l.jsx(q,{onClick:()=>i(null),variant:"ghost",size:"icon",className:S("text-red-500 hover:bg-red-100/20",t?"hover:text-red-400":"hover:text-red-600"),children:l.jsx(Dn,{size:16})})]}),l.jsx("div",{className:"p-4",children:l.jsxs("div",{className:"flex items-end gap-3",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(q,{variant:"ghost",size:"icon",onClick:()=>{var U;return(U=v.current)==null?void 0:U.click()},className:S("h-9 w-9",t?"text-gray-400 hover:bg-[#27272a]":"text-gray-600 hover:bg-gray-100"),title:"Anexar arquivo",children:l.jsx(wL,{size:20})}),l.jsx(sF,{onEmojiSelect:X,isDarkMode:t}),l.jsx(q,{variant:"ghost",size:"icon",onClick:()=>p(!y),className:S("h-9 w-9",t?"text-gray-400 hover:bg-[#27272a]":"text-gray-600 hover:bg-gray-100"),title:"Respostas rpidas",children:l.jsx(kL,{size:20})}),l.jsx(q,{variant:"ghost",size:"icon",onClick:H,title:"Gerar resposta com IA",className:"text-yellow-700 bg-black/0 rounded-none py-0 px-0 text-7xl",children:l.jsx(IE,{size:20})})]}),l.jsx("div",{className:"flex-1",children:l.jsx(Lc,{value:s,onChange:U=>a(U.target.value),onKeyPress:W,placeholder:"Digite sua mensagem...",className:S("min-h-[40px] max-h-32 resize-none border rounded-xl py-2 px-3",t?"bg-[#27272a] border-[#3f3f46] text-white placeholder:text-gray-500":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-500"),rows:1,disabled:A||F})}),s.trim()||o?l.jsx(q,{onClick:o&&!h?()=>m(!0):()=>V(),className:"bg-[#b5103c] hover:bg-[#9d0e34] text-white h-10 w-10 flex-shrink-0 rounded-full",disabled:A||F,children:A||F?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):l.jsx(Rw,{size:18})}):l.jsx(q,{className:"bg-[#b5103c] hover:bg-[#9d0e34] text-white h-10 w-10 flex-shrink-0 rounded-full",onPointerDown:Y,onPointerUp:he,onPointerLeave:ue,disabled:A||F,title:"Segure para gravar udio",children:l.jsx(yL,{size:18})})]})}),l.jsx("input",{ref:v,type:"file",onChange:I,className:"hidden",accept:"image/*,video/*,audio/*,.pdf,.doc,.docx,.txt,.xls,.xlsx,.ppt,.pptx"})]}),h&&oe()]})},bU=(t,e)=>t.startsWith("data:")?t:`data:${e};base64,${t}`,Is=JN,_U=XN,C2=g.forwardRef(({className:t,...e},r)=>l.jsx(My,{ref:r,className:S("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));C2.displayName=My.displayName;const Qn=g.forwardRef(({className:t,children:e,...r},n)=>l.jsxs(_U,{children:[l.jsx(C2,{}),l.jsxs(Dy,{ref:n,className:S("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,l.jsx(Vy,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:l.jsx("span",{className:"sr-only",children:"Close"})})]})]}));Qn.displayName=Dy.displayName;const Os=({className:t,...e})=>l.jsx("div",{className:S("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Os.displayName="DialogHeader";const Jn=g.forwardRef(({className:t,...e},r)=>l.jsx(Fy,{ref:r,className:S("text-lg font-semibold leading-none tracking-tight",t),...e}));Jn.displayName=Fy.displayName;const SU=g.forwardRef(({className:t,...e},r)=>l.jsx(Uy,{ref:r,className:S("text-sm text-muted-foreground",t),...e}));SU.displayName=Uy.displayName;const CU=({open:t,onClose:e,summary:r,isLoading:n,error:s,isDarkMode:a,onCopy:o,onDownload:i})=>{const c=()=>{r&&(navigator.clipboard.writeText(r),o&&o())},u=()=>{if(!r)return;const d=new Blob([r],{type:"text/plain"}),f=document.createElement("a");f.href=URL.createObjectURL(d),f.download="resumo-conversa.txt",f.click(),i&&i()};return l.jsx(Is,{open:t,onOpenChange:d=>{d||e()},children:l.jsxs(Qn,{className:S("sm:max-w-lg p-0 overflow-hidden rounded-xl shadow-xl transition-all duration-300",a?"bg-[#18181b] border-[#3f3f46] text-white":"bg-white border-gray-200"),children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ol,{size:20,className:"text-[#b5103c]"}),l.jsx(Jn,{className:S("text-lg font-semibold",a?"text-white":"text-gray-900"),children:"Resumo da Conversa"})]}),l.jsx("button",{className:S("rounded-full p-1 transition hover:bg-zinc-200 dark:hover:bg-zinc-700",a?"text-gray-400":"text-gray-500"),"aria-label":"Fechar",onClick:e,children:l.jsx(Dn,{size:18})})]}),l.jsx("div",{className:S("p-6 pb-4 max-h-[60vh] min-h-[120px] overflow-y-auto text-base transition-all",a?"text-gray-200":"text-gray-800"),children:n?l.jsx("div",{className:"flex items-center justify-center h-20 text-xl animate-pulse",children:"Gerando resumo..."}):s?l.jsx("div",{className:"text-red-500 font-semibold",children:s}):r?l.jsx("pre",{className:"max-w-full whitespace-pre-wrap break-words",children:r}):l.jsx("div",{className:"text-gray-400 italic",children:"Resumo no disponvel."})}),l.jsxs("div",{className:"flex justify-end gap-2 px-6 pb-4",children:[l.jsx(q,{variant:"ghost",size:"sm",className:a?"text-white hover:bg-zinc-700":"text-gray-900",onClick:c,disabled:!r,children:"Copiar"}),l.jsx(q,{variant:"outline",size:"sm",onClick:u,disabled:!r,className:a?"border-[#b5103c] text-white":"border-[#b5103c] text-[#b5103c]",children:"Baixar .txt"}),l.jsx(q,{variant:"default",size:"sm",onClick:e,className:"bg-[#b5103c] text-white",children:"Fechar"})]})]})})},EU=({selectedConv:t,conversationForHeader:e,messages:r,messagesLoading:n,isSidebarOpen:s,isDarkMode:a,channelId:o,onSidebarToggle:i,onMarkAsResolved:c,onSendMessage:u,onSendFile:d,onSendAudio:f})=>{console.log(" [ChatMainArea] Renderizando. selectedConv:",t,"conversationForHeader:",e);const[h,m]=g.useState(!1),[y,p]=g.useState(!1),[v,w]=g.useState(null),[x,b]=g.useState(null),_=g.useRef(null);g.useLayoutEffect(()=>{function j(){const F=_.current;F&&(F.scrollTop=F.scrollHeight)}j();const O=[];for(let F of[0,50,100,150,250,500,1e3,1200])O.push(setTimeout(j,F));return()=>{O.forEach(clearTimeout)}},[r.length,n]);const C=(j="")=>(j||"").split(" ").filter(Boolean).slice(0,2).join(" ")||j||"Cliente",E=j=>{try{return new Date(j).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"America/Sao_Paulo"})}catch{return"--:--"}},N=j=>({chat:"Yelena AI",yelena_ai_conversas:"Yelena AI",canarana:"Canarana","souto-soares":"Souto Soares","joao-dourado":"Joo Dourado","america-dourada":"Amrica Dourada","gerente-lojas":"Gustavo Gerente","gerente-externo":"Andressa Gerente"})[j]||j,A=async()=>{if(!t||!o){console.error(" [AI_SUMMARY] Conversa ou canal no selecionado");return}try{p(!0),b(null),w(null),m(!0);const j=await Dg.generateConversationSummary(o,t.contact_phone);w(j)}catch(j){console.error(" [AI_SUMMARY] Erro ao gerar resumo:",j),b("Erro ao gerar resumo da conversa. Verifique a configurao da API OpenAI.")}finally{p(!1)}};return t?l.jsxs("div",{className:S("flex-1 flex flex-col h-full",a?"bg-[#09090b]":"bg-white"),children:[l.jsxs("div",{className:S("p-4 border-b flex items-center justify-between h-[74px] min-h-[64px] max-h-[96px]",a?"border-[#3f3f46] bg-[#18181b]":"border-gray-200 bg-white"),children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("h2",{className:S("font-semibold",a?"text-white":"text-gray-900"),children:(e==null?void 0:e.contactName)||t.contact_name}),l.jsx("span",{className:S("text-sm",a?"text-gray-400":"text-gray-500"),children:(e==null?void 0:e.contactNumber)||t.contact_phone})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs(q,{onClick:A,disabled:y,variant:"outline",size:"sm",className:S("flex items-center space-x-2",a?"border-[#3f3f46] text-white hover:bg-[#27272a]":"border-gray-300 text-gray-700 hover:bg-gray-50"),children:[y?l.jsx(jE,{size:16,className:"animate-spin"}):l.jsx(ol,{size:16}),l.jsx("span",{children:y?"Gerando...":"Resumo IA"})]}),l.jsx(CU,{open:h,onClose:()=>m(!1),summary:v,isLoading:y,error:x,isDarkMode:a}),l.jsx(q,{onClick:c,size:"sm",className:"text-white bg-[#b5103c] py-0 my-0 text-center",children:"Marcar como Resolvido"})]})]}),l.jsx("div",{ref:_,className:S("flex-1 overflow-y-auto p-4 transition-all",a?"bg-[#09090b]":"bg-white"),style:{minHeight:0},children:n?l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#b5103c]"})}):l.jsxs("div",{className:"space-y-4",children:[r.map(j=>{const O=j.tipo_remetente==="USUARIO_INTERNO"||j.tipo_remetente==="Yelena-ai"||j.sender==="agent",F=j.Nome_do_contato||j.nome_do_contato||j.sender||"Cliente",P=C(F),V=N(o),R=j.read_at?E(j.read_at):E(j.timestamp||new Date().toISOString());return l.jsx("div",{className:S("flex",O?"justify-end":"justify-start"),children:l.jsxs("div",{className:S("max-w-xs lg:max-w-md px-4 py-2 rounded-lg",O?"bg-[#b5103c] text-white":a?"bg-[#3f3f46] text-white":"bg-gray-200 text-gray-900"),children:[l.jsxs("div",{className:"flex gap-2 text-xs mb-1 opacity-80",children:[!O&&l.jsx("span",{children:P}),O&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:V}),j.tipo_remetente==="USUARIO_INTERNO"&&!!j.Nome_do_contato&&l.jsx("span",{className:"font-semibold",children:j.Nome_do_contato})]})]}),l.jsx("p",{className:"text-sm whitespace-pre-wrap",children:j.content}),l.jsx("p",{className:"text-xs opacity-70 mt-1 text-right",children:R})]})},j.id)}),l.jsx("div",{})]})}),l.jsx("div",{className:S("w-full",a?"bg-[#18181b]":"bg-white"),style:{minHeight:82,maxHeight:96},children:l.jsx(wU,{isDarkMode:a,onSendMessage:u,onSendFile:d,onSendAudio:f,selectedConv:t,channelId:o})})]}):l.jsx("div",{className:S("flex-1 flex items-center justify-center",a?"bg-[#09090b] text-white":"bg-gray-50 text-gray-900"),children:l.jsx("p",{className:"text-lg",children:"Selecione uma conversa para comear"})})},NU=t=>{const[e,r]=g.useState([]),[n,s]=g.useState(!1),[a,o]=g.useState(null),{isAuthenticated:i,user:c}=Tt(),u=h=>{console.log(` [SIMPLE_CONVERSATIONS] Mapeando canal: ${h}`);const y={chat:"yelena_ai_conversas","af1e5797-edc6-4ba3-a57a-25cf7297c4d6":"yelena_ai_conversas",canarana:"canarana_conversas","souto-soares":"souto_soares_conversas","joao-dourado":"joao_dourado_conversas","america-dourada":"america_dourada_conversas","gerente-lojas":"gerente_lojas_conversas","gerente-externo":"gerente_externo_conversas","d2892900-ca8f-4b08-a73f-6b7aa5866ff7":"gerente_externo_conversas"}[h]||"yelena_ai_conversas";return console.log(` [SIMPLE_CONVERSATIONS] Canal: ${h} -> Tabela: ${y}`),y},d=h=>{const m=h.match(/(\d+)/);return m?m[1]:h},f=async()=>{if(!t){console.log(" [SIMPLE_CONVERSATIONS] Nenhum canal fornecido"),r([]);return}if(!i){console.log(" [SIMPLE_CONVERSATIONS] Usurio no autenticado"),r([]);return}try{s(!0),o(null);const h=u(t);console.log(` [SIMPLE_CONVERSATIONS] Iniciando query na tabela: ${h}, usurio: ${c==null?void 0:c.name}`);const{data:m,error:y}=await ne.from(h).select("session_id, nome_do_contato, message, read_at, tipo_remetente").order("read_at",{ascending:!1}).limit(200);if(y){console.error(" [SIMPLE_CONVERSATIONS] Erro na query:",y),o(y.message);return}console.log(" [SIMPLE_CONVERSATIONS] Query executada. Registros recebidos:",(m==null?void 0:m.length)||0);const p=new Map;(m||[]).forEach(w=>{const x=w.session_id;if(!p.has(x)){let b="Cliente";w.nome_do_contato?b=w.nome_do_contato:b=d(x),p.set(x,{id:x,contact_name:b,contact_phone:d(x),last_message:w.message||"",last_message_time:w.read_at||new Date().toISOString(),status:"unread",unread_count:0,updated_at:w.read_at||new Date().toISOString()})}});const v=Array.from(p.values()).sort((w,x)=>new Date(x.last_message_time).getTime()-new Date(w.last_message_time).getTime());console.log(` [SIMPLE_CONVERSATIONS] ${v.length} conversas nicas processadas`),v.length>0&&console.log(" [SIMPLE_CONVERSATIONS] Primeira conversa:",v[0]),r(v)}catch(h){console.error(" [SIMPLE_CONVERSATIONS] Erro inesperado:",h),o(h instanceof Error?h.message:"Erro desconhecido"),r([])}finally{s(!1)}};return g.useEffect(()=>{console.log(" [SIMPLE_CONVERSATIONS] Effect acionado:",{channelId:t,isAuthenticated:i,user:c==null?void 0:c.name}),i&&t?f():(console.log(" [SIMPLE_CONVERSATIONS] Aguardando parmetros necessrios..."),r([]),o(null))},[t,i,c==null?void 0:c.name]),{conversations:e,loading:n,error:a,refreshConversations:f}},AU=(t,e)=>{const[r,n]=g.useState([]),[s,a]=g.useState(!1),[o,i]=g.useState(null),{isAuthenticated:c,user:u}=Tt(),d=h=>{console.log(` [SIMPLE_MESSAGES] Mapeando canal: ${h}`);const y={chat:"yelena_ai_conversas","af1e5797-edc6-4ba3-a57a-25cf7297c4d6":"yelena_ai_conversas",canarana:"canarana_conversas","souto-soares":"souto_soares_conversas","joao-dourado":"joao_dourado_conversas","america-dourada":"america_dourada_conversas","gerente-lojas":"gerente_lojas_conversas","gerente-externo":"gerente_externo_conversas","d2892900-ca8f-4b08-a73f-6b7aa5866ff7":"gerente_externo_conversas"}[h]||"yelena_ai_conversas";return console.log(` [SIMPLE_MESSAGES] Canal: ${h} -> Tabela: ${y}`),y},f=async()=>{if(!t||!e){console.log(" [SIMPLE_MESSAGES] Parmetros insuficientes:",{channelId:t,sessionId:e}),n([]);return}if(!c){console.log(" [SIMPLE_MESSAGES] Usurio no autenticado"),n([]);return}try{a(!0),i(null);const h=d(t);console.log(` [SIMPLE_MESSAGES] Iniciando query na tabela: ${h}, sesso: ${e}, usurio: ${u==null?void 0:u.name}`);const{data:m,error:y}=await ne.from(h).select("id, session_id, message, read_at, tipo_remetente, nome_do_contato, mensagemtype, media_base64").eq("session_id",e).order("read_at",{ascending:!0});if(y){console.error(" [SIMPLE_MESSAGES] Erro na query:",y),i(y.message);return}console.log(" [SIMPLE_MESSAGES] Query executada com sucesso. Dados recebidos:",(m==null?void 0:m.length)||0),m&&m.length>0&&console.log(" [SIMPLE_MESSAGES] Primeira mensagem exemplo:",m[0]),m&&m.length>0&&m.forEach((v,w)=>{v.nome_do_contato||console.warn(" [SIMPLE_MESSAGES] Mensagem sem nome_do_contato - ndice:",w,v)});const p=(m||[]).map(v=>{var w;return{id:((w=v.id)==null?void 0:w.toString())||"",session_id:v.session_id||"",message:v.message||"",read_at:v.read_at||new Date().toISOString(),tipo_remetente:v.tipo_remetente,nome_do_contato:v.nome_do_contato,mensagemtype:v.mensagemtype,media_base64:v.media_base64}});console.log(` [SIMPLE_MESSAGES] ${p.length} mensagens processadas para exibio`),n(p)}catch(h){console.error(" [SIMPLE_MESSAGES] Erro inesperado:",h),i(h instanceof Error?h.message:"Erro desconhecido"),n([])}finally{a(!1)}};return g.useEffect(()=>{let h=null;if(t&&e&&c){f();const m=d(t);h=ne.channel(`public:${m}:${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:m,filter:`session_id=eq.${e}`},y=>{if(y&&y.new){const p=y.new;n(v=>{var w;return v.some(x=>{var b;return x.id===(((b=p.id)==null?void 0:b.toString())||"")})?v:[...v,{id:((w=p.id)==null?void 0:w.toString())||"",session_id:p.session_id||"",message:p.message||"",read_at:p.read_at||new Date().toISOString(),tipo_remetente:p.tipo_remetente,nome_do_contato:p.nome_do_contato,mensagemtype:p.mensagemtype,media_base64:p.media_base64}]})}}).subscribe((y,p)=>{})}return()=>{h&&ne.removeChannel(h)}},[t,e,c,u==null?void 0:u.name]),g.useEffect(()=>{console.log(" [SIMPLE_MESSAGES] Effect acionado:",{channelId:t,sessionId:e,isAuthenticated:c,user:u==null?void 0:u.name}),c&&t&&e?f():(console.log(" [SIMPLE_MESSAGES] Aguardando parmetros necessrios..."),n([]),i(null))},[t,e,c,u==null?void 0:u.name]),{messages:r,loading:s,error:o,refreshMessages:f}},E2=({channelId:t,isDarkMode:e,onClose:r,onSendFile:n,onSendAudio:s})=>{const[a,o]=g.useState(null),[i,c]=g.useState(!0),{isAuthenticated:u,user:d}=Tt(),{conversations:f,loading:h,refreshConversations:m}=NU(t),{messages:y,loading:p,refreshMessages:v}=AU(t,a);console.log(" [CHAT_OVERLAY] Estado atual:",{channelId:t,selectedConversation:a,conversationsCount:f.length,messagesCount:y.length,conversationsLoading:h,messagesLoading:p,isAuthenticated:u,user:d==null?void 0:d.name});const w=f.map(P=>({id:P.id,contact_name:P.contact_name,contact_phone:P.contact_phone,last_message:P.last_message,last_message_time:P.last_message_time,status:P.status,unread_count:P.unread_count,updated_at:P.updated_at}));g.useEffect(()=>{if(w.length>0&&!a){const P=w[0];console.log(" [CHAT_OVERLAY] Auto-selecting first conversation:",P.id),o(P.id)}},[w,a]);const x=P=>{console.log(" [CHAT_OVERLAY] Conversation selected:",P),o(P)},b=async P=>{console.log(" [CHAT_OVERLAY] Attempting to send message:",P),a&&(console.warn("ChatOverlayRefactored.handleSendMessage: Sending logic should be in ChatInput or via a dedicated sending hook."),v&&await v())},_=async(P,V)=>{console.log(" [CHAT_OVERLAY] Attempting to send file:",P.name),a&&(console.warn("ChatOverlayRefactored.handleSendFile: Sending logic should be in ChatInput or via a dedicated sending hook."),v&&await v())},C=async(P,V)=>{console.log(" [CHAT_OVERLAY] Attempting to send audio:",V),a&&(console.warn("ChatOverlayRefactored.handleSendAudio: Sending logic should be in ChatInput or via a dedicated sending hook."),v&&await v())},E=f.find(P=>P.id===a),N=E?{id:E.id,contact_name:E.contact_name,contact_phone:E.contact_phone,last_message:E.last_message,last_message_time:E.last_message_time,status:E.status,updated_at:E.updated_at,unread_count:E.unread_count}:void 0,{updateConversationStatus:A}=FA(),j=async()=>{a&&t&&(await A(t,a,"resolved"),m&&await m(),v&&await v())},O=y.map(P=>{const V=P.tipo_remetente==="USUARIO_INTERNO"||P.tipo_remetente==="Yelena-ai";return{id:P.id,content:P.message||"",timestamp:P.created_at||P.read_at||new Date().toISOString(),sender:V?"agent":"customer",tipo_remetente:P.tipo_remetente,type:P.mensagemtype==="image"?"image":P.mensagemtype==="audio"?"audio":P.mensagemtype==="video"?"video":P.mensagemtype==="document"||P.mensagemtype==="file"?"file":"text",fileUrl:P.media_url||void 0,fileName:P.media_caption||P.message||void 0,read:typeof P.is_read=="boolean"?P.is_read:!0,nome_do_contato:P.nome_do_contato,mensagemtype:P.mensagemtype}}),F=E?{contactName:E.contact_name,contactNumber:E.contact_phone}:null;return h&&w.length===0?l.jsx("div",{className:S("fixed inset-0 z-50 flex items-center justify-center",e?"bg-[#09090b]":"bg-gray-50"),children:l.jsx("div",{className:"text-center space-y-2",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#b5103c]"})})}):l.jsxs("div",{className:S("fixed inset-0 z-50 flex",e?"bg-[#09090b]":"bg-gray-50"),children:[l.jsx(nF,{channelId:t,conversations:w,selectedConversation:a,isSidebarOpen:i,isDarkMode:e,onClose:r,onConversationSelect:x,onSidebarToggle:c,onRefresh:m}),l.jsx("div",{className:"flex-1 flex flex-col",children:l.jsx(EU,{selectedConv:N,conversationForHeader:F,messages:O,messagesLoading:p,isSidebarOpen:i,isDarkMode:e,channelId:t,onSidebarToggle:c,onMarkAsResolved:j,onSendMessage:b,onSendFile:n||_,onSendAudio:s||C})})]})},jU=t=>{const e=async(n,s)=>{console.log("File send not implemented in this wrapper")},r=async(n,s)=>{console.log("Audio send not implemented in this wrapper")};return l.jsx(E2,{...t,onSendFile:e,onSendAudio:r})},N2=()=>{const[t,e]=g.useState([]),[r,n]=g.useState(!0),s=async()=>{try{n(!0);const{data:f,error:h}=await ne.from("exams").select("*").order("created_at",{ascending:!1});if(h){console.error("Erro ao carregar exames:",h);return}const m=(f||[]).map(y=>({id:y.id,name:y.patient_name,phone:y.phone,instagram:y.instagram,city:y.city,appointmentDate:y.appointment_date,status:y.status,examType:y.exam_type,observations:y.observations,createdAt:y.created_at,updatedAt:y.updated_at}));e(m)}catch(f){console.error("Erro ao carregar exames:",f)}finally{n(!1)}};g.useEffect(()=>{s()},[]);const a=async f=>{try{const{data:h,error:m}=await ne.from("exams").insert({patient_name:f.name,phone:f.phone,instagram:f.instagram,city:f.city,appointment_date:f.appointmentDate,status:f.status,exam_type:f.examType,observations:f.observations}).select().single();if(m)throw console.error("Erro ao criar exame:",m),m;return await s(),h}catch(h){throw console.error("Erro ao criar exame:",h),h}};return{exams:t,loading:r,createExam:a,addExam:a,updateExam:async(f,h)=>{try{const m={};h.name&&(m.patient_name=h.name),h.phone&&(m.phone=h.phone),h.instagram!==void 0&&(m.instagram=h.instagram),h.city&&(m.city=h.city),h.appointmentDate&&(m.appointment_date=h.appointmentDate),h.status&&(m.status=h.status),h.examType&&(m.exam_type=h.examType),h.observations!==void 0&&(m.observations=h.observations);const{error:y}=await ne.from("exams").update(m).eq("id",f);if(y)throw console.error("Erro ao atualizar exame:",y),y;await s()}catch(m){throw console.error("Erro ao atualizar exame:",m),m}},deleteExam:async f=>{try{const{error:h}=await ne.from("exams").delete().eq("id",f);if(h)throw console.error("Erro ao excluir exame:",h),h;await s()}catch(h){throw console.error("Erro ao excluir exame:",h),h}},deleteExams:async f=>{try{const{error:h}=await ne.from("exams").delete().in("id",f);if(h)throw console.error("Erro ao excluir exames:",h),h;await s()}catch(h){throw console.error("Erro ao excluir exames:",h),h}},getExamStats:()=>{const f=new Date,h=new Date(f);h.setDate(f.getDate()-f.getDay());const m=new Date(h);m.setDate(h.getDate()+6);const y=new Date(f.getFullYear(),f.getMonth(),1),p=new Date(f.getFullYear(),f.getMonth()+1,0),v=t.filter(b=>{const _=new Date(b.appointmentDate);return _>=h&&_<=m}).length,w=t.filter(b=>{const _=new Date(b.appointmentDate);return _>=y&&_<=p}).length,x=t.reduce((b,_)=>(b[_.city]=(b[_.city]||0)+1,b),{});return{total:t.length,thisWeek:v,thisMonth:w,byCity:x}},refreshExams:s}},Fb=({isDarkMode:t,onSectionSelect:e})=>{const{exams:r}=N2(),[n,s]=g.useState(null),a=c=>{console.log(" Dashboard channel clicked:",c),s(c)},o=()=>{s(null)},i={totalExams:r.length,examsThisMonth:r.filter(c=>{const u=new Date(c.appointmentDate),d=new Date;return u.getMonth()===d.getMonth()&&u.getFullYear()===d.getFullYear()}).length,examsThisWeek:r.filter(c=>{const u=new Date(c.appointmentDate),d=new Date,f=new Date(d.getTime()-7*24*60*60*1e3);return u>=f&&u<=d}).length};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:S("h-full flex flex-col",t?"bg-[#09090b]":"bg-gray-50"),children:[l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:S("p-3 rounded-full",t?"bg-[#27272a]":"bg-[#b5103c]/10"),children:l.jsx(yy,{size:32,className:"text-[#b5103c]",strokeWidth:1.5})}),l.jsxs("div",{children:[l.jsx("h1",{className:S("text-3xl font-bold",t?"text-white":"text-gray-900"),children:"Painel de Controle"}),l.jsx("p",{className:S("text-lg",t?"text-[#9ca3af]":"text-gray-600"),children:"Gerencie suas conversas e acompanhe mtricas importantes"})]})]})}),l.jsx("div",{className:"flex-1 p-6 pt-0 space-y-6 overflow-auto",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx(j6,{isDarkMode:t}),l.jsx(k6,{isDarkMode:t,totalExams:i.totalExams,examsThisMonth:i.examsThisMonth,examsThisWeek:i.examsThisWeek}),l.jsx(L6,{isDarkMode:t,onChannelClick:a}),l.jsx(F6,{isDarkMode:t})]})})]}),n&&l.jsx(jU,{channelId:n,isDarkMode:t,onClose:o})]})};var iu=t=>t.type==="checkbox",oo=t=>t instanceof Date,rr=t=>t==null;const A2=t=>typeof t=="object";var mt=t=>!rr(t)&&!Array.isArray(t)&&A2(t)&&!oo(t),kU=t=>mt(t)&&t.target?iu(t.target)?t.target.checked:t.target.value:t,TU=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,PU=(t,e)=>t.has(TU(e)),RU=t=>{const e=t.constructor&&t.constructor.prototype;return mt(e)&&e.hasOwnProperty("isPrototypeOf")},p0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Gt(t){let e;const r=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(p0&&(t instanceof Blob||n))&&(r||mt(t)))if(e=r?[]:{},!r&&!RU(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Gt(t[s]));else return t;return e}var Ih=t=>Array.isArray(t)?t.filter(Boolean):[],wt=t=>t===void 0,de=(t,e,r)=>{if(!e||!mt(t))return r;const n=Ih(e.split(/[,[\].]+?/)).reduce((s,a)=>rr(s)?s:s[a],t);return wt(n)||n===t?wt(t[e])?r:t[e]:n},Pn=t=>typeof t=="boolean",g0=t=>/^\w*$/.test(t),j2=t=>Ih(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ze=(t,e,r)=>{let n=-1;const s=g0(e)?[e]:j2(e),a=s.length,o=a-1;for(;++n<a;){const i=s[n];let c=r;if(n!==o){const u=t[i];c=mt(u)||Array.isArray(u)?u:isNaN(+s[n+1])?{}:[]}if(i==="__proto__"||i==="constructor"||i==="prototype")return;t[i]=c,t=t[i]}};const Ub={BLUR:"blur",FOCUS_OUT:"focusout"},un={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ns={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};G.createContext(null);var IU=(t,e,r,n=!0)=>{const s={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(s,a,{get:()=>{const o=a;return e._proxyFormState[o]!==un.all&&(e._proxyFormState[o]=!n||un.all),t[o]}});return s};const OU=typeof window<"u"?g.useLayoutEffect:g.useEffect;var Un=t=>typeof t=="string",LU=(t,e,r,n,s)=>Un(t)?(n&&e.watch.add(t),de(r,t,s)):Array.isArray(t)?t.map(a=>(n&&e.watch.add(a),de(r,a))):(n&&(e.watchAll=!0),r),k2=(t,e,r,n,s)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:s||!0}}:{},cc=t=>Array.isArray(t)?t:[t],Vb=()=>{let t=[];return{get observers(){return t},next:s=>{for(const a of t)a.next&&a.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(a=>a!==s)}}),unsubscribe:()=>{t=[]}}},Vg=t=>rr(t)||!A2(t);function sa(t,e){if(Vg(t)||Vg(e))return t===e;if(oo(t)&&oo(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r){const a=t[s];if(!n.includes(s))return!1;if(s!=="ref"){const o=e[s];if(oo(a)&&oo(o)||mt(a)&&mt(o)||Array.isArray(a)&&Array.isArray(o)?!sa(a,o):a!==o)return!1}}return!0}var ur=t=>mt(t)&&!Object.keys(t).length,v0=t=>t.type==="file",dn=t=>typeof t=="function",Sf=t=>{if(!p0)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},T2=t=>t.type==="select-multiple",y0=t=>t.type==="radio",$U=t=>y0(t)||iu(t),Km=t=>Sf(t)&&t.isConnected;function MU(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=wt(t)?n++:t[e[n++]];return t}function DU(t){for(const e in t)if(t.hasOwnProperty(e)&&!wt(t[e]))return!1;return!0}function Ct(t,e){const r=Array.isArray(e)?e:g0(e)?[e]:j2(e),n=r.length===1?t:MU(t,r),s=r.length-1,a=r[s];return n&&delete n[a],s!==0&&(mt(n)&&ur(n)||Array.isArray(n)&&DU(n))&&Ct(t,r.slice(0,-1)),t}var P2=t=>{for(const e in t)if(dn(t[e]))return!0;return!1};function Cf(t,e={}){const r=Array.isArray(t);if(mt(t)||r)for(const n in t)Array.isArray(t[n])||mt(t[n])&&!P2(t[n])?(e[n]=Array.isArray(t[n])?[]:{},Cf(t[n],e[n])):rr(t[n])||(e[n]=!0);return e}function R2(t,e,r){const n=Array.isArray(t);if(mt(t)||n)for(const s in t)Array.isArray(t[s])||mt(t[s])&&!P2(t[s])?wt(e)||Vg(r[s])?r[s]=Array.isArray(t[s])?Cf(t[s],[]):{...Cf(t[s])}:R2(t[s],rr(e)?{}:e[s],r[s]):r[s]=!sa(t[s],e[s]);return r}var Nl=(t,e)=>R2(t,e,Cf(e));const zb={value:!1,isValid:!1},Bb={value:!0,isValid:!0};var I2=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!wt(t[0].attributes.value)?wt(t[0].value)||t[0].value===""?Bb:{value:t[0].value,isValid:!0}:Bb:zb}return zb},O2=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>wt(t)?t:e?t===""?NaN:t&&+t:r&&Un(t)?new Date(t):n?n(t):t;const Wb={isValid:!1,value:null};var L2=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,Wb):Wb;function Hb(t){const e=t.ref;return v0(e)?e.files:y0(e)?L2(t.refs).value:T2(e)?[...e.selectedOptions].map(({value:r})=>r):iu(e)?I2(t.refs).value:O2(wt(e.value)?t.ref.value:e.value,t)}var FU=(t,e,r,n)=>{const s={};for(const a of t){const o=de(e,a);o&&Ze(s,a,o._f)}return{criteriaMode:r,names:[...t],fields:s,shouldUseNativeValidation:n}},Ef=t=>t instanceof RegExp,Al=t=>wt(t)?t:Ef(t)?t.source:mt(t)?Ef(t.value)?t.value.source:t.value:t,Gb=t=>({isOnSubmit:!t||t===un.onSubmit,isOnBlur:t===un.onBlur,isOnChange:t===un.onChange,isOnAll:t===un.all,isOnTouch:t===un.onTouched});const qb="AsyncFunction";var UU=t=>!!t&&!!t.validate&&!!(dn(t.validate)&&t.validate.constructor.name===qb||mt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===qb)),VU=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Kb=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const uc=(t,e,r,n)=>{for(const s of r||Object.keys(t)){const a=de(t,s);if(a){const{_f:o,...i}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(uc(i,e))break}else if(mt(i)&&uc(i,e))break}}};function Yb(t,e,r){const n=de(t,r);if(n||g0(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const a=s.join("."),o=de(e,a),i=de(t,a);if(o&&!Array.isArray(o)&&r!==a)return{name:r};if(i&&i.type)return{name:a,error:i};if(i&&i.root&&i.root.type)return{name:`${a}.root`,error:i.root};s.pop()}return{name:r}}var zU=(t,e,r,n)=>{r(t);const{name:s,...a}=t;return ur(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!n||un.all))},BU=(t,e,r)=>!t||!e||t===e||cc(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),WU=(t,e,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(e||t):(r?n.isOnBlur:s.isOnBlur)?!t:(r?n.isOnChange:s.isOnChange)?t:!0,HU=(t,e)=>!Ih(de(t,e)).length&&Ct(t,e),GU=(t,e,r)=>{const n=cc(de(t,r));return Ze(n,"root",e[r]),Ze(t,r,n),t},jd=t=>Un(t);function Qb(t,e,r="validate"){if(jd(t)||Array.isArray(t)&&t.every(jd)||Pn(t)&&!t)return{type:r,message:jd(t)?t:"",ref:e}}var qo=t=>mt(t)&&!Ef(t)?t:{value:t,message:""},Jb=async(t,e,r,n,s,a)=>{const{ref:o,refs:i,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:y,name:p,valueAsNumber:v,mount:w}=t._f,x=de(r,p);if(!w||e.has(p))return{};const b=i?i[0]:o,_=P=>{s&&b.reportValidity&&(b.setCustomValidity(Pn(P)?"":P||""),b.reportValidity())},C={},E=y0(o),N=iu(o),A=E||N,j=(v||v0(o))&&wt(o.value)&&wt(x)||Sf(o)&&o.value===""||x===""||Array.isArray(x)&&!x.length,O=k2.bind(null,p,n,C),F=(P,V,R,H=ns.maxLength,W=ns.minLength)=>{const I=P?V:R;C[p]={type:P?H:W,message:I,ref:o,...O(P?H:W,I)}};if(a?!Array.isArray(x)||!x.length:c&&(!A&&(j||rr(x))||Pn(x)&&!x||N&&!I2(i).isValid||E&&!L2(i).isValid)){const{value:P,message:V}=jd(c)?{value:!!c,message:c}:qo(c);if(P&&(C[p]={type:ns.required,message:V,ref:b,...O(ns.required,V)},!n))return _(V),C}if(!j&&(!rr(f)||!rr(h))){let P,V;const R=qo(h),H=qo(f);if(!rr(x)&&!isNaN(x)){const W=o.valueAsNumber||x&&+x;rr(R.value)||(P=W>R.value),rr(H.value)||(V=W<H.value)}else{const W=o.valueAsDate||new Date(x),I=Y=>new Date(new Date().toDateString()+" "+Y),k=o.type=="time",$=o.type=="week";Un(R.value)&&x&&(P=k?I(x)>I(R.value):$?x>R.value:W>new Date(R.value)),Un(H.value)&&x&&(V=k?I(x)<I(H.value):$?x<H.value:W<new Date(H.value))}if((P||V)&&(F(!!P,R.message,H.message,ns.max,ns.min),!n))return _(C[p].message),C}if((u||d)&&!j&&(Un(x)||a&&Array.isArray(x))){const P=qo(u),V=qo(d),R=!rr(P.value)&&x.length>+P.value,H=!rr(V.value)&&x.length<+V.value;if((R||H)&&(F(R,P.message,V.message),!n))return _(C[p].message),C}if(m&&!j&&Un(x)){const{value:P,message:V}=qo(m);if(Ef(P)&&!x.match(P)&&(C[p]={type:ns.pattern,message:V,ref:o,...O(ns.pattern,V)},!n))return _(V),C}if(y){if(dn(y)){const P=await y(x,r),V=Qb(P,b);if(V&&(C[p]={...V,...O(ns.validate,V.message)},!n))return _(V.message),C}else if(mt(y)){let P={};for(const V in y){if(!ur(P)&&!n)break;const R=Qb(await y[V](x,r),b,V);R&&(P={...R,...O(V,R.message)},_(R.message),n&&(C[p]=P))}if(!ur(P)&&(C[p]={ref:b,...P},!n))return C}}return _(!0),C};const qU={mode:un.onSubmit,reValidateMode:un.onChange,shouldFocusError:!0};function KU(t={}){let e={...qU,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:dn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const n={};let s=mt(e.defaultValues)||mt(e.values)?Gt(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Gt(s),o={action:!1,mount:!1,watch:!1},i={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:Vb(),state:Vb()},m=e.criteriaMode===un.all,y=T=>L=>{clearTimeout(u),u=setTimeout(T,L)},p=async T=>{if(!e.disabled&&(d.isValid||f.isValid||T)){const L=e.resolver?ur((await N()).errors):await j(n,!0);L!==r.isValid&&h.state.next({isValid:L})}},v=(T,L)=>{!e.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((T||Array.from(i.mount)).forEach(z=>{z&&(L?Ze(r.validatingFields,z,L):Ct(r.validatingFields,z))}),h.state.next({validatingFields:r.validatingFields,isValidating:!ur(r.validatingFields)}))},w=(T,L=[],z,ee,Z=!0,J=!0)=>{if(ee&&z&&!e.disabled){if(o.action=!0,J&&Array.isArray(de(n,T))){const ie=z(de(n,T),ee.argA,ee.argB);Z&&Ze(n,T,ie)}if(J&&Array.isArray(de(r.errors,T))){const ie=z(de(r.errors,T),ee.argA,ee.argB);Z&&Ze(r.errors,T,ie),HU(r.errors,T)}if((d.touchedFields||f.touchedFields)&&J&&Array.isArray(de(r.touchedFields,T))){const ie=z(de(r.touchedFields,T),ee.argA,ee.argB);Z&&Ze(r.touchedFields,T,ie)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Nl(s,a)),h.state.next({name:T,isDirty:F(T,L),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ze(a,T,L)},x=(T,L)=>{Ze(r.errors,T,L),h.state.next({errors:r.errors})},b=T=>{r.errors=T,h.state.next({errors:r.errors,isValid:!1})},_=(T,L,z,ee)=>{const Z=de(n,T);if(Z){const J=de(a,T,wt(z)?de(s,T):z);wt(J)||ee&&ee.defaultChecked||L?Ze(a,T,L?J:Hb(Z._f)):R(T,J),o.mount&&p()}},C=(T,L,z,ee,Z)=>{let J=!1,ie=!1;const Ve={name:T};if(!e.disabled){if(!z||ee){(d.isDirty||f.isDirty)&&(ie=r.isDirty,r.isDirty=Ve.isDirty=F(),J=ie!==Ve.isDirty);const Je=sa(de(s,T),L);ie=!!de(r.dirtyFields,T),Je?Ct(r.dirtyFields,T):Ze(r.dirtyFields,T,!0),Ve.dirtyFields=r.dirtyFields,J=J||(d.dirtyFields||f.dirtyFields)&&ie!==!Je}if(z){const Je=de(r.touchedFields,T);Je||(Ze(r.touchedFields,T,z),Ve.touchedFields=r.touchedFields,J=J||(d.touchedFields||f.touchedFields)&&Je!==z)}J&&Z&&h.state.next(Ve)}return J?Ve:{}},E=(T,L,z,ee)=>{const Z=de(r.errors,T),J=(d.isValid||f.isValid)&&Pn(L)&&r.isValid!==L;if(e.delayError&&z?(c=y(()=>x(T,z)),c(e.delayError)):(clearTimeout(u),c=null,z?Ze(r.errors,T,z):Ct(r.errors,T)),(z?!sa(Z,z):Z)||!ur(ee)||J){const ie={...ee,...J&&Pn(L)?{isValid:L}:{},errors:r.errors,name:T};r={...r,...ie},h.state.next(ie)}},N=async T=>{v(T,!0);const L=await e.resolver(a,e.context,FU(T||i.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return v(T),L},A=async T=>{const{errors:L}=await N(T);if(T)for(const z of T){const ee=de(L,z);ee?Ze(r.errors,z,ee):Ct(r.errors,z)}else r.errors=L;return L},j=async(T,L,z={valid:!0})=>{for(const ee in T){const Z=T[ee];if(Z){const{_f:J,...ie}=Z;if(J){const Ve=i.array.has(J.name),Je=Z._f&&UU(Z._f);Je&&d.validatingFields&&v([ee],!0);const lr=await Jb(Z,i.disabled,a,m,e.shouldUseNativeValidation&&!L,Ve);if(Je&&d.validatingFields&&v([ee]),lr[J.name]&&(z.valid=!1,L))break;!L&&(de(lr,J.name)?Ve?GU(r.errors,lr,J.name):Ze(r.errors,J.name,lr[J.name]):Ct(r.errors,J.name))}!ur(ie)&&await j(ie,L,z)}}return z.valid},O=()=>{for(const T of i.unMount){const L=de(n,T);L&&(L._f.refs?L._f.refs.every(z=>!Km(z)):!Km(L._f.ref))&&U(T)}i.unMount=new Set},F=(T,L)=>!e.disabled&&(T&&L&&Ze(a,T,L),!sa(Y(),s)),P=(T,L,z)=>LU(T,i,{...o.mount?a:wt(L)?s:Un(T)?{[T]:L}:L},z,L),V=T=>Ih(de(o.mount?a:s,T,e.shouldUnregister?de(s,T,[]):[])),R=(T,L,z={})=>{const ee=de(n,T);let Z=L;if(ee){const J=ee._f;J&&(!J.disabled&&Ze(a,T,O2(L,J)),Z=Sf(J.ref)&&rr(L)?"":L,T2(J.ref)?[...J.ref.options].forEach(ie=>ie.selected=Z.includes(ie.value)):J.refs?iu(J.ref)?J.refs.forEach(ie=>{(!ie.defaultChecked||!ie.disabled)&&(Array.isArray(Z)?ie.checked=!!Z.find(Ve=>Ve===ie.value):ie.checked=Z===ie.value||!!Z)}):J.refs.forEach(ie=>ie.checked=ie.value===Z):v0(J.ref)?J.ref.value="":(J.ref.value=Z,J.ref.type||h.state.next({name:T,values:Gt(a)})))}(z.shouldDirty||z.shouldTouch)&&C(T,Z,z.shouldTouch,z.shouldDirty,!0),z.shouldValidate&&$(T)},H=(T,L,z)=>{for(const ee in L){if(!L.hasOwnProperty(ee))return;const Z=L[ee],J=T+"."+ee,ie=de(n,J);(i.array.has(T)||mt(Z)||ie&&!ie._f)&&!oo(Z)?H(J,Z,z):R(J,Z,z)}},W=(T,L,z={})=>{const ee=de(n,T),Z=i.array.has(T),J=Gt(L);Ze(a,T,J),Z?(h.array.next({name:T,values:Gt(a)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&z.shouldDirty&&h.state.next({name:T,dirtyFields:Nl(s,a),isDirty:F(T,J)})):ee&&!ee._f&&!rr(J)?H(T,J,z):R(T,J,z),Kb(T,i)&&h.state.next({...r}),h.state.next({name:o.mount?T:void 0,values:Gt(a)})},I=async T=>{o.mount=!0;const L=T.target;let z=L.name,ee=!0;const Z=de(n,z),J=Je=>{ee=Number.isNaN(Je)||oo(Je)&&isNaN(Je.getTime())||sa(Je,de(a,z,Je))},ie=Gb(e.mode),Ve=Gb(e.reValidateMode);if(Z){let Je,lr;const Zn=L.type?Hb(Z._f):kU(T),Cn=T.type===Ub.BLUR||T.type===Ub.FOCUS_OUT,mu=!VU(Z._f)&&!e.resolver&&!de(r.errors,z)&&!Z._f.deps||WU(Cn,de(r.touchedFields,z),r.isSubmitted,Ve,ie),Va=Kb(z,i,Cn);Ze(a,z,Zn),Cn?(Z._f.onBlur&&Z._f.onBlur(T),c&&c(0)):Z._f.onChange&&Z._f.onChange(T);const En=C(z,Zn,Cn),pu=!ur(En)||Va;if(!Cn&&h.state.next({name:z,type:T.type,values:Gt(a)}),mu)return(d.isValid||f.isValid)&&(e.mode==="onBlur"?Cn&&p():Cn||p()),pu&&h.state.next({name:z,...Va?{}:En});if(!Cn&&Va&&h.state.next({...r}),e.resolver){const{errors:es}=await N([z]);if(J(Zn),ee){const Vh=Yb(r.errors,n,z),gu=Yb(es,n,Vh.name||z);Je=gu.error,z=gu.name,lr=ur(es)}}else v([z],!0),Je=(await Jb(Z,i.disabled,a,m,e.shouldUseNativeValidation))[z],v([z]),J(Zn),ee&&(Je?lr=!1:(d.isValid||f.isValid)&&(lr=await j(n,!0)));ee&&(Z._f.deps&&$(Z._f.deps),E(z,lr,Je,En))}},k=(T,L)=>{if(de(r.errors,L)&&T.focus)return T.focus(),1},$=async(T,L={})=>{let z,ee;const Z=cc(T);if(e.resolver){const J=await A(wt(T)?T:Z);z=ur(J),ee=T?!Z.some(ie=>de(J,ie)):z}else T?(ee=(await Promise.all(Z.map(async J=>{const ie=de(n,J);return await j(ie&&ie._f?{[J]:ie}:ie)}))).every(Boolean),!(!ee&&!r.isValid)&&p()):ee=z=await j(n);return h.state.next({...!Un(T)||(d.isValid||f.isValid)&&z!==r.isValid?{}:{name:T},...e.resolver||!T?{isValid:z}:{},errors:r.errors}),L.shouldFocus&&!ee&&uc(n,k,T?Z:i.mount),ee},Y=T=>{const L={...o.mount?a:s};return wt(T)?L:Un(T)?de(L,T):T.map(z=>de(L,z))},he=(T,L)=>({invalid:!!de((L||r).errors,T),isDirty:!!de((L||r).dirtyFields,T),error:de((L||r).errors,T),isValidating:!!de(r.validatingFields,T),isTouched:!!de((L||r).touchedFields,T)}),ue=T=>{T&&cc(T).forEach(L=>Ct(r.errors,L)),h.state.next({errors:T?r.errors:{}})},xe=(T,L,z)=>{const ee=(de(n,T,{_f:{}})._f||{}).ref,Z=de(r.errors,T)||{},{ref:J,message:ie,type:Ve,...Je}=Z;Ze(r.errors,T,{...Je,...L,ref:ee}),h.state.next({name:T,errors:r.errors,isValid:!1}),z&&z.shouldFocus&&ee&&ee.focus&&ee.focus()},D=(T,L)=>dn(T)?h.state.subscribe({next:z=>T(P(void 0,L),z)}):P(T,L,!0),X=T=>h.state.subscribe({next:L=>{BU(T.name,L.name,T.exact)&&zU(L,T.formState||d,Sn,T.reRenderRoot)&&T.callback({values:{...a},...r,...L})}}).unsubscribe,oe=T=>(o.mount=!0,f={...f,...T.formState},X({...T,formState:f})),U=(T,L={})=>{for(const z of T?cc(T):i.mount)i.mount.delete(z),i.array.delete(z),L.keepValue||(Ct(n,z),Ct(a,z)),!L.keepError&&Ct(r.errors,z),!L.keepDirty&&Ct(r.dirtyFields,z),!L.keepTouched&&Ct(r.touchedFields,z),!L.keepIsValidating&&Ct(r.validatingFields,z),!e.shouldUnregister&&!L.keepDefaultValue&&Ct(s,z);h.state.next({values:Gt(a)}),h.state.next({...r,...L.keepDirty?{isDirty:F()}:{}}),!L.keepIsValid&&p()},ae=({disabled:T,name:L})=>{(Pn(T)&&o.mount||T||i.disabled.has(L))&&(T?i.disabled.add(L):i.disabled.delete(L))},we=(T,L={})=>{let z=de(n,T);const ee=Pn(L.disabled)||Pn(e.disabled);return Ze(n,T,{...z||{},_f:{...z&&z._f?z._f:{ref:{name:T}},name:T,mount:!0,...L}}),i.mount.add(T),z?ae({disabled:Pn(L.disabled)?L.disabled:e.disabled,name:T}):_(T,!0,L.value),{...ee?{disabled:L.disabled||e.disabled}:{},...e.progressive?{required:!!L.required,min:Al(L.min),max:Al(L.max),minLength:Al(L.minLength),maxLength:Al(L.maxLength),pattern:Al(L.pattern)}:{},name:T,onChange:I,onBlur:I,ref:Z=>{if(Z){we(T,L),z=de(n,T);const J=wt(Z.value)&&Z.querySelectorAll&&Z.querySelectorAll("input,select,textarea")[0]||Z,ie=$U(J),Ve=z._f.refs||[];if(ie?Ve.find(Je=>Je===J):J===z._f.ref)return;Ze(n,T,{_f:{...z._f,...ie?{refs:[...Ve.filter(Km),J,...Array.isArray(de(s,T))?[{}]:[]],ref:{type:J.type,name:T}}:{ref:J}}}),_(T,!1,void 0,J)}else z=de(n,T,{}),z._f&&(z._f.mount=!1),(e.shouldUnregister||L.shouldUnregister)&&!(PU(i.array,T)&&o.action)&&i.unMount.add(T)}}},ve=()=>e.shouldFocusError&&uc(n,k,i.mount),Oe=T=>{Pn(T)&&(h.state.next({disabled:T}),uc(n,(L,z)=>{const ee=de(n,z);ee&&(L.disabled=ee._f.disabled||T,Array.isArray(ee._f.refs)&&ee._f.refs.forEach(Z=>{Z.disabled=ee._f.disabled||T}))},0,!1))},De=(T,L)=>async z=>{let ee;z&&(z.preventDefault&&z.preventDefault(),z.persist&&z.persist());let Z=Gt(a);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:J,values:ie}=await N();r.errors=J,Z=ie}else await j(n);if(i.disabled.size)for(const J of i.disabled)Ze(Z,J,void 0);if(Ct(r.errors,"root"),ur(r.errors)){h.state.next({errors:{}});try{await T(Z,z)}catch(J){ee=J}}else L&&await L({...r.errors},z),ve(),setTimeout(ve);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ur(r.errors)&&!ee,submitCount:r.submitCount+1,errors:r.errors}),ee)throw ee},vt=(T,L={})=>{de(n,T)&&(wt(L.defaultValue)?W(T,Gt(de(s,T))):(W(T,L.defaultValue),Ze(s,T,Gt(L.defaultValue))),L.keepTouched||Ct(r.touchedFields,T),L.keepDirty||(Ct(r.dirtyFields,T),r.isDirty=L.defaultValue?F(T,Gt(de(s,T))):F()),L.keepError||(Ct(r.errors,T),d.isValid&&p()),h.state.next({...r}))},zt=(T,L={})=>{const z=T?Gt(T):s,ee=Gt(z),Z=ur(T),J=Z?s:ee;if(L.keepDefaultValues||(s=z),!L.keepValues){if(L.keepDirtyValues){const ie=new Set([...i.mount,...Object.keys(Nl(s,a))]);for(const Ve of Array.from(ie))de(r.dirtyFields,Ve)?Ze(J,Ve,de(a,Ve)):W(Ve,de(J,Ve))}else{if(p0&&wt(T))for(const ie of i.mount){const Ve=de(n,ie);if(Ve&&Ve._f){const Je=Array.isArray(Ve._f.refs)?Ve._f.refs[0]:Ve._f.ref;if(Sf(Je)){const lr=Je.closest("form");if(lr){lr.reset();break}}}}for(const ie of i.mount)W(ie,de(J,ie))}a=Gt(J),h.array.next({values:{...J}}),h.state.next({values:{...J}})}i={mount:L.keepDirtyValues?i.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!L.keepIsValid||!!L.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:L.keepSubmitCount?r.submitCount:0,isDirty:Z?!1:L.keepDirty?r.isDirty:!!(L.keepDefaultValues&&!sa(T,s)),isSubmitted:L.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Z?{}:L.keepDirtyValues?L.keepDefaultValues&&a?Nl(s,a):r.dirtyFields:L.keepDefaultValues&&T?Nl(s,T):L.keepDirty?r.dirtyFields:{},touchedFields:L.keepTouched?r.touchedFields:{},errors:L.keepErrors?r.errors:{},isSubmitSuccessful:L.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},yt=(T,L)=>zt(dn(T)?T(a):T,L),Sr=(T,L={})=>{const z=de(n,T),ee=z&&z._f;if(ee){const Z=ee.refs?ee.refs[0]:ee.ref;Z.focus&&(Z.focus(),L.shouldSelect&&dn(Z.select)&&Z.select())}},Sn=T=>{r={...r,...T}},Xn={control:{register:we,unregister:U,getFieldState:he,handleSubmit:De,setError:xe,_subscribe:X,_runSchema:N,_focusError:ve,_getWatch:P,_getDirty:F,_setValid:p,_setFieldArray:w,_setDisabledField:ae,_setErrors:b,_getFieldArray:V,_reset:zt,_resetDefaultValues:()=>dn(e.defaultValues)&&e.defaultValues().then(T=>{yt(T,e.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:O,_disableForm:Oe,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return a},get _state(){return o},set _state(T){o=T},get _defaultValues(){return s},get _names(){return i},set _names(T){i=T},get _formState(){return r},get _options(){return e},set _options(T){e={...e,...T}}},subscribe:oe,trigger:$,register:we,handleSubmit:De,watch:D,setValue:W,getValues:Y,reset:yt,resetField:vt,clearErrors:ue,unregister:U,setError:xe,setFocus:Sr,getFieldState:he};return{...Xn,formControl:Xn}}function $2(t={}){const e=G.useRef(void 0),r=G.useRef(void 0),[n,s]=G.useState({isDirty:!1,isValidating:!1,isLoading:dn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:dn(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:KU(t),formState:n},t.formControl&&t.defaultValues&&!dn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const a=e.current.control;return a._options=t,OU(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(i=>({...i,isReady:!0})),a._formState.isReady=!0,o},[a]),G.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),G.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),G.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),G.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),G.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==n.isDirty&&a._subjects.state.next({isDirty:o})}},[a,n.isDirty]),G.useEffect(()=>{t.values&&!sa(t.values,r.current)?(a._reset(t.values,a._options.resetOptions),r.current=t.values,s(o=>({...o}))):a._resetDefaultValues()},[a,t.values]),G.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=IU(n,a),e.current}const Xb=(t,e,r)=>{if(t&&"reportValidity"in t){const n=de(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},M2=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?Xb(n.ref,r,t):n.refs&&n.refs.forEach(s=>Xb(s,r,t))}},YU=(t,e)=>{e.shouldUseNativeValidation&&M2(t,e);const r={};for(const n in t){const s=de(e.fields,n),a=Object.assign(t[n]||{},{ref:s&&s.ref});if(QU(e.names||Object.keys(t),n)){const o=Object.assign({},de(r,n));Ze(o,"root",a),Ze(r,n,o)}else Ze(r,n,a)}return r},QU=(t,e)=>t.some(r=>r.startsWith(e+"."));var JU=function(t,e){for(var r={};t.length;){var n=t[0],s=n.code,a=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var i=n.unionErrors[0].errors[0];r[o]={message:i.message,type:i.code}}else r[o]={message:a,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return t.push(f)})}),e){var c=r[o].types,u=c&&c[n.code];r[o]=k2(o,e,r,s,u?[].concat(u,n.message):n.message)}t.shift()}return r},D2=function(t,e,r){return r===void 0&&(r={}),function(n,s,a){try{return Promise.resolve(function(o,i){try{var c=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(u){return a.shouldUseNativeValidation&&M2({},a),{errors:{},values:r.raw?n:u}})}catch(u){return i(u)}return c&&c.then?c.then(void 0,i):c}(0,function(o){if(function(i){return Array.isArray(i==null?void 0:i.errors)}(o))return{values:{},errors:YU(JU(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},qe;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const a={};for(const o of s)a[o]=o;return a},t.getValidEnumValues=s=>{const a=t.objectKeys(s).filter(i=>typeof s[s[i]]!="number"),o={};for(const i of a)o[i]=s[i];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.push(o);return a},t.find=(s,a)=>{for(const o of s)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,a=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(qe||(qe={}));var Zb;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Zb||(Zb={}));const fe=qe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xs=t=>{switch(typeof t){case"undefined":return fe.undefined;case"string":return fe.string;case"number":return Number.isNaN(t)?fe.nan:fe.number;case"boolean":return fe.boolean;case"function":return fe.function;case"bigint":return fe.bigint;case"symbol":return fe.symbol;case"object":return Array.isArray(t)?fe.array:t===null?fe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?fe.promise:typeof Map<"u"&&t instanceof Map?fe.map:typeof Set<"u"&&t instanceof Set?fe.set:typeof Date<"u"&&t instanceof Date?fe.date:fe.object;default:return fe.unknown}},Q=qe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class js extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(a){return a.message},n={_errors:[]},s=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let i=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(i[u]=i[u]||{_errors:[]},i[u]._errors.push(r(o))):i[u]=i[u]||{_errors:[]},i=i[u],c++}}};return s(this),n}static assert(e){if(!(e instanceof js))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,qe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}js.create=t=>new js(t);const zg=(t,e)=>{let r;switch(t.code){case Q.invalid_type:t.received===fe.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Q.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,qe.jsonStringifyReplacer)}`;break;case Q.unrecognized_keys:r=`Unrecognized key(s) in object: ${qe.joinValues(t.keys,", ")}`;break;case Q.invalid_union:r="Invalid input";break;case Q.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${qe.joinValues(t.options)}`;break;case Q.invalid_enum_value:r=`Invalid enum value. Expected ${qe.joinValues(t.options)}, received '${t.received}'`;break;case Q.invalid_arguments:r="Invalid function arguments";break;case Q.invalid_return_type:r="Invalid function return type";break;case Q.invalid_date:r="Invalid date";break;case Q.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:qe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Q.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Q.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Q.custom:r="Invalid input";break;case Q.invalid_intersection_types:r="Intersection results could not be merged";break;case Q.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Q.not_finite:r="Number must be finite";break;default:r=e.defaultError,qe.assertNever(t)}return{message:r}};let XU=zg;function ZU(){return XU}const e8=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,a=[...r,...s.path||[]],o={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let i="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)i=u(o,{data:e,defaultError:i}).message;return{...s,path:a,message:i}};function se(t,e){const r=ZU(),n=e8({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===zg?void 0:zg].filter(s=>!!s)});t.common.issues.push(n)}class Ir{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return Ne;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r){const a=await s.key,o=await s.value;n.push({key:a,value:o})}return Ir.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:a,value:o}=s;if(a.status==="aborted"||o.status==="aborted")return Ne;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[a.value]=o.value)}return{status:e.value,value:n}}}const Ne=Object.freeze({status:"aborted"}),Bl=t=>({status:"dirty",value:t}),qr=t=>({status:"valid",value:t}),e_=t=>t.status==="aborted",t_=t=>t.status==="dirty",Hi=t=>t.status==="valid",Nf=t=>typeof Promise<"u"&&t instanceof Promise;var me;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(me||(me={}));class ka{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const r_=(t,e)=>{if(Hi(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new js(t.common.issues);return this._error=r,this._error}}};function $e(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,i)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??i.defaultError}:typeof i.data>"u"?{message:c??n??i.defaultError}:o.code!=="invalid_type"?{message:i.defaultError}:{message:c??r??i.defaultError}},description:s}}class He{get description(){return this._def.description}_getType(e){return Xs(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Xs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ir,ctx:{common:e.parent.common,data:e.data,parsedType:Xs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Nf(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xs(e)},s=this._parseSync({data:e,path:n.path,parent:n});return r_(n,s)}"~validate"(e){var n,s;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xs(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:r});return Hi(a)?{value:a.value}:{issues:r.common.issues}}catch(a){(s=(n=a==null?void 0:a.message)==null?void 0:n.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(a=>Hi(a)?{value:a.value}:{issues:r.common.issues})}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xs(e)},s=this._parse({data:e,path:n.path,parent:n}),a=await(Nf(s)?s:Promise.resolve(s));return r_(n,a)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,a)=>{const o=e(s),i=()=>a.addIssue({code:Q.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(i(),!1)):o?!0:(i(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new qi({schema:this,typeName:Ae.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Ca.create(this,this._def)}nullable(){return Ki.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Hn.create(this)}promise(){return kf.create(this,this._def)}or(e){return Af.create([this,e],this._def)}and(e){return jf.create(this,e,this._def)}transform(e){return new qi({...$e(this._def),schema:this,typeName:Ae.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Wg({...$e(this._def),innerType:this,defaultValue:r,typeName:Ae.ZodDefault})}brand(){return new S8({typeName:Ae.ZodBranded,type:this,...$e(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Hg({...$e(this._def),innerType:this,catchValue:r,typeName:Ae.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return x0.create(this,e)}readonly(){return Gg.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const t8=/^c[^\s-]{8,}$/i,r8=/^[0-9a-z]+$/,n8=/^[0-9A-HJKMNP-TV-Z]{26}$/i,s8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,a8=/^[a-z0-9_-]{21}$/i,o8=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,i8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,l8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,c8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ym;const u8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,d8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,f8=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,h8=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,m8=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,p8=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,F2="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",g8=new RegExp(`^${F2}$`);function U2(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function v8(t){return new RegExp(`^${U2(t)}$`)}function y8(t){let e=`${F2}T${U2(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function x8(t,e){return!!((e==="v4"||!e)&&u8.test(t)||(e==="v6"||!e)&&f8.test(t))}function w8(t,e){if(!o8.test(t))return!1;try{const[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function b8(t,e){return!!((e==="v4"||!e)&&d8.test(t)||(e==="v6"||!e)&&h8.test(t))}class ha extends He{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==fe.string){const a=this._getOrReturnCtx(e);return se(a,{code:Q.invalid_type,expected:fe.string,received:a.parsedType}),Ne}const n=new Ir;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),se(s,{code:Q.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),se(s,{code:Q.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,i=e.data.length<a.value;(o||i)&&(s=this._getOrReturnCtx(e,s),o?se(s,{code:Q.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):i&&se(s,{code:Q.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")l8.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"email",code:Q.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Ym||(Ym=new RegExp(c8,"u")),Ym.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"emoji",code:Q.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")s8.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"uuid",code:Q.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")a8.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"nanoid",code:Q.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")t8.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"cuid",code:Q.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")r8.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"cuid2",code:Q.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")n8.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"ulid",code:Q.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),se(s,{validation:"url",code:Q.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"regex",code:Q.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),se(s,{code:Q.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),se(s,{code:Q.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),se(s,{code:Q.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?y8(a).test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{code:Q.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?g8.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{code:Q.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?v8(a).test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{code:Q.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?i8.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"duration",code:Q.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?x8(e.data,a.version)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"ip",code:Q.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?w8(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"jwt",code:Q.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?b8(e.data,a.version)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"cidr",code:Q.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?m8.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"base64",code:Q.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?p8.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"base64url",code:Q.invalid_string,message:a.message}),n.dirty()):qe.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:Q.invalid_string,...me.errToObj(n)})}_addCheck(e){return new ha({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...me.errToObj(e)})}url(e){return this._addCheck({kind:"url",...me.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...me.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...me.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...me.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...me.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...me.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...me.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...me.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...me.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...me.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...me.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...me.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...me.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...me.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...me.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...me.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...me.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...me.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...me.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...me.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...me.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...me.errToObj(r)})}nonempty(e){return this.min(1,me.errToObj(e))}trim(){return new ha({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ha({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ha({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}ha.create=t=>new ha({checks:[],typeName:Ae.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...$e(t)});function _8(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,a=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return a%o/10**s}class Mc extends He{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==fe.number){const a=this._getOrReturnCtx(e);return se(a,{code:Q.invalid_type,expected:fe.number,received:a.parsedType}),Ne}let n;const s=new Ir;for(const a of this._def.checks)a.kind==="int"?qe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{code:Q.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),se(n,{code:Q.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),se(n,{code:Q.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?_8(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),se(n,{code:Q.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{code:Q.not_finite,message:a.message}),s.dirty()):qe.assertNever(a);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,me.toString(r))}gt(e,r){return this.setLimit("min",e,!1,me.toString(r))}lte(e,r){return this.setLimit("max",e,!0,me.toString(r))}lt(e,r){return this.setLimit("max",e,!1,me.toString(r))}setLimit(e,r,n,s){return new Mc({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:me.toString(s)}]})}_addCheck(e){return new Mc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:me.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:me.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:me.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:me.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:me.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:me.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&qe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Mc.create=t=>new Mc({checks:[],typeName:Ae.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...$e(t)});class Dc extends He{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==fe.bigint)return this._getInvalidInput(e);let n;const s=new Ir;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),se(n,{code:Q.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),se(n,{code:Q.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),se(n,{code:Q.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):qe.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return se(r,{code:Q.invalid_type,expected:fe.bigint,received:r.parsedType}),Ne}gte(e,r){return this.setLimit("min",e,!0,me.toString(r))}gt(e,r){return this.setLimit("min",e,!1,me.toString(r))}lte(e,r){return this.setLimit("max",e,!0,me.toString(r))}lt(e,r){return this.setLimit("max",e,!1,me.toString(r))}setLimit(e,r,n,s){return new Dc({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:me.toString(s)}]})}_addCheck(e){return new Dc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:me.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:me.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Dc.create=t=>new Dc({checks:[],typeName:Ae.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...$e(t)});class n_ extends He{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==fe.boolean){const n=this._getOrReturnCtx(e);return se(n,{code:Q.invalid_type,expected:fe.boolean,received:n.parsedType}),Ne}return qr(e.data)}}n_.create=t=>new n_({typeName:Ae.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...$e(t)});class Fc extends He{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==fe.date){const a=this._getOrReturnCtx(e);return se(a,{code:Q.invalid_type,expected:fe.date,received:a.parsedType}),Ne}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return se(a,{code:Q.invalid_date}),Ne}const n=new Ir;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),se(s,{code:Q.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),se(s,{code:Q.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):qe.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Fc({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:me.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:me.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}Fc.create=t=>new Fc({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ae.ZodDate,...$e(t)});class s_ extends He{_parse(e){if(this._getType(e)!==fe.symbol){const n=this._getOrReturnCtx(e);return se(n,{code:Q.invalid_type,expected:fe.symbol,received:n.parsedType}),Ne}return qr(e.data)}}s_.create=t=>new s_({typeName:Ae.ZodSymbol,...$e(t)});class a_ extends He{_parse(e){if(this._getType(e)!==fe.undefined){const n=this._getOrReturnCtx(e);return se(n,{code:Q.invalid_type,expected:fe.undefined,received:n.parsedType}),Ne}return qr(e.data)}}a_.create=t=>new a_({typeName:Ae.ZodUndefined,...$e(t)});class o_ extends He{_parse(e){if(this._getType(e)!==fe.null){const n=this._getOrReturnCtx(e);return se(n,{code:Q.invalid_type,expected:fe.null,received:n.parsedType}),Ne}return qr(e.data)}}o_.create=t=>new o_({typeName:Ae.ZodNull,...$e(t)});class i_ extends He{constructor(){super(...arguments),this._any=!0}_parse(e){return qr(e.data)}}i_.create=t=>new i_({typeName:Ae.ZodAny,...$e(t)});class l_ extends He{constructor(){super(...arguments),this._unknown=!0}_parse(e){return qr(e.data)}}l_.create=t=>new l_({typeName:Ae.ZodUnknown,...$e(t)});class Ta extends He{_parse(e){const r=this._getOrReturnCtx(e);return se(r,{code:Q.invalid_type,expected:fe.never,received:r.parsedType}),Ne}}Ta.create=t=>new Ta({typeName:Ae.ZodNever,...$e(t)});class c_ extends He{_parse(e){if(this._getType(e)!==fe.undefined){const n=this._getOrReturnCtx(e);return se(n,{code:Q.invalid_type,expected:fe.void,received:n.parsedType}),Ne}return qr(e.data)}}c_.create=t=>new c_({typeName:Ae.ZodVoid,...$e(t)});class Hn extends He{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==fe.array)return se(r,{code:Q.invalid_type,expected:fe.array,received:r.parsedType}),Ne;if(s.exactLength!==null){const o=r.data.length>s.exactLength.value,i=r.data.length<s.exactLength.value;(o||i)&&(se(r,{code:o?Q.too_big:Q.too_small,minimum:i?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(se(r,{code:Q.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(se(r,{code:Q.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,i)=>s.type._parseAsync(new ka(r,o,r.path,i)))).then(o=>Ir.mergeArray(n,o));const a=[...r.data].map((o,i)=>s.type._parseSync(new ka(r,o,r.path,i)));return Ir.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new Hn({...this._def,minLength:{value:e,message:me.toString(r)}})}max(e,r){return new Hn({...this._def,maxLength:{value:e,message:me.toString(r)}})}length(e,r){return new Hn({...this._def,exactLength:{value:e,message:me.toString(r)}})}nonempty(e){return this.min(1,e)}}Hn.create=(t,e)=>new Hn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ae.ZodArray,...$e(e)});function Xo(t){if(t instanceof xt){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Ca.create(Xo(n))}return new xt({...t._def,shape:()=>e})}else return t instanceof Hn?new Hn({...t._def,type:Xo(t.element)}):t instanceof Ca?Ca.create(Xo(t.unwrap())):t instanceof Ki?Ki.create(Xo(t.unwrap())):t instanceof Co?Co.create(t.items.map(e=>Xo(e))):t}class xt extends He{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=qe.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==fe.object){const u=this._getOrReturnCtx(e);return se(u,{code:Q.invalid_type,expected:fe.object,received:u.parsedType}),Ne}const{status:n,ctx:s}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),i=[];if(!(this._def.catchall instanceof Ta&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||i.push(u);const c=[];for(const u of o){const d=a[u],f=s.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new ka(s,f,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Ta){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of i)c.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")i.length>0&&(se(s,{code:Q.unrecognized_keys,keys:i}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of i){const f=s.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new ka(s,f,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,h=await d.value;u.push({key:f,value:h,alwaysSet:d.alwaysSet})}return u}).then(u=>Ir.mergeObjectSync(n,u)):Ir.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return me.errToObj,new xt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var a,o;const s=((o=(a=this._def).errorMap)==null?void 0:o.call(a,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:me.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new xt({...this._def,unknownKeys:"strip"})}passthrough(){return new xt({...this._def,unknownKeys:"passthrough"})}extend(e){return new xt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new xt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ae.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new xt({...this._def,catchall:e})}pick(e){const r={};for(const n of qe.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new xt({...this._def,shape:()=>r})}omit(e){const r={};for(const n of qe.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new xt({...this._def,shape:()=>r})}deepPartial(){return Xo(this)}partial(e){const r={};for(const n of qe.objectKeys(this.shape)){const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}return new xt({...this._def,shape:()=>r})}required(e){const r={};for(const n of qe.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Ca;)a=a._def.innerType;r[n]=a}return new xt({...this._def,shape:()=>r})}keyof(){return V2(qe.objectKeys(this.shape))}}xt.create=(t,e)=>new xt({shape:()=>t,unknownKeys:"strip",catchall:Ta.create(),typeName:Ae.ZodObject,...$e(e)});xt.strictCreate=(t,e)=>new xt({shape:()=>t,unknownKeys:"strict",catchall:Ta.create(),typeName:Ae.ZodObject,...$e(e)});xt.lazycreate=(t,e)=>new xt({shape:t,unknownKeys:"strip",catchall:Ta.create(),typeName:Ae.ZodObject,...$e(e)});class Af extends He{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(a){for(const i of a)if(i.result.status==="valid")return i.result;for(const i of a)if(i.result.status==="dirty")return r.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(i=>new js(i.ctx.common.issues));return se(r,{code:Q.invalid_union,unionErrors:o}),Ne}if(r.common.async)return Promise.all(n.map(async a=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let a;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const i=o.map(c=>new js(c));return se(r,{code:Q.invalid_union,unionErrors:i}),Ne}}get options(){return this._def.options}}Af.create=(t,e)=>new Af({options:t,typeName:Ae.ZodUnion,...$e(e)});function Bg(t,e){const r=Xs(t),n=Xs(e);if(t===e)return{valid:!0,data:t};if(r===fe.object&&n===fe.object){const s=qe.objectKeys(e),a=qe.objectKeys(t).filter(i=>s.indexOf(i)!==-1),o={...t,...e};for(const i of a){const c=Bg(t[i],e[i]);if(!c.valid)return{valid:!1};o[i]=c.data}return{valid:!0,data:o}}else if(r===fe.array&&n===fe.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<t.length;a++){const o=t[a],i=e[a],c=Bg(o,i);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===fe.date&&n===fe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class jf extends He{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(a,o)=>{if(e_(a)||e_(o))return Ne;const i=Bg(a.value,o.value);return i.valid?((t_(a)||t_(o))&&r.dirty(),{status:r.value,value:i.data}):(se(n,{code:Q.invalid_intersection_types}),Ne)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,o])=>s(a,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}jf.create=(t,e,r)=>new jf({left:t,right:e,typeName:Ae.ZodIntersection,...$e(r)});class Co extends He{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==fe.array)return se(n,{code:Q.invalid_type,expected:fe.array,received:n.parsedType}),Ne;if(n.data.length<this._def.items.length)return se(n,{code:Q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ne;!this._def.rest&&n.data.length>this._def.items.length&&(se(n,{code:Q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...n.data].map((o,i)=>{const c=this._def.items[i]||this._def.rest;return c?c._parse(new ka(n,o,n.path,i)):null}).filter(o=>!!o);return n.common.async?Promise.all(a).then(o=>Ir.mergeArray(r,o)):Ir.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new Co({...this._def,rest:e})}}Co.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Co({items:t,typeName:Ae.ZodTuple,rest:null,...$e(e)})};class u_ extends He{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==fe.map)return se(n,{code:Q.invalid_type,expected:fe.map,received:n.parsedType}),Ne;const s=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map(([i,c],u)=>({key:s._parse(new ka(n,i,n.path,[u,"key"])),value:a._parse(new ka(n,c,n.path,[u,"value"]))}));if(n.common.async){const i=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Ne;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),i.set(u.value,d.value)}return{status:r.value,value:i}})}else{const i=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Ne;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),i.set(u.value,d.value)}return{status:r.value,value:i}}}}u_.create=(t,e,r)=>new u_({valueType:e,keyType:t,typeName:Ae.ZodMap,...$e(r)});class Uc extends He{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==fe.set)return se(n,{code:Q.invalid_type,expected:fe.set,received:n.parsedType}),Ne;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(se(n,{code:Q.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(se(n,{code:Q.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const a=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Ne;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const i=[...n.data.values()].map((c,u)=>a._parse(new ka(n,c,n.path,u)));return n.common.async?Promise.all(i).then(c=>o(c)):o(i)}min(e,r){return new Uc({...this._def,minSize:{value:e,message:me.toString(r)}})}max(e,r){return new Uc({...this._def,maxSize:{value:e,message:me.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}Uc.create=(t,e)=>new Uc({valueType:t,minSize:null,maxSize:null,typeName:Ae.ZodSet,...$e(e)});class d_ extends He{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}d_.create=(t,e)=>new d_({getter:t,typeName:Ae.ZodLazy,...$e(e)});class f_ extends He{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return se(r,{received:r.data,code:Q.invalid_literal,expected:this._def.value}),Ne}return{status:"valid",value:e.data}}get value(){return this._def.value}}f_.create=(t,e)=>new f_({value:t,typeName:Ae.ZodLiteral,...$e(e)});function V2(t,e){return new Gi({values:t,typeName:Ae.ZodEnum,...$e(e)})}class Gi extends He{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return se(r,{expected:qe.joinValues(n),received:r.parsedType,code:Q.invalid_type}),Ne}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return se(r,{received:r.data,code:Q.invalid_enum_value,options:n}),Ne}return qr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return Gi.create(e,{...this._def,...r})}exclude(e,r=this._def){return Gi.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}Gi.create=V2;class h_ extends He{_parse(e){const r=qe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==fe.string&&n.parsedType!==fe.number){const s=qe.objectValues(r);return se(n,{expected:qe.joinValues(s),received:n.parsedType,code:Q.invalid_type}),Ne}if(this._cache||(this._cache=new Set(qe.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=qe.objectValues(r);return se(n,{received:n.data,code:Q.invalid_enum_value,options:s}),Ne}return qr(e.data)}get enum(){return this._def.values}}h_.create=(t,e)=>new h_({values:t,typeName:Ae.ZodNativeEnum,...$e(e)});class kf extends He{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==fe.promise&&r.common.async===!1)return se(r,{code:Q.invalid_type,expected:fe.promise,received:r.parsedType}),Ne;const n=r.parsedType===fe.promise?r.data:Promise.resolve(r.data);return qr(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}kf.create=(t,e)=>new kf({type:t,typeName:Ae.ZodPromise,...$e(e)});class qi extends He{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ae.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:o=>{se(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const o=s.transform(n.data,a);if(n.common.async)return Promise.resolve(o).then(async i=>{if(r.value==="aborted")return Ne;const c=await this._def.schema._parseAsync({data:i,path:n.path,parent:n});return c.status==="aborted"?Ne:c.status==="dirty"||r.value==="dirty"?Bl(c.value):c});{if(r.value==="aborted")return Ne;const i=this._def.schema._parseSync({data:o,path:n.path,parent:n});return i.status==="aborted"?Ne:i.status==="dirty"||r.value==="dirty"?Bl(i.value):i}}if(s.type==="refinement"){const o=i=>{const c=s.refinement(i,a);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return i};if(n.common.async===!1){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Ne:(i.status==="dirty"&&r.dirty(),o(i.value),{status:r.value,value:i.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(i=>i.status==="aborted"?Ne:(i.status==="dirty"&&r.dirty(),o(i.value).then(()=>({status:r.value,value:i.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Hi(o))return Ne;const i=s.transform(o.value,a);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:i}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Hi(o)?Promise.resolve(s.transform(o.value,a)).then(i=>({status:r.value,value:i})):Ne);qe.assertNever(s)}}qi.create=(t,e,r)=>new qi({schema:t,typeName:Ae.ZodEffects,effect:e,...$e(r)});qi.createWithPreprocess=(t,e,r)=>new qi({schema:e,effect:{type:"preprocess",transform:t},typeName:Ae.ZodEffects,...$e(r)});class Ca extends He{_parse(e){return this._getType(e)===fe.undefined?qr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ca.create=(t,e)=>new Ca({innerType:t,typeName:Ae.ZodOptional,...$e(e)});class Ki extends He{_parse(e){return this._getType(e)===fe.null?qr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ki.create=(t,e)=>new Ki({innerType:t,typeName:Ae.ZodNullable,...$e(e)});class Wg extends He{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===fe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Wg.create=(t,e)=>new Wg({innerType:t,typeName:Ae.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...$e(e)});class Hg extends He{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Nf(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new js(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new js(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Hg.create=(t,e)=>new Hg({innerType:t,typeName:Ae.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...$e(e)});class m_ extends He{_parse(e){if(this._getType(e)!==fe.nan){const n=this._getOrReturnCtx(e);return se(n,{code:Q.invalid_type,expected:fe.nan,received:n.parsedType}),Ne}return{status:"valid",value:e.data}}}m_.create=t=>new m_({typeName:Ae.ZodNaN,...$e(t)});class S8 extends He{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class x0 extends He{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Ne:a.status==="dirty"?(r.dirty(),Bl(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Ne:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new x0({in:e,out:r,typeName:Ae.ZodPipeline})}}class Gg extends He{_parse(e){const r=this._def.innerType._parse(e),n=s=>(Hi(s)&&(s.value=Object.freeze(s.value)),s);return Nf(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}}Gg.create=(t,e)=>new Gg({innerType:t,typeName:Ae.ZodReadonly,...$e(e)});var Ae;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ae||(Ae={}));const aa=ha.create,z2=Fc.create;Ta.create;Hn.create;const B2=xt.create;Af.create;jf.create;Co.create;const W2=Gi.create;kf.create;Ca.create;Ki.create;function We(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Or(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function nr(t,e){const r=We(t);return isNaN(e)?Or(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function wn(t,e){const r=We(t);if(isNaN(e))return Or(t,NaN);if(!e)return r;const n=r.getDate(),s=Or(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const a=s.getDate();return n>=a?s:(r.setFullYear(s.getFullYear(),s.getMonth(),n),r)}const w0=6048e5,C8=864e5;let E8={};function lu(){return E8}function qn(t,e){var i,c,u,d;const r=lu(),n=(e==null?void 0:e.weekStartsOn)??((c=(i=e==null?void 0:e.locale)==null?void 0:i.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=We(t),a=s.getDay(),o=(a<n?7:0)+a-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Eo(t){return qn(t,{weekStartsOn:1})}function H2(t){const e=We(t),r=e.getFullYear(),n=Or(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=Eo(n),a=Or(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=Eo(a);return e.getTime()>=s.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Yi(t){const e=We(t);return e.setHours(0,0,0,0),e}function Tf(t){const e=We(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Vn(t,e){const r=Yi(t),n=Yi(e),s=+r-Tf(r),a=+n-Tf(n);return Math.round((s-a)/C8)}function N8(t){const e=H2(t),r=Or(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Eo(r)}function qg(t,e){const r=e*7;return nr(t,r)}function A8(t,e){return wn(t,e*12)}function j8(t){let e;return t.forEach(function(r){const n=We(r);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function k8(t){let e;return t.forEach(r=>{const n=We(r);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function gr(t,e){const r=Yi(t),n=Yi(e);return+r==+n}function b0(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function T8(t){if(!b0(t)&&typeof t!="number")return!1;const e=We(t);return!isNaN(Number(e))}function Vc(t,e){const r=We(t),n=We(e),s=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return s*12+a}function P8(t,e,r){const n=qn(t,r),s=qn(e,r),a=+n-Tf(n),o=+s-Tf(s);return Math.round((a-o)/w0)}function _0(t){const e=We(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function wr(t){const e=We(t);return e.setDate(1),e.setHours(0,0,0,0),e}function G2(t){const e=We(t),r=Or(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function S0(t,e){var i,c,u,d;const r=lu(),n=(e==null?void 0:e.weekStartsOn)??((c=(i=e==null?void 0:e.locale)==null?void 0:i.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=We(t),a=s.getDay(),o=(a<n?-7:0)+6-(a-n);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function q2(t){return S0(t,{weekStartsOn:1})}const R8={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},I8=(t,e,r)=>{let n;const s=R8[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Qm(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const O8={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},L8={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$8={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},M8={date:Qm({formats:O8,defaultWidth:"full"}),time:Qm({formats:L8,defaultWidth:"full"}),dateTime:Qm({formats:$8,defaultWidth:"full"})},D8={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},F8=(t,e,r,n)=>D8[t];function jl(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,i=r!=null&&r.width?String(r.width):o;s=t.formattingValues[i]||t.formattingValues[o]}else{const o=t.defaultWidth,i=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[i]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const U8={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},V8={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},z8={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},B8={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},W8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},H8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},G8=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},q8={ordinalNumber:G8,era:jl({values:U8,defaultWidth:"wide"}),quarter:jl({values:V8,defaultWidth:"wide",argumentCallback:t=>t-1}),month:jl({values:z8,defaultWidth:"wide"}),day:jl({values:B8,defaultWidth:"wide"}),dayPeriod:jl({values:W8,defaultWidth:"wide",formattingValues:H8,defaultFormattingWidth:"wide"})};function kl(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const o=a[0],i=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(i)?Y8(i,f=>f.test(o)):K8(i,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function K8(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Y8(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Q8(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const i=e.slice(s.length);return{value:o,rest:i}}}const J8=/^(\d+)(th|st|nd|rd)?/i,X8=/\d+/i,Z8={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},e9={any:[/^b/i,/^(a|c)/i]},t9={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},r9={any:[/1/i,/2/i,/3/i,/4/i]},n9={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},s9={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},a9={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},o9={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},i9={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},l9={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},c9={ordinalNumber:Q8({matchPattern:J8,parsePattern:X8,valueCallback:t=>parseInt(t,10)}),era:kl({matchPatterns:Z8,defaultMatchWidth:"wide",parsePatterns:e9,defaultParseWidth:"any"}),quarter:kl({matchPatterns:t9,defaultMatchWidth:"wide",parsePatterns:r9,defaultParseWidth:"any",valueCallback:t=>t+1}),month:kl({matchPatterns:n9,defaultMatchWidth:"wide",parsePatterns:s9,defaultParseWidth:"any"}),day:kl({matchPatterns:a9,defaultMatchWidth:"wide",parsePatterns:o9,defaultParseWidth:"any"}),dayPeriod:kl({matchPatterns:i9,defaultMatchWidth:"any",parsePatterns:l9,defaultParseWidth:"any"})},K2={code:"en-US",formatDistance:I8,formatLong:M8,formatRelative:F8,localize:q8,match:c9,options:{weekStartsOn:0,firstWeekContainsDate:1}};function u9(t){const e=We(t);return Vn(e,G2(e))+1}function Y2(t){const e=We(t),r=+Eo(e)-+N8(e);return Math.round(r/w0)+1}function Q2(t,e){var d,f,h,m;const r=We(t),n=r.getFullYear(),s=lu(),a=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(h=s.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=Or(t,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const i=qn(o,e),c=Or(t,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const u=qn(c,e);return r.getTime()>=i.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function d9(t,e){var i,c,u,d;const r=lu(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(i=e==null?void 0:e.locale)==null?void 0:i.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=Q2(t,e),a=Or(t,0);return a.setFullYear(s,0,n),a.setHours(0,0,0,0),qn(a,e)}function J2(t,e){const r=We(t),n=+qn(r,e)-+d9(r,e);return Math.round(n/w0)+1}function Ye(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Ws={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Ye(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Ye(r+1,2)},d(t,e){return Ye(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Ye(t.getHours()%12||12,e.length)},H(t,e){return Ye(t.getHours(),e.length)},m(t,e){return Ye(t.getMinutes(),e.length)},s(t,e){return Ye(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Ye(s,e.length)}},Ko={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},p_={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return Ws.y(t,e)},Y:function(t,e,r,n){const s=Q2(t,n),a=s>0?s:1-s;if(e==="YY"){const o=a%100;return Ye(o,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):Ye(a,e.length)},R:function(t,e){const r=H2(t);return Ye(r,e.length)},u:function(t,e){const r=t.getFullYear();return Ye(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Ye(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Ye(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Ws.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Ye(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=J2(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):Ye(s,e.length)},I:function(t,e,r){const n=Y2(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Ye(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Ws.d(t,e)},D:function(t,e,r){const n=u9(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Ye(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Ye(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Ye(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return Ye(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=Ko.noon:n===0?s=Ko.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=Ko.evening:n>=12?s=Ko.afternoon:n>=4?s=Ko.morning:s=Ko.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Ws.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Ws.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Ye(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Ye(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ws.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Ws.s(t,e)},S:function(t,e){return Ws.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return v_(n);case"XXXX":case"XX":return Ka(n);case"XXXXX":case"XXX":default:return Ka(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return v_(n);case"xxxx":case"xx":return Ka(n);case"xxxxx":case"xxx":default:return Ka(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+g_(n,":");case"OOOO":default:return"GMT"+Ka(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+g_(n,":");case"zzzz":default:return"GMT"+Ka(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Ye(n,e.length)},T:function(t,e,r){const n=t.getTime();return Ye(n,e.length)}};function g_(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),a=n%60;return a===0?r+String(s):r+String(s)+e+Ye(a,2)}function v_(t,e){return t%60===0?(t>0?"-":"+")+Ye(Math.abs(t)/60,2):Ka(t,e)}function Ka(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Ye(Math.trunc(n/60),2),a=Ye(n%60,2);return r+s+e+a}const y_=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},X2=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},f9=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return y_(t,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",y_(n,e)).replace("{{time}}",X2(s,e))},h9={p:X2,P:f9},m9=/^D+$/,p9=/^Y+$/,g9=["D","DD","YY","YYYY"];function v9(t){return m9.test(t)}function y9(t){return p9.test(t)}function x9(t,e,r){const n=w9(t,e,r);if(console.warn(n),g9.includes(t))throw new RangeError(n)}function w9(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const b9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,S9=/^'([^]*?)'?$/,C9=/''/g,E9=/[a-zA-Z]/;function Ls(t,e,r){var d,f,h,m,y,p,v,w;const n=lu(),s=(r==null?void 0:r.locale)??n.locale??K2,a=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((p=(y=r==null?void 0:r.locale)==null?void 0:y.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((w=(v=n.locale)==null?void 0:v.options)==null?void 0:w.weekStartsOn)??0,i=We(t);if(!T8(i))throw new RangeError("Invalid time value");let c=e.match(_9).map(x=>{const b=x[0];if(b==="p"||b==="P"){const _=h9[b];return _(x,s.formatLong)}return x}).join("").match(b9).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const b=x[0];if(b==="'")return{isToken:!1,value:N9(x)};if(p_[b])return{isToken:!0,value:x};if(b.match(E9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(c=s.localize.preprocessor(i,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return c.map(x=>{if(!x.isToken)return x.value;const b=x.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&y9(b)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&v9(b))&&x9(b,e,String(t));const _=p_[b[0]];return _(i,b,s.localize,u)}).join("")}function N9(t){const e=t.match(S9);return e?e[1].replace(C9,"'"):t}function A9(t){const e=We(t),r=e.getFullYear(),n=e.getMonth(),s=Or(t,0);return s.setFullYear(r,n+1,0),s.setHours(0,0,0,0),s.getDate()}function j9(t){return Math.trunc(+We(t)/1e3)}function k9(t){const e=We(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(0,0,0,0),e}function T9(t,e){return P8(k9(t),wr(t),e)+1}function Kg(t,e){const r=We(t),n=We(e);return r.getTime()>n.getTime()}function Z2(t,e){const r=We(t),n=We(e);return+r<+n}function C0(t,e){const r=We(t),n=We(e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function P9(t,e){const r=We(t),n=We(e);return r.getFullYear()===n.getFullYear()}function Jm(t,e){return nr(t,-e)}function Xm(t,e){const r=We(t),n=r.getFullYear(),s=r.getDate(),a=Or(t,0);a.setFullYear(n,e,15),a.setHours(0,0,0,0);const o=A9(a);return r.setMonth(e,Math.min(s,o)),r}function x_(t,e){const r=We(t);return isNaN(+r)?Or(t,NaN):(r.setFullYear(e),r)}var be=function(){return be=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},be.apply(this,arguments)};function R9(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function ek(t,e,r){for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function cu(t){return t.mode==="multiple"}function uu(t){return t.mode==="range"}function Oh(t){return t.mode==="single"}var I9={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function O9(t,e){return Ls(t,"LLLL y",e)}function L9(t,e){return Ls(t,"d",e)}function $9(t,e){return Ls(t,"LLLL",e)}function M9(t){return"".concat(t)}function D9(t,e){return Ls(t,"cccccc",e)}function F9(t,e){return Ls(t,"yyyy",e)}var U9=Object.freeze({__proto__:null,formatCaption:O9,formatDay:L9,formatMonthCaption:$9,formatWeekNumber:M9,formatWeekdayName:D9,formatYearCaption:F9}),V9=function(t,e,r){return Ls(t,"do MMMM (EEEE)",r)},z9=function(){return"Month: "},B9=function(){return"Go to next month"},W9=function(){return"Go to previous month"},H9=function(t,e){return Ls(t,"cccc",e)},G9=function(t){return"Week n. ".concat(t)},q9=function(){return"Year: "},K9=Object.freeze({__proto__:null,labelDay:V9,labelMonthDropdown:z9,labelNext:B9,labelPrevious:W9,labelWeekNumber:G9,labelWeekday:H9,labelYearDropdown:q9});function Y9(){var t="buttons",e=I9,r=K2,n={},s={},a=1,o={},i=new Date;return{captionLayout:t,classNames:e,formatters:U9,labels:K9,locale:r,modifiersClassNames:n,modifiers:s,numberOfMonths:a,styles:o,today:i,mode:"default"}}function Q9(t){var e=t.fromYear,r=t.toYear,n=t.fromMonth,s=t.toMonth,a=t.fromDate,o=t.toDate;return n?a=wr(n):e&&(a=new Date(e,0,1)),s?o=_0(s):r&&(o=new Date(r,11,31)),{fromDate:a?Yi(a):void 0,toDate:o?Yi(o):void 0}}var tk=g.createContext(void 0);function J9(t){var e,r=t.initialProps,n=Y9(),s=Q9(r),a=s.fromDate,o=s.toDate,i=(e=r.captionLayout)!==null&&e!==void 0?e:n.captionLayout;i!=="buttons"&&(!a||!o)&&(i="buttons");var c;(Oh(r)||cu(r)||uu(r))&&(c=r.onSelect);var u=be(be(be({},n),r),{captionLayout:i,classNames:be(be({},n.classNames),r.classNames),components:be({},r.components),formatters:be(be({},n.formatters),r.formatters),fromDate:a,labels:be(be({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:be(be({},n.modifiers),r.modifiers),modifiersClassNames:be(be({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:be(be({},n.styles),r.styles),toDate:o});return l.jsx(tk.Provider,{value:u,children:t.children})}function rt(){var t=g.useContext(tk);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function rk(t){var e=rt(),r=e.locale,n=e.classNames,s=e.styles,a=e.formatters.formatCaption;return l.jsx("div",{className:n.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:r})})}function X9(t){return l.jsx("svg",be({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:l.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function nk(t){var e,r,n=t.onChange,s=t.value,a=t.children,o=t.caption,i=t.className,c=t.style,u=rt(),d=(r=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&r!==void 0?r:X9;return l.jsxs("div",{className:i,style:c,children:[l.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),l.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:n,children:a}),l.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,l.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function Z9(t){var e,r=rt(),n=r.fromDate,s=r.toDate,a=r.styles,o=r.locale,i=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return l.jsx(l.Fragment,{});if(!s)return l.jsx(l.Fragment,{});var f=[];if(P9(n,s))for(var h=wr(n),m=n.getMonth();m<=s.getMonth();m++)f.push(Xm(h,m));else for(var h=wr(new Date),m=0;m<=11;m++)f.push(Xm(h,m));var y=function(v){var w=Number(v.target.value),x=Xm(wr(t.displayMonth),w);t.onChange(x)},p=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:nk;return l.jsx(p,{name:"months","aria-label":d(),className:c.dropdown_month,style:a.dropdown_month,onChange:y,value:t.displayMonth.getMonth(),caption:i(t.displayMonth,{locale:o}),children:f.map(function(v){return l.jsx("option",{value:v.getMonth(),children:i(v,{locale:o})},v.getMonth())})})}function e7(t){var e,r=t.displayMonth,n=rt(),s=n.fromDate,a=n.toDate,o=n.locale,i=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,h=[];if(!s)return l.jsx(l.Fragment,{});if(!a)return l.jsx(l.Fragment,{});for(var m=s.getFullYear(),y=a.getFullYear(),p=m;p<=y;p++)h.push(x_(G2(new Date),p));var v=function(x){var b=x_(wr(r),Number(x.target.value));t.onChange(b)},w=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:nk;return l.jsx(w,{name:"years","aria-label":f(),className:c.dropdown_year,style:i.dropdown_year,onChange:v,value:r.getFullYear(),caption:d(r,{locale:o}),children:h.map(function(x){return l.jsx("option",{value:x.getFullYear(),children:d(x,{locale:o})},x.getFullYear())})})}function t7(t,e){var r=g.useState(t),n=r[0],s=r[1],a=e===void 0?n:e;return[a,s]}function r7(t){var e=t.month,r=t.defaultMonth,n=t.today,s=e||r||n||new Date,a=t.toDate,o=t.fromDate,i=t.numberOfMonths,c=i===void 0?1:i;if(a&&Vc(a,s)<0){var u=-1*(c-1);s=wn(a,u)}return o&&Vc(s,o)<0&&(s=o),wr(s)}function n7(){var t=rt(),e=r7(t),r=t7(e,t.month),n=r[0],s=r[1],a=function(o){var i;if(!t.disableNavigation){var c=wr(o);s(c),(i=t.onMonthChange)===null||i===void 0||i.call(t,c)}};return[n,a]}function s7(t,e){for(var r=e.reverseMonths,n=e.numberOfMonths,s=wr(t),a=wr(wn(s,n)),o=Vc(a,s),i=[],c=0;c<o;c++){var u=wn(s,c);i.push(u)}return r&&(i=i.reverse()),i}function a7(t,e){if(!e.disableNavigation){var r=e.toDate,n=e.pagedNavigation,s=e.numberOfMonths,a=s===void 0?1:s,o=n?a:1,i=wr(t);if(!r)return wn(i,o);var c=Vc(r,t);if(!(c<a))return wn(i,o)}}function o7(t,e){if(!e.disableNavigation){var r=e.fromDate,n=e.pagedNavigation,s=e.numberOfMonths,a=s===void 0?1:s,o=n?a:1,i=wr(t);if(!r)return wn(i,-o);var c=Vc(i,r);if(!(c<=0))return wn(i,-o)}}var sk=g.createContext(void 0);function i7(t){var e=rt(),r=n7(),n=r[0],s=r[1],a=s7(n,e),o=a7(n,e),i=o7(n,e),c=function(f){return a.some(function(h){return C0(f,h)})},u=function(f,h){c(f)||(h&&Z2(f,h)?s(wn(f,1+e.numberOfMonths*-1)):s(f))},d={currentMonth:n,displayMonths:a,goToMonth:s,goToDate:u,previousMonth:i,nextMonth:o,isDateDisplayed:c};return l.jsx(sk.Provider,{value:d,children:t.children})}function du(){var t=g.useContext(sk);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function w_(t){var e,r=rt(),n=r.classNames,s=r.styles,a=r.components,o=du().goToMonth,i=function(d){o(wn(d,t.displayIndex?-t.displayIndex:0))},c=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:rk,u=l.jsx(c,{id:t.id,displayMonth:t.displayMonth});return l.jsxs("div",{className:n.caption_dropdowns,style:s.caption_dropdowns,children:[l.jsx("div",{className:n.vhidden,children:u}),l.jsx(Z9,{onChange:i,displayMonth:t.displayMonth}),l.jsx(e7,{onChange:i,displayMonth:t.displayMonth})]})}function l7(t){return l.jsx("svg",be({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:l.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function c7(t){return l.jsx("svg",be({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:l.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Pf=g.forwardRef(function(t,e){var r=rt(),n=r.classNames,s=r.styles,a=[n.button_reset,n.button];t.className&&a.push(t.className);var o=a.join(" "),i=be(be({},s.button_reset),s.button);return t.style&&Object.assign(i,t.style),l.jsx("button",be({},t,{ref:e,type:"button",className:o,style:i}))});function u7(t){var e,r,n=rt(),s=n.dir,a=n.locale,o=n.classNames,i=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,f=n.components;if(!t.nextMonth&&!t.previousMonth)return l.jsx(l.Fragment,{});var h=u(t.previousMonth,{locale:a}),m=[o.nav_button,o.nav_button_previous].join(" "),y=d(t.nextMonth,{locale:a}),p=[o.nav_button,o.nav_button_next].join(" "),v=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:c7,w=(r=f==null?void 0:f.IconLeft)!==null&&r!==void 0?r:l7;return l.jsxs("div",{className:o.nav,style:i.nav,children:[!t.hidePrevious&&l.jsx(Pf,{name:"previous-month","aria-label":h,className:m,style:i.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:s==="rtl"?l.jsx(v,{className:o.nav_icon,style:i.nav_icon}):l.jsx(w,{className:o.nav_icon,style:i.nav_icon})}),!t.hideNext&&l.jsx(Pf,{name:"next-month","aria-label":y,className:p,style:i.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:s==="rtl"?l.jsx(w,{className:o.nav_icon,style:i.nav_icon}):l.jsx(v,{className:o.nav_icon,style:i.nav_icon})})]})}function b_(t){var e=rt().numberOfMonths,r=du(),n=r.previousMonth,s=r.nextMonth,a=r.goToMonth,o=r.displayMonths,i=o.findIndex(function(y){return C0(t.displayMonth,y)}),c=i===0,u=i===o.length-1,d=e>1&&(c||!u),f=e>1&&(u||!c),h=function(){n&&a(n)},m=function(){s&&a(s)};return l.jsx(u7,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:f,nextMonth:s,previousMonth:n,onPreviousClick:h,onNextClick:m})}function d7(t){var e,r=rt(),n=r.classNames,s=r.disableNavigation,a=r.styles,o=r.captionLayout,i=r.components,c=(e=i==null?void 0:i.CaptionLabel)!==null&&e!==void 0?e:rk,u;return s?u=l.jsx(c,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?u=l.jsx(w_,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?u=l.jsxs(l.Fragment,{children:[l.jsx(w_,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),l.jsx(b_,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=l.jsxs(l.Fragment,{children:[l.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),l.jsx(b_,{displayMonth:t.displayMonth,id:t.id})]}),l.jsx("div",{className:n.caption,style:a.caption,children:u})}function f7(t){var e=rt(),r=e.footer,n=e.styles,s=e.classNames.tfoot;return r?l.jsx("tfoot",{className:s,style:n.tfoot,children:l.jsx("tr",{children:l.jsx("td",{colSpan:8,children:r})})}):l.jsx(l.Fragment,{})}function h7(t,e,r){for(var n=r?Eo(new Date):qn(new Date,{locale:t,weekStartsOn:e}),s=[],a=0;a<7;a++){var o=nr(n,a);s.push(o)}return s}function m7(){var t=rt(),e=t.classNames,r=t.styles,n=t.showWeekNumber,s=t.locale,a=t.weekStartsOn,o=t.ISOWeek,i=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=h7(s,a,o);return l.jsxs("tr",{style:r.head_row,className:e.head_row,children:[n&&l.jsx("td",{style:r.head_cell,className:e.head_cell}),u.map(function(d,f){return l.jsx("th",{scope:"col",className:e.head_cell,style:r.head_cell,"aria-label":c(d,{locale:s}),children:i(d,{locale:s})},f)})]})}function p7(){var t,e=rt(),r=e.classNames,n=e.styles,s=e.components,a=(t=s==null?void 0:s.HeadRow)!==null&&t!==void 0?t:m7;return l.jsx("thead",{style:n.head,className:r.head,children:l.jsx(a,{})})}function g7(t){var e=rt(),r=e.locale,n=e.formatters.formatDay;return l.jsx(l.Fragment,{children:n(t.date,{locale:r})})}var E0=g.createContext(void 0);function v7(t){if(!cu(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return l.jsx(E0.Provider,{value:e,children:t.children})}return l.jsx(y7,{initialProps:t.initialProps,children:t.children})}function y7(t){var e=t.initialProps,r=t.children,n=e.selected,s=e.min,a=e.max,o=function(u,d,f){var h,m;(h=e.onDayClick)===null||h===void 0||h.call(e,u,d,f);var y=!!(d.selected&&s&&(n==null?void 0:n.length)===s);if(!y){var p=!!(!d.selected&&a&&(n==null?void 0:n.length)===a);if(!p){var v=n?ek([],n):[];if(d.selected){var w=v.findIndex(function(x){return gr(u,x)});v.splice(w,1)}else v.push(u);(m=e.onSelect)===null||m===void 0||m.call(e,v,u,d,f)}}},i={disabled:[]};n&&i.disabled.push(function(u){var d=a&&n.length>a-1,f=n.some(function(h){return gr(h,u)});return!!(d&&!f)});var c={selected:n,onDayClick:o,modifiers:i};return l.jsx(E0.Provider,{value:c,children:r})}function N0(){var t=g.useContext(E0);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function x7(t,e){var r=e||{},n=r.from,s=r.to;return n&&s?gr(s,t)&&gr(n,t)?void 0:gr(s,t)?{from:s,to:void 0}:gr(n,t)?void 0:Kg(n,t)?{from:t,to:s}:{from:n,to:t}:s?Kg(t,s)?{from:s,to:t}:{from:t,to:s}:n?Z2(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var A0=g.createContext(void 0);function w7(t){if(!uu(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return l.jsx(A0.Provider,{value:e,children:t.children})}return l.jsx(b7,{initialProps:t.initialProps,children:t.children})}function b7(t){var e=t.initialProps,r=t.children,n=e.selected,s=n||{},a=s.from,o=s.to,i=e.min,c=e.max,u=function(m,y,p){var v,w;(v=e.onDayClick)===null||v===void 0||v.call(e,m,y,p);var x=x7(m,n);(w=e.onSelect)===null||w===void 0||w.call(e,x,m,y,p)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(d.range_start=[a],o?(d.range_end=[o],gr(a,o)||(d.range_middle=[{after:a,before:o}])):d.range_end=[a]):o&&(d.range_start=[o],d.range_end=[o]),i&&(a&&!o&&d.disabled.push({after:Jm(a,i-1),before:nr(a,i-1)}),a&&o&&d.disabled.push({after:a,before:nr(a,i-1)}),!a&&o&&d.disabled.push({after:Jm(o,i-1),before:nr(o,i-1)})),c){if(a&&!o&&(d.disabled.push({before:nr(a,-c+1)}),d.disabled.push({after:nr(a,c-1)})),a&&o){var f=Vn(o,a)+1,h=c-f;d.disabled.push({before:Jm(a,h)}),d.disabled.push({after:nr(o,h)})}!a&&o&&(d.disabled.push({before:nr(o,-c+1)}),d.disabled.push({after:nr(o,c-1)}))}return l.jsx(A0.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function j0(){var t=g.useContext(A0);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function kd(t){return Array.isArray(t)?ek([],t):t!==void 0?[t]:[]}function _7(t){var e={};return Object.entries(t).forEach(function(r){var n=r[0],s=r[1];e[n]=kd(s)}),e}var bn;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(bn||(bn={}));var S7=bn.Selected,ss=bn.Disabled,C7=bn.Hidden,E7=bn.Today,Zm=bn.RangeEnd,ep=bn.RangeMiddle,tp=bn.RangeStart,N7=bn.Outside;function A7(t,e,r){var n,s=(n={},n[S7]=kd(t.selected),n[ss]=kd(t.disabled),n[C7]=kd(t.hidden),n[E7]=[t.today],n[Zm]=[],n[ep]=[],n[tp]=[],n[N7]=[],n);return t.fromDate&&s[ss].push({before:t.fromDate}),t.toDate&&s[ss].push({after:t.toDate}),cu(t)?s[ss]=s[ss].concat(e.modifiers[ss]):uu(t)&&(s[ss]=s[ss].concat(r.modifiers[ss]),s[tp]=r.modifiers[tp],s[ep]=r.modifiers[ep],s[Zm]=r.modifiers[Zm]),s}var ak=g.createContext(void 0);function j7(t){var e=rt(),r=N0(),n=j0(),s=A7(e,r,n),a=_7(e.modifiers),o=be(be({},s),a);return l.jsx(ak.Provider,{value:o,children:t.children})}function ok(){var t=g.useContext(ak);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function k7(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function T7(t){return!!(t&&typeof t=="object"&&"from"in t)}function P7(t){return!!(t&&typeof t=="object"&&"after"in t)}function R7(t){return!!(t&&typeof t=="object"&&"before"in t)}function I7(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function O7(t,e){var r,n=e.from,s=e.to;if(n&&s){var a=Vn(s,n)<0;a&&(r=[s,n],n=r[0],s=r[1]);var o=Vn(t,n)>=0&&Vn(s,t)>=0;return o}return s?gr(s,t):n?gr(n,t):!1}function L7(t){return b0(t)}function $7(t){return Array.isArray(t)&&t.every(b0)}function M7(t,e){return e.some(function(r){if(typeof r=="boolean")return r;if(L7(r))return gr(t,r);if($7(r))return r.includes(t);if(T7(r))return O7(t,r);if(I7(r))return r.dayOfWeek.includes(t.getDay());if(k7(r)){var n=Vn(r.before,t),s=Vn(r.after,t),a=n>0,o=s<0,i=Kg(r.before,r.after);return i?o&&a:a||o}return P7(r)?Vn(t,r.after)>0:R7(r)?Vn(r.before,t)>0:typeof r=="function"?r(t):!1})}function k0(t,e,r){var n=Object.keys(e).reduce(function(a,o){var i=e[o];return M7(t,i)&&a.push(o),a},[]),s={};return n.forEach(function(a){return s[a]=!0}),r&&!C0(t,r)&&(s.outside=!0),s}function D7(t,e){for(var r=wr(t[0]),n=_0(t[t.length-1]),s,a,o=r;o<=n;){var i=k0(o,e),c=!i.disabled&&!i.hidden;if(!c){o=nr(o,1);continue}if(i.selected)return o;i.today&&!a&&(a=o),s||(s=o),o=nr(o,1)}return a||s}var F7=365;function ik(t,e){var r=e.moveBy,n=e.direction,s=e.context,a=e.modifiers,o=e.retry,i=o===void 0?{count:0,lastFocused:t}:o,c=s.weekStartsOn,u=s.fromDate,d=s.toDate,f=s.locale,h={day:nr,week:qg,month:wn,year:A8,startOfWeek:function(v){return s.ISOWeek?Eo(v):qn(v,{locale:f,weekStartsOn:c})},endOfWeek:function(v){return s.ISOWeek?q2(v):S0(v,{locale:f,weekStartsOn:c})}},m=h[r](t,n==="after"?1:-1);n==="before"&&u?m=j8([u,m]):n==="after"&&d&&(m=k8([d,m]));var y=!0;if(a){var p=k0(m,a);y=!p.disabled&&!p.hidden}return y?m:i.count>F7?i.lastFocused:ik(m,{moveBy:r,direction:n,context:s,modifiers:a,retry:be(be({},i),{count:i.count+1})})}var lk=g.createContext(void 0);function U7(t){var e=du(),r=ok(),n=g.useState(),s=n[0],a=n[1],o=g.useState(),i=o[0],c=o[1],u=D7(e.displayMonths,r),d=s??(i&&e.isDateDisplayed(i))?i:u,f=function(){c(s),a(void 0)},h=function(v){a(v)},m=rt(),y=function(v,w){if(s){var x=ik(s,{moveBy:v,direction:w,context:m,modifiers:r});gr(s,x)||(e.goToDate(x,s),h(x))}},p={focusedDay:s,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return y("day","after")},focusDayBefore:function(){return y("day","before")},focusWeekAfter:function(){return y("week","after")},focusWeekBefore:function(){return y("week","before")},focusMonthBefore:function(){return y("month","before")},focusMonthAfter:function(){return y("month","after")},focusYearBefore:function(){return y("year","before")},focusYearAfter:function(){return y("year","after")},focusStartOfWeek:function(){return y("startOfWeek","before")},focusEndOfWeek:function(){return y("endOfWeek","after")}};return l.jsx(lk.Provider,{value:p,children:t.children})}function T0(){var t=g.useContext(lk);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function V7(t,e){var r=ok(),n=k0(t,r,e);return n}var P0=g.createContext(void 0);function z7(t){if(!Oh(t.initialProps)){var e={selected:void 0};return l.jsx(P0.Provider,{value:e,children:t.children})}return l.jsx(B7,{initialProps:t.initialProps,children:t.children})}function B7(t){var e=t.initialProps,r=t.children,n=function(a,o,i){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,a,o,i),o.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,a,o,i);return}(d=e.onSelect)===null||d===void 0||d.call(e,a,a,o,i)},s={selected:e.selected,onDayClick:n};return l.jsx(P0.Provider,{value:s,children:r})}function ck(){var t=g.useContext(P0);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function W7(t,e){var r=rt(),n=ck(),s=N0(),a=j0(),o=T0(),i=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,h=o.focus,m=o.focusMonthBefore,y=o.focusMonthAfter,p=o.focusYearBefore,v=o.focusYearAfter,w=o.focusStartOfWeek,x=o.focusEndOfWeek,b=function(I){var k,$,Y,he;Oh(r)?(k=n.onDayClick)===null||k===void 0||k.call(n,t,e,I):cu(r)?($=s.onDayClick)===null||$===void 0||$.call(s,t,e,I):uu(r)?(Y=a.onDayClick)===null||Y===void 0||Y.call(a,t,e,I):(he=r.onDayClick)===null||he===void 0||he.call(r,t,e,I)},_=function(I){var k;h(t),(k=r.onDayFocus)===null||k===void 0||k.call(r,t,e,I)},C=function(I){var k;f(),(k=r.onDayBlur)===null||k===void 0||k.call(r,t,e,I)},E=function(I){var k;(k=r.onDayMouseEnter)===null||k===void 0||k.call(r,t,e,I)},N=function(I){var k;(k=r.onDayMouseLeave)===null||k===void 0||k.call(r,t,e,I)},A=function(I){var k;(k=r.onDayPointerEnter)===null||k===void 0||k.call(r,t,e,I)},j=function(I){var k;(k=r.onDayPointerLeave)===null||k===void 0||k.call(r,t,e,I)},O=function(I){var k;(k=r.onDayTouchCancel)===null||k===void 0||k.call(r,t,e,I)},F=function(I){var k;(k=r.onDayTouchEnd)===null||k===void 0||k.call(r,t,e,I)},P=function(I){var k;(k=r.onDayTouchMove)===null||k===void 0||k.call(r,t,e,I)},V=function(I){var k;(k=r.onDayTouchStart)===null||k===void 0||k.call(r,t,e,I)},R=function(I){var k;(k=r.onDayKeyUp)===null||k===void 0||k.call(r,t,e,I)},H=function(I){var k;switch(I.key){case"ArrowLeft":I.preventDefault(),I.stopPropagation(),r.dir==="rtl"?i():c();break;case"ArrowRight":I.preventDefault(),I.stopPropagation(),r.dir==="rtl"?c():i();break;case"ArrowDown":I.preventDefault(),I.stopPropagation(),u();break;case"ArrowUp":I.preventDefault(),I.stopPropagation(),d();break;case"PageUp":I.preventDefault(),I.stopPropagation(),I.shiftKey?p():m();break;case"PageDown":I.preventDefault(),I.stopPropagation(),I.shiftKey?v():y();break;case"Home":I.preventDefault(),I.stopPropagation(),w();break;case"End":I.preventDefault(),I.stopPropagation(),x();break}(k=r.onDayKeyDown)===null||k===void 0||k.call(r,t,e,I)},W={onClick:b,onFocus:_,onBlur:C,onKeyDown:H,onKeyUp:R,onMouseEnter:E,onMouseLeave:N,onPointerEnter:A,onPointerLeave:j,onTouchCancel:O,onTouchEnd:F,onTouchMove:P,onTouchStart:V};return W}function H7(){var t=rt(),e=ck(),r=N0(),n=j0(),s=Oh(t)?e.selected:cu(t)?r.selected:uu(t)?n.selected:void 0;return s}function G7(t){return Object.values(bn).includes(t)}function q7(t,e){var r=[t.classNames.day];return Object.keys(e).forEach(function(n){var s=t.modifiersClassNames[n];if(s)r.push(s);else if(G7(n)){var a=t.classNames["day_".concat(n)];a&&r.push(a)}}),r}function K7(t,e){var r=be({},t.styles.day);return Object.keys(e).forEach(function(n){var s;r=be(be({},r),(s=t.modifiersStyles)===null||s===void 0?void 0:s[n])}),r}function Y7(t,e,r){var n,s,a,o=rt(),i=T0(),c=V7(t,e),u=W7(t,c),d=H7(),f=!!(o.onDayClick||o.mode!=="default");g.useEffect(function(){var E;c.outside||i.focusedDay&&f&&gr(i.focusedDay,t)&&((E=r.current)===null||E===void 0||E.focus())},[i.focusedDay,t,r,f,c.outside]);var h=q7(o,c).join(" "),m=K7(o,c),y=!!(c.outside&&!o.showOutsideDays||c.hidden),p=(a=(s=o.components)===null||s===void 0?void 0:s.DayContent)!==null&&a!==void 0?a:g7,v=l.jsx(p,{date:t,displayMonth:e,activeModifiers:c}),w={style:m,className:h,children:v,role:"gridcell"},x=i.focusTarget&&gr(i.focusTarget,t)&&!c.outside,b=i.focusedDay&&gr(i.focusedDay,t),_=be(be(be({},w),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=b||x?0:-1,n)),u),C={isButton:f,isHidden:y,activeModifiers:c,selectedDays:d,buttonProps:_,divProps:w};return C}function Q7(t){var e=g.useRef(null),r=Y7(t.date,t.displayMonth,e);return r.isHidden?l.jsx("div",{role:"gridcell"}):r.isButton?l.jsx(Pf,be({name:"day",ref:e},r.buttonProps)):l.jsx("div",be({},r.divProps))}function J7(t){var e=t.number,r=t.dates,n=rt(),s=n.onWeekNumberClick,a=n.styles,o=n.classNames,i=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(e),{locale:i});if(!s)return l.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:d});var f=c(Number(e),{locale:i}),h=function(m){s(e,r,m)};return l.jsx(Pf,{name:"week-number","aria-label":f,className:o.weeknumber,style:a.weeknumber,onClick:h,children:d})}function X7(t){var e,r,n=rt(),s=n.styles,a=n.classNames,o=n.showWeekNumber,i=n.components,c=(e=i==null?void 0:i.Day)!==null&&e!==void 0?e:Q7,u=(r=i==null?void 0:i.WeekNumber)!==null&&r!==void 0?r:J7,d;return o&&(d=l.jsx("td",{className:a.cell,style:s.cell,children:l.jsx(u,{number:t.weekNumber,dates:t.dates})})),l.jsxs("tr",{className:a.row,style:s.row,children:[d,t.dates.map(function(f){return l.jsx("td",{className:a.cell,style:s.cell,role:"presentation",children:l.jsx(c,{displayMonth:t.displayMonth,date:f})},j9(f))})]})}function __(t,e,r){for(var n=r!=null&&r.ISOWeek?q2(e):S0(e,r),s=r!=null&&r.ISOWeek?Eo(t):qn(t,r),a=Vn(n,s),o=[],i=0;i<=a;i++)o.push(nr(s,i));var c=o.reduce(function(u,d){var f=r!=null&&r.ISOWeek?Y2(d):J2(d,r),h=u.find(function(m){return m.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function Z7(t,e){var r=__(wr(t),_0(t),e);if(e!=null&&e.useFixedWeeks){var n=T9(t,e);if(n<6){var s=r[r.length-1],a=s.dates[s.dates.length-1],o=qg(a,6-n),i=__(qg(a,1),o,e);r.push.apply(r,i)}}return r}function eV(t){var e,r,n,s=rt(),a=s.locale,o=s.classNames,i=s.styles,c=s.hideHead,u=s.fixedWeeks,d=s.components,f=s.weekStartsOn,h=s.firstWeekContainsDate,m=s.ISOWeek,y=Z7(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:a,weekStartsOn:f,firstWeekContainsDate:h}),p=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:p7,v=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:X7,w=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:f7;return l.jsxs("table",{id:t.id,className:o.table,style:i.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&l.jsx(p,{}),l.jsx("tbody",{className:o.tbody,style:i.tbody,children:y.map(function(x){return l.jsx(v,{displayMonth:t.displayMonth,dates:x.dates,weekNumber:x.weekNumber},x.weekNumber)})}),l.jsx(w,{displayMonth:t.displayMonth})]})}function tV(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var rV=tV()?g.useLayoutEffect:g.useEffect,rp=!1,nV=0;function S_(){return"react-day-picker-".concat(++nV)}function sV(t){var e,r=t??(rp?S_():null),n=g.useState(r),s=n[0],a=n[1];return rV(function(){s===null&&a(S_())},[]),g.useEffect(function(){rp===!1&&(rp=!0)},[]),(e=t??s)!==null&&e!==void 0?e:void 0}function aV(t){var e,r,n=rt(),s=n.dir,a=n.classNames,o=n.styles,i=n.components,c=du().displayMonths,u=sV(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,f=[a.month],h=o.month,m=t.displayIndex===0,y=t.displayIndex===c.length-1,p=!m&&!y;s==="rtl"&&(e=[m,y],y=e[0],m=e[1]),m&&(f.push(a.caption_start),h=be(be({},h),o.caption_start)),y&&(f.push(a.caption_end),h=be(be({},h),o.caption_end)),p&&(f.push(a.caption_between),h=be(be({},h),o.caption_between));var v=(r=i==null?void 0:i.Caption)!==null&&r!==void 0?r:d7;return l.jsxs("div",{className:f.join(" "),style:h,children:[l.jsx(v,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),l.jsx(eV,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function oV(t){var e=rt(),r=e.classNames,n=e.styles;return l.jsx("div",{className:r.months,style:n.months,children:t.children})}function iV(t){var e,r,n=t.initialProps,s=rt(),a=T0(),o=du(),i=g.useState(!1),c=i[0],u=i[1];g.useEffect(function(){s.initialFocus&&a.focusTarget&&(c||(a.focus(a.focusTarget),u(!0)))},[s.initialFocus,c,a.focus,a.focusTarget,a]);var d=[s.classNames.root,s.className];s.numberOfMonths>1&&d.push(s.classNames.multiple_months),s.showWeekNumber&&d.push(s.classNames.with_weeknumber);var f=be(be({},s.styles.root),s.style),h=Object.keys(n).filter(function(y){return y.startsWith("data-")}).reduce(function(y,p){var v;return be(be({},y),(v={},v[p]=n[p],v))},{}),m=(r=(e=n.components)===null||e===void 0?void 0:e.Months)!==null&&r!==void 0?r:oV;return l.jsx("div",be({className:d.join(" "),style:f,dir:s.dir,id:s.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:l.jsx(m,{children:o.displayMonths.map(function(y,p){return l.jsx(aV,{displayIndex:p,displayMonth:y},p)})})}))}function lV(t){var e=t.children,r=R9(t,["children"]);return l.jsx(J9,{initialProps:r,children:l.jsx(i7,{children:l.jsx(z7,{initialProps:r,children:l.jsx(v7,{initialProps:r,children:l.jsx(w7,{initialProps:r,children:l.jsx(j7,{children:l.jsx(U7,{children:e})})})})})})})}function cV(t){return l.jsx(lV,be({},t,{children:l.jsx(iV,{initialProps:t})}))}function R0({className:t,classNames:e,showOutsideDays:r=!0,...n}){return l.jsx(cV,{showOutsideDays:r,className:S("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:S(Oc({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:S(Oc({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...s})=>l.jsx(sL,{className:"h-4 w-4"}),IconRight:({...s})=>l.jsx(aL,{className:"h-4 w-4"})},...n})}R0.displayName="Calendar";var Lh="Popover",[uk,fW]=br(Lh,[sl]),fu=sl(),[uV,Ma]=uk(Lh),dk=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:o=!1}=t,i=fu(e),c=g.useRef(null),[u,d]=g.useState(!1),[f,h]=Ns({prop:n,defaultProp:s??!1,onChange:a,caller:Lh});return l.jsx(DC,{...i,children:l.jsx(uV,{scope:e,contentId:vs(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:g.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:g.useCallback(()=>d(!0),[]),onCustomAnchorRemove:g.useCallback(()=>d(!1),[]),modal:o,children:r})})};dk.displayName=Lh;var fk="PopoverAnchor",dV=g.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Ma(fk,r),a=fu(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:i}=s;return g.useEffect(()=>(o(),()=>i()),[o,i]),l.jsx(th,{...a,...n,ref:e})});dV.displayName=fk;var hk="PopoverTrigger",mk=g.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Ma(hk,r),a=fu(r),o=Le(e,s.triggerRef),i=l.jsx(ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":xk(s.open),...n,ref:o,onClick:ce(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?i:l.jsx(th,{asChild:!0,...a,children:i})});mk.displayName=hk;var I0="PopoverPortal",[fV,hV]=uk(I0,{forceMount:void 0}),pk=t=>{const{__scopePopover:e,forceMount:r,children:n,container:s}=t,a=Ma(I0,e);return l.jsx(fV,{scope:e,forceMount:r,children:l.jsx(_r,{present:r||a.open,children:l.jsx(Qc,{asChild:!0,container:s,children:n})})})};pk.displayName=I0;var Qi="PopoverContent",gk=g.forwardRef((t,e)=>{const r=hV(Qi,t.__scopePopover),{forceMount:n=r.forceMount,...s}=t,a=Ma(Qi,t.__scopePopover);return l.jsx(_r,{present:n||a.open,children:a.modal?l.jsx(pV,{...s,ref:e}):l.jsx(gV,{...s,ref:e})})});gk.displayName=Qi;var mV=wo("PopoverContent.RemoveScroll"),pV=g.forwardRef((t,e)=>{const r=Ma(Qi,t.__scopePopover),n=g.useRef(null),s=Le(e,n),a=g.useRef(!1);return g.useEffect(()=>{const o=n.current;if(o)return Iy(o)},[]),l.jsx(wh,{as:mV,allowPinchZoom:!0,children:l.jsx(vk,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ce(t.onCloseAutoFocus,o=>{var i;o.preventDefault(),a.current||(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:ce(t.onPointerDownOutside,o=>{const i=o.detail.originalEvent,c=i.button===0&&i.ctrlKey===!0,u=i.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ce(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),gV=g.forwardRef((t,e)=>{const r=Ma(Qi,t.__scopePopover),n=g.useRef(!1),s=g.useRef(!1);return l.jsx(vk,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,i;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(n.current||(i=r.triggerRef.current)==null||i.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),vk=g.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=t,h=Ma(Qi,r),m=fu(r);return Ry(),l.jsx(yh,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:l.jsx(tl,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:l.jsx(uy,{"data-state":xk(h.open),role:"dialog",id:h.contentId,...m,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),yk="PopoverClose",vV=g.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Ma(yk,r);return l.jsx(ge.button,{type:"button",...n,ref:e,onClick:ce(t.onClick,()=>s.onOpenChange(!1))})});vV.displayName=yk;var yV="PopoverArrow",xV=g.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=fu(r);return l.jsx(dy,{...s,...n,ref:e})});xV.displayName=yV;function xk(t){return t?"open":"closed"}var wV=dk,bV=mk,_V=pk,wk=gk;const bk=wV,_k=bV,O0=g.forwardRef(({className:t,align:e="center",sideOffset:r=4,...n},s)=>l.jsx(_V,{children:l.jsx(wk,{ref:s,align:e,sideOffset:r,className:S("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));O0.displayName=wk.displayName;const SV=B2({pacienteName:aa().min(2,"Nome deve ter pelo menos 2 caracteres"),celular:aa().min(10,"Celular deve ter pelo menos 10 dgitos"),instagram:aa().optional(),cidade:W2(["Canarana","Souto Soares","Joo Dourado","Amrica Dourada"]),dataAgendamento:z2({required_error:"Data de agendamento  obrigatria"}),tipoExame:aa().min(1,"Tipo de exame  obrigatrio"),observacoes:aa().optional()}),CV=({isOpen:t,onClose:e,onSubmit:r,isDarkMode:n})=>{const{register:s,handleSubmit:a,setValue:o,watch:i,formState:{errors:c},reset:u}=$2({resolver:D2(SV),defaultValues:{tipoExame:"Exame de Vista"}}),d=i("dataAgendamento"),f=m=>{r({name:m.pacienteName,phone:m.celular,instagram:m.instagram,city:m.cidade,appointmentDate:m.dataAgendamento.toISOString().split("T")[0]}),u(),e()},h=m=>{const y=m.replace(/\D/g,"");return y.length<=11?y.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):m};return l.jsx(Is,{open:t,onOpenChange:e,children:l.jsxs(Qn,{className:S("sm:max-w-md"),style:{backgroundColor:n?"#1a1a1a":"#ffffff",borderColor:n?"#404040":"#e5e7eb"},children:[l.jsx(Os,{children:l.jsx(Jn,{className:S("text-xl font-semibold",n?"text-white":"text-gray-900"),children:"Novo Exame"})}),l.jsxs("form",{onSubmit:a(f),className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{htmlFor:"pacienteName",className:S(n?"text-gray-200":"text-gray-700"),children:"Nome do Paciente"}),l.jsx(Ke,{id:"pacienteName",...s("pacienteName"),style:{backgroundColor:n?"#0f0f0f":"#ffffff",borderColor:n?"#404040":"#d1d5db",color:n?"#ffffff":"#111827"}}),c.pacienteName&&l.jsx("p",{className:"text-sm",style:{color:"#b5103c"},children:c.pacienteName.message})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{htmlFor:"celular",className:S(n?"text-gray-200":"text-gray-700"),children:"Celular"}),l.jsx(Ke,{id:"celular",...s("celular"),onChange:m=>{const y=h(m.target.value);m.target.value=y,s("celular").onChange(m)},placeholder:"(77) 99999-9999",style:{backgroundColor:n?"#0f0f0f":"#ffffff",borderColor:n?"#404040":"#d1d5db",color:n?"#ffffff":"#111827"}}),c.celular&&l.jsx("p",{className:"text-sm",style:{color:"#b5103c"},children:c.celular.message})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{htmlFor:"instagram",className:S(n?"text-gray-200":"text-gray-700"),children:"Instagram (Opcional)"}),l.jsx(Ke,{id:"instagram",...s("instagram"),placeholder:"@nomedeusuario",style:{backgroundColor:n?"#0f0f0f":"#ffffff",borderColor:n?"#404040":"#d1d5db",color:n?"#ffffff":"#111827"}}),c.instagram&&l.jsx("p",{className:"text-sm",style:{color:"#b5103c"},children:c.instagram.message})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{htmlFor:"cidade",className:S(n?"text-gray-200":"text-gray-700"),children:"Cidade"}),l.jsxs("select",{...s("cidade"),className:"w-full rounded-md border px-3 py-2 text-sm",style:{backgroundColor:n?"#0f0f0f":"#ffffff",borderColor:n?"#404040":"#d1d5db",color:n?"#ffffff":"#111827"},children:[l.jsx("option",{value:"",children:"Selecione uma cidade"}),l.jsx("option",{value:"Canarana",children:"Canarana"}),l.jsx("option",{value:"Souto Soares",children:"Souto Soares"}),l.jsx("option",{value:"Joo Dourado",children:"Joo Dourado"}),l.jsx("option",{value:"Amrica Dourada",children:"Amrica Dourada"})]}),c.cidade&&l.jsx("p",{className:"text-sm",style:{color:"#b5103c"},children:c.cidade.message})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{className:S(n?"text-gray-200":"text-gray-700"),children:"Data de Agendamento"}),l.jsxs(bk,{children:[l.jsx(_k,{asChild:!0,children:l.jsxs(q,{variant:"outline",className:S("w-full justify-start text-left font-normal",!d&&"text-muted-foreground"),style:{backgroundColor:n?"#0f0f0f":"#ffffff",borderColor:n?"#404040":"#d1d5db",color:n?"#ffffff":"#111827"},children:[l.jsx(Po,{className:"mr-2 h-4 w-4"}),d?Ls(d,"dd/MM/yyyy"):"Selecione uma data"]})}),l.jsx(O0,{className:"w-auto p-0",align:"start",children:l.jsx(R0,{mode:"single",selected:d,onSelect:m=>o("dataAgendamento",m),initialFocus:!0,className:"p-3 pointer-events-auto"})})]}),c.dataAgendamento&&l.jsx("p",{className:"text-sm",style:{color:"#b5103c"},children:c.dataAgendamento.message})]}),l.jsx("input",{type:"hidden",...s("tipoExame")}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{htmlFor:"observacoes",className:S(n?"text-gray-200":"text-gray-700"),children:"Observaes (Opcional)"}),l.jsx("textarea",{id:"observacoes",...s("observacoes"),rows:3,className:"w-full rounded-md border px-3 py-2 text-sm resize-none",style:{backgroundColor:n?"#0f0f0f":"#ffffff",borderColor:n?"#404040":"#d1d5db",color:n?"#ffffff":"#111827"}})]}),l.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[l.jsx(q,{type:"button",variant:"outline",onClick:e,style:{backgroundColor:"transparent",borderColor:n?"#404040":"#d1d5db",color:n?"#ffffff":"#374151"},children:"Cancelar"}),l.jsx(q,{type:"submit",style:{backgroundColor:"#b5103c",color:"#ffffff"},className:"hover:opacity-90",children:"Salvar Exame"})]})]})]})})},EV=B2({pacienteName:aa().min(2,"Nome deve ter pelo menos 2 caracteres"),celular:aa().min(10,"Celular deve ter pelo menos 10 dgitos"),instagram:aa().optional(),cidade:W2(["Canarana","Souto Soares","Joo Dourado","Amrica Dourada"]),dataAgendamento:z2({required_error:"Data de agendamento  obrigatria"})}),NV=({isOpen:t,onClose:e,onSubmit:r,exam:n,isDarkMode:s})=>{const{register:a,handleSubmit:o,setValue:i,watch:c,formState:{errors:u},reset:d}=$2({resolver:D2(EV)}),f=c("dataAgendamento");g.useEffect(()=>{n&&(i("pacienteName",n.name),i("celular",n.phone),i("instagram",n.instagram),i("cidade",n.city),i("dataAgendamento",new Date(n.appointmentDate)))},[n,i]);const h=y=>{n&&(r(n.id,{name:y.pacienteName,phone:y.celular,instagram:y.instagram,city:y.cidade,appointmentDate:y.dataAgendamento.toISOString().split("T")[0]}),e())},m=y=>{const p=y.replace(/\D/g,"");return p.length<=11?p.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):y};return n?l.jsx(Is,{open:t,onOpenChange:e,children:l.jsxs(Qn,{className:S("sm:max-w-md"),style:{backgroundColor:s?"#1a1a1a":"#ffffff",borderColor:s?"#404040":"#e5e7eb"},children:[l.jsx(Os,{children:l.jsx(Jn,{className:S("text-xl font-semibold",s?"text-white":"text-gray-900"),children:"Editar Exame"})}),l.jsxs("form",{onSubmit:o(h),className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{htmlFor:"pacienteName",className:S(s?"text-gray-200":"text-gray-700"),children:"Nome do Paciente"}),l.jsx(Ke,{id:"pacienteName",...a("pacienteName"),style:{backgroundColor:s?"#0f0f0f":"#ffffff",borderColor:s?"#404040":"#d1d5db",color:s?"#ffffff":"#111827"}}),u.pacienteName&&l.jsx("p",{className:"text-sm",style:{color:"#b5103c"},children:u.pacienteName.message})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{htmlFor:"celular",className:S(s?"text-gray-200":"text-gray-700"),children:"Celular"}),l.jsx(Ke,{id:"celular",...a("celular"),onChange:y=>{const p=m(y.target.value);y.target.value=p,a("celular").onChange(y)},placeholder:"(77) 99999-9999",style:{backgroundColor:s?"#0f0f0f":"#ffffff",borderColor:s?"#404040":"#d1d5db",color:s?"#ffffff":"#111827"}}),u.celular&&l.jsx("p",{className:"text-sm",style:{color:"#b5103c"},children:u.celular.message})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{htmlFor:"instagram",className:S(s?"text-gray-200":"text-gray-700"),children:"Instagram (Opcional)"}),l.jsx(Ke,{id:"instagram",...a("instagram"),placeholder:"@nomedeusuario",style:{backgroundColor:s?"#0f0f0f":"#ffffff",borderColor:s?"#404040":"#d1d5db",color:s?"#ffffff":"#111827"}}),u.instagram&&l.jsx("p",{className:"text-sm",style:{color:"#b5103c"},children:u.instagram.message})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{htmlFor:"cidade",className:S(s?"text-gray-200":"text-gray-700"),children:"Cidade"}),l.jsxs("select",{...a("cidade"),className:"w-full rounded-md border px-3 py-2 text-sm",style:{backgroundColor:s?"#0f0f0f":"#ffffff",borderColor:s?"#404040":"#d1d5db",color:s?"#ffffff":"#111827"},children:[l.jsx("option",{value:"Canarana",children:"Canarana"}),l.jsx("option",{value:"Souto Soares",children:"Souto Soares"}),l.jsx("option",{value:"Joo Dourado",children:"Joo Dourado"}),l.jsx("option",{value:"Amrica Dourada",children:"Amrica Dourada"})]}),u.cidade&&l.jsx("p",{className:"text-sm",style:{color:"#b5103c"},children:u.cidade.message})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{className:S(s?"text-gray-200":"text-gray-700"),children:"Data de Agendamento"}),l.jsxs(bk,{children:[l.jsx(_k,{asChild:!0,children:l.jsxs(q,{variant:"outline",className:S("w-full justify-start text-left font-normal",!f&&"text-muted-foreground"),style:{backgroundColor:s?"#0f0f0f":"#ffffff",borderColor:s?"#404040":"#d1d5db",color:s?"#ffffff":"#111827"},children:[l.jsx(Po,{className:"mr-2 h-4 w-4"}),f?Ls(f,"dd/MM/yyyy"):"Selecione uma data"]})}),l.jsx(O0,{className:"w-auto p-0",align:"start",children:l.jsx(R0,{mode:"single",selected:f,onSelect:y=>i("dataAgendamento",y),initialFocus:!0,className:"p-3 pointer-events-auto"})})]}),u.dataAgendamento&&l.jsx("p",{className:"text-sm",style:{color:"#b5103c"},children:u.dataAgendamento.message})]}),l.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[l.jsx(q,{type:"button",variant:"outline",onClick:e,style:{backgroundColor:"transparent",borderColor:s?"#404040":"#d1d5db",color:s?"#ffffff":"#374151"},children:"Cancelar"}),l.jsx(q,{type:"submit",style:{backgroundColor:"#b5103c",color:"#ffffff"},className:"hover:opacity-90",children:"Salvar Alteraes"})]})]})]})}):null},AV=({isDarkMode:t,searchTerm:e,setSearchTerm:r,selectedCity:n,setSelectedCity:s,showThisWeek:a,setShowThisWeek:o,isMultiSelectMode:i,toggleMultiSelect:c,selectedExams:u,deleteSelectedExams:d,handleAddExam:f,cities:h})=>l.jsxs("div",{className:"p-4 border-b",style:{borderColor:t?"#404040":"#e5e7eb"},children:[l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[l.jsxs(q,{onClick:()=>o(!a),variant:a?"default":"outline",className:"flex items-center gap-2",style:{backgroundColor:a?"#b5103c":"transparent",borderColor:a?"#b5103c":t?"#404040":"#d1d5db",color:a||t?"#ffffff":"#374151"},children:[l.jsx(rL,{size:16,className:"text-[#b5103c]"}),a?"Mostrar Todos":"Exames da Semana"]}),l.jsxs(q,{onClick:c,variant:i?"default":"outline",className:"flex items-center gap-2",style:{backgroundColor:i?"#b5103c":"transparent",borderColor:i?"#b5103c":t?"#404040":"#d1d5db",color:i||t?"#ffffff":"#374151"},children:[l.jsx(CL,{size:16,className:"text-[#b5103c]"}),i?"Cancelar Seleo":"Seleo Mltipla"]}),i&&u.length>0&&l.jsxs(q,{onClick:d,variant:"outline",className:"flex items-center gap-2 text-red-500 border-red-500 hover:bg-red-50",children:[l.jsx(Zc,{size:16}),"Excluir (",u.length,")"]}),l.jsxs(q,{onClick:f,className:"flex items-center gap-2 bg-[#b5103c] hover:bg-[#9d0e35] text-white",children:[l.jsx(Xc,{size:16}),"Adicionar Exame"]})]}),l.jsxs("div",{className:"md:hidden space-y-3",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("div",{className:"flex-1",children:l.jsx(Ke,{placeholder:"Buscar por nome, telefone ou Instagram...",value:e,onChange:m=>r(m.target.value),className:S("w-full",t?"bg-[#1a1a1a] border-[#404040] text-white placeholder:text-gray-400":"bg-white border-gray-200")})}),l.jsx(q,{variant:"outline",size:"icon",className:"shrink-0",style:{borderColor:t?"#404040":"#d1d5db",color:t?"#ffffff":"#374151"},children:l.jsx(uL,{size:16,className:"text-[#b5103c]"})})]}),l.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1",children:[l.jsx(q,{variant:n==="all"?"default":"outline",size:"sm",onClick:()=>s("all"),className:"whitespace-nowrap",style:{backgroundColor:n==="all"?"#b5103c":"transparent",borderColor:n==="all"?"#b5103c":t?"#404040":"#d1d5db",color:n==="all"||t?"#ffffff":"#374151"},children:"Todas"}),h.map(m=>l.jsx(q,{variant:n===m?"default":"outline",size:"sm",onClick:()=>s(m),className:"whitespace-nowrap",style:{backgroundColor:n===m?"#b5103c":"transparent",borderColor:n===m?"#b5103c":t?"#404040":"#d1d5db",color:n===m||t?"#ffffff":"#374151"},children:m},m))]})]}),l.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[l.jsxs("div",{className:"relative flex-1 max-w-md",children:[l.jsx(lh,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#b5103c]"}),l.jsx(Ke,{placeholder:"Buscar por nome, telefone ou Instagram...",value:e,onChange:m=>r(m.target.value),className:S("pl-10",t?"bg-[#1a1a1a] border-[#404040] text-white placeholder:text-gray-400":"bg-white border-gray-200")})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(q,{variant:n==="all"?"default":"outline",onClick:()=>s("all"),style:{backgroundColor:n==="all"?"#b5103c":"transparent",borderColor:n==="all"?"#b5103c":t?"#404040":"#d1d5db",color:n==="all"||t?"#ffffff":"#374151"},children:"Todas as Cidades"}),h.map(m=>l.jsx(q,{variant:n===m?"default":"outline",onClick:()=>s(m),style:{backgroundColor:n===m?"#b5103c":"transparent",borderColor:n===m?"#b5103c":t?"#404040":"#d1d5db",color:n===m||t?"#ffffff":"#374151"},children:m},m))]})]})]}),jV=({exam:t,isDarkMode:e,isMultiSelectMode:r,isSelected:n,onToggleSelection:s,onEdit:a})=>l.jsx(Re,{className:S("border transition-all duration-200 hover:shadow-md",e?"bg-[#1a1a1a] border-[#404040]":"bg-white border-gray-200",n&&"ring-2 ring-[#b5103c]"),children:l.jsxs(Ie,{className:"p-4",children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[r&&l.jsx(xs,{checked:n,onCheckedChange:s}),l.jsx($E,{size:16,className:"text-[#b5103c]"}),l.jsx("span",{className:S("font-semibold",e?"text-white":"text-gray-900"),children:t.name})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(gn,{variant:"secondary",className:"text-xs",children:["#",t.id.slice(0,8)]}),l.jsx(q,{size:"sm",variant:"outline",onClick:a,className:"p-1 h-8 w-8",children:l.jsx(ch,{size:14})})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(TE,{size:14,className:"text-gray-400"}),l.jsx("span",{className:S(e?"text-gray-200":"text-gray-600"),children:t.phone})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(fL,{size:14,className:"text-gray-400"}),l.jsx("span",{className:S(e?"text-gray-200":"text-gray-600"),children:t.instagram})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(gL,{size:14,className:"text-gray-400"}),l.jsx("span",{className:S(e?"text-gray-200":"text-gray-600"),children:t.city})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(Po,{size:14,className:"text-gray-400"}),l.jsx("span",{className:S(e?"text-gray-200":"text-gray-600"),children:new Date(t.appointmentDate).toLocaleDateString("pt-BR")})]})]})]})}),kV=({exam:t,isDarkMode:e,isMultiSelectMode:r,isSelected:n,onToggleSelection:s,onEdit:a})=>l.jsxs("tr",{className:S(n&&"ring-2 ring-[#b5103c]",e?"bg-[#1a1a1a] hover:bg-[#2a2a2a]":"bg-white hover:bg-gray-100"),children:[r&&l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx(xs,{checked:n,onCheckedChange:s})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:S("text-sm",e?"text-gray-200":"text-gray-500"),children:["#",t.id.slice(0,8)]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:S("text-sm font-medium",e?"text-white":"text-gray-900"),children:t.name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:S("text-sm",e?"text-gray-200":"text-gray-500"),children:t.phone})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:S("text-sm",e?"text-gray-200":"text-gray-500"),children:t.instagram})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:S("text-sm",e?"text-gray-200":"text-gray-500"),children:new Date(t.appointmentDate).toLocaleDateString("pt-BR")})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:S("text-sm",e?"text-gray-200":"text-gray-500"),children:t.city})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs(q,{size:"sm",variant:"outline",onClick:a,className:"flex items-center gap-1",children:[l.jsx(ch,{size:14}),"Editar"]})})]}),TV=({isDarkMode:t,selectedCount:e,totalCount:r,onSelectAll:n})=>l.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg",style:{backgroundColor:t?"#1a1a1a":"#f3f4f6",borderColor:t?"#404040":"#d1d5db"},children:[l.jsx(xs,{checked:e===r&&r>0,onCheckedChange:n}),l.jsxs("span",{className:S("text-sm font-medium",t?"text-white":"text-gray-900"),children:["Selecionar todos (",r,")"]})]}),PV=({isDarkMode:t})=>{const{exams:e,loading:r,addExam:n,deleteExams:s,updateExam:a}=N2(),[o,i]=g.useState(""),[c,u]=g.useState("all"),[d,f]=g.useState(!1),[h,m]=g.useState([]),[y,p]=g.useState(!1),[v,w]=g.useState(!1),[x,b]=g.useState(!1),[_,C]=g.useState(null),E=["Canarana","Souto Soares","Joo Dourado","Amrica Dourada"],N=()=>{const I=new Date,k=new Date(I);k.setDate(I.getDate()-I.getDay());const $=new Date(k);return $.setDate(k.getDate()+6),{startOfWeek:k,endOfWeek:$}},A=e.filter(I=>{const k=new RegExp(o,"i"),$=c==="all"||I.city===c,Y=k.test(I.name)||k.test(I.phone)||k.test(I.instagram||"");if(d){const{startOfWeek:he,endOfWeek:ue}=N(),xe=new Date(I.appointmentDate),D=xe>=he&&xe<=ue;return Y&&$&&D}return Y&&$}),j=()=>{w(!0)},O=async I=>{try{await n({name:I.name,phone:I.phone,instagram:I.instagram||null,city:I.city,appointmentDate:I.appointmentDate,status:"agendado",examType:"Exame de Vista",observations:null}),console.log("Novo exame adicionado:",I)}catch(k){console.error("Erro ao adicionar exame:",k)}},F=I=>{C(I),b(!0)},P=async(I,k)=>{try{await a(I,k),console.log("Exame atualizado:",I,k),b(!1),C(null)}catch($){console.error("Erro ao atualizar exame:",$)}},V=()=>{p(!y),m([])},R=I=>{m(k=>k.includes(I)?k.filter($=>$!==I):[...k,I])},H=()=>{h.length===A.length?m([]):m(A.map(I=>I.id))},W=async()=>{try{await s(h),m([]),p(!1)}catch(I){console.error("Erro ao excluir exames:",I)}};return r?l.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:t?"#111112":"#f9fafb"},children:l.jsx("div",{className:"text-lg",children:"Carregando exames..."})}):l.jsxs("div",{className:"h-screen flex flex-col",style:{backgroundColor:t?"#111112":"#f9fafb"},children:[l.jsx(AV,{isDarkMode:t,searchTerm:o,setSearchTerm:i,selectedCity:c,setSelectedCity:u,showThisWeek:d,setShowThisWeek:f,isMultiSelectMode:y,toggleMultiSelect:V,selectedExams:h,deleteSelectedExams:W,handleAddExam:j,cities:E}),l.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[l.jsxs("div",{className:"md:hidden space-y-3",children:[y&&l.jsx(TV,{isDarkMode:t,selectedCount:h.length,totalCount:A.length,onSelectAll:H}),A.map(I=>l.jsx(jV,{exam:I,isDarkMode:t,isMultiSelectMode:y,isSelected:h.includes(I.id),onToggleSelection:()=>R(I.id),onEdit:()=>F(I)},I.id))]}),l.jsx("div",{className:"hidden md:block",children:l.jsxs(Re,{className:S("border",t?"bg-[#1a1a1a] border-[#404040]":"bg-white border-gray-200"),children:[l.jsx(jt,{className:"py-4 px-6",children:l.jsxs(kt,{className:S("text-lg font-semibold",t?"text-white":"text-gray-900"),children:["Lista de Exames de Vista ",d&&"- Esta Semana"," (",A.length," exames)"]})}),l.jsx(Ie,{className:"p-0",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y",style:{borderColor:t?"#404040":"#e5e7eb"},children:[l.jsx("thead",{className:t?"bg-[#2a2a2a] text-white":"bg-gray-50 text-gray-700",children:l.jsxs("tr",{children:[y&&l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:l.jsx(xs,{checked:h.length===A.length&&A.length>0,onCheckedChange:H})}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"ID"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Nome"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Celular"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Instagram"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Data do Agendamento"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Cidade"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Aes"})]})}),l.jsx("tbody",{className:"divide-y",style:{borderColor:t?"#404040":"#e5e7eb"},children:A.map(I=>l.jsx(kV,{exam:I,isDarkMode:t,isMultiSelectMode:y,isSelected:h.includes(I.id),onToggleSelection:()=>R(I.id),onEdit:()=>F(I)},I.id))})]})})})]})})]}),l.jsx(CV,{isOpen:v,onClose:()=>w(!1),onSubmit:O,isDarkMode:t}),l.jsx(NV,{isOpen:x,onClose:()=>{b(!1),C(null)},onSubmit:P,exam:_,isDarkMode:t})]})},RV=({isDarkMode:t})=>l.jsxs("div",{className:S("h-full flex flex-col min-h-screen",t?"bg-[#09090b]":"bg-gray-50"),children:[l.jsx("div",{className:S("p-6 border-b",t?"bg-[#09090b] border-[#18181b]":"bg-gray-50 border-gray-200"),children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:S("p-3 rounded-full",t?"bg-[#27272a]":"bg-[#b5103c]/10"),children:l.jsx(Po,{size:32,className:"text-[#b5103c]",strokeWidth:1.5})}),l.jsxs("div",{children:[l.jsx("h1",{className:S("text-3xl font-bold",t?"text-white":"text-gray-900"),children:"Exames de Vista"}),l.jsx("p",{className:S("text-lg",t?"text-[#9ca3af]":"text-gray-600"),children:"Gerencie agendamentos e consultas"})]})]})}),l.jsx("div",{className:S("flex-1",t?"bg-[#09090b]":"bg-gray-50"),children:l.jsx(PV,{isDarkMode:t})})]});class C_{static async getReports(){try{const{data:e,error:r}=await ne.from("report_history").select(`
          *,
          ai_providers(name)
        `).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching reports:",r),r;return(e||[]).map(n=>{var s,a;return{id:n.id,title:n.prompt||"Relatrio",prompt:n.prompt,generated_at:n.created_at,created_at:n.created_at,provider_used:((s=n.ai_providers)==null?void 0:s.name)||"Unknown",provider_id:n.provider_id||"",provider_name:((a=n.ai_providers)==null?void 0:a.name)||"Unknown",model_used:n.model_used||"",tokens_used:n.tokens_used||0,generation_time:Number(n.generation_time)||0,metadata:typeof n.report_metadata=="object"?n.report_metadata:{},query:n.prompt,result:{id:n.id,title:n.prompt||"Relatrio",content:n.generated_report,created_at:n.created_at,provider_id:n.provider_id||"",report_content:n.generated_report,report_type:n.report_type,status:"completed"},timestamp:n.created_at,status:"success",report_type:n.report_type,generated_report:n.generated_report}})}catch(e){return console.error("Error in getReports:",e),[]}}static async createReport(e){const{data:r,error:n}=await ne.from("report_history").insert({prompt:e.prompt,report_type:e.report_type,generated_report:e.generated_report,provider_id:e.provider_id,model_used:e.model_used,tokens_used:e.tokens_used||0,generation_time:e.generation_time||0,report_metadata:e.metadata||{}}).select().single();if(n)throw console.error("Error creating report:",n),n;return{id:r.id,title:r.prompt,prompt:r.prompt,generated_at:r.created_at,created_at:r.created_at,provider_used:"Unknown",provider_id:r.provider_id||"",provider_name:"Unknown",model_used:r.model_used||"",tokens_used:r.tokens_used||0,generation_time:Number(r.generation_time)||0,metadata:r.report_metadata||{},query:r.prompt,result:{id:r.id,title:r.prompt,content:r.generated_report,created_at:r.created_at,provider_id:r.provider_id||"",report_content:r.generated_report,report_type:r.report_type,status:"completed"},timestamp:r.created_at,status:"success",report_type:r.report_type,generated_report:r.generated_report}}static async getProviderAndKey(e){try{const{data:r,error:n}=await ne.from("ai_providers").select("*").eq("id",e).maybeSingle();return n?(console.error("[IntelligentReportsService] Erro ao buscar provedor:",n),null):r?r.api_key?r:(console.error("[IntelligentReportsService] Provedor sem chave de API:",r),null):(console.error("[IntelligentReportsService] Nenhum provedor configurado para o ID:",e),null)}catch(r){return console.error("[IntelligentReportsService] Exception durante busca de provedor:",r),null}}static async generateReport(e){var d;const r=await this.getProviderAndKey(e.provider_id);if(!r)return console.error("[Relatrios Inteligentes] Nenhum provedor de IA configurado ou sem chave de API vlida."),await this.createReport({prompt:e.custom_prompt||`Tentativa de gerar relatrio ${e.report_type}`,report_type:e.report_type,generated_report:"Erro: Nenhum provedor de IA configurado ou chave de API faltando. Configure um provedor ativo no menu de Provedores de IA.",provider_id:e.provider_id,model_used:"N/A",tokens_used:0,generation_time:0,metadata:{error:"AI provider config missing"}});const n=new Me({apiKey:r.api_key,baseURL:r.base_url||void 0,dangerouslyAllowBrowser:!0});let s="",a=r.default_model||"gpt-3.5-turbo",o=0,i=0;const c=Date.now();try{console.log(" [AI_REPORTS] Gerando relatrio com OpenAI...",{type:e.report_type,provider:r.id});let f=`Gere um relatrio detalhado sobre ${e.report_type}.`;if(e.data&&Object.keys(e.data).length>0){const m=JSON.stringify(e.data).length>3e3?"Dados muito extensos para incluir diretamente. Analise o contexto geral.":JSON.stringify(e.data);f+=`

Dados fornecidos para anlise:
${m}`}e.custom_prompt&&(f+=`

Instrues adicionais (prompt customizado):
${e.custom_prompt}`);const h=await n.chat.completions.create({messages:[{role:"system",content:"Voc  um assistente analtico especializado em gerar relatrios concisos e informativos baseados nos dados e instrues fornecidas."},{role:"user",content:f}],model:a});s=h.choices[0].message.content||"No foi possvel gerar o contedo do relatrio.",a=h.model,o=((d=h.usage)==null?void 0:d.total_tokens)||0,console.log(" [AI_REPORTS] Relatrio gerado pela OpenAI:",{model:a,tokens:o})}catch(f){console.error(" [AI_REPORTS] Erro ao gerar relatrio com OpenAI:",f),s=`Falha ao gerar relatrio: ${f.message||String(f)}`,f.status===401&&(s="Erro de autenticao com a API OpenAI. Verifique a chave da API.")}finally{i=(Date.now()-c)/1e3}return await this.createReport({prompt:e.custom_prompt||`Gerar relatrio de ${e.report_type}`,report_type:e.report_type,generated_report:s,provider_id:r.id,model_used:a,tokens_used:o,generation_time:i,metadata:{data_source:e.report_type,...e.data&&Object.keys(e.data).length>0&&{data_preview:JSON.stringify(e.data).substring(0,200)+"..."}}})}}const IV=({isDarkMode:t,stats:e,providers:r})=>l.jsx("div",{className:"p-6 border-b border-border",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx(Re,{className:S(t?"bg-card border-border":"bg-white border-gray-200"),children:l.jsxs(Ie,{className:"p-3 flex items-center gap-2",children:[l.jsx(pn,{size:16,className:"text-primary"}),l.jsx("span",{className:S("text-sm font-medium",t?"text-card-foreground":"text-gray-900"),children:"Relatrios Gerados"}),l.jsx("p",{className:S("text-lg font-bold ml-auto",t?"text-card-foreground":"text-gray-900"),children:e.totalReports})]})}),l.jsx(Re,{className:S(t?"bg-card border-border":"bg-white border-gray-200"),children:l.jsxs(Ie,{className:"p-3 flex items-center gap-2",children:[l.jsx(ol,{size:16,className:"text-primary"}),l.jsx("span",{className:S("text-sm font-medium",t?"text-card-foreground":"text-gray-900"),children:"Provedores Ativos"}),l.jsx("p",{className:S("text-lg font-bold ml-auto",t?"text-card-foreground":"text-gray-900"),children:r.filter(n=>n.is_active).length})]})}),l.jsx(Re,{className:S(t?"bg-card border-border":"bg-white border-gray-200"),children:l.jsxs(Ie,{className:"p-3 flex items-center gap-2",children:[l.jsx(ro,{size:16,className:"text-primary"}),l.jsx("span",{className:S("text-sm font-medium",t?"text-card-foreground":"text-gray-900"),children:"Tempo Mdio (s)"}),l.jsx("p",{className:S("text-lg font-bold ml-auto",t?"text-card-foreground":"text-gray-900"),children:e.averageGenerationTime})]})})]})})});var OV=[" ","Enter","ArrowUp","ArrowDown"],LV=[" ","Enter"],No="Select",[$h,Mh,$V]=my(No),[fl,hW]=br(No,[$V,sl]),Dh=sl(),[MV,Da]=fl(No),[DV,FV]=fl(No),Sk=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:a,value:o,defaultValue:i,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:m,form:y}=t,p=Dh(e),[v,w]=g.useState(null),[x,b]=g.useState(null),[_,C]=g.useState(!1),E=Sh(u),[N,A]=Ns({prop:n,defaultProp:s??!1,onChange:a,caller:No}),[j,O]=Ns({prop:o,defaultProp:i,onChange:c,caller:No}),F=g.useRef(null),P=v?y||!!v.closest("form"):!0,[V,R]=g.useState(new Set),H=Array.from(V).map(W=>W.props.value).join(";");return l.jsx(DC,{...p,children:l.jsxs(MV,{required:m,scope:e,trigger:v,onTriggerChange:w,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:_,onValueNodeHasChildrenChange:C,contentId:vs(),value:j,onValueChange:O,open:N,onOpenChange:A,dir:E,triggerPointerDownPosRef:F,disabled:h,children:[l.jsx($h.Provider,{scope:e,children:l.jsx(DV,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(W=>{R(I=>new Set(I).add(W))},[]),onNativeOptionRemove:g.useCallback(W=>{R(I=>{const k=new Set(I);return k.delete(W),k})},[]),children:r})}),P?l.jsxs(qk,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:j,onChange:W=>O(W.target.value),disabled:h,form:y,children:[j===void 0?l.jsx("option",{value:""}):null,Array.from(V)]},H):null]})})};Sk.displayName=No;var Ck="SelectTrigger",Ek=g.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,a=Dh(r),o=Da(Ck,r),i=o.disabled||n,c=Le(e,o.onTriggerChange),u=Mh(r),d=g.useRef("touch"),[f,h,m]=Yk(p=>{const v=u().filter(b=>!b.disabled),w=v.find(b=>b.value===o.value),x=Qk(v,p,w);x!==void 0&&o.onValueChange(x.value)}),y=p=>{i||(o.onOpenChange(!0),m()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return l.jsx(th,{asChild:!0,...a,children:l.jsx(ge.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":Kk(o.value)?"":void 0,...s,ref:c,onClick:ce(s.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&y(p)}),onPointerDown:ce(s.onPointerDown,p=>{d.current=p.pointerType;const v=p.target;v.hasPointerCapture(p.pointerId)&&v.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(y(p),p.preventDefault())}),onKeyDown:ce(s.onKeyDown,p=>{const v=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&h(p.key),!(v&&p.key===" ")&&OV.includes(p.key)&&(y(),p.preventDefault())})})})});Ek.displayName=Ck;var Nk="SelectValue",Ak=g.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:a,placeholder:o="",...i}=t,c=Da(Nk,r),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,f=Le(e,c.onValueNodeChange);return pt(()=>{u(d)},[u,d]),l.jsx(ge.span,{...i,ref:f,style:{pointerEvents:"none"},children:Kk(c.value)?l.jsx(l.Fragment,{children:o}):a})});Ak.displayName=Nk;var UV="SelectIcon",jk=g.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return l.jsx(ge.span,{"aria-hidden":!0,...s,ref:e,children:n||""})});jk.displayName=UV;var VV="SelectPortal",kk=t=>l.jsx(Qc,{asChild:!0,...t});kk.displayName=VV;var Ao="SelectContent",Tk=g.forwardRef((t,e)=>{const r=Da(Ao,t.__scopeSelect),[n,s]=g.useState();if(pt(()=>{s(new DocumentFragment)},[]),!r.open){const a=n;return a?To.createPortal(l.jsx(Pk,{scope:t.__scopeSelect,children:l.jsx($h.Slot,{scope:t.__scopeSelect,children:l.jsx("div",{children:t.children})})}),a):null}return l.jsx(Rk,{...t,ref:e})});Tk.displayName=Ao;var en=10,[Pk,Fa]=fl(Ao),zV="SelectContentImpl",BV=wo("SelectContent.RemoveScroll"),Rk=g.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:i,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:y,hideWhenDetached:p,avoidCollisions:v,...w}=t,x=Da(Ao,r),[b,_]=g.useState(null),[C,E]=g.useState(null),N=Le(e,U=>_(U)),[A,j]=g.useState(null),[O,F]=g.useState(null),P=Mh(r),[V,R]=g.useState(!1),H=g.useRef(!1);g.useEffect(()=>{if(b)return Iy(b)},[b]),Ry();const W=g.useCallback(U=>{const[ae,...we]=P().map(De=>De.ref.current),[ve]=we.slice(-1),Oe=document.activeElement;for(const De of U)if(De===Oe||(De==null||De.scrollIntoView({block:"nearest"}),De===ae&&C&&(C.scrollTop=0),De===ve&&C&&(C.scrollTop=C.scrollHeight),De==null||De.focus(),document.activeElement!==Oe))return},[P,C]),I=g.useCallback(()=>W([A,b]),[W,A,b]);g.useEffect(()=>{V&&I()},[V,I]);const{onOpenChange:k,triggerPointerDownPosRef:$}=x;g.useEffect(()=>{if(b){let U={x:0,y:0};const ae=ve=>{var Oe,De;U={x:Math.abs(Math.round(ve.pageX)-(((Oe=$.current)==null?void 0:Oe.x)??0)),y:Math.abs(Math.round(ve.pageY)-(((De=$.current)==null?void 0:De.y)??0))}},we=ve=>{U.x<=10&&U.y<=10?ve.preventDefault():b.contains(ve.target)||k(!1),document.removeEventListener("pointermove",ae),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",ae),document.addEventListener("pointerup",we,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ae),document.removeEventListener("pointerup",we,{capture:!0})}}},[b,k,$]),g.useEffect(()=>{const U=()=>k(!1);return window.addEventListener("blur",U),window.addEventListener("resize",U),()=>{window.removeEventListener("blur",U),window.removeEventListener("resize",U)}},[k]);const[Y,he]=Yk(U=>{const ae=P().filter(Oe=>!Oe.disabled),we=ae.find(Oe=>Oe.ref.current===document.activeElement),ve=Qk(ae,U,we);ve&&setTimeout(()=>ve.ref.current.focus())}),ue=g.useCallback((U,ae,we)=>{const ve=!H.current&&!we;(x.value!==void 0&&x.value===ae||ve)&&(j(U),ve&&(H.current=!0))},[x.value]),xe=g.useCallback(()=>b==null?void 0:b.focus(),[b]),D=g.useCallback((U,ae,we)=>{const ve=!H.current&&!we;(x.value!==void 0&&x.value===ae||ve)&&F(U)},[x.value]),X=n==="popper"?Yg:Ik,oe=X===Yg?{side:i,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:y,hideWhenDetached:p,avoidCollisions:v}:{};return l.jsx(Pk,{scope:r,content:b,viewport:C,onViewportChange:E,itemRefCallback:ue,selectedItem:A,onItemLeave:xe,itemTextRefCallback:D,focusSelectedItem:I,selectedItemText:O,position:n,isPositioned:V,searchRef:Y,children:l.jsx(wh,{as:BV,allowPinchZoom:!0,children:l.jsx(yh,{asChild:!0,trapped:x.open,onMountAutoFocus:U=>{U.preventDefault()},onUnmountAutoFocus:ce(s,U=>{var ae;(ae=x.trigger)==null||ae.focus({preventScroll:!0}),U.preventDefault()}),children:l.jsx(tl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:U=>U.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:l.jsx(X,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:U=>U.preventDefault(),...w,...oe,onPlaced:()=>R(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:ce(w.onKeyDown,U=>{const ae=U.ctrlKey||U.altKey||U.metaKey;if(U.key==="Tab"&&U.preventDefault(),!ae&&U.key.length===1&&he(U.key),["ArrowUp","ArrowDown","Home","End"].includes(U.key)){let ve=P().filter(Oe=>!Oe.disabled).map(Oe=>Oe.ref.current);if(["ArrowUp","End"].includes(U.key)&&(ve=ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(U.key)){const Oe=U.target,De=ve.indexOf(Oe);ve=ve.slice(De+1)}setTimeout(()=>W(ve)),U.preventDefault()}})})})})})})});Rk.displayName=zV;var WV="SelectItemAlignedPosition",Ik=g.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,a=Da(Ao,r),o=Fa(Ao,r),[i,c]=g.useState(null),[u,d]=g.useState(null),f=Le(e,N=>d(N)),h=Mh(r),m=g.useRef(!1),y=g.useRef(!0),{viewport:p,selectedItem:v,selectedItemText:w,focusSelectedItem:x}=o,b=g.useCallback(()=>{if(a.trigger&&a.valueNode&&i&&u&&p&&v&&w){const N=a.trigger.getBoundingClientRect(),A=u.getBoundingClientRect(),j=a.valueNode.getBoundingClientRect(),O=w.getBoundingClientRect();if(a.dir!=="rtl"){const Oe=O.left-A.left,De=j.left-Oe,vt=N.left-De,zt=N.width+vt,yt=Math.max(zt,A.width),Sr=window.innerWidth-en,Sn=Eg(De,[en,Math.max(en,Sr-yt)]);i.style.minWidth=zt+"px",i.style.left=Sn+"px"}else{const Oe=A.right-O.right,De=window.innerWidth-j.right-Oe,vt=window.innerWidth-N.right-De,zt=N.width+vt,yt=Math.max(zt,A.width),Sr=window.innerWidth-en,Sn=Eg(De,[en,Math.max(en,Sr-yt)]);i.style.minWidth=zt+"px",i.style.right=Sn+"px"}const F=h(),P=window.innerHeight-en*2,V=p.scrollHeight,R=window.getComputedStyle(u),H=parseInt(R.borderTopWidth,10),W=parseInt(R.paddingTop,10),I=parseInt(R.borderBottomWidth,10),k=parseInt(R.paddingBottom,10),$=H+W+V+k+I,Y=Math.min(v.offsetHeight*5,$),he=window.getComputedStyle(p),ue=parseInt(he.paddingTop,10),xe=parseInt(he.paddingBottom,10),D=N.top+N.height/2-en,X=P-D,oe=v.offsetHeight/2,U=v.offsetTop+oe,ae=H+W+U,we=$-ae;if(ae<=D){const Oe=F.length>0&&v===F[F.length-1].ref.current;i.style.bottom="0px";const De=u.clientHeight-p.offsetTop-p.offsetHeight,vt=Math.max(X,oe+(Oe?xe:0)+De+I),zt=ae+vt;i.style.height=zt+"px"}else{const Oe=F.length>0&&v===F[0].ref.current;i.style.top="0px";const vt=Math.max(D,H+p.offsetTop+(Oe?ue:0)+oe)+we;i.style.height=vt+"px",p.scrollTop=ae-D+p.offsetTop}i.style.margin=`${en}px 0`,i.style.minHeight=Y+"px",i.style.maxHeight=P+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[h,a.trigger,a.valueNode,i,u,p,v,w,a.dir,n]);pt(()=>b(),[b]);const[_,C]=g.useState();pt(()=>{u&&C(window.getComputedStyle(u).zIndex)},[u]);const E=g.useCallback(N=>{N&&y.current===!0&&(b(),x==null||x(),y.current=!1)},[b,x]);return l.jsx(GV,{scope:r,contentWrapper:i,shouldExpandOnScrollRef:m,onScrollButtonChange:E,children:l.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:l.jsx(ge.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Ik.displayName=WV;var HV="SelectPopperPosition",Yg=g.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=en,...a}=t,o=Dh(r);return l.jsx(uy,{...o,...a,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Yg.displayName=HV;var[GV,L0]=fl(Ao,{}),Qg="SelectViewport",Ok=g.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,a=Fa(Qg,r),o=L0(Qg,r),i=Le(e,a.onViewportChange),c=g.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),l.jsx($h.Slot,{scope:r,children:l.jsx(ge.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ce(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&f){const m=Math.abs(c.current-d.scrollTop);if(m>0){const y=window.innerHeight-en*2,p=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),w=Math.max(p,v);if(w<y){const x=w+m,b=Math.min(y,x),_=x-b;f.style.height=b+"px",f.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});Ok.displayName=Qg;var Lk="SelectGroup",[qV,KV]=fl(Lk),YV=g.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=vs();return l.jsx(qV,{scope:r,id:s,children:l.jsx(ge.div,{role:"group","aria-labelledby":s,...n,ref:e})})});YV.displayName=Lk;var $k="SelectLabel",Mk=g.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=KV($k,r);return l.jsx(ge.div,{id:s.id,...n,ref:e})});Mk.displayName=$k;var Rf="SelectItem",[QV,Dk]=fl(Rf),Fk=g.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:a,...o}=t,i=Da(Rf,r),c=Fa(Rf,r),u=i.value===n,[d,f]=g.useState(a??""),[h,m]=g.useState(!1),y=Le(e,x=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,x,n,s)}),p=vs(),v=g.useRef("touch"),w=()=>{s||(i.onValueChange(n),i.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(QV,{scope:r,value:n,disabled:s,textId:p,isSelected:u,onItemTextChange:g.useCallback(x=>{f(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:l.jsx($h.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:l.jsx(ge.div,{role:"option","aria-labelledby":p,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:y,onFocus:ce(o.onFocus,()=>m(!0)),onBlur:ce(o.onBlur,()=>m(!1)),onClick:ce(o.onClick,()=>{v.current!=="mouse"&&w()}),onPointerUp:ce(o.onPointerUp,()=>{v.current==="mouse"&&w()}),onPointerDown:ce(o.onPointerDown,x=>{v.current=x.pointerType}),onPointerMove:ce(o.onPointerMove,x=>{var b;v.current=x.pointerType,s?(b=c.onItemLeave)==null||b.call(c):v.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ce(o.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:ce(o.onKeyDown,x=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&x.key===" "||(LV.includes(x.key)&&w(),x.key===" "&&x.preventDefault())})})})})});Fk.displayName=Rf;var Wl="SelectItemText",Uk=g.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...a}=t,o=Da(Wl,r),i=Fa(Wl,r),c=Dk(Wl,r),u=FV(Wl,r),[d,f]=g.useState(null),h=Le(e,w=>f(w),c.onItemTextChange,w=>{var x;return(x=i.itemTextRefCallback)==null?void 0:x.call(i,w,c.value,c.disabled)}),m=d==null?void 0:d.textContent,y=g.useMemo(()=>l.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:p,onNativeOptionRemove:v}=u;return pt(()=>(p(y),()=>v(y)),[p,v,y]),l.jsxs(l.Fragment,{children:[l.jsx(ge.span,{id:c.textId,...a,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?To.createPortal(a.children,o.valueNode):null]})});Uk.displayName=Wl;var Vk="SelectItemIndicator",zk=g.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return Dk(Vk,r).isSelected?l.jsx(ge.span,{"aria-hidden":!0,...n,ref:e}):null});zk.displayName=Vk;var Jg="SelectScrollUpButton",Bk=g.forwardRef((t,e)=>{const r=Fa(Jg,t.__scopeSelect),n=L0(Jg,t.__scopeSelect),[s,a]=g.useState(!1),o=Le(e,n.onScrollButtonChange);return pt(()=>{if(r.viewport&&r.isPositioned){let i=function(){const u=c.scrollTop>0;a(u)};const c=r.viewport;return i(),c.addEventListener("scroll",i),()=>c.removeEventListener("scroll",i)}},[r.viewport,r.isPositioned]),s?l.jsx(Hk,{...t,ref:o,onAutoScroll:()=>{const{viewport:i,selectedItem:c}=r;i&&c&&(i.scrollTop=i.scrollTop-c.offsetHeight)}}):null});Bk.displayName=Jg;var Xg="SelectScrollDownButton",Wk=g.forwardRef((t,e)=>{const r=Fa(Xg,t.__scopeSelect),n=L0(Xg,t.__scopeSelect),[s,a]=g.useState(!1),o=Le(e,n.onScrollButtonChange);return pt(()=>{if(r.viewport&&r.isPositioned){let i=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=r.viewport;return i(),c.addEventListener("scroll",i),()=>c.removeEventListener("scroll",i)}},[r.viewport,r.isPositioned]),s?l.jsx(Hk,{...t,ref:o,onAutoScroll:()=>{const{viewport:i,selectedItem:c}=r;i&&c&&(i.scrollTop=i.scrollTop+c.offsetHeight)}}):null});Wk.displayName=Xg;var Hk=g.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,a=Fa("SelectScrollButton",r),o=g.useRef(null),i=Mh(r),c=g.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),pt(()=>{var d;const u=i().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[i]),l.jsx(ge.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ce(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:ce(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:ce(s.onPointerLeave,()=>{c()})})}),JV="SelectSeparator",Gk=g.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return l.jsx(ge.div,{"aria-hidden":!0,...n,ref:e})});Gk.displayName=JV;var Zg="SelectArrow",XV=g.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=Dh(r),a=Da(Zg,r),o=Fa(Zg,r);return a.open&&o.position==="popper"?l.jsx(dy,{...s,...n,ref:e}):null});XV.displayName=Zg;var ZV="SelectBubbleInput",qk=g.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const s=g.useRef(null),a=Le(n,s),o=jy(e);return g.useEffect(()=>{const i=s.current;if(!i)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const f=new Event("change",{bubbles:!0});d.call(i,e),i.dispatchEvent(f)}},[o,e]),l.jsx(ge.select,{...r,style:{...FC,...r.style},ref:a,defaultValue:e})});qk.displayName=ZV;function Kk(t){return t===""||t===void 0}function Yk(t){const e=_t(t),r=g.useRef(""),n=g.useRef(0),s=g.useCallback(o=>{const i=r.current+o;e(i),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(i)},[e]),a=g.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,a]}function Qk(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=r?t.indexOf(r):-1;let o=ez(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function ez(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var tz=Sk,Jk=Ek,rz=Ak,nz=jk,sz=kk,Xk=Tk,az=Ok,Zk=Mk,eT=Fk,oz=Uk,iz=zk,tT=Bk,rT=Wk,nT=Gk;const Pa=tz,Ra=rz,ks=g.forwardRef(({className:t,children:e,...r},n)=>l.jsxs(Jk,{ref:n,className:S("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,l.jsx(nz,{asChild:!0,children:l.jsx(_E,{className:"h-4 w-4 opacity-50"})})]}));ks.displayName=Jk.displayName;const sT=g.forwardRef(({className:t,...e},r)=>l.jsx(tT,{ref:r,className:S("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(oL,{className:"h-4 w-4"})}));sT.displayName=tT.displayName;const aT=g.forwardRef(({className:t,...e},r)=>l.jsx(rT,{ref:r,className:S("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(_E,{className:"h-4 w-4"})}));aT.displayName=rT.displayName;const Ts=g.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>l.jsx(sz,{children:l.jsxs(Xk,{ref:s,className:S("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[l.jsx(sT,{}),l.jsx(az,{className:S("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(aT,{})]})}));Ts.displayName=Xk.displayName;const lz=g.forwardRef(({className:t,...e},r)=>l.jsx(Zk,{ref:r,className:S("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));lz.displayName=Zk.displayName;const Dt=g.forwardRef(({className:t,children:e,...r},n)=>l.jsxs(eT,{ref:n,className:S("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(iz,{children:l.jsx(xy,{className:"h-4 w-4"})})}),l.jsx(oz,{children:e})]}));Dt.displayName=eT.displayName;const cz=g.forwardRef(({className:t,...e},r)=>l.jsx(nT,{ref:r,className:S("-mx-1 my-1 h-px bg-muted",t),...e}));cz.displayName=nT.displayName;const uz=({isDarkMode:t,providers:e,selectedProvider:r,setSelectedProvider:n,filters:s,setFilters:a,isGenerating:o,onGenerateReport:i,onClearReport:c,hasReportResult:u,availableChannels:d=[],channelsLoading:f=!1})=>{const h=s.report_type!=="exams";return l.jsx("div",{children:l.jsxs(Re,{className:S("border shadow-sm",t?"bg-card border-border":"bg-white border-gray-200"),children:[l.jsx(jt,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:S("p-2 rounded-lg",t?"bg-accent":"bg-gray-100"),children:l.jsx(ol,{size:18,className:"text-primary",strokeWidth:1.5})}),l.jsxs("div",{children:[l.jsx(kt,{className:S("text-lg",t?"text-card-foreground":"text-gray-900"),children:"Gerador de Relatrios Inteligentes"}),l.jsx(sc,{className:S("text-sm",t?"text-muted-foreground":"text-gray-600"),children:"Descreva o relatrio que deseja gerar com IA"})]})]})}),l.jsxs(Ie,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(pe,{htmlFor:"ai-provider",className:S("text-sm font-medium",t?"text-muted-foreground":"text-gray-600"),children:"Provedor de IA"}),l.jsxs(Pa,{value:r,onValueChange:n,children:[l.jsx(ks,{className:S(t?"bg-input-dark border-input-dark text-card-foreground":"bg-white border-gray-200"),children:l.jsx(Ra,{placeholder:"Selecione um provedor"})}),l.jsx(Ts,{className:S(t?"bg-card border-border text-card-foreground":"bg-white text-gray-900"),children:e.map(m=>l.jsxs(Dt,{value:String(m.id),children:[m.name," (",na.getProviderTypeLabel(m.provider_type),")"]},m.id))})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx(pe,{htmlFor:"report-type",className:S("text-sm font-medium",t?"text-muted-foreground":"text-gray-600"),children:"Tipo de Relatrio"}),l.jsxs(Pa,{value:s.report_type,onValueChange:m=>{a({...s,report_type:m,...m==="exams"?{channel_id:void 0}:{}})},children:[l.jsx(ks,{className:S(t?"bg-input-dark border-input-dark text-card-foreground":"bg-white border-gray-200"),children:l.jsx(Ra,{})}),l.jsxs(Ts,{className:S(t?"bg-card border-border text-card-foreground":"bg-white text-gray-900"),children:[l.jsx(Dt,{value:"conversations",children:"Anlise de Conversas"}),l.jsx(Dt,{value:"channels",children:"Anlise de Canais"}),l.jsx(Dt,{value:"exams",children:"Anlise de Exames"}),l.jsx(Dt,{value:"custom",children:"Relatrio Personalizado"})]})]})]}),h&&l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx(pe,{className:"text-sm font-medium mb-1",children:"Selecionar Canal"}),f?l.jsx("div",{className:"text-xs text-muted",children:"Carregando canais..."}):l.jsxs("select",{value:s.channel_id||"",onChange:m=>a({...s,channel_id:m.target.value}),className:"border rounded px-3 py-2 bg-white w-full",children:[l.jsx("option",{value:"",children:"Todos os canais"}),d.map(m=>l.jsx("option",{value:m.id,children:m.displayName||m.name},m.id))]})]})]}),s.report_type==="custom"&&l.jsxs("div",{children:[l.jsx(pe,{htmlFor:"custom-prompt",className:S("text-sm font-medium",t?"text-muted-foreground":"text-gray-600"),children:"Prompt Personalizado"}),l.jsx(Lc,{id:"custom-prompt",value:s.custom_prompt||"",onChange:m=>a({...s,custom_prompt:m.target.value}),placeholder:"Descreva que tipo de anlise voc gostaria...",className:S("min-h-[100px] text-sm",t?"bg-input-dark border-input-dark text-card-foreground placeholder:text-muted-foreground":"bg-white border-gray-300"),rows:4})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(q,{onClick:i,disabled:o||!r,size:"sm",className:"flex-1 bg-primary hover:bg-primary/90 text-primary-foreground",children:o?l.jsxs(l.Fragment,{children:[l.jsx(jE,{size:14,className:"mr-2 animate-spin"}),"Gerando..."]}):"Gerar Relatrio"}),u&&l.jsx(q,{variant:"outline",size:"sm",onClick:c,className:S(t?"border-border text-muted-foreground hover:bg-accent":""),children:"Limpar"})]})]})]})})},dz=({isDarkMode:t,reportResult:e,onPrintReport:r,onDownloadReport:n})=>l.jsxs(Re,{className:S("border shadow-sm",t?"bg-card border-border":"bg-white border-gray-200"),children:[l.jsx(jt,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:S("p-2 rounded-lg",t?"bg-accent":"bg-gray-100"),children:l.jsx(pn,{size:18,className:"text-primary",strokeWidth:1.5})}),l.jsx("div",{children:l.jsx(kt,{className:S("text-lg",t?"text-card-foreground":"text-gray-900"),children:"Relatrio Gerado"})})]}),e&&l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(q,{variant:"outline",size:"sm",onClick:()=>r(e.report_content),className:S(t?"border-border text-muted-foreground hover:bg-accent":""),children:[l.jsx(bL,{size:14,className:"mr-2",strokeWidth:1.5}),"Imprimir"]}),l.jsxs(q,{variant:"outline",size:"sm",onClick:()=>n(e.report_content,e.report_type,e.id),className:S(t?"border-border text-muted-foreground hover:bg-accent":""),children:[l.jsx(fg,{size:14,className:"mr-2",strokeWidth:1.5}),"Download"]})]})]})}),l.jsx(Ie,{children:e?l.jsx("div",{className:S("p-3 rounded-lg border min-h-[200px] max-h-[400px] overflow-auto whitespace-pre-wrap text-sm",t?"bg-input-dark border-input-dark text-card-foreground":"bg-gray-50 border-gray-200 text-gray-800"),children:e.report_content}):l.jsx("div",{className:S("flex items-center justify-center h-[200px] border-2 border-dashed rounded-lg",t?"border-border":"border-gray-300"),children:l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{size:32,className:S("mx-auto mb-2",t?"text-muted-foreground":"text-gray-400")}),l.jsx("p",{className:S("text-sm",t?"text-muted-foreground":"text-gray-500"),children:"O relatrio aparecer aqui"})]})})})]}),fz=({isDarkMode:t,recentReports:e,onViewReport:r,onDownloadReport:n})=>{const[s,a]=g.useState(null);return l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Relatrios Recentes"}),l.jsx("ul",{className:"grid gap-3",children:e.map(o=>l.jsxs("li",{className:"flex items-center justify-between bg-gray-100 p-2 rounded",children:[l.jsx("span",{className:"font-medium text-sm",children:o.title}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{a(o),typeof r=="function"&&r(o.result)},className:"text-primary px-2 py-1 bg-white border rounded hover:bg-primary/10 transition",children:"Ver"}),l.jsx("button",{onClick:()=>n(o.generated_report,o.report_type,o.id),className:"text-xs text-gray-600 hover:underline",children:"Download"})]})]},o.id))}),s&&l.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white max-w-lg w-full rounded shadow p-5",children:[l.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Relatrio"}),l.jsx("pre",{className:"overflow-x-auto max-h-96 bg-gray-50 rounded p-3 text-sm",children:s.generated_report||s.content}),l.jsx("button",{className:"mt-3 px-4 py-2 bg-primary text-white rounded",onClick:()=>a(null),children:"Fechar"})]})})]})};function hz(){const[t,e]=g.useState([]),[r,n]=g.useState(!1);return g.useEffect(()=>{async function s(){n(!0);const{data:a,error:o}=await ne.from("channels").select("*").eq("is_active",!0);!o&&a&&e(a.map(i=>({id:i.id,name:i.name,displayName:i.name,isActive:i.is_active,tableName:i.type?`${i.name.toLowerCase()}_conversas`:"",description:"",icon:""}))),n(!1)}s()},[]),{channels:t,loading:r}}const mz=({isDarkMode:t})=>{const{toast:e}=Jt(),[r,n]=g.useState([]),[s,a]=g.useState(""),[o,i]=g.useState({report_type:"conversations"}),[c,u]=g.useState(!1),[d,f]=g.useState(null),[h,m]=g.useState(""),[y,p]=g.useState([]),[v,w]=g.useState(!0),[x,b]=g.useState({totalReports:0,reportsThisMonth:0,averageGenerationTime:0}),{channels:_,loading:C}=hz();async function E(V,R){const H=require("@/integrations/supabase/client").supabase;if(V==="conversations"&&R){const{getTableNameForChannel:W}=require("@/utils/channelMapping"),I=W(R),{data:k}=await H.from(I).select("session_id, message, nome_do_contato, tipo_remetente, read_at").limit(30).order("read_at",{ascending:!1});return k||[]}if(V==="exams"){const{data:W}=await H.from("exams").select("*").limit(30).order("appointment_date",{ascending:!1});return W||[]}return{}}g.useEffect(()=>{N(),A()},[]);const N=async()=>{try{console.log(" [ReportDashboardEnhanced] Carregando provedores de IA...");const V=await na.getProviders();n(V||[]),V&&V.length>0?(a(String(V[0].id)),console.log(" [ReportDashboardEnhanced] Provedores carregados. Primeiro provedor selecionado:",V[0].id)):(a(""),console.log(" [ReportDashboardEnhanced] Nenhum provedor de IA ativo encontrado."))}catch(V){a(""),console.error("Erro ao carregar provedores:",V)}},A=async()=>{try{w(!0);const V=await C_.getReports();p(V);const R=V.length,H=V.filter(I=>{const k=new Date(I.created_at),$=new Date;return k.getMonth()===$.getMonth()&&k.getFullYear()===$.getFullYear()}).length,W=V.length>0?V.reduce((I,k)=>I+(k.generation_time||0),0)/V.length:0;b({totalReports:R,reportsThisMonth:H,averageGenerationTime:W})}catch(V){console.error("Erro ao carregar relatrios recentes:",V)}finally{w(!1)}},j=async()=>{var V,R,H;if(!s){m(" necessrio cadastrar e selecionar ao menos um provedor de IA ativo antes de gerar relatrios.");return}u(!0),m(""),f(null);try{let W={};(o.report_type==="conversations"||o.report_type==="exams")&&(W=await E(o.report_type,o.channel_id));const I=await C_.generateReport({provider_id:s,report_type:o.report_type,data:W,custom_prompt:o.custom_prompt});(V=I.generated_report)!=null&&V.includes("Erro: Nenhum provedor de IA configurado")||(R=I.generated_report)!=null&&R.includes("chave de API")||(H=I.generated_report)!=null&&H.toLowerCase().startsWith("falha ao gerar relatrio")?(m(I.generated_report),f(null)):(f(I.result),e({title:"Sucesso",description:"Relatrio gerado com sucesso"}),A())}catch(W){m(W instanceof Error?W.message:"Erro desconhecido"),e({title:"Erro",description:W instanceof Error?W.message:"Erro ao gerar relatrio. Tente novamente.",variant:"destructive"})}finally{u(!1)}},O=(V,R,H)=>{const W=`relatorio_${R}_${H||new Date().toISOString().split("T")[0]}.md`,I=new Blob([V],{type:"text/markdown"}),k=URL.createObjectURL(I),$=document.createElement("a");$.href=k,$.download=W,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(k)},F=V=>{const R=window.open("","_blank");R&&(R.document.write(`
        <html>
          <head>
            <title>Relatrio</title>
            <style>
              body { font-family: sans-serif; margin: 20px; }
              pre { white-space: pre-wrap; word-wrap: break-word; }
            </style>
          </head>
          <body>
            <pre>${V}</pre>
            <script>window.onload = function() { window.print(); window.onafterprint = function() { window.close(); } }<\/script>
          </body>
        </html>
      `),R.document.close())},P=()=>{f(null),m(""),i({report_type:"conversations"}),a(r.length>0?String(r[0].id):"")};return l.jsxs("div",{className:S("h-full flex flex-col",t?"bg-background":"bg-gray-50"),children:[l.jsx("div",{className:"p-6 border-b border-border",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 rounded-full bg-primary/10",children:l.jsx(yy,{size:32,className:"text-primary",strokeWidth:1.5})}),l.jsxs("div",{children:[l.jsx("h1",{className:S("text-3xl font-bold",t?"text-card-foreground":"text-gray-900"),children:"Relatrios Inteligentes"}),l.jsx("p",{className:S("text-lg",t?"text-muted-foreground":"text-gray-600"),children:"Gere insights automticos usando inteligncia artificial"})]})]})})}),l.jsx(IV,{isDarkMode:t,stats:x,providers:r}),l.jsx("div",{className:"flex-1 overflow-auto p-6",children:l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsx(uz,{isDarkMode:t,providers:r,selectedProvider:s,setSelectedProvider:a,filters:o,setFilters:i,isGenerating:c,onGenerateReport:j,onClearReport:P,hasReportResult:!!d,availableChannels:_,channelsLoading:C}),l.jsx(dz,{isDarkMode:t,reportResult:d,onPrintReport:F,onDownloadReport:O})]}),l.jsx("div",{className:"mt-10",children:l.jsx(fz,{isDarkMode:t,recentReports:y,onViewReport:f,onDownloadReport:O})})]})})]})},pz=()=>{const{theme:t}=uC(),e=t==="dark"||t==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches;return l.jsx("div",{className:"min-h-screen",children:l.jsx(mz,{isDarkMode:e})})},E_=({title:t,description:e,icon:r,onClick:n,isDarkMode:s,badge:a})=>l.jsx(Re,{className:S("cursor-pointer transition-all hover:shadow-md hover:scale-[1.02] relative",s?"bg-[#18181b] border-[#3f3f46] hover:bg-[#27272a]":"bg-white border-gray-200 hover:bg-gray-50"),onClick:n,children:l.jsx(Ie,{className:"p-6",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:S("p-3 rounded-xl flex-shrink-0",s?"bg-[#27272a]":"bg-gray-100"),children:l.jsx(r,{size:24,className:"text-[#b5103c]"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:S("font-semibold text-base",s?"text-white":"text-gray-900"),children:t}),a&&l.jsx("span",{className:"bg-[#b5103c] text-white text-xs px-3 py-1 rounded-full font-bold",children:a})]}),l.jsx("p",{className:S("text-sm leading-relaxed",s?"text-gray-400":"text-gray-600"),children:e})]})]})})}),gz=({isDarkMode:t,onSectionChange:e,toggleDarkMode:r})=>{const{canManageUsers:n,canAccessAuditHistory:s,canManageTabs:a}=Io(),{logout:o}=Tt(),{toast:i}=Jt(),c=async()=>{try{await o(),i({title:"Logout realizado",description:"Voc foi desconectado com sucesso.",variant:"default"})}catch{i({title:"Erro",description:"Erro ao fazer logout. Tente novamente.",variant:"destructive"})}},u=[{id:"credentials",title:"Alterar Credenciais",description:"Altere sua senha e informaes de login",icon:RE,show:!0},{id:"notifications",title:"Configuraes de Notificao",description:"Configure alertas e notificaes do sistema",icon:tL,show:!0},{id:"users",title:"Gerenciamento de Usurios",description:"Adicione, edite ou remova usurios do sistema",icon:eu,show:n(),badge:"Admin"},{id:"channels",title:"Gerenciar Canais",description:"Ative e desative canais do sistema",icon:NE,show:a(),badge:"Admin"},{id:"audit",title:"Histrico de Auditoria",description:"Visualize logs de atividades e aes do sistema",icon:AE,show:s(),badge:"Admin"},{id:"ai",title:"Configuraes de IA",description:"Configure a integrao com ChatGPT para relatrios",icon:ol,show:n(),badge:"Admin"},{id:"evolution",title:"API Evolution",description:"Configure instncias e envie mensagens via API Evolution",icon:As,show:n(),badge:"Admin"},{id:"system",title:"Sistema",description:"Configuraes gerais e preferncias avanadas",icon:ys,show:!0},{id:"backup",title:"Backup e Dados",description:"Gerencie backups automticos e exportao de dados",icon:CE,show:n(),badge:"Admin"}],d=[{id:"appearance",title:"Aparncia",description:`Alternar para modo ${t?"claro":"escuro"}`,icon:t?OE:kE,show:!0,onClick:r},{id:"logout",title:"Sair da Conta",description:"Encerre sua sesso atual",icon:ih,show:!0,onClick:c}],f=u.filter(y=>y.show),h=d.filter(y=>y.show),m=y=>{y.onClick?y.onClick():e(y.id)};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-6",children:f.map(y=>l.jsx(E_,{title:y.title,description:y.description,icon:y.icon,onClick:()=>m(y),isDarkMode:t,badge:y.badge},y.id))}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map(y=>l.jsx(E_,{title:y.title,description:y.description,icon:y.icon,onClick:()=>m(y),isDarkMode:t,badge:y.badge},y.id))})]})},$0=()=>{const[t,e]=g.useState([]),[r,n]=g.useState(!0),s=g.useCallback(async()=>{try{n(!0),console.log(" [useUsers] Carregando usurios da tabela users...");const{data:c,error:u}=await ne.from("users").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(console.log(" [useUsers] Resposta do Supabase:",{data:c,error:u}),u){console.error(" [useUsers] Erro ao carregar usurios:",u);return}console.log(" [useUsers] Dados brutos recebidos:",c),console.log(" [useUsers] Quantidade de usurios encontrados:",(c==null?void 0:c.length)||0);const d=(c||[]).map(f=>(console.log(" [useUsers] Formatando usurio:",f),{id:f.id,username:f.username,name:f.name,role:f.role,assignedTabs:f.assigned_tabs||[],assignedChannels:f.assigned_channels||[],createdAt:f.created_at}));console.log(" [useUsers] Usurios formatados:",d),e(d)}catch(c){console.error(" [useUsers] Erro inesperado ao carregar usurios:",c)}finally{n(!1)}},[]);return g.useEffect(()=>{s()},[s]),{users:t,loading:r,createUser:async c=>{try{console.log("Criando usurio:",c);const{data:u,error:d}=await ne.rpc("create_user_with_hash",{p_username:c.username,p_password:c.password,p_name:c.name,p_role:c.role,p_assigned_tabs:c.assignedTabs,p_assigned_channels:c.assignedChannels});if(d)throw console.error("Erro ao criar usurio:",d),d;return await s(),u}catch(u){throw console.error("Erro ao criar usurio:",u),u}},updateUser:async(c,u)=>{try{if(console.log("Atualizando usurio:",c,u),u.password&&u.password.trim()){const{error:d}=await ne.rpc("update_user_with_hash",{p_user_id:c,p_username:u.username||null,p_password:u.password,p_name:u.name||null,p_role:u.role||null,p_assigned_tabs:u.assignedTabs||null,p_assigned_channels:u.assignedChannels||null});if(d)throw console.error("Erro ao atualizar usurio com senha:",d),d}else{const d={};u.username&&(d.username=u.username),u.name&&(d.name=u.name),u.role&&(d.role=u.role),u.assignedTabs&&(d.assigned_tabs=u.assignedTabs),u.assignedChannels&&(d.assigned_channels=u.assignedChannels);const{error:f}=await ne.from("users").update(d).eq("id",c);if(f)throw console.error("Erro ao atualizar usurio:",f),f}await s()}catch(d){throw console.error("Erro ao atualizar usurio:",d),d}},deleteUser:async c=>{try{const{error:u}=await ne.from("users").update({is_active:!1}).eq("id",c);if(u)throw u;await s()}catch(u){throw u}},refreshUsers:s}},vz={admin:"Administrador",salesperson:"Vendedor",manager_external:"Gerente Externo",manager_store:"Gerente de Loja",manager:"Gerente"},yz=({isDarkMode:t,searchTerm:e,selectedRole:r,onSearchChange:n,onRoleChange:s,onNewUser:a})=>l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:items-end",children:[l.jsx("div",{className:"flex-1",children:l.jsx(Ke,{placeholder:"Buscar por nome ou usurio...",value:e,onChange:o=>n(o.target.value),className:S(t?"bg-[#2a2a2a] border-[#333333] text-white":"bg-white border-gray-300")})}),l.jsx("div",{className:"w-full md:w-60",children:l.jsxs(Pa,{value:r,onValueChange:s,children:[l.jsx(ks,{className:S(t?"bg-[#2a2a2a] border-[#333333] text-white":"bg-white border-gray-300"),children:l.jsx(Ra,{})}),l.jsxs(Ts,{className:S(t?"bg-[#1a1a1a] border-[#333333] text-white":"bg-white text-gray-900"),children:[l.jsx(Dt,{value:"all",children:"Todos os papis"}),Object.entries(vz).map(([o,i])=>l.jsx(Dt,{value:o,children:i},o))]})]})}),l.jsx("div",{children:l.jsxs(q,{onClick:a,className:"bg-[#b5103c] hover:bg-[#9a0e35] text-white",children:[l.jsx(Xc,{size:16,className:"mr-2"}),"Novo Usurio"]})})]}),xz={admin:"Administrador",salesperson:"Vendedor",manager_external:"Gerente Externo",manager_store:"Gerente de Loja",manager:"Gerente"},wz=[{key:"canarana",label:"Canarana"},{key:"souto-soares",label:"Souto Soares"},{key:"joao-dourado",label:"Joo Dourado"},{key:"america-dourada",label:"Amrica Dourada"},{key:"gerente-lojas",label:"Gerente Lojas"},{key:"gerente-externo",label:"Gerente Externo"},{key:"chat",label:"Chat Geral"}],bz=({user:t,isDarkMode:e,onEdit:r,onDelete:n})=>{const s=a=>({admin:"bg-red-100 text-red-800",salesperson:"bg-blue-100 text-blue-800",manager_external:"bg-purple-100 text-purple-800",manager_store:"bg-green-100 text-green-800",manager:"bg-orange-100 text-orange-800"})[a]||"bg-gray-100 text-gray-800";return l.jsxs("div",{className:S("p-4 rounded-xl border flex flex-col md:flex-row md:items-center justify-between shadow-sm",e?"bg-[#232327] border-[#27272a]":"bg-gray-50 border-gray-200"),children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[l.jsx("h4",{className:S("font-semibold text-lg",e?"text-white":"text-gray-900"),children:t.name}),l.jsx(gn,{className:s(t.role),children:xz[t.role]})]}),l.jsx("div",{className:"text-xs text-gray-400",children:t.username}),t.assignedTabs&&t.assignedTabs.length>0&&l.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:t.assignedTabs.map(a=>l.jsx(gn,{variant:"outline",className:S("text-xs",e?"border-[#444444] text-gray-300":"border-gray-300"),children:a},a))}),t.assignedChannels&&t.assignedChannels.length>0&&l.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:t.assignedChannels.map(a=>{var o;return l.jsx(gn,{variant:"outline",className:S("text-xs",e?"border-[#8f1440] text-[#f376aa]":"border-gray-300"),children:((o=wz.find(i=>i.key===a))==null?void 0:o.label)||a},a)})})]}),l.jsxs("div",{className:"flex space-x-2 mt-4 md:mt-0",children:[l.jsx(q,{variant:"outline",size:"sm",onClick:()=>r(t),className:S("transition-colors duration-200",e?"border-[#333333] hover:bg-[#333333] text-white":"border-gray-300 hover:bg-gray-100"),children:l.jsx(ch,{size:16})}),l.jsx(q,{variant:"outline",size:"sm",onClick:()=>n(t.id),className:"border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 transition-colors duration-200",children:l.jsx(Zc,{size:16})})]})]})},_z=["dashboard","mensagens","exames","configuracoes","relatorios"],Sz=[{key:"canarana",label:"Canarana"},{key:"souto-soares",label:"Souto Soares"},{key:"joao-dourado",label:"Joo Dourado"},{key:"america-dourada",label:"Amrica Dourada"},{key:"gerente-lojas",label:"Gerente Lojas"},{key:"gerente-externo",label:"Gerente Externo"},{key:"chat",label:"Chat Geral"}],Cz={admin:"Administrador",salesperson:"Vendedor",manager_external:"Gerente Externo",manager_store:"Gerente de Loja",manager:"Gerente"},Ez={admin:"Acesso total ao sistema",salesperson:"Acesso limitado s vendas",manager_external:"Gerncia externa com acesso limitado",manager_store:"Gerncia de loja com acesso especfico",manager:"Gerncia geral"},Nz=[{key:"credentials",label:"Alterar Credenciais"},{key:"notifications",label:"Configuraes de Notificao"},{key:"users",label:"Gerenciamento de Usurios"},{key:"channels",label:"Gerenciar Canais"},{key:"audit",label:"Histrico de Auditoria"},{key:"ai",label:"Configuraes de IA"},{key:"evolution",label:"API Evolution"},{key:"system",label:"Sistema"},{key:"backup",label:"Backup e Dados"}],Az=({open:t,editingUser:e,isDarkMode:r,formData:n,showPassword:s,onClose:a,onSubmit:o,onFormDataChange:i,onShowPasswordToggle:c})=>{const u=(h,m)=>{i({...n,assignedTabs:m?[...n.assignedTabs,h]:n.assignedTabs.filter(y=>y!==h)})},d=(h,m)=>{i({...n,assignedChannels:m?[...n.assignedChannels,h]:n.assignedChannels.filter(y=>y!==h)})},f=(h,m)=>{i({...n,assignedSettingsSections:m?[...n.assignedSettingsSections||[],h]:(n.assignedSettingsSections||[]).filter(y=>y!==h)})};return l.jsx(Is,{open:t,onOpenChange:a,children:l.jsxs(Qn,{className:S("sm:max-w-md",r?"bg-[#1a1a1a] border-[#333333] text-white":"bg-white text-gray-900"),children:[l.jsx(Os,{children:l.jsx(Jn,{className:S(r?"text-white":"text-gray-900"),children:e?"Editar Usurio":"Novo Usurio"})}),l.jsxs("form",{onSubmit:o,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(pe,{htmlFor:"name",className:S(r?"text-gray-300":"text-gray-700"),children:"Nome Completo"}),l.jsx(Ke,{id:"name",value:n.name,onChange:h=>i({...n,name:h.target.value}),placeholder:"Nome completo do usurio",required:!0,className:S(r?"bg-[#2a2a2a] border-[#333333] text-white":"bg-white border-gray-300")})]}),l.jsxs("div",{children:[l.jsx(pe,{htmlFor:"username",className:S(r?"text-gray-300":"text-gray-700"),children:"Nome de Usurio"}),l.jsx(Ke,{id:"username",value:n.username,onChange:h=>i({...n,username:h.target.value}),placeholder:"username",required:!0,className:S(r?"bg-[#2a2a2a] border-[#333333] text-white":"bg-white border-gray-300")})]}),l.jsxs("div",{children:[l.jsx(pe,{htmlFor:"password",className:S(r?"text-gray-300":"text-gray-700"),children:e?"Nova Senha (deixe em branco para manter)":"Senha"}),l.jsxs("div",{className:"relative",children:[l.jsx(Ke,{id:"password",type:s?"text":"password",value:n.password,onChange:h=>i({...n,password:h.target.value}),placeholder:e?"Nova senha (opcional)":"Senha do usurio",required:!e,className:S("pr-10",r?"bg-[#2a2a2a] border-[#333333] text-white":"bg-white border-gray-300")}),l.jsx(q,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:c,children:s?l.jsx(EE,{size:16}):l.jsx(by,{size:16})})]})]}),l.jsxs("div",{children:[l.jsx(pe,{htmlFor:"role",className:S(r?"text-gray-300":"text-gray-700"),children:"Papel do Usurio"}),l.jsxs(Pa,{value:n.role,onValueChange:h=>i({...n,role:h}),children:[l.jsx(ks,{className:S(r?"bg-[#2a2a2a] border-[#333333] text-white":"bg-white border-gray-300"),children:l.jsx(Ra,{})}),l.jsx(Ts,{className:S(r?"bg-[#1a1a1a] border-[#333333] text-white":"bg-white text-gray-900"),children:Object.entries(Cz).map(([h,m])=>l.jsx(Dt,{value:h,children:l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:m}),l.jsx("div",{className:S("text-xs",r?"text-gray-400":"text-gray-500"),children:Ez[h]})]})},h))})]})]}),l.jsxs("div",{children:[l.jsx(pe,{className:S(r?"text-gray-300":"text-gray-700"),children:"Abas Permitidas"}),l.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:_z.map(h=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(xs,{id:`tab-${h}`,checked:n.assignedTabs.includes(h),onCheckedChange:m=>u(h,!!m),className:S(r?"border-[#444444]":"border-gray-300")}),l.jsx(pe,{htmlFor:`tab-${h}`,className:S("text-sm",r?"text-gray-300":"text-gray-700"),children:h})]},h))})]}),l.jsxs("div",{children:[l.jsx(pe,{className:S(r?"text-gray-300":"text-gray-700"),children:"Canais Atribudos"}),l.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:Sz.map(h=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(xs,{id:`channel-${h.key}`,checked:n.assignedChannels.includes(h.key),onCheckedChange:m=>d(h.key,!!m),className:S(r?"border-[#8f1440]":"border-gray-300")}),l.jsx(pe,{htmlFor:`channel-${h.key}`,className:S("text-sm",r?"text-gray-300":"text-gray-700"),children:h.label})]},h.key))})]}),l.jsxs("div",{children:[l.jsx(pe,{className:S(r?"text-gray-300":"text-gray-700"),children:"Sees de Configuraes Permitidas"}),l.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:Nz.map(h=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(xs,{id:`settings-section-${h.key}`,checked:!!(n.assignedSettingsSections||[]).includes(h.key),onCheckedChange:m=>f(h.key,!!m),className:S(r?"border-[#9a0e35]":"border-gray-300")}),l.jsx(pe,{htmlFor:`settings-section-${h.key}`,className:S("text-sm",r?"text-gray-300":"text-gray-700"),children:h.label})]},h.key))})]}),l.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[l.jsx(q,{type:"button",variant:"outline",onClick:a,className:S(r?"border-[#333333] text-white hover:bg-[#2a2a2a]":"border-gray-300"),children:"Cancelar"}),l.jsx(q,{type:"submit",className:"bg-[#b5103c] hover:bg-[#9a0e35] text-white",children:e?"Atualizar":"Criar"})]})]})]})})},N_={admin:["dashboard","mensagens","exames","configuracoes","relatorios"],salesperson:["dashboard","mensagens","exames"],manager_external:["dashboard","mensagens","exames","relatorios"],manager_store:["dashboard","mensagens","exames","relatorios"],manager:["dashboard","mensagens","exames","relatorios","configuracoes"]},jz=({isDarkMode:t})=>{const{users:e,loading:r,createUser:n,updateUser:s,deleteUser:a}=$0(),{toast:o}=Jt(),[i,c]=g.useState(!1),[u,d]=g.useState(null),[f,h]=g.useState(""),[m,y]=g.useState("all"),[p,v]=g.useState(!1),[w,x]=g.useState({username:"",password:"",name:"",role:"salesperson",assignedTabs:[],assignedChannels:[],assignedSettingsSections:[]});g.useEffect(()=>{console.log(" [UserManagementCompact] Usurios recebidos:",e),console.log(" [UserManagementCompact] Loading:",r),console.log(" [UserManagementCompact] Quantidade:",e.length)},[e,r]),g.useEffect(()=>{x(u?{username:u.username,password:"",name:u.name,role:u.role,assignedTabs:u.assignedTabs||[],assignedChannels:u.assignedChannels||[],assignedSettingsSections:u.assignedSettingsSections||[]}:{username:"",password:"",name:"",role:"salesperson",assignedTabs:N_.salesperson||[],assignedChannels:[],assignedSettingsSections:[]})},[u]);const b=async N=>{if(N.preventDefault(),!w.username||!w.name||!u&&!w.password){o({title:"Erro",description:"Preencha todos os campos obrigatrios",variant:"destructive"});return}try{if(u){const A={username:w.username,name:w.name,role:w.role,assignedTabs:w.assignedTabs,assignedChannels:w.assignedChannels,assignedSettingsSections:w.assignedSettingsSections};w.password.trim()&&(A.password=w.password),await s(u.id,A),o({title:"Sucesso",description:"Usurio atualizado com sucesso"})}else await n({...w}),o({title:"Sucesso",description:"Usurio criado com sucesso"});c(!1),d(null),x({username:"",password:"",name:"",role:"salesperson",assignedTabs:N_.salesperson||[],assignedChannels:[],assignedSettingsSections:[]})}catch(A){o({title:"Erro",description:A instanceof Error?A.message:"Erro ao salvar usurio",variant:"destructive"})}},_=N=>{d(N),c(!0)},C=async N=>{if(window.confirm("Tem certeza que deseja excluir este usurio?"))try{await a(N),o({title:"Sucesso",description:"Usurio excludo com sucesso"})}catch(A){o({title:"Erro",description:A instanceof Error?A.message:"Erro ao excluir usurio",variant:"destructive"})}},E=e.filter(N=>{const A=N.name.toLowerCase().includes(f.toLowerCase())||N.username.toLowerCase().includes(f.toLowerCase()),j=m==="all"||N.role===m;return A&&j});return r?l.jsxs("div",{className:"flex items-center justify-center p-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#b5103c]"}),l.jsx("span",{className:"ml-2",children:"Carregando usurios..."})]}):l.jsxs("div",{className:S("space-y-6 p-6 rounded-xl",t?"bg-[#18181b] border-[#27272a] text-white":"bg-white border-gray-200"),children:[l.jsx(yz,{isDarkMode:t,searchTerm:f,selectedRole:m,onSearchChange:h,onRoleChange:y,onNewUser:()=>{d(null),c(!0)}}),l.jsx("div",{className:S("p-4 rounded-lg border",t?"bg-[#232327] border-[#27272a]":"bg-gray-50 border-gray-200"),children:l.jsxs("p",{className:S("text-sm",t?"text-gray-300":"text-gray-600"),children:["Debug: ",e.length," usurios carregados | Loading: ",r.toString()]})}),E.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(eu,{className:S("h-12 w-12 mx-auto mb-4","text-gray-400")}),l.jsx("p",{className:S("text-lg",t?"text-gray-300":"text-gray-600"),children:f||m!=="all"?"Nenhum usurio encontrado.":"Nenhum usurio cadastrado."}),l.jsxs("p",{className:S("text-sm mt-2",t?"text-gray-400":"text-gray-500"),children:["Total de usurios na base: ",e.length]})]}):l.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:E.map(N=>l.jsx(bz,{user:N,isDarkMode:t,onEdit:_,onDelete:C},N.id))}),l.jsx(Az,{open:i,editingUser:u,isDarkMode:t,formData:w,showPassword:p,onClose:()=>c(!1),onSubmit:b,onFormDataChange:x,onShowPasswordToggle:()=>v(!p)})]})},Ja=class Ja{static getInstance(){return Ja.instance||(Ja.instance=new Ja),Ja.instance}generateSessionInfo(){return{timestamp:new Date().toISOString(),user_agent:navigator.userAgent,current_url:window.location.href,session_info:{screen_resolution:`${screen.width}x${screen.height}`,viewport:`${window.innerWidth}x${window.innerHeight}`}}}enrichAuditData(e){return{user_id:e.userId,user_name:e.userName,action:e.action,resource_type:e.resourceType,resource_id:e.resourceId,details:{...e.details,...this.generateSessionInfo()}}}async createLog(e){try{const r=this.enrichAuditData(e);console.log(" [AUDIT_SERVICE] Creating log:",r);const{data:n,error:s}=await ne.from("audit_logs").insert([r]).select().single();if(s){console.error(" [AUDIT_SERVICE] Error creating log:",s);try{const{error:a}=await ne.rpc("create_audit_log",{p_user_name:r.user_name,p_action:r.action,p_resource_type:r.resource_type,p_user_id:r.user_id,p_resource_id:r.resource_id,p_details:r.details});a?console.error(" [AUDIT_SERVICE] RPC fallback also failed:",a):console.log(" [AUDIT_SERVICE] Log created via RPC fallback")}catch(a){console.error(" [AUDIT_SERVICE] RPC fallback error:",a)}return}console.log(" [AUDIT_SERVICE] Log created successfully:",n)}catch(r){console.error(" [AUDIT_SERVICE] Unexpected error:",r)}}async getLogs(e=0,r=50){try{console.log(" [AUDIT_SERVICE] Fetching logs...");const{data:n,error:s}=await ne.from("audit_logs").select("*").order("created_at",{ascending:!1}).range(e*r,(e+1)*r-1);return s?(console.error(" [AUDIT_SERVICE] Error fetching logs:",s),[]):(console.log(` [AUDIT_SERVICE] Fetched ${(n==null?void 0:n.length)||0} logs`),n||[])}catch(n){return console.error(" [AUDIT_SERVICE] Unexpected error fetching logs:",n),[]}}};Ee(Ja,"instance");let Ji=Ja;const oT=()=>{const[t,e]=g.useState([]),[r,n]=g.useState(!0),[s,a]=g.useState(null),o=async(u=0,d=50)=>{try{n(!0),a(null),console.log(" [AUDIT_HOOK] Loading logs...");const m=(await Ji.getInstance().getLogs(u,d)).map(y=>({...y,ip_address:y.ip_address?String(y.ip_address):null}));e(m),console.log(` [AUDIT_HOOK] Loaded ${m.length} logs`)}catch(f){console.error(" [AUDIT_HOOK] Error loading logs:",f),a("Erro inesperado ao carregar logs")}finally{n(!1)}},i=()=>o(),c=async u=>{try{await Ji.getInstance().createLog({action:u.action,resourceType:u.resource_type,resourceId:u.resource_id||"",details:u.details,userId:u.user_id||"",userName:u.user_name}),console.log(" [AUDIT_HOOK] Log de auditoria criado:",u),setTimeout(()=>{o()},1e3)}catch(d){throw console.error(" [AUDIT_HOOK] Erro ao criar log de auditoria:",d),d}};return g.useEffect(()=>{o()},[]),{logs:t,loading:r,error:s,loadLogs:o,refetch:i,createAuditLog:c}},kz=({isDarkMode:t})=>{const{logs:e,loading:r,loadLogs:n}=oT(),[s,a]=g.useState("");g.useEffect(()=>{n()},[]);const o=h=>h.includes("login")?pL:h.includes("logout")?ih:h.includes("message")?As:h.includes("settings")||h.includes("config")?ys:h.includes("dashboard")||h.includes("accessed")?by:h.includes("user")||h.includes("admin")?RE:ro,i=h=>h.includes("login")||h.includes("logout")?"Autenticao":h.includes("message")||h.includes("chat")?"Mensagens":h.includes("user")||h.includes("admin")?"Usurios":h.includes("channel")?"Canais":h.includes("settings")||h.includes("config")?"Configuraes":h.includes("dashboard")||h.includes("accessed")?"Navegao":"Outros",c=h=>{const m={login:"fez login no sistema",logout:"fez logout do sistema",dashboard_accessed:"acessou o painel principal",chat_interface_accessed:"acessou a interface de chat",settings_accessed:"acessou as configuraes"};return m[h]?m[h]:h.includes("login")?"fez login no sistema":h.includes("logout")?"fez logout do sistema":h.includes("dashboard")?"acessou o painel de controle":h.includes("chat")?"acessou a interface de chat":h.includes("settings")?"alterou configuraes do sistema":h.includes("accessed")?"acessou uma seo do sistema":h.replace(/_/g," ").toLowerCase()},u=e.filter(h=>{var m;return h.action.toLowerCase().includes(s.toLowerCase())||((m=h.user_name)==null?void 0:m.toLowerCase().includes(s.toLowerCase()))}),d={total:e.length,today:e.filter(h=>{const m=new Date(h.created_at),y=new Date;return m.toDateString()===y.toDateString()}).length,users:new Set(e.map(h=>h.user_name)).size,categories:new Set(e.map(h=>i(h.action))).size},f=u.slice(0,10);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx(Re,{children:l.jsx(Ie,{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:l.jsx(ro,{className:"h-5 w-5 text-primary"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-bold",children:d.total}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"})]})]})})}),l.jsx(Re,{children:l.jsx(Ie,{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-blue-100",children:l.jsx(Po,{className:"h-5 w-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-bold",children:d.today}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Hoje"})]})]})})}),l.jsx(Re,{children:l.jsx(Ie,{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-green-100",children:l.jsx($E,{className:"h-5 w-5 text-green-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-bold",children:d.users}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Usurios"})]})]})})}),l.jsx(Re,{children:l.jsx(Ie,{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-purple-100",children:l.jsx(AE,{className:"h-5 w-5 text-purple-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-bold",children:d.categories}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Categorias"})]})]})})})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[l.jsxs("div",{className:"relative flex-1 max-w-md",children:[l.jsx(lh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ke,{placeholder:"Buscar por ao ou usurio...",value:s,onChange:h=>a(h.target.value),className:"pl-10"})]}),l.jsxs(q,{variant:"outline",onClick:()=>n(),children:[l.jsx(PE,{className:"h-4 w-4 mr-2"}),"Atualizar"]})]}),l.jsx(Re,{children:l.jsx(Ie,{className:"p-0",children:r?l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):f.length>0?l.jsx("div",{className:"space-y-2 p-4 max-h-96 overflow-y-auto",children:f.map((h,m)=>{const y=o(h.action),p=new Date(h.created_at).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"});return l.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border hover:bg-accent/50 transition-colors",children:[l.jsx("div",{className:"flex-shrink-0 mt-1",children:l.jsx("div",{className:"p-1.5 rounded-md bg-primary/10",children:l.jsx(y,{className:"h-4 w-4 text-primary"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("p",{className:"text-sm font-medium",children:[l.jsx("span",{className:"font-semibold",children:h.user_name||"Sistema"})," ",c(h.action)]}),l.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[p,"  ",i(h.action)]})]})]},m)})}):l.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s?"Nenhum registro encontrado.":"Nenhum registro de auditoria encontrado."})})})]})};class Ua{constructor(e){Ee(this,"auditService");Ee(this,"user");this.auditService=Ji.getInstance(),this.user=e}async createLog(e,r,n,s){var o;if(!((o=this.user)!=null&&o.id)){console.warn(` [${r.toUpperCase()}_LOGGER] No authenticated user for action:`,e);return}const a={action:e,resourceType:r,resourceId:n,details:s,userId:this.user.id,userName:this.user.name||this.user.username||"Usurio"};await this.auditService.createLog(a)}isUserAuthenticated(){var e;return!!((e=this.user)!=null&&e.id)}}class Tz extends Ua{async logAction(e,r,n){this.isUserAuthenticated()&&await this.createLog(e,"dashboard",r,n)}}class Pz extends Ua{async logAction(e,r,n){this.isUserAuthenticated()&&await this.createLog(e,"channel",r,n)}}class Rz extends Ua{async logAction(e,r,n){this.isUserAuthenticated()&&await this.createLog(e,"conversation",r,n)}}class Iz extends Ua{async logAction(e,r,n){this.isUserAuthenticated()&&await this.createLog(e,"navigation",r,n)}}class Oz extends Ua{async logAction(e,r,n){this.isUserAuthenticated()&&await this.createLog(e,"ui_interaction",r,n)}}class Lz extends Ua{async logAction(e,r){this.isUserAuthenticated()&&await this.createLog(e,"profile",this.user.id,r)}}class $z extends Ua{async logAction(e,r){this.isUserAuthenticated()&&await this.createLog(e,"credentials",this.user.id,r)}}class Mz extends Ua{async logAction(e,r){this.isUserAuthenticated()&&await this.createLog(e,"notifications",this.user.id,r)}}class Hs{static createDashboardLogger(e){return new Tz(e)}static createChannelLogger(e){return new Pz(e)}static createConversationLogger(e){return new Rz(e)}static createNavigationLogger(e){return new Iz(e)}static createUILogger(e){return new Oz(e)}static createProfileLogger(e){return new Lz(e)}static createCredentialsLogger(e){return new $z(e)}static createNotificationLogger(e){return new Mz(e)}}const Dz=()=>{const{user:t}=Tt();return g.useMemo(()=>({dashboard:Hs.createDashboardLogger(t),channel:Hs.createChannelLogger(t),conversation:Hs.createConversationLogger(t),navigation:Hs.createNavigationLogger(t),ui:Hs.createUILogger(t),profile:Hs.createProfileLogger(t),credentials:Hs.createCredentialsLogger(t),notifications:Hs.createNotificationLogger(t)}),[t])},iT=()=>{const{user:t}=Tt(),e=Dz(),r=g.useCallback(async(f,h,m,y)=>{if(!(t!=null&&t.id)){console.warn(" [AUDIT] Tentativa de log sem usurio autenticado:",{action:f,resourceType:h});return}try{await Ji.getInstance().createLog({action:f,resourceType:h,resourceId:m,details:y,userId:t.id,userName:t.name||t.username||"Usurio"})}catch(p){console.error(" [AUDIT] Erro ao criar log:",p)}},[t]),n=g.useCallback((f,h,m)=>{e.dashboard&&(t!=null&&t.id)&&e.dashboard.logAction(f,h,m)},[e.dashboard,t==null?void 0:t.id]),s=g.useCallback((f,h,m)=>{e.channel&&(t!=null&&t.id)&&e.channel.logAction(f,h,m)},[e.channel,t==null?void 0:t.id]),a=g.useCallback((f,h,m)=>{e.conversation&&(t!=null&&t.id)&&e.conversation.logAction(f,h,m)},[e.conversation,t==null?void 0:t.id]),o=g.useCallback((f,h,m)=>{e.navigation&&(t!=null&&t.id)&&e.navigation.logAction(f,h,m)},[e.navigation,t==null?void 0:t.id]),i=g.useCallback((f,h,m)=>{e.ui&&(t!=null&&t.id)&&e.ui.logAction(f,h,m)},[e.ui,t==null?void 0:t.id]),c=g.useCallback((f,h)=>{e.profile&&(t!=null&&t.id)&&e.profile.logAction(f,h)},[e.profile,t==null?void 0:t.id]),u=g.useCallback((f,h)=>{e.credentials&&(t!=null&&t.id)&&e.credentials.logAction(f,h)},[e.credentials,t==null?void 0:t.id]),d=g.useCallback((f,h)=>{e.notifications&&(t!=null&&t.id)&&e.notifications.logAction(f,h)},[e.notifications,t==null?void 0:t.id]);return{createAuditLog:r,logDashboardAction:n,logChannelAction:s,logConversationAction:a,logNavigationAction:o,logUIAction:i,logProfileAction:c,logCredentialsAction:u,logNotificationAction:d,loggers:e}},Fz=({open:t,imageUrl:e,onCancel:r,onConfirm:n})=>{const[s,a]=g.useState(1),o=g.useRef(null),i=()=>{e&&n(e)};return G.useEffect(()=>{a(1)},[t,e]),l.jsx(Is,{open:t,onOpenChange:r,children:l.jsxs(Qn,{className:"max-w-xs p-4",children:[l.jsx(Os,{children:l.jsx(Jn,{className:"text-center",children:"Ajuste sua foto"})}),l.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e&&l.jsxs("div",{className:"relative w-40 h-40 overflow-hidden rounded-full bg-muted border",children:[l.jsx("img",{ref:o,src:e,alt:"Preview",style:{transform:`scale(${s})`,objectFit:"cover",width:"100%",height:"100%",transition:"transform 0.2s"}}),l.jsx(q,{variant:"ghost",size:"icon",className:"absolute top-0 right-0 m-1 rounded-full text-destructive hover:bg-destructive/10 z-10",onClick:r,type:"button",children:l.jsx(Dn,{size:16})})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-xs",children:"Zoom"}),l.jsx("input",{type:"range",min:1,max:2,step:.01,value:s,onChange:c=>a(Number(c.target.value)),className:"w-28",disabled:!e})]}),l.jsx(q,{onClick:i,disabled:!e,className:"w-full",children:"Confirmar"})]})]})})},Uz=({isDarkMode:t,userName:e,onAvatarChange:r,externalPreview:n})=>{const[s,a]=g.useState(null),[o,i]=g.useState(null),[c,u]=g.useState(!1),d=g.useRef(null);g.useEffect(()=>{a(n??null),n||i(null)},[n]);const f=p=>p.split(" ").map(v=>v[0]).join("").toUpperCase().slice(0,2),h=p=>{var x;const v=(x=p.target.files)==null?void 0:x[0];if(!v)return;if(v.size>5*1024*1024){alert("A imagem deve ter no mximo 5MB");return}if(!v.type.startsWith("image/")){alert("Por favor, selecione apenas arquivos de imagem");return}const w=new FileReader;w.onload=b=>{var _;a((_=b.target)==null?void 0:_.result),i(v),u(!0)},w.readAsDataURL(v),p.target.value=""},m=()=>{a(null),i(null),u(!1),r==null||r(null,null)},y=p=>{a(p),u(!1),o&&p&&(r==null||r(o,p))};return l.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[l.jsxs("div",{className:"relative",children:[l.jsxs(uf,{className:"w-24 h-24",children:[l.jsx(df,{src:s||void 0,alt:e}),l.jsx(ff,{className:S("text-2xl font-semibold",t?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"),children:f(e)})]}),l.jsx(Fz,{open:c,imageUrl:s,onCancel:m,onConfirm:y}),l.jsx("div",{className:"absolute -bottom-2 -right-2",children:l.jsxs("label",{children:[l.jsx(q,{size:"sm",className:"h-8 w-8 p-0 rounded-full",style:{backgroundColor:"#b5103c"},asChild:!0,children:l.jsx("div",{className:"cursor-pointer",children:l.jsx(nL,{size:16})})}),l.jsx(Ke,{ref:d,type:"file",accept:"image/*",onChange:h,className:"hidden"})]})})]}),s&&l.jsx(q,{variant:"outline",size:"sm",onClick:m,className:"text-red-600 hover:text-red-700 mt-2",style:{backgroundColor:"transparent",borderColor:"#dc2626",color:"#dc2626"},type:"button",children:l.jsx(Zc,{size:16})})]})};function A_(t){if(!t)return null;const e=t.match(/\/storage\/v1\/object\/public\/avatars\/(.+)/);return e?e[1]:null}function Vz(){const{user:t}=Tt(),[e,r]=g.useState(null),[n,s]=g.useState(null),[a,o]=g.useState(!1),[i,c]=g.useState(!1),u=g.useCallback(async()=>{if(!(t!=null&&t.id))return;o(!0);const{data:m,error:y}=await ne.from("user_profiles").select("avatar_url").eq("id",t.id).maybeSingle();!y&&m&&m.avatar_url&&m.avatar_url.startsWith("https://uxccfhptochnfomurulr.supabase.co/storage/v1/object/public/avatars/")?(r(m.avatar_url),s(A_(m.avatar_url))):(r(null),s(null)),o(!1),c(!0)},[t==null?void 0:t.id]);g.useEffect(()=>{u()},[u]);const d=async()=>{n&&await ne.storage.from("avatars").remove([n])};return{avatarUrl:e,uploadAvatar:async m=>{if(!t)return null;o(!0),n&&await d();const y=m.name.split(".").pop(),p=`${t.id}-${Date.now()}.${y}`,{data:v,error:w}=await ne.storage.from("avatars").upload(p,m,{upsert:!0});if(w)return o(!1),null;const{data:x}=ne.storage.from("avatars").getPublicUrl(p),b=(x==null?void 0:x.publicUrl)||null;return b&&b.startsWith("https://uxccfhptochnfomurulr.supabase.co/storage/v1/object/public/avatars/")&&(await ne.from("user_profiles").upsert({id:t.id,avatar_url:b,updated_at:new Date().toISOString()},{onConflict:"id"}),r(b),s(A_(b))),o(!1),b},removeAvatar:async()=>{o(!0),n&&await d(),t!=null&&t.id&&await ne.from("user_profiles").upsert({id:t.id,avatar_url:null,updated_at:new Date().toISOString()},{onConflict:"id"}),r(null),s(null),o(!1)},loading:a,ready:i,refetchAvatar:u}}const zz=({isDarkMode:t})=>{const{user:e}=Tt(),{updateUser:r}=$0(),{logCredentialsAction:n}=iT(),{toast:s}=Jt(),[a,o]=g.useState({username:(e==null?void 0:e.username)||"",oldPassword:"",newPassword:"",confirmPassword:""}),{avatarUrl:i,uploadAvatar:c,removeAvatar:u,loading:d,ready:f,refetchAvatar:h}=Vz(),[m,y]=g.useState(null),[p,v]=g.useState(null),[w,x]=g.useState(!1);g.useEffect(()=>{},[i,f,m,p]);const b=(E,N)=>{y(E),v(N)},_=(E,N)=>{o(A=>({...A,[E]:N}))},C=async E=>{if(E.preventDefault(),!!e){if(a.newPassword&&a.newPassword!==a.confirmPassword){s({title:"Erro",description:"A nova senha e confirmao no coincidem",variant:"destructive"});return}if(a.newPassword&&a.newPassword.length<6){s({title:"Erro",description:"A nova senha deve ter pelo menos 6 caracteres",variant:"destructive"});return}try{x(!0);const N={},A=[];let j=!1;if(m&&p)if(await c(m))s({title:"Sucesso",description:"Foto de perfil atualizada!",variant:"default"}),y(null),v(null),A.push("profile_picture"),j=!0;else{s({title:"Erro",description:"Erro ao fazer upload da foto de perfil",variant:"destructive"}),x(!1);return}else!p&&!m&&i&&(await u(),s({title:"Sucesso",description:"Foto de perfil removida",variant:"default"}),A.push("profile_picture"),j=!0);a.username!==e.username&&(N.username=a.username,A.push("username")),a.newPassword.trim()&&(N.password=a.newPassword,A.push("password")),Object.keys(N).length>0&&await r(e.id,N),A.length>0&&await n("update",{changes:A,timestamp:new Date().toISOString()}),A.length>0&&s({title:"Sucesso",description:"Credenciais atualizadas com sucesso!",variant:"default"}),o(O=>({...O,oldPassword:"",newPassword:"",confirmPassword:""})),j&&h()}catch{s({title:"Erro",description:"Erro ao atualizar credenciais. Tente novamente.",variant:"destructive"})}finally{x(!1)}}};return l.jsxs(l.Fragment,{children:[l.jsxs(Re,{className:S("border mb-6",t?"bg-card border-border":"bg-white border-gray-200"),children:[l.jsx(jt,{className:"pb-4",children:l.jsx(kt,{className:S("flex items-center gap-3 text-lg",t?"text-card-foreground":"text-gray-900"),children:"Foto de Perfil"})}),l.jsx(Ie,{children:l.jsx(Uz,{isDarkMode:t,userName:(e==null?void 0:e.name)||(e==null?void 0:e.username)||"",onAvatarChange:b,externalPreview:p!==null?p:i||null})})]}),l.jsxs(Re,{className:S("border shadow-sm",t?"bg-card border-border":"bg-white border-gray-200"),children:[l.jsx(jt,{className:"pb-4",children:l.jsxs(kt,{className:S("flex items-center gap-3 text-xl font-semibold",t?"text-card-foreground":"text-gray-900"),children:[l.jsx(mL,{className:"h-5 w-5 text-primary"}),"Informaes de Acesso"]})}),l.jsx(Ie,{children:l.jsxs("form",{onSubmit:C,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(pe,{htmlFor:"username",className:S("text-sm font-medium",t?"text-card-foreground":"text-gray-700"),children:["Nome de Usurio ",l.jsx("span",{className:"text-destructive",children:"*"})]}),l.jsx(Ke,{id:"username",type:"text",value:a.username,onChange:E=>_("username",E.target.value),className:S("h-11",t?"bg-background border-input text-foreground":"bg-white border-gray-300 text-gray-900"),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{htmlFor:"new-password",className:S("text-sm font-medium",t?"text-card-foreground":"text-gray-700"),children:"Nova Senha"}),l.jsx(Ke,{id:"new-password",type:"password",value:a.newPassword,onChange:E=>_("newPassword",E.target.value),className:S("h-11",t?"bg-background border-input text-foreground":"bg-white border-gray-300 text-gray-900"),placeholder:"Deixe em branco para manter a atual"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{htmlFor:"confirm-password",className:S("text-sm font-medium",t?"text-card-foreground":"text-gray-700"),children:"Confirmar Nova Senha"}),l.jsx(Ke,{id:"confirm-password",type:"password",value:a.confirmPassword,onChange:E=>_("confirmPassword",E.target.value),className:S("h-11",t?"bg-background border-input text-foreground":"bg-white border-gray-300 text-gray-900"),placeholder:"Confirme a nova senha"})]}),l.jsx("div",{className:"pt-4",children:l.jsx(q,{type:"submit",disabled:w||d,className:"bg-primary hover:bg-primary/90 text-primary-foreground px-6 h-11",children:w||d?"Salvando...":"Salvar Alteraes"})})]})})]})]})};var Fh="Switch",[Bz,mW]=br(Fh),[Wz,Hz]=Bz(Fh),lT=g.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:a,required:o,disabled:i,value:c="on",onCheckedChange:u,form:d,...f}=t,[h,m]=g.useState(null),y=Le(e,b=>m(b)),p=g.useRef(!1),v=h?d||!!h.closest("form"):!0,[w,x]=Ns({prop:s,defaultProp:a??!1,onChange:u,caller:Fh});return l.jsxs(Wz,{scope:r,checked:w,disabled:i,children:[l.jsx(ge.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":fT(w),"data-disabled":i?"":void 0,disabled:i,value:c,...f,ref:y,onClick:ce(t.onClick,b=>{x(_=>!_),v&&(p.current=b.isPropagationStopped(),p.current||b.stopPropagation())})}),v&&l.jsx(dT,{control:h,bubbles:!p.current,name:n,value:c,checked:w,required:o,disabled:i,form:d,style:{transform:"translateX(-100%)"}})]})});lT.displayName=Fh;var cT="SwitchThumb",uT=g.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,s=Hz(cT,r);return l.jsx(ge.span,{"data-state":fT(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});uT.displayName=cT;var Gz="SwitchBubbleInput",dT=g.forwardRef(({__scopeSwitch:t,control:e,checked:r,bubbles:n=!0,...s},a)=>{const o=g.useRef(null),i=Le(o,a),c=jy(r),u=iy(e);return g.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&m){const y=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(y)}},[c,r,n]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:i,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});dT.displayName=Gz;function fT(t){return t?"checked":"unchecked"}var hT=lT,qz=uT;const fn=g.forwardRef(({className:t,...e},r)=>l.jsx(hT,{className:S("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:r,children:l.jsx(qz,{className:S("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));fn.displayName=hT.displayName;const Kz=({isDarkMode:t})=>{const{logNotificationAction:e}=iT(),{toast:r}=Jt(),[n,s]=g.useState({emailNotifications:!1,pushNotifications:!1,soundNotifications:!0,dailySummary:!1}),[a,o]=g.useState(!1),i=u=>{s(d=>({...d,[u]:!d[u]}))},c=async()=>{try{o(!0),await new Promise(u=>setTimeout(u,1e3)),localStorage.setItem("notificationSettings",JSON.stringify(n)),await e("update",{settings:n,timestamp:new Date().toISOString()}),r({title:"Sucesso",description:"Configuraes de notificao salvas com sucesso!",variant:"default"})}catch{r({title:"Erro",description:"Erro ao salvar configuraes. Tente novamente.",variant:"destructive"})}finally{o(!1)}};return G.useEffect(()=>{const u=localStorage.getItem("notificationSettings");if(u)try{s(JSON.parse(u))}catch(d){console.error("Erro ao carregar configuraes:",d)}},[]),l.jsxs(Re,{className:S("border",t?"bg-card border-border":"bg-white border-gray-200"),children:[l.jsx(jt,{className:"pb-4",children:l.jsx(kt,{className:S("flex items-center gap-3 text-lg",t?"text-card-foreground":"text-gray-900"),children:"Preferncias de Notificao"})}),l.jsxs(Ie,{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx(pe,{className:S("text-base font-medium",t?"text-card-foreground":"text-gray-900"),children:"Notificaes por Email"}),l.jsx("p",{className:S("text-sm",t?"text-muted-foreground":"text-gray-600"),children:"Receber notificaes de novas mensagens por email"})]}),l.jsx(fn,{checked:n.emailNotifications,onCheckedChange:()=>i("emailNotifications")})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx(pe,{className:S("text-base font-medium",t?"text-card-foreground":"text-gray-900"),children:"Notificaes Push"}),l.jsx("p",{className:S("text-sm",t?"text-muted-foreground":"text-gray-600"),children:"Receber notificaes push no navegador"})]}),l.jsx(fn,{checked:n.pushNotifications,onCheckedChange:()=>i("pushNotifications")})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx(pe,{className:S("text-base font-medium",t?"text-card-foreground":"text-gray-900"),children:"Sons de Notificao"}),l.jsx("p",{className:S("text-sm",t?"text-muted-foreground":"text-gray-600"),children:"Reproduzir som quando receber novas mensagens"})]}),l.jsx(fn,{checked:n.soundNotifications,onCheckedChange:()=>i("soundNotifications")})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx(pe,{className:S("text-base font-medium",t?"text-card-foreground":"text-gray-900"),children:"Resumo Dirio"}),l.jsx("p",{className:S("text-sm",t?"text-muted-foreground":"text-gray-600"),children:"Receber resumo dirio de atividades"})]}),l.jsx(fn,{checked:n.dailySummary,onCheckedChange:()=>i("dailySummary")})]}),l.jsx("div",{className:"pt-6 border-t border-border",children:l.jsx(q,{onClick:c,disabled:a,className:"bg-primary hover:bg-primary/90 text-primary-foreground px-6 h-11",children:a?"Salvando...":"Salvar Configuraes"})})]})]})},Yz=({isDarkMode:t})=>{const{channels:e,loading:r,updateChannelStatus:n,refetch:s}=ul(),[a,o]=g.useState(""),[i,c]=g.useState(null),u=i??e;g.useEffect(()=>{c(null)},[e]);const d=p=>p.includes("Yelena")||p.includes("AI")||p.includes("ticas")?dg:p.includes("Canarana")||p.includes("Souto")||p.includes("Joo")||p.includes("Amrica")?jw:p.includes("Gustavo")||p.includes("Lojas")?eu:p.includes("Andressa")||p.includes("Externo")?TE:As,f=p=>({general:"Geral",store:"Loja",manager:"Gerncia",admin:"Administrao"})[p],h=async(p,v)=>{c(w=>(w??e).map(b=>b.id===p?{...b,isActive:v}:b));try{await n(p,v),ta({title:"Sucesso",description:`Canal ${v?"ativado":"desativado"} com sucesso.`})}catch{ta({title:"Erro",description:`Erro ao ${v?"ativar":"desativar"} o canal.`,variant:"destructive"}),c(x=>(x??e).map(_=>_.id===p?{..._,isActive:!v}:_))}},m=u.filter(p=>p.name.toLowerCase().includes(a.toLowerCase())),y={total:u.length,active:u.filter(p=>p.isActive).length,inactive:u.filter(p=>!p.isActive).length,stores:u.filter(p=>p.type==="store").length};return r?l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx(Re,{children:l.jsx(Ie,{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:l.jsx(As,{className:"h-5 w-5 text-primary"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-bold",children:y.total}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"})]})]})})}),l.jsx(Re,{children:l.jsx(Ie,{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-green-100",children:l.jsx(wy,{className:"h-5 w-5 text-green-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-bold",children:y.active}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Ativos"})]})]})})}),l.jsx(Re,{children:l.jsx(Ie,{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-red-100",children:l.jsx(lL,{className:"h-5 w-5 text-red-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-bold",children:y.inactive}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Inativos"})]})]})})}),l.jsx(Re,{children:l.jsx(Ie,{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-blue-100",children:l.jsx(jw,{className:"h-5 w-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-bold",children:y.stores}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Lojas"})]})]})})})]}),l.jsxs("div",{className:"relative max-w-md",children:[l.jsx(lh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ke,{placeholder:"Buscar canais...",value:a,onChange:p=>o(p.target.value),className:"pl-10"})]}),l.jsx(Re,{children:l.jsx(Ie,{className:"p-0",children:l.jsx("div",{className:"space-y-2 p-4",children:m.length===0?l.jsx("div",{className:"text-center py-8 text-muted-foreground",children:a?"Nenhum canal encontrado.":"Nenhum canal disponvel."}):m.map(p=>{const v=d(p.name);return l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-accent/50 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:l.jsx(v,{className:"h-5 w-5 text-primary"})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"font-medium",children:p.name}),p.isDefault&&l.jsx(gn,{variant:"outline",className:"text-xs",children:"Padro"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(gn,{variant:"secondary",className:"text-xs",children:f(p.type)}),l.jsx(gn,{className:p.isActive?"bg-green-100 text-green-800 text-xs":"bg-red-100 text-red-800 text-xs",children:p.isActive?"Ativo":"Inativo"})]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(q,{variant:"ghost",size:"sm",children:l.jsx(ys,{className:"h-4 w-4"})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm text-muted-foreground",children:p.isActive?"Ativo":"Inativo"}),l.jsx(fn,{checked:p.isActive,onCheckedChange:w=>h(p.id,w)})]})]})]},p.id)})})})})]})},Qz=({isDarkMode:t})=>{const{toast:e}=Jt(),[r,n]=g.useState({notifications:!0,soundAlerts:!1,autoSave:!0,debugMode:!1}),[s,a]=g.useState(!1),o=c=>{n(u=>({...u,[c]:!u[c]}))},i=async()=>{try{a(!0),await new Promise(c=>setTimeout(c,1e3)),localStorage.setItem("systemSettings",JSON.stringify(r)),e({title:"Sucesso",description:"Configuraes do sistema salvas com sucesso!",variant:"default"})}catch{e({title:"Erro",description:"Erro ao salvar configuraes. Tente novamente.",variant:"destructive"})}finally{a(!1)}};return G.useEffect(()=>{const c=localStorage.getItem("systemSettings");if(c)try{n(JSON.parse(c))}catch(u){console.error("Erro ao carregar configuraes:",u)}},[]),l.jsxs(Re,{className:S("border",t?"bg-card border-border":"bg-white border-gray-200"),children:[l.jsx(jt,{className:"pb-4",children:l.jsx(kt,{className:S("flex items-center gap-3 text-lg",t?"text-card-foreground":"text-gray-900"),children:"Configuraes Gerais"})}),l.jsxs(Ie,{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx(pe,{className:S("text-base font-medium",t?"text-card-foreground":"text-gray-900"),children:"Notificaes"}),l.jsx("p",{className:S("text-sm",t?"text-muted-foreground":"text-gray-600"),children:"Receber notificaes do sistema"})]}),l.jsx(fn,{checked:r.notifications,onCheckedChange:()=>o("notifications")})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx(pe,{className:S("text-base font-medium",t?"text-card-foreground":"text-gray-900"),children:"Salvamento Automtico"}),l.jsx("p",{className:S("text-sm",t?"text-muted-foreground":"text-gray-600"),children:"Salvar alteraes automaticamente sem confirmao"})]}),l.jsx(fn,{checked:r.autoSave,onCheckedChange:()=>o("autoSave")})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx(pe,{className:S("text-base font-medium",t?"text-card-foreground":"text-gray-900"),children:"Alertas Sonoros"}),l.jsx("p",{className:S("text-sm",t?"text-muted-foreground":"text-gray-600"),children:"Reproduzir sons para alertas e notificaes"})]}),l.jsx(fn,{checked:r.soundAlerts,onCheckedChange:()=>o("soundAlerts")})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx(pe,{className:S("text-base font-medium",t?"text-card-foreground":"text-gray-900"),children:"Modo Debug"}),l.jsx("p",{className:S("text-sm",t?"text-muted-foreground":"text-gray-600"),children:"Exibir informaes de debug no console"})]}),l.jsx(fn,{checked:r.debugMode,onCheckedChange:()=>o("debugMode")})]}),l.jsx("div",{className:"pt-6 border-t border-border",children:l.jsxs(q,{onClick:i,disabled:s,className:"bg-primary hover:bg-primary/90 text-primary-foreground px-6 h-11 flex items-center gap-2",children:[l.jsx(_L,{size:16}),s?"Salvando...":"Salvar Configuraes"]})})]})]})},Jz=({isDarkMode:t})=>{const{toast:e}=Jt(),[r,n]=g.useState(null),{users:s}=$0(),{channels:a}=ul(),{logs:o}=oT(),i=async v=>{try{n(v);let w="",x="";v==="completo"?(w=await c(),x=`backup_completo_${new Date().toISOString().split("T")[0]}.pdf`):v==="mensagens"?(w=await u(),x=`backup_mensagens_${new Date().toISOString().split("T")[0]}.pdf`):v==="usuarios"?(w=await d(),x=`backup_usuarios_${new Date().toISOString().split("T")[0]}.pdf`):v==="canais"?(w=await f(),x=`backup_canais_${new Date().toISOString().split("T")[0]}.pdf`):v==="auditoria"&&(w=await h(),x=`backup_auditoria_${new Date().toISOString().split("T")[0]}.pdf`);const _=`/tmp/${`backup_temp_${Date.now()}.md`}`,C=new Blob([w],{type:"text/markdown"}),E=URL.createObjectURL(C),{jsPDF:N}=await il(async()=>{const{jsPDF:O}=await import("./jspdf.es.min-4jH189AB.js").then(F=>F.j);return{jsPDF:O}},[]),A=new N;A.setFontSize(22),A.text(`Backup ${v.charAt(0).toUpperCase()+v.slice(1)}`,20,20),A.setFontSize(12),A.text(`Gerado em: ${new Date().toLocaleString("pt-BR")}`,20,30),A.setFontSize(10);const j=A.splitTextToSize(w,180);A.text(j,20,40),A.save(x),e({title:"Sucesso",description:`Backup de ${v} gerado com sucesso!`,variant:"default"})}catch(w){console.error("Erro ao gerar PDF:",w),e({title:"Erro",description:"Erro ao gerar backup. Tente novamente.",variant:"destructive"})}finally{n(null)}},c=async()=>{let v=`# Backup Completo do Sistema

`;v+=`Data: ${new Date().toLocaleString("pt-BR")}

`,v+=`## Usurios (${s.length})

`,s.forEach((x,b)=>{var _;v+=`### ${b+1}. ${x.name}
`,v+=`- Username: ${x.username}
`,v+=`- Funo: ${x.role}
`,v+=`- Canais atribudos: ${((_=x.assignedChannels)==null?void 0:_.length)||0}
`,v+=`
`}),v+=`## Canais (${a.length})

`,a.forEach((x,b)=>{v+=`### ${b+1}. ${x.name}
`,v+=`- ID: ${x.id}
`,v+=`- Tipo: ${x.type}
`,v+=`- Status: ${x.isActive?"Ativo":"Inativo"}
`,v+=`- Padro: ${x.isDefault?"Sim":"No"}

`});const w=o.slice(0,50);return v+=`## Logs de Auditoria (ltimos ${w.length})

`,w.forEach((x,b)=>{v+=`### ${b+1}. Ao: ${x.action}
`,v+=`- Usurio: ${x.user_name||"Sistema"}
`,v+=`- Data: ${new Date(x.created_at).toLocaleString("pt-BR")}
`,x.details&&(v+=`- Detalhes: ${typeof x.details=="string"?x.details:JSON.stringify(x.details)}
`),v+=`
`}),v},u=async()=>{let v=`# Backup de Mensagens

`;return v+=`Data: ${new Date().toLocaleString("pt-BR")}

`,v+=`## Estatsticas de Mensagens por Canal

`,a.forEach((w,x)=>{const b=Math.floor(Math.random()*1e3);v+=`### ${x+1}. ${w.name}
`,v+=`- Total de mensagens: ${b}
`,v+=`- Conversas ativas: ${Math.floor(b/10)}
`,v+=`- ltima mensagem: ${new Date(Date.now()-Math.random()*864e5).toLocaleString("pt-BR")}

`}),v},d=async()=>{let v=`# Backup de Usurios

`;return v+=`Data: ${new Date().toLocaleString("pt-BR")}

`,v+=`## Usurios (${s.length})

`,s.forEach((w,x)=>{var b,_;v+=`### ${x+1}. ${w.name}
`,v+=`- ID: ${w.id}
`,v+=`- Username: ${w.username}
`,v+=`- Funo: ${w.role}
`,v+=`- Canais atribudos: ${((b=w.assignedTabs)==null?void 0:b.join(", "))||"Nenhum"}
`,v+=`- Canais: ${((_=w.assignedChannels)==null?void 0:_.join(", "))||"Nenhum"}
`,v+=`- Criado em: N/A
`,v+=`- Atualizado em: N/A

`}),v},f=async()=>{let v=`# Backup de Canais

`;return v+=`Data: ${new Date().toLocaleString("pt-BR")}

`,v+=`## Canais (${a.length})

`,a.forEach((w,x)=>{v+=`### ${x+1}. ${w.name}
`,v+=`- ID: ${w.id}
`,v+=`- Tipo: ${w.type}
`,v+=`- Status: ${w.isActive?"Ativo":"Inativo"}
`,v+=`- Padro: ${w.isDefault?"Sim":"No"}
`,v+=`- Criado em: N/A
`,v+=`- Atualizado em: N/A

`}),v},h=async()=>{let v=`# Backup de Logs de Auditoria

`;return v+=`Data: ${new Date().toLocaleString("pt-BR")}

`,v+=`## Logs de Auditoria (${o.length})

`,o.forEach((w,x)=>{v+=`### ${x+1}. Ao: ${w.action}
`,v+=`- ID: ${w.id}
`,v+=`- Usurio: ${w.user_name||"Sistema"}
`,v+=`- Data: ${new Date(w.created_at).toLocaleString("pt-BR")}
`,w.details&&(v+=`- Detalhes: ${typeof w.details=="string"?w.details:JSON.stringify(w.details)}
`),v+=`
`}),v},m=async v=>{try{n(v);let w={},x="";v==="mensagens"?(w={type:"messages",data:[]},x=`mensagens_${new Date().toISOString().split("T")[0]}.json`):v==="usuarios"?(w={type:"users",data:s},x=`usuarios_${new Date().toISOString().split("T")[0]}.json`):v==="canais"?(w={type:"channels",data:a},x=`canais_${new Date().toISOString().split("T")[0]}.json`):v==="auditoria"&&(w={type:"audit",data:o},x=`auditoria_${new Date().toISOString().split("T")[0]}.json`);const b=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),_=URL.createObjectURL(b),C=document.createElement("a");C.href=_,C.download=x,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(_),e({title:"Sucesso",description:`Dados de ${v} exportados com sucesso!`,variant:"default"})}catch(w){console.error("Erro ao exportar dados:",w),e({title:"Erro",description:"Erro ao exportar dados. Tente novamente.",variant:"destructive"})}finally{n(null)}},y=[{id:"completo",title:"Backup Completo",description:"Gerar um documento PDF com todos os dados do sistema",icon:Aw},{id:"mensagens",title:"Backup de Mensagens",description:"Gerar um documento PDF com dados de mensagens e conversas",icon:pn},{id:"usuarios",title:"Backup de Usurios",description:"Gerar um documento PDF com dados de usurios",icon:pn},{id:"canais",title:"Backup de Canais",description:"Gerar um documento PDF com dados de canais",icon:Nw},{id:"auditoria",title:"Backup de Auditoria",description:"Gerar um documento PDF com logs de auditoria",icon:cL}],p=[{id:"mensagens",title:"Mensagens",description:"Exportar todas as conversas e mensagens em JSON",icon:pn},{id:"usuarios",title:"Usurios",description:"Exportar dados de usurios e perfis em JSON",icon:CE},{id:"canais",title:"Canais",description:"Exportar dados de canais em JSON",icon:Nw},{id:"auditoria",title:"Auditoria",description:"Exportar logs de auditoria em JSON",icon:Po}];return l.jsx("div",{className:S("p-6",t?"bg-background":"bg-gray-50"),children:l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs(Re,{className:S("border",t?"bg-card border-border":"bg-white border-gray-200"),children:[l.jsxs(jt,{className:"pb-4",children:[l.jsxs(kt,{className:S("flex items-center gap-3 text-lg",t?"text-card-foreground":"text-gray-900"),children:[l.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:l.jsx(Aw,{className:"h-5 w-5 text-primary"})}),"Backup em Documento PDF"]}),l.jsx("p",{className:S("text-sm",t?"text-muted-foreground":"text-gray-600"),children:"Gere documentos PDF com dados do sistema para backup e documentao"})]}),l.jsx(Ie,{children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map(v=>l.jsxs("div",{className:S("flex flex-col p-4 rounded-lg border transition-all duration-200 hover:shadow-md",t?"border-border bg-background/50 hover:bg-background/80":"border-gray-200 bg-gray-50 hover:bg-white"),children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:S("p-2 rounded-lg",t?"bg-[#27272a]":"bg-white"),children:l.jsx(v.icon,{size:18,className:"text-[#b5103c]"})}),l.jsxs("div",{children:[l.jsx("h4",{className:S("font-medium",t?"text-card-foreground":"text-gray-900"),children:v.title}),l.jsx("p",{className:S("text-xs",t?"text-muted-foreground":"text-gray-600"),children:v.description})]})]}),l.jsx(q,{onClick:()=>i(v.id),disabled:r===v.id,className:"bg-[#b5103c] hover:bg-[#9a0e35] text-white mt-auto",children:r===v.id?"Gerando PDF...":"Gerar PDF"})]},v.id))})})]}),l.jsxs(Re,{className:S("border",t?"bg-card border-border":"bg-white border-gray-200"),children:[l.jsxs(jt,{className:"pb-4",children:[l.jsxs(kt,{className:S("flex items-center gap-3 text-lg",t?"text-card-foreground":"text-gray-900"),children:[l.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:l.jsx(fg,{className:"h-5 w-5 text-primary"})}),"Exportao de Dados em JSON"]}),l.jsx("p",{className:S("text-sm",t?"text-muted-foreground":"text-gray-600"),children:"Exporte dados do sistema em formato JSON para uso em outras aplicaes"})]}),l.jsx(Ie,{className:"space-y-4",children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(v=>l.jsxs("div",{className:S("flex items-center justify-between p-4 rounded-lg border",t?"border-border bg-background/50":"border-gray-200 bg-gray-50"),children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:S("p-2 rounded-lg",t?"bg-[#27272a]":"bg-white"),children:l.jsx(v.icon,{size:16,className:"text-[#b5103c]"})}),l.jsxs("div",{children:[l.jsx("h4",{className:S("font-medium text-sm",t?"text-card-foreground":"text-gray-900"),children:v.title}),l.jsx("p",{className:S("text-xs",t?"text-muted-foreground":"text-gray-600"),children:v.description})]})]}),l.jsxs(q,{onClick:()=>m(v.id),disabled:r===v.id,variant:"outline",size:"sm",className:S("flex items-center gap-1",t?"border-[#3f3f46] text-[#a1a1aa] hover:bg-[#27272a]":""),children:[l.jsx(fg,{size:14}),r===v.id?"Exportando...":"Exportar JSON"]})]},v.id))})})]}),l.jsxs(Re,{className:S("border",t?"bg-card border-border":"bg-white border-gray-200"),children:[l.jsxs(jt,{className:"pb-4",children:[l.jsxs(kt,{className:S("flex items-center gap-3 text-lg",t?"text-card-foreground":"text-gray-900"),children:[l.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:l.jsx(Iw,{className:"h-5 w-5 text-primary"})}),"Restaurar Backup"]}),l.jsx("p",{className:S("text-sm",t?"text-muted-foreground":"text-gray-600"),children:"Restaure dados a partir de um arquivo de backup"})]}),l.jsx(Ie,{children:l.jsxs("div",{className:S("border-2 border-dashed rounded-lg p-6 text-center",t?"border-border":"border-gray-300"),children:[l.jsx(Iw,{size:32,className:S("mx-auto mb-2",t?"text-muted-foreground":"text-gray-400")}),l.jsx("p",{className:S("text-sm",t?"text-muted-foreground":"text-gray-600"),children:"Arraste um arquivo de backup aqui ou clique para selecionar"}),l.jsx(q,{variant:"outline",size:"sm",className:S("mt-3",t?"border-border text-foreground hover:bg-accent":""),children:"Selecionar Arquivo"})]})})]})]})})};var np="rovingFocusGroup.onEntryFocus",Xz={bubbles:!1,cancelable:!0},hu="RovingFocusGroup",[ev,mT,Zz]=my(hu),[eB,pT]=br(hu,[Zz]),[tB,rB]=eB(hu),gT=g.forwardRef((t,e)=>l.jsx(ev.Provider,{scope:t.__scopeRovingFocusGroup,children:l.jsx(ev.Slot,{scope:t.__scopeRovingFocusGroup,children:l.jsx(nB,{...t,ref:e})})}));gT.displayName=hu;var nB=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=t,h=g.useRef(null),m=Le(e,h),y=Sh(a),[p,v]=Ns({prop:o,defaultProp:i??null,onChange:c,caller:hu}),[w,x]=g.useState(!1),b=_t(u),_=mT(r),C=g.useRef(!1),[E,N]=g.useState(0);return g.useEffect(()=>{const A=h.current;if(A)return A.addEventListener(np,b),()=>A.removeEventListener(np,b)},[b]),l.jsx(tB,{scope:r,orientation:n,dir:y,loop:s,currentTabStopId:p,onItemFocus:g.useCallback(A=>v(A),[v]),onItemShiftTab:g.useCallback(()=>x(!0),[]),onFocusableItemAdd:g.useCallback(()=>N(A=>A+1),[]),onFocusableItemRemove:g.useCallback(()=>N(A=>A-1),[]),children:l.jsx(ge.div,{tabIndex:w||E===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...t.style},onMouseDown:ce(t.onMouseDown,()=>{C.current=!0}),onFocus:ce(t.onFocus,A=>{const j=!C.current;if(A.target===A.currentTarget&&j&&!w){const O=new CustomEvent(np,Xz);if(A.currentTarget.dispatchEvent(O),!O.defaultPrevented){const F=_().filter(W=>W.focusable),P=F.find(W=>W.active),V=F.find(W=>W.id===p),H=[P,V,...F].filter(Boolean).map(W=>W.ref.current);xT(H,d)}}C.current=!1}),onBlur:ce(t.onBlur,()=>x(!1))})})}),vT="RovingFocusGroupItem",yT=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:a,children:o,...i}=t,c=vs(),u=a||c,d=rB(vT,r),f=d.currentTabStopId===u,h=mT(r),{onFocusableItemAdd:m,onFocusableItemRemove:y,currentTabStopId:p}=d;return g.useEffect(()=>{if(n)return m(),()=>y()},[n,m,y]),l.jsx(ev.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:l.jsx(ge.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...i,ref:e,onMouseDown:ce(t.onMouseDown,v=>{n?d.onItemFocus(u):v.preventDefault()}),onFocus:ce(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:ce(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const w=oB(v,d.orientation,d.dir);if(w!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let b=h().filter(_=>_.focusable).map(_=>_.ref.current);if(w==="last")b.reverse();else if(w==="prev"||w==="next"){w==="prev"&&b.reverse();const _=b.indexOf(v.currentTarget);b=d.loop?iB(b,_+1):b.slice(_+1)}setTimeout(()=>xT(b))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:p!=null}):o})})});yT.displayName=vT;var sB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function aB(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function oB(t,e,r){const n=aB(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return sB[n]}function xT(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function iB(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var lB=gT,cB=yT,Uh="Tabs",[uB,pW]=br(Uh,[pT]),wT=pT(),[dB,M0]=uB(Uh),bT=g.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:i,activationMode:c="automatic",...u}=t,d=Sh(i),[f,h]=Ns({prop:n,onChange:s,defaultProp:a??"",caller:Uh});return l.jsx(dB,{scope:r,baseId:vs(),value:f,onValueChange:h,orientation:o,dir:d,activationMode:c,children:l.jsx(ge.div,{dir:d,"data-orientation":o,...u,ref:e})})});bT.displayName=Uh;var _T="TabsList",ST=g.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...s}=t,a=M0(_T,r),o=wT(r);return l.jsx(lB,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:n,children:l.jsx(ge.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});ST.displayName=_T;var CT="TabsTrigger",ET=g.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...a}=t,o=M0(CT,r),i=wT(r),c=jT(o.baseId,n),u=kT(o.baseId,n),d=n===o.value;return l.jsx(cB,{asChild:!0,...i,focusable:!s,active:d,children:l.jsx(ge.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:e,onMouseDown:ce(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:ce(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:ce(t.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!s&&f&&o.onValueChange(n)})})})});ET.displayName=CT;var NT="TabsContent",AT=g.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:s,children:a,...o}=t,i=M0(NT,r),c=jT(i.baseId,n),u=kT(i.baseId,n),d=n===i.value,f=g.useRef(d);return g.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),l.jsx(_r,{present:s||d,children:({present:h})=>l.jsx(ge.div,{"data-state":d?"active":"inactive","data-orientation":i.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:h&&a})})});AT.displayName=NT;function jT(t,e){return`${t}-trigger-${e}`}function kT(t,e){return`${t}-content-${e}`}var fB=bT,TT=ST,PT=ET,RT=AT;const hB=fB,IT=g.forwardRef(({className:t,...e},r)=>l.jsx(TT,{ref:r,className:S("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));IT.displayName=TT.displayName;const tv=g.forwardRef(({className:t,...e},r)=>l.jsx(PT,{ref:r,className:S("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));tv.displayName=PT.displayName;const rv=g.forwardRef(({className:t,...e},r)=>l.jsx(RT,{ref:r,className:S("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));rv.displayName=RT.displayName;const OT=()=>{const[t,e]=g.useState([]),[r,n]=g.useState(!0),[s,a]=g.useState(!1),[o,i]=g.useState(""),{user:c}=Tt(),u=async()=>{try{console.log(" [USE_AI_PROVIDERS] Loading providers for user:",c==null?void 0:c.id),n(!0);const p=await na.getProviders();e(p),i("")}catch(p){console.error(" [USE_AI_PROVIDERS] Error loading providers:",p),i(p instanceof Error?p.message:"Erro ao carregar provedores")}finally{n(!1)}};return g.useEffect(()=>{c?(console.log(" [USE_AI_PROVIDERS] User authenticated, loading providers"),u()):console.log(" [USE_AI_PROVIDERS] No authenticated user, waiting...")},[c]),{providers:t,loading:r,refreshing:s,error:o,createProvider:async p=>{try{console.log(" [USE_AI_PROVIDERS] Creating provider for user:",c==null?void 0:c.id);const v=await na.createProvider(p,c==null?void 0:c.id);return v.success&&await u(),v}catch(v){throw v}},updateProvider:async(p,v)=>{try{console.log(" [USE_AI_PROVIDERS] Updating provider:",p,"for user:",c==null?void 0:c.id);const w=await na.updateProvider(p,v,c==null?void 0:c.id);return w.success&&await u(),w}catch(w){throw w}},deleteProvider:async p=>{try{console.log(" [USE_AI_PROVIDERS] Deleting provider:",p,"for user:",c==null?void 0:c.id),await na.deleteProvider(p,c==null?void 0:c.id),await u()}catch(v){throw v}},testProvider:async p=>{try{return await na.testProvider("test")}catch(v){throw v}},refreshProviders:async()=>{try{a(!0),await u()}finally{a(!1)}}}},mB=({provider:t,onClose:e})=>{const{createProvider:r,updateProvider:n,testProvider:s}=OT(),[a,o]=g.useState(!1),[i,c]=g.useState(!1),[u,d]=g.useState({name:"",provider_type:"openai",api_key:"",base_url:"",default_model:"",is_active:!0,advanced_settings:{}});g.useEffect(()=>{t&&d({name:t.name,provider_type:t.provider_type,api_key:t.api_key||"",base_url:t.base_url||"",default_model:t.default_model||"",is_active:t.is_active,advanced_settings:t.advanced_settings||{}})},[t]);const f=async m=>{m.preventDefault(),o(!0);try{let y;t?y=await n(t.id,u):y=await r(u),y.success?(Mo.success(y.message||"Operao realizada com sucesso!"),e()):Mo.error(y.message||"Erro na operao")}catch{Mo.error("Erro ao salvar provedor")}finally{o(!1)}},h=async()=>{c(!0);try{const m=await s(u);m.success?Mo.success(m.message):Mo.error(m.message)}catch{Mo.error("Erro ao testar provedor")}finally{c(!1)}};return l.jsx(Is,{open:!0,onOpenChange:e,children:l.jsxs(Qn,{className:"sm:max-w-md",children:[l.jsx(Os,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(Jn,{children:t?"Editar Provedor":"Novo Provedor"}),l.jsx(q,{variant:"ghost",size:"sm",onClick:e,className:"h-6 w-6 p-0",children:l.jsx(Dn,{className:"h-4 w-4"})})]})}),l.jsxs("form",{onSubmit:f,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(pe,{htmlFor:"name",children:"Nome"}),l.jsx(Ke,{id:"name",value:u.name,onChange:m=>d(y=>({...y,name:m.target.value})),placeholder:"Nome do provedor",required:!0})]}),l.jsxs("div",{children:[l.jsx(pe,{htmlFor:"provider_type",children:"Tipo"}),l.jsxs(Pa,{value:u.provider_type,onValueChange:m=>d(y=>({...y,provider_type:m})),children:[l.jsx(ks,{children:l.jsx(Ra,{})}),l.jsxs(Ts,{children:[l.jsx(Dt,{value:"openai",children:"OpenAI"}),l.jsx(Dt,{value:"anthropic",children:"Anthropic"}),l.jsx(Dt,{value:"google",children:"Google"}),l.jsx(Dt,{value:"custom",children:"Personalizado"})]})]})]}),l.jsxs("div",{children:[l.jsx(pe,{htmlFor:"api_key",children:"API Key"}),l.jsx(Ke,{id:"api_key",type:"password",value:u.api_key,onChange:m=>d(y=>({...y,api_key:m.target.value})),placeholder:"Sua API key",required:!0})]}),l.jsxs("div",{children:[l.jsx(pe,{htmlFor:"base_url",children:"URL Base (opcional)"}),l.jsx(Ke,{id:"base_url",value:u.base_url,onChange:m=>d(y=>({...y,base_url:m.target.value})),placeholder:"https://api.example.com"})]}),l.jsxs("div",{children:[l.jsx(pe,{htmlFor:"default_model",children:"Modelo Padro (opcional)"}),l.jsx(Ke,{id:"default_model",value:u.default_model,onChange:m=>d(y=>({...y,default_model:m.target.value})),placeholder:"gpt-4, claude-3, etc."})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(fn,{id:"is_active",checked:u.is_active,onCheckedChange:m=>d(y=>({...y,is_active:m}))}),l.jsx(pe,{htmlFor:"is_active",children:"Ativo"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(q,{type:"button",variant:"outline",onClick:h,disabled:i||!u.api_key,className:"flex-1",children:i?"Testando...":"Testar Conexo"}),l.jsx(q,{type:"submit",disabled:a,className:"flex-1 bg-[#b5103c] hover:bg-[#b5103c]/90",children:a?"Salvando...":"Salvar"})]})]})]})})},pB=({isDarkMode:t})=>{const{providers:e,loading:r,refreshing:n,deleteProvider:s,refreshProviders:a}=OT(),[o,i]=g.useState(!1),[c,u]=g.useState(null),d=p=>{u(p),i(!0)},f=async p=>{window.confirm("Tem certeza que deseja excluir este provedor?")&&await s(p)},h=()=>{i(!1),u(null)},m=()=>{u(null),i(!0)},y=()=>{a()};return r?l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#b5103c]"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:S("text-2xl font-bold",t?"text-white":"text-gray-900"),children:"Provedores de IA"}),l.jsx("p",{className:S("text-sm mt-1",t?"text-gray-400":"text-gray-600"),children:"Configure e gerencie seus provedores de IA"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(q,{onClick:y,variant:"outline",size:"sm",disabled:n,className:"gap-2",children:[l.jsx(PE,{className:S("h-4 w-4",n&&"animate-spin")}),"Atualizar"]}),l.jsxs(q,{onClick:m,className:"gap-2 bg-[#b5103c] hover:bg-[#9d0e34]",children:[l.jsx(Xc,{className:"h-4 w-4"}),"Novo Provedor"]})]})]}),e.length===0?l.jsx(Re,{className:S(t?"bg-[#18181b] border-[#3f3f46]":""),children:l.jsx(Ie,{className:"py-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:S("text-lg",t?"text-gray-400":"text-gray-600"),children:"Nenhum provedor configurado"}),l.jsx("p",{className:S("text-sm mt-1","text-gray-500"),children:"Configure um provedor de IA para comear a usar os recursos avanados"}),l.jsx(q,{onClick:m,className:"mt-4 bg-[#b5103c] hover:bg-[#9d0e34]",children:"Criar Primeiro Provedor"})]})})}):l.jsx("div",{className:"grid gap-4",children:e.map(p=>l.jsxs(Re,{className:S(t?"bg-[#18181b] border-[#3f3f46]":""),children:[l.jsx(jt,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(kt,{className:S("text-lg",t?"text-white":"text-gray-900"),children:p.name}),l.jsx(gn,{variant:p.is_active?"default":"secondary",children:p.is_active?"Ativo":"Inativo"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(q,{onClick:()=>d(p),variant:"outline",size:"sm",className:"gap-1",children:[l.jsx(ch,{className:"h-3 w-3"}),"Editar"]}),l.jsxs(q,{onClick:()=>f(p.id),variant:"outline",size:"sm",className:"gap-1 text-red-600 hover:text-red-700",children:[l.jsx(Zc,{className:"h-3 w-3"}),"Excluir"]})]})]})}),l.jsx(Ie,{children:l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:S("font-medium",t?"text-gray-300":"text-gray-700"),children:"Tipo:"}),l.jsx("span",{className:S("ml-2",t?"text-gray-400":"text-gray-600"),children:p.provider_type})]}),p.default_model&&l.jsxs("div",{children:[l.jsx("span",{className:S("font-medium",t?"text-gray-300":"text-gray-700"),children:"Modelo:"}),l.jsx("span",{className:S("ml-2",t?"text-gray-400":"text-gray-600"),children:p.default_model})]}),p.base_url&&l.jsxs("div",{className:"col-span-2",children:[l.jsx("span",{className:S("font-medium",t?"text-gray-300":"text-gray-700"),children:"URL Base:"}),l.jsx("span",{className:S("ml-2 break-all",t?"text-gray-400":"text-gray-600"),children:p.base_url})]})]})})]},p.id))}),o&&l.jsx(mB,{provider:c,onClose:h})]})},gB=({isDarkMode:t})=>l.jsx("div",{className:t?"bg-[#18181b] p-6 rounded-xl":"bg-white border border-gray-200 p-6 rounded-xl",children:l.jsx(pB,{isDarkMode:t})}),LT=[{type:"conversation_summary",label:"Resumo de Conversa",description:"Prompt para a funo de resumir conversas.",defaultPrompt:"Voc deve resumir esta conversa, destacando os pontos principais, aes pendentes e sentimento do cliente. Seja objetivo."},{type:"quick_response",label:"Resposta Rpida",description:"Prompt para sugerir uma resposta rpida baseada no contexto e ltima mensagem.",defaultPrompt:"Com base no contexto da conversa e na ltima mensagem recebida, gere uma resposta breve e til para o cliente."},{type:"report_conversations",label:"Relatrio de Conversas",description:"Prompt para gerao de relatrio focado em conversas.",defaultPrompt:"Analise todos os dados de conversas e gere um relatrio com padres, volume, sentimento e insights relevantes."},{type:"report_channels",label:"Relatrio de Canais",description:"Prompt para relatrio global sobre canais.",defaultPrompt:"Analise os dados dos canais e fornea insights sobre performance, mensagens enviadas e recebidas, gargalos e oportunidades."},{type:"report_custom",label:"Relatrio Personalizado",description:"Prompt para relatrios totalmente customizveis pelo usurio.",defaultPrompt:"Use este espao para criar prompts customizados para relatrios inteligentes."},{type:"report_exams",label:"Relatrio de Exames",description:"Prompt para relatrio focado em exames (agendados, realizados, pendentes).",defaultPrompt:"Analise os dados dos exames e gere um relatrio detalhado sobre agendamentos, status dos exames, taxas de concluso e insights relevantes. Destaque exames pendentes, resolvidos e qualquer tendncia perceptvel nos dados."}],Zo=()=>LT;class sp{static async getAllPrompts(){const{data:e,error:r}=await ne.from("ai_prompts").select("*").order("prompt_type",{ascending:!0});return r?(console.error("[AIPromptService] Erro ao buscar prompts:",r),[]):e}static async upsertPrompt(e){var i;const r=((i=Zo().find(c=>c.type===e.prompt_type))==null?void 0:i.label)||"",n=typeof e.prompt_content=="string"?e.prompt_content:"";if(!r||!n)throw new Error("Campos obrigatrios (name, prompt_content) ausentes no upsertPrompt");let s={...e,name:r,prompt_content:n,is_active:typeof e.is_active=="boolean"?e.is_active:!0,updated_at:new Date().toISOString()};const{data:a,error:o}=await ne.from("ai_prompts").upsert([s],{onConflict:"prompt_type"}).select().single();if(o)throw o;return a}static async restoreDefaultPrompt(e){const r=LT.find(a=>a.type===e);if(!r)return;const{data:n,error:s}=await ne.from("ai_prompts").upsert([{prompt_type:e,name:r.label,prompt_content:r.defaultPrompt,description:r.description,is_active:!0,updated_at:new Date().toISOString()}],{onConflict:"prompt_type"}).select().single();if(s)throw s;return n}}function j_(){return{conversation_summary:null,quick_response:null,report_conversations:null,report_channels:null,report_custom:null,report_exams:null}}const vB=({isDarkMode:t})=>{const[e,r]=g.useState(j_),[n,s]=g.useState(!0),[a,o]=g.useState(null),[i,c]=g.useState("");g.useEffect(()=>{u()},[]);const u=async()=>{s(!0);try{const m=await sp.getAllPrompts(),y=j_();for(const p of Zo()){const v=m.find(w=>w.prompt_type===p.type);y[p.type]=v||null}r(y)}catch{ta({title:"Erro",description:"Erro ao carregar prompts de IA.",variant:"destructive"})}finally{s(!1)}},d=m=>{var y,p;o(m),c(((y=e[m])==null?void 0:y.prompt_content)||((p=Zo().find(v=>v.type===m))==null?void 0:p.defaultPrompt)||"")},f=async m=>{var y,p;try{await sp.upsertPrompt({prompt_type:m,name:((y=Zo().find(v=>v.type===m))==null?void 0:y.label)||"",prompt_content:i,description:(p=Zo().find(v=>v.type===m))==null?void 0:p.description,is_active:!0}),ta({title:"Sucesso",description:"Prompt salvo."}),o(null),u()}catch{ta({title:"Erro",description:"No foi possvel salvar o prompt.",variant:"destructive"})}},h=async m=>{try{await sp.restoreDefaultPrompt(m),ta({title:"Restaurado",description:"Prompt restaurado para o padro."}),o(null),u()}catch{ta({title:"Erro",description:"No foi possvel restaurar o prompt padro.",variant:"destructive"})}};return l.jsx("div",{children:l.jsx(Re,{className:`border ${t?"bg-[#232323] border-[#333]":"bg-white border-gray-200 shadow"}`,children:l.jsx(Ie,{className:"space-y-6 pt-6",children:n?l.jsx("div",{className:"text-center text-gray-500",children:"Carregando..."}):l.jsx("div",{className:"space-y-4",children:Zo().map(m=>{var y;return l.jsxs(Re,{className:t?"bg-[#181818] border-[#333]":"bg-gray-50 border-gray-200",children:[l.jsxs(jt,{className:"pb-2 flex flex-row items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(pn,{size:18,className:"text-primary"}),l.jsx(kt,{className:t?"text-white text-base":"text-gray-900 text-base",children:m.label})]}),a!==m.type&&l.jsx(q,{size:"sm",variant:"outline",className:"ml-2",onClick:()=>d(m.type),children:"Editar"})]}),l.jsxs(Ie,{children:[l.jsx("p",{className:t?"text-gray-400 text-xs mb-2":"text-gray-600 text-xs mb-2",children:m.description}),a===m.type?l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{children:"Prompt"}),l.jsx(Lc,{value:i,onChange:p=>c(p.target.value),className:t?"bg-[#232323] border-[#444] text-white font-mono":"bg-white border-gray-300 font-mono",rows:4}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(q,{size:"sm",onClick:()=>f(m.type),className:"bg-[#b5103c] text-white",children:"Salvar"}),l.jsx(q,{size:"sm",variant:"outline",onClick:()=>o(null),children:"Cancelar"}),l.jsx(q,{size:"sm",variant:"outline",onClick:()=>h(m.type),children:"Restaurar Padro"})]})]}):l.jsxs("div",{children:[l.jsx(pe,{children:"Prompt Atual:"}),l.jsx("div",{className:"mt-1 rounded p-2 text-xs whitespace-pre-wrap font-mono "+(t?"bg-[#232323] text-gray-50":"bg-white text-gray-800"),style:{minHeight:56},children:((y=e[m.type])==null?void 0:y.prompt_content)||m.defaultPrompt})]})]})]},m.type)})})})})})},yB=({isDarkMode:t})=>{const[e,r]=g.useState("providers");return l.jsx("div",{className:"max-w-4xl mx-auto my-4",children:l.jsxs(hB,{value:e,onValueChange:r,children:[l.jsxs(IT,{className:S("flex p-1 rounded-lg mb-6 w-full gap-4 justify-center",t?"bg-[#18181b]":"bg-gray-100 border-gray-200"),children:[l.jsxs(tv,{value:"providers",className:S("flex items-center gap-2 px-8 py-4 font-semibold rounded-lg text-base data-[state=active]:bg-[#b5103c] data-[state=active]:text-white transition-all",t?"text-gray-300":"text-gray-700"),children:[l.jsx(ol,{size:22}),"Provedores de IA"]}),l.jsxs(tv,{value:"prompts",className:S("flex items-center gap-2 px-8 py-4 font-semibold rounded-lg text-base data-[state=active]:bg-[#b5103c] data-[state=active]:text-white transition-all",t?"text-gray-300":"text-gray-700"),children:[l.jsx(pn,{size:22}),"Prompts de IA"]})]}),l.jsx(rv,{value:"providers",className:"pt-1",children:l.jsx(gB,{isDarkMode:t})}),l.jsx(rv,{value:"prompts",className:"pt-1",children:l.jsx(vB,{isDarkMode:t})})]})})},If=class If{constructor(e){Ee(this,"config");Ee(this,"setWebhookForChannel",async e=>{try{const r=If.N8N_WEBHOOK_MAPPINGS[e];if(!r)return{success:!1,error:`Webhook URL no encontrado para o canal: ${e}`};console.log(` [EVOLUTION_API] Configurando webhook para o canal ${e}: ${r}`);const n=`${this.config.baseUrl}/webhook/set/${this.config.instanceName}`,s={webhookUrl:r,events:["WEBHOOK_BASE64","MESSAGES_UPSERT","GROUPS_UPSERT"],enabled:!0,webhookBase64:!0},a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",apikey:this.config.apiKey},body:JSON.stringify(s)});if(!a.ok){const i=await a.text();return console.error(" [EVOLUTION_API] Erro ao configurar webhook:",a.status,i),{success:!1,error:`HTTP ${a.status}: ${i}`}}const o=await a.json();return console.log(" [EVOLUTION_API] Webhook configurado com sucesso:",o),{success:!0}}catch(r){return console.error(" [EVOLUTION_API] Erro ao configurar webhook:",r),{success:!1,error:r instanceof Error?r.message:"Erro desconhecido"}}});Ee(this,"sendTextMessage",async(e,r)=>{var n,s,a,o,i,c;try{console.log(" [EVOLUTION_API] Enviando mensagem de texto:",{instanceName:this.config.instanceName,phoneNumber:e,messageLength:r.length});const u=`${this.config.baseUrl}/message/sendText/${this.config.instanceName}`,d={number:e,text:r};console.log(" [EVOLUTION_API] URL:",u),console.log(" [EVOLUTION_API] Payload:",d);const f=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json",apikey:this.config.apiKey},body:JSON.stringify(d)});if(console.log(" [EVOLUTION_API] Status da resposta:",f.status),!f.ok){const m=await f.text();return console.error(" [EVOLUTION_API] Erro na resposta:",m),{success:!1,error:`HTTP ${f.status}: ${m}`}}const h=await f.json();return console.log(" [EVOLUTION_API] Resultado:",h),Array.isArray(h)&&h.length>0&&h[0].success?{success:!0,messageId:(s=(n=h[0].data)==null?void 0:n.key)==null?void 0:s.id}:h.success?{success:!0,messageId:((o=(a=h.data)==null?void 0:a.key)==null?void 0:o.id)||((i=h.key)==null?void 0:i.id)}:h.status==="error"?{success:!1,error:h.message||"Erro desconhecido"}:{success:!0,messageId:((c=h.key)==null?void 0:c.id)||h.messageId}}catch(u){return console.error(" [EVOLUTION_API] Erro ao enviar mensagem:",u),{success:!1,error:u instanceof Error?u.message:"Erro desconhecido"}}});Ee(this,"sendMediaMessage",async(e,r,n="",s,a="",o="")=>{var i,c,u,d,f,h;try{console.log(" [EVOLUTION_API] Enviando mensagem de mdia:",{instanceName:this.config.instanceName,phoneNumber:e,mediaType:s,captionLength:n.length,mimetype:a,fileName:o});const m=`${this.config.baseUrl}/message/sendMedia/${this.config.instanceName}`,y={number:e,mediatype:s,mimetype:a,caption:n,media:r,fileName:o};console.log(" [EVOLUTION_API] URL:",m),console.log(" [EVOLUTION_API] Payload:",JSON.stringify(y));const p=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json",apikey:this.config.apiKey},body:JSON.stringify(y)});if(console.log(" [EVOLUTION_API] Status da resposta:",p.status),!p.ok){const w=await p.text();return console.error(" [EVOLUTION_API] Erro na resposta:",w),{success:!1,error:`HTTP ${p.status}: ${w}`}}const v=await p.json();return console.log(" [EVOLUTION_API] Resultado:",v),Array.isArray(v)&&v.length>0&&v[0].success?{success:!0,messageId:(c=(i=v[0].data)==null?void 0:i.key)==null?void 0:c.id}:v.success?{success:!0,messageId:((d=(u=v.data)==null?void 0:u.key)==null?void 0:d.id)||((f=v.key)==null?void 0:f.id)}:v.status==="error"?{success:!1,error:v.message||"Erro desconhecido"}:{success:!0,messageId:((h=v.key)==null?void 0:h.id)||v.messageId}}catch(m){return console.error(" [EVOLUTION_API] Erro ao enviar mdia:",m),{success:!1,error:m instanceof Error?m.message:"Erro desconhecido"}}});Ee(this,"getQRCodeForInstance",async e=>{try{const r=e||this.config.instanceName;console.log(" [EVOLUTION_API] Obtendo QR Code para:",r);const n=`${this.config.baseUrl}/instance/connect/${r}`;console.log(" [EVOLUTION_API] URL:",n);const s=await fetch(n,{method:"GET",headers:{apikey:this.config.apiKey}});if(console.log(" [EVOLUTION_API] Status da resposta:",s.status),!s.ok){const i=await s.text();return console.error(" [EVOLUTION_API] Erro na resposta:",i),{success:!1,error:`HTTP ${s.status}: ${i}`}}const a=await s.json();console.log(" [EVOLUTION_API] Resultado:",a);let o="";if(a.base64)o=a.base64;else if(a.code)o=a.code;else if(a.qrcode)o=a.qrcode;else if(a.qr)o=a.qr;else return console.error(" [EVOLUTION_API] Formato de resposta inesperado:",a),{success:!1,error:"QR Code no encontrado na resposta da API"};return{success:!0,qrCode:o,pairingCode:a.pairingCode}}catch(r){return console.error(" [EVOLUTION_API] Erro ao obter QR Code:",r),{success:!1,error:r instanceof Error?r.message:"Erro desconhecido"}}});Ee(this,"getConnectionStatus",async e=>{var r;try{const n=e||this.config.instanceName;console.log(" [EVOLUTION_API] Verificando status de conexo para:",n);const s=`${this.config.baseUrl}/instance/connectionState/${n}`;console.log(" [EVOLUTION_API] URL:",s);const a=await fetch(s,{method:"GET",headers:{apikey:this.config.apiKey}});if(console.log(" [EVOLUTION_API] Status da resposta:",a.status),!a.ok){const u=await a.text();return console.error(" [EVOLUTION_API] Erro na resposta:",u),{success:!1,connected:!1,error:`HTTP ${a.status}: ${u}`}}const o=await a.json();console.log(" [EVOLUTION_API] Resultado:",o);let i="";return o.state?i=o.state:(r=o.instance)!=null&&r.state?i=o.instance.state:o.connectionState&&(i=o.connectionState),{success:!0,connected:i==="open",state:i,error:o.error}}catch(n){return console.error(" [EVOLUTION_API] Erro ao verificar status:",n),{success:!1,connected:!1,error:n instanceof Error?n.message:"Erro desconhecido"}}});Ee(this,"restartInstance",async e=>{try{const r=e||this.config.instanceName;console.log(" [EVOLUTION_API] Reiniciando instncia:",r);const n=`${this.config.baseUrl}/instance/restart/${r}`,s=await fetch(n,{method:"PUT",headers:{apikey:this.config.apiKey}});if(!s.ok)return console.error(" [EVOLUTION_API] Erro ao reiniciar:",s.status),!1;const a=await s.json();return console.log(" [EVOLUTION_API] Resultado:",a),a.status!=="error"}catch(r){return console.error(" [EVOLUTION_API] Erro ao reiniciar instncia:",r),!1}});Ee(this,"logoutInstance",async e=>{try{const r=e||this.config.instanceName;console.log(" [EVOLUTION_API] Fazendo logout da instncia:",r);const n=`${this.config.baseUrl}/instance/logout/${r}`,s=await fetch(n,{method:"DELETE",headers:{apikey:this.config.apiKey}});if(!s.ok){const o=await s.text();return console.error(" [EVOLUTION_API] Erro ao fazer logout:",s.status,o),{success:!1,error:`HTTP ${s.status}: ${o}`}}const a=await s.json();return console.log(" [EVOLUTION_API] Resultado:",a),a.status==="error"?{success:!1,error:a.message||"Erro ao fazer logout"}:{success:!0}}catch(r){return console.error(" [EVOLUTION_API] Erro ao fazer logout:",r),{success:!1,error:r instanceof Error?r.message:"Erro desconhecido"}}});Ee(this,"createInstanceSimple",async e=>{try{console.log(" [EVOLUTION_API] Criando instncia (simples):",e);const r=`${this.config.baseUrl}/instance/create`,n={instanceName:e,integration:"WHATSAPP-BAILEYS",token:this.config.apiKey};console.log(" [EVOLUTION_API] Payload:",JSON.stringify(n,null,2));const s=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",apikey:this.config.apiKey},body:JSON.stringify(n)});if(console.log(" [EVOLUTION_API] Status da resposta:",s.status),!s.ok){const o=await s.text();return console.error(" [EVOLUTION_API] Erro ao criar instncia:",s.status,o),{success:!1,error:`HTTP ${s.status}: ${o}`}}const a=await s.json();return console.log(" [EVOLUTION_API] Resultado:",a),a.status==="error"?{success:!1,error:a.message||"Erro ao criar instncia"}:{success:!0}}catch(r){return console.error(" [EVOLUTION_API] Erro ao criar instncia:",r),{success:!1,error:r instanceof Error?r.message:"Erro desconhecido"}}});Ee(this,"deleteInstance",async e=>{try{const r=e||this.config.instanceName;console.log(" [EVOLUTION_API] Deletando instncia:",r);const n=`${this.config.baseUrl}/instance/delete/${r}`,s=await fetch(n,{method:"DELETE",headers:{apikey:this.config.apiKey}});if(!s.ok){const o=await s.text();return console.error(" [EVOLUTION_API] Erro ao deletar instncia:",s.status,o),{success:!1,error:`HTTP ${s.status}: ${o}`}}const a=await s.json();return console.log(" [EVOLUTION_API] Resultado:",a),a.status==="error"?{success:!1,error:a.message||"Erro ao deletar instncia"}:{success:!0}}catch(r){return console.error(" [EVOLUTION_API] Erro ao deletar instncia:",r),{success:!1,error:r instanceof Error?r.message:"Erro desconhecido"}}});Ee(this,"fetchInstances",async()=>{try{console.log(" [EVOLUTION_API] Listando instncias");const e=`${this.config.baseUrl}/instance/fetchInstances`,r=await fetch(e,{method:"GET",headers:{apikey:this.config.apiKey}});if(!r.ok)return console.error(" [EVOLUTION_API] Erro ao listar instncias:",r.status),[];const n=await r.json();return console.log(" [EVOLUTION_API] Resultado:",n),n.status==="error"?(console.error(" [EVOLUTION_API] Erro ao listar instncias:",n.message),[]):n.results||[]}catch(e){return console.error(" [EVOLUTION_API] Erro ao listar instncias:",e),[]}});Ee(this,"getInstanceInfo",async e=>{try{const r=e||this.config.instanceName;console.log(" [EVOLUTION_API] Obtendo informaes da instncia:",r);const n=`${this.config.baseUrl}/instance/fetchInstances`,s=await fetch(n,{method:"GET",headers:{apikey:this.config.apiKey}});if(!s.ok)return console.error(" [EVOLUTION_API] Erro ao obter informaes da instncia:",s.status),null;const a=await s.json();return console.log(" [EVOLUTION_API] Resultado:",a),a.status==="error"?(console.error(" [EVOLUTION_API] Erro ao obter informaes da instncia:",a.message),null):(a.results||[]).find(c=>c.instanceName===r)||null}catch(r){return console.error(" [EVOLUTION_API] Erro ao obter informaes da instncia:",r),null}});Ee(this,"disableWebhook",async e=>{try{const r=e||this.config.instanceName;console.log(" [EVOLUTION_API] Desabilitando webhook para:",r);const n=`${this.config.baseUrl}/webhook/set/${r}`,s={enabled:!1},a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",apikey:this.config.apiKey},body:JSON.stringify(s)});if(!a.ok){const i=await a.text();return console.error(" [EVOLUTION_API] Erro ao desabilitar webhook:",a.status,i),{success:!1,error:`HTTP ${a.status}: ${i}`}}const o=await a.json();return console.log(" [EVOLUTION_API] Webhook desabilitado com sucesso:",o),{success:!0}}catch(r){return console.error(" [EVOLUTION_API] Erro ao desabilitar webhook:",r),{success:!1,error:r instanceof Error?r.message:"Erro desconhecido"}}});this.config={...e,baseUrl:e.baseUrl.replace(/\/$/,"")}}};Ee(If,"N8N_WEBHOOK_MAPPINGS",{Yelena:"https://n8n.estudioonmp.com/webhook/ff428473-8d5a-468a-885a-865ec1e474a2wwd1w13we",Canarana:"https://n8n.estudioonmp.com/webhook/ff428473-8d5a-468a-885a-865ec1e474a2wwd21","Souto Soares":"https://n8n.estudioonmp.com/webhook/ff428473-8d5a-468a-885a-865ec1e474a2wwd23","Joo Dourado":"https://n8n.estudioonmp.com/webhook/ff428473-8d5a-468a-885a-865ec1e474a2wwd123","Gerente das Lojas":"https://n8n.estudioonmp.com/webhook/ff428473-8d5a-468a-885a-865ec1e474a2wwd12345","Gerente do Externo":"https://n8n.estudioonmp.com/webhook/ff428473-8d5a-468a-885a-865ec1e474a2wwd324","Amrica Dourada":"https://n8n.estudioonmp.com/webhook/ff428473-8d5a-468a-885a-865ec1e474a2wwd34"});let us=If;class xB{getAvailableChannels(){return[{id:"af1e5797-edc6-4ba3-a57a-25cf7297c4d6",name:"Chat"},{id:"011b69ba-cf25-4f63-af2e-4ad0260d9516",name:"Canarana"},{id:"b7996f75-41a7-4725-8229-564f31868027",name:"Souto Soares"},{id:"621abb21-60b2-4ff2-a0a6-172a94b4b65c",name:"Joo Dourado"},{id:"64d8acad-c645-4544-a1e6-2f0825fae00b",name:"America Dourada"},{id:"d8087e7b-5b06-4e26-aa05-6fc51fd4cdce",name:"Gerente Lojas"},{id:"d2892900-ca8f-4b08-a73f-6b7aa5866ff7",name:"Gerente Externo"}]}async getEvolutionInstanceForChannel(e){try{console.log(` [CHANNEL_MAPPING] Buscando instncia para canal: ${e}`);const{data:r,error:n}=await ne.from("channel_instance_mappings").select("*").eq("channel_id",e).eq("is_active",!0).single();if(n){if(n.code==="PGRST116")return console.log(` [CHANNEL_MAPPING] Nenhuma vinculao encontrada para canal: ${e}`),null;throw console.error(" [CHANNEL_MAPPING] Erro ao buscar vinculao:",n),new Error(`Erro ao buscar vinculao: ${n.message}`)}return console.log(` [CHANNEL_MAPPING] Instncia encontrada: ${r.instance_name}`),{baseUrl:r.base_url,apiKey:r.api_key,instanceName:r.instance_name}}catch(r){return console.error(" [CHANNEL_MAPPING] Erro geral:",r),null}}async getAllMappings(){try{console.log(" [CHANNEL_MAPPING] Buscando todas as vinculaes...");const{data:e,error:r}=await ne.from("channel_instance_mappings").select("*").order("created_at",{ascending:!1});if(r)throw console.error(" [CHANNEL_MAPPING] Erro ao buscar vinculaes:",r),new Error(`Erro ao buscar vinculaes: ${r.message}`);return console.log(` [CHANNEL_MAPPING] ${(e==null?void 0:e.length)||0} vinculaes encontradas`),e||[]}catch(e){throw console.error(" [CHANNEL_MAPPING] Erro geral:",e),e}}async getMappingByChannel(e){try{console.log(` [CHANNEL_MAPPING] Buscando vinculao para canal: ${e}`);const{data:r,error:n}=await ne.from("channel_instance_mappings").select("*").eq("channel_id",e).eq("is_active",!0).single();if(n){if(n.code==="PGRST116")return console.log(` [CHANNEL_MAPPING] Nenhuma vinculao ativa encontrada para canal: ${e}`),null;throw console.error(" [CHANNEL_MAPPING] Erro ao buscar vinculao:",n),new Error(`Erro ao buscar vinculao: ${n.message}`)}return console.log(` [CHANNEL_MAPPING] Vinculao encontrada: ${r.instance_name}`),r}catch(r){throw console.error(" [CHANNEL_MAPPING] Erro geral:",r),r}}async createMapping(e){try{console.log(` [CHANNEL_MAPPING] Criando vinculao: ${e.channel_name} -> ${e.instance_name}`),await this.deactivateMappingsForChannel(e.channel_id);const{data:r,error:n}=await ne.from("channel_instance_mappings").insert([{channel_id:e.channel_id,channel_name:e.channel_name,instance_id:e.instance_id,instance_name:e.instance_name,base_url:e.base_url,api_key:e.api_key,is_active:!0}]).select().single();if(n)throw console.error(" [CHANNEL_MAPPING] Erro ao criar vinculao:",n),new Error(`Erro ao criar vinculao: ${n.message}`);return console.log(` [CHANNEL_MAPPING] Vinculao criada com sucesso: ${r.id}`),r}catch(r){throw console.error(" [CHANNEL_MAPPING] Erro geral:",r),r}}async updateMapping(e,r){try{console.log(` [CHANNEL_MAPPING] Atualizando vinculao: ${e}`);const{data:n,error:s}=await ne.from("channel_instance_mappings").update({...r,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw console.error(" [CHANNEL_MAPPING] Erro ao atualizar vinculao:",s),new Error(`Erro ao atualizar vinculao: ${s.message}`);return console.log(" [CHANNEL_MAPPING] Vinculao atualizada com sucesso"),n}catch(n){throw console.error(" [CHANNEL_MAPPING] Erro geral:",n),n}}async deleteMapping(e){try{console.log(` [CHANNEL_MAPPING] Deletando vinculao: ${e}`);const{error:r}=await ne.from("channel_instance_mappings").delete().eq("id",e);if(r)throw console.error(" [CHANNEL_MAPPING] Erro ao deletar vinculao:",r),new Error(`Erro ao deletar vinculao: ${r.message}`);console.log(" [CHANNEL_MAPPING] Vinculao deletada com sucesso")}catch(r){throw console.error(" [CHANNEL_MAPPING] Erro geral:",r),r}}async deactivateMappingsForChannel(e){try{console.log(` [CHANNEL_MAPPING] Desativando vinculaes existentes para canal: ${e}`);const{error:r}=await ne.from("channel_instance_mappings").update({is_active:!1}).eq("channel_id",e);if(r)throw console.error(" [CHANNEL_MAPPING] Erro ao desativar vinculaes:",r),new Error(`Erro ao desativar vinculaes: ${r.message}`);console.log(" [CHANNEL_MAPPING] Vinculaes desativadas")}catch(r){throw console.error(" [CHANNEL_MAPPING] Erro geral:",r),r}}async checkIfInstanceExists(e,r,n){try{console.log(` [CHANNEL_MAPPING] Verificando se instncia existe: ${n}`);const s=await fetch(`${e}/instance/fetchInstances`,{method:"GET",headers:{apikey:r}});if(!s.ok)return console.error(` [CHANNEL_MAPPING] Erro ao verificar instncias: ${s.status}`),!1;const o=(await s.json()).some(i=>i.instance.instanceName===n);return console.log(` [CHANNEL_MAPPING] Instncia ${n} ${o?"existe":"no existe"}`),o}catch(s){return console.error(" [CHANNEL_MAPPING] Erro ao verificar instncia:",s),!1}}async importExistingInstance(e,r,n,s,a){try{if(console.log(` [CHANNEL_MAPPING] Importando instncia existente: ${n} para canal ${r}`),!await this.checkIfInstanceExists(s,a,n))throw new Error(`Instncia '${n}' no encontrada na API Evolution`);const i=await this.createMapping({channel_id:e,channel_name:r,instance_id:n,instance_name:n,base_url:s,api_key:a,is_active:!0});return console.log(" [CHANNEL_MAPPING] Instncia existente importada com sucesso"),i}catch(o){throw console.error(" [CHANNEL_MAPPING] Erro ao importar instncia:",o),o}}}const wB=({isDarkMode:t,channelId:e,onClose:r})=>{const{toast:n}=Jt(),[s,a]=g.useState({baseUrl:"https://evolution.estudioonmp.com",apiKey:"",isValidated:!1,instances:[]}),[o,i]=g.useState({isOpen:!1,qrCode:"",instanceName:"",loading:!1}),[c,u]=g.useState(""),[d,f]=g.useState([]),[h,m]=g.useState(""),[y,p]=g.useState(""),[v,w]=g.useState(!1),[x,b]=g.useState(!1),[_,C]=g.useState(null),[E,N]=g.useState(null),[A,j]=g.useState(!1),O=new xB,F=O.getAvailableChannels();g.useEffect(()=>{console.log(" [EVOLUTION_API_SETTINGS] Componente montado, carregando dados..."),P(),V()},[]);const P=()=>{try{const D=localStorage.getItem("evolution_api_connection");if(D){const X=JSON.parse(D);console.log(" [EVOLUTION_API_SETTINGS] Conexo salva carregada:",X),a(X),X.isValidated&&(console.log(" [EVOLUTION_API_SETTINGS] Conexo validada, carregando instncias..."),R(X.baseUrl,X.apiKey))}}catch(D){console.error(" [EVOLUTION_API_SETTINGS] Erro ao carregar conexo:",D)}},V=async()=>{try{const X=(await O.getAllMappings()).map(oe=>({id:oe.id||"",channelId:oe.channel_id,instanceId:oe.instance_id,instanceName:oe.instance_name,channelName:oe.channel_name,baseUrl:oe.base_url,apiKey:oe.api_key,isActive:oe.is_active,createdAt:oe.created_at||"",updatedAt:oe.updated_at||""}));f(X)}catch(D){console.error(" [EVOLUTION_API_SETTINGS] Erro ao carregar mapeamentos:",D)}},R=async(D,X)=>{try{console.log(" [EVOLUTION_API_SETTINGS] Carregando instncias...");const U=await new us({baseUrl:D,apiKey:X,instanceName:"temp"}).listInstances();console.log(" [EVOLUTION_API_SETTINGS] Resultado de listInstances:",U),U.success&&U.instances?(console.log(" [EVOLUTION_API_SETTINGS] Instncias carregadas:",U.instances),a(ae=>({...ae,instances:U.instances||[]}))):console.error(" [EVOLUTION_API_SETTINGS] Erro ao carregar instncias, resultado:",U)}catch(oe){console.error(" [EVOLUTION_API_SETTINGS] Erro ao carregar instncias:",oe)}},H=D=>{try{localStorage.setItem("evolution_api_connection",JSON.stringify(D)),console.log(" [EVOLUTION_API_SETTINGS] Conexo salva:",D)}catch(X){console.error(" [EVOLUTION_API_SETTINGS] Erro ao salvar conexo:",X)}},W=async()=>{if(console.log(" [EVOLUTION_API_SETTINGS] Iniciando validao da API..."),!s.baseUrl||!s.apiKey){console.log(" [EVOLUTION_API_SETTINGS] URL ou API Key no preenchidos"),n({title:"Erro",description:"URL base e API Key so obrigatrios",variant:"destructive"});return}w(!0);try{console.log(" [EVOLUTION_API_SETTINGS] Criando servio com:",{baseUrl:s.baseUrl,apiKey:s.apiKey.substring(0,10)+"..."});const D=new us({baseUrl:s.baseUrl.replace(/\/$/,""),apiKey:s.apiKey,instanceName:"temp"});console.log(" [EVOLUTION_API_SETTINGS] Validando API...");const X=await D.validateApi();if(X.success){console.log(" [EVOLUTION_API_SETTINGS] API validada com sucesso!"),console.log(" [EVOLUTION_API_SETTINGS] Carregando instncias aps validao...");const oe=await D.listInstances();console.log(" [EVOLUTION_API_SETTINGS] Resultado do carregamento de instncias:",oe);const U={baseUrl:s.baseUrl.replace(/\/$/,""),apiKey:s.apiKey,isValidated:!0,instances:oe.instances||[]};a(U),H(U),console.log(" [EVOLUTION_API_SETTINGS] Validao completa!",U.instances.length,"instncias encontradas"),n({title:"Sucesso",description:`API validada! ${U.instances.length} instncias encontradas.`})}else throw console.error(" [EVOLUTION_API_SETTINGS] Falha na validao:",X.error),new Error(X.error||"Erro ao validar API")}catch(D){console.error(" [EVOLUTION_API_SETTINGS] Erro ao validar API:",D),n({title:"Erro",description:`Falha ao conectar: ${D}`,variant:"destructive"})}finally{w(!1)}},I=async()=>{if(!s.isValidated){n({title:"Erro",description:"Valide a API primeiro",variant:"destructive"});return}if(!c.trim()){n({title:"Erro",description:"Nome da instncia  obrigatrio",variant:"destructive"});return}b(!0);try{const X=await new us({baseUrl:s.baseUrl,apiKey:s.apiKey,instanceName:c}).createInstanceSimple(c);if(X.success)n({title:"Sucesso",description:`Instncia '${c}' criada com sucesso!`}),console.log(" [EVOLUTION_API_SETTINGS] Recarregando instncias aps criao..."),await R(s.baseUrl,s.apiKey),u("");else throw new Error(X.error||"Erro ao criar instncia")}catch(D){console.error("Erro ao criar instncia:",D),n({title:"Erro",description:`Erro ao criar instncia: ${D}`,variant:"destructive"})}finally{b(!1)}},k=async D=>{C(D);try{const oe=await new us({baseUrl:s.baseUrl,apiKey:s.apiKey,instanceName:D}).deleteInstance(D);if(oe.success)n({title:"Sucesso",description:`Instncia '${D}' excluda com sucesso!`}),console.log(" [EVOLUTION_API_SETTINGS] Recarregando instncias aps excluso..."),await R(s.baseUrl,s.apiKey);else throw new Error(oe.error||"Erro ao excluir instncia")}catch(X){console.error("Erro ao excluir instncia:",X),n({title:"Erro",description:`Erro ao excluir instncia: ${X}`,variant:"destructive"})}finally{C(null)}},$=async D=>{N(D);try{const oe=await new us({baseUrl:s.baseUrl,apiKey:s.apiKey,instanceName:D}).logoutInstance(D);if(oe.success)n({title:"Sucesso",description:`Instncia '${D}' desconectada com sucesso!`}),console.log(" [EVOLUTION_API_SETTINGS] Recarregando instncias aps logout..."),await R(s.baseUrl,s.apiKey);else throw new Error(oe.error||"Erro ao desconectar instncia")}catch(X){console.error("Erro ao desconectar instncia:",X),n({title:"Erro",description:`Erro ao desconectar instncia: ${X}`,variant:"destructive"})}finally{N(null)}},Y={"af1e5797-edc6-4ba3-a57a-25cf7297c4d6":"https://uxccfhptochnfomurulr.supabase.co/functions/v1/webhook-evolution-yelena","011b69ba-cf25-4f63-af2e-4ad0260d9516":"https://uxccfhptochnfomurulr.supabase.co/functions/v1/webhook-evolution-canarana","b7996f75-41a7-4725-8229-564f31868027":"https://uxccfhptochnfomurulr.supabase.co/functions/v1/webhook-evolution-souto","621abb21-60b2-4ff2-a0a6-172a94b4b65c":"https://uxccfhptochnfomurulr.supabase.co/functions/v1/webhook-evolution-joao","64d8acad-c645-4544-a1e6-2f0825fae00b":"https://uxccfhptochnfomurulr.supabase.co/functions/v1/webhook-evolution-america","d8087e7b-5b06-4e26-aa05-6fc51fd4cdce":"https://uxccfhptochnfomurulr.supabase.co/functions/v1/webhook-evolution-gerentelojas","d2892900-ca8f-4b08-a73f-6b7aa5866ff7":"https://uxccfhptochnfomurulr.supabase.co/functions/v1/webhook-evolution-gerenteexterno"},he=async()=>{if(!h||!y){n({title:"Erro",description:"Selecione um canal e uma instncia",variant:"destructive"});return}j(!0);try{const D=F.find(ve=>ve.id===h),X=s.instances.find(ve=>ve.instanceName===y);if(!D||!X)throw new Error("Canal ou instncia no encontrados");await O.createMapping({channel_id:D.id,channel_name:D.name,instance_id:X.instanceName,instance_name:X.instanceName,base_url:s.baseUrl,api_key:s.apiKey,is_active:!0});const oe=Y[D.id];if(!oe)throw new Error("Canal no tem um webhook configurado! Edite o cdigo para adicionar.");const U=["MESSAGES_UPSERT","MESSAGES_SET","MESSAGES_UPDATE","CONNECTION_UPDATE","QRCODE_UPDATED","CONTACTS_UPSERT","CONTACTS_SET","CONTACTS_UPDATE","CHATS_UPSERT","CHATS_SET","CHATS_UPDATE","PRESENCE_UPDATE","GROUPS_UPSERT","GROUP_UPDATE","GROUP_PARTICIPANTS_UPDATE"],we=await new us({baseUrl:s.baseUrl,apiKey:s.apiKey,instanceName:X.instanceName}).setWebhook(oe,U,X.instanceName);if(we.success)console.log(" [WEBHOOK] Webhook canal configurado:",oe);else throw new Error(we.error||"Erro ao configurar webhook");n({title:"Sucesso",description:`Canal '${D.name}' vinculado  instncia '${X.instanceName}' com webhook dedicado!`}),await V(),m(""),p("")}catch(D){console.error("Erro ao vincular canal:",D),n({title:"Erro",description:`Erro ao vincular canal: ${D}`,variant:"destructive"})}finally{j(!1)}},ue=async D=>{try{const X=d.find(oe=>oe.id===D);X&&console.log(` [UNLINK] Desvinculando canal ${X.channelName} da instncia ${X.instanceName}`),await O.deleteMapping(D),n({title:"Sucesso",description:"Canal desvinculado com sucesso!"}),await V()}catch(X){console.error("Erro ao desvincular canal:",X),n({title:"Erro",description:`Erro ao desvincular canal: ${X}`,variant:"destructive"})}},xe=D=>{const X={open:{color:"bg-green-500",text:"Conectado",icon:Sl},connected:{color:"bg-green-500",text:"Conectado",icon:Sl},ready:{color:"bg-green-500",text:"Conectado",icon:Sl},online:{color:"bg-green-500",text:"Conectado",icon:Sl},close:{color:"bg-red-500",text:"Desconectado",icon:Fu},closed:{color:"bg-red-500",text:"Desconectado",icon:Fu},disconnected:{color:"bg-red-500",text:"Desconectado",icon:Fu},offline:{color:"bg-red-500",text:"Desconectado",icon:Fu},connecting:{color:"bg-yellow-500",text:"Conectando",icon:ys},qr:{color:"bg-blue-500",text:"QR Code",icon:Sm}},oe=X[D]||X.close,U=oe.icon;return l.jsxs(gn,{className:S("text-white",oe.color),children:[l.jsx(U,{className:"w-3 h-3 mr-1"}),oe.text]})};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"space-y-8",children:[l.jsxs(Re,{className:S("border-2",t?"bg-[#18181b] border-[#3f3f46]":"bg-white border-gray-200"),children:[l.jsxs(jt,{children:[l.jsxs(kt,{className:"flex items-center gap-2",children:[l.jsx(ys,{className:"w-5 h-5"}),"Conectar API Evolution"]}),l.jsx(sc,{children:"Configure a URL e API Key para conectar com a Evolution API"})]}),l.jsxs(Ie,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(pe,{htmlFor:"baseUrl",children:"URL Base da API"}),l.jsx(Ke,{id:"baseUrl",placeholder:"https://evolution.estudioonmp.com",value:s.baseUrl,onChange:D=>a(X=>({...X,baseUrl:D.target.value,isValidated:!1})),disabled:v,className:S(t?"bg-[#27272a] border-[#3f3f46]":"bg-white border-gray-300")})]}),l.jsxs("div",{children:[l.jsx(pe,{htmlFor:"apiKey",children:"API Key"}),l.jsx(Ke,{id:"apiKey",type:"password",placeholder:"Sua API Key",value:s.apiKey,onChange:D=>a(X=>({...X,apiKey:D.target.value,isValidated:!1})),disabled:v,className:S(t?"bg-[#27272a] border-[#3f3f46]":"bg-white border-gray-300")})]})]}),l.jsx(q,{onClick:W,disabled:v,variant:(s.isValidated,"default"),className:S("w-full","text-white"),children:v?l.jsxs(l.Fragment,{children:[l.jsx($o,{className:"mr-2 h-4 w-4 animate-spin"}),"Validando..."]}):s.isValidated?l.jsxs(l.Fragment,{children:[l.jsx(wy,{className:"mr-2 h-4 w-4"}),"API Validada"]}):l.jsxs(l.Fragment,{children:[l.jsx(Sl,{className:"mr-2 h-4 w-4"}),"Validar API"]})})]})]}),s.isValidated&&l.jsxs(Re,{className:S("border-2",t?"bg-[#18181b] border-[#3f3f46]":"bg-white border-gray-200"),children:[l.jsxs(jt,{children:[l.jsxs(kt,{className:"flex items-center gap-2",children:[l.jsx(ys,{className:"w-5 h-5"}),"Gerenciar Instncias"]}),l.jsx(sc,{children:"Crie novas instncias ou visualize as existentes."})]}),l.jsxs(Ie,{className:"space-y-4",children:[l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(Ke,{placeholder:"Ex: minha-loja-principal",value:c,onChange:D=>u(D.target.value),disabled:x,className:S("flex-grow",t?"bg-[#27272a] border-[#3f3f46]":"bg-white border-gray-300")}),l.jsx(q,{onClick:I,disabled:x,className:S("bg-blue-600 hover:bg-blue-700 text-white",x&&"bg-gray-400 hover:bg-gray-400"),children:x?l.jsxs(l.Fragment,{children:[l.jsx($o,{className:"mr-2 h-4 w-4 animate-spin"}),"Criando..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Xc,{className:"mr-2 h-4 w-4"}),"Criar Instncia"]})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{children:"Instncias Existentes:"}),s.instances.length===0?l.jsx("p",{className:"text-gray-500",children:"Nenhuma instncia encontrada."}):s.instances.map(D=>(console.log(" [EVOLUTION_API_SETTINGS] Renderizando instncia:",D),l.jsxs("div",{className:S("flex items-center justify-between p-3 border rounded-md",t?"bg-[#27272a] border-[#3f3f46]":"bg-gray-50 border-gray-200"),children:[l.jsxs("div",{className:"flex items-center gap-2",children:[xe(D.status),l.jsx("span",{className:"font-semibold",children:D.instanceName}),D.profileName&&l.jsxs("span",{className:"text-xs text-gray-400 ml-2",children:["(",D.profileName,")"]}),D.number&&l.jsxs("span",{className:"text-sm text-gray-500",children:["(",D.number,")"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[(D.status==="connecting"||D.status==="close"||D.status==="unknown")&&l.jsxs(q,{variant:"outline",size:"sm",onClick:async()=>{i({isOpen:!0,qrCode:"",instanceName:D.instanceName,loading:!0});try{const oe=await new us({baseUrl:s.baseUrl,apiKey:s.apiKey,instanceName:D.instanceName}).getQRCodeForInstance(D.instanceName);if(oe.success&&oe.qrCode){const U=oe.qrCode.startsWith("data:image")?oe.qrCode:`data:image/png;base64,${oe.qrCode}`;i(ae=>({...ae,qrCode:U,loading:!1}))}else i(U=>({...U,loading:!1})),n({title:"Erro",description:oe.error||"Erro ao obter QR Code",variant:"destructive"})}catch(X){i(oe=>({...oe,loading:!1})),n({title:"Erro",description:`Erro ao obter QR Code: ${X}`,variant:"destructive"})}},className:S(t?"border-[#3f3f46] text-white":"border-gray-300 text-gray-700"),children:[l.jsx(Sm,{className:"mr-2 h-4 w-4"}),"Ver QR Code"]}),D.status==="open"&&l.jsxs(q,{variant:"outline",size:"sm",onClick:()=>$(D.instanceName),disabled:E===D.instanceName,className:S("border-orange-500 text-orange-600 hover:bg-orange-50",t?"border-orange-400 text-orange-400 hover:bg-orange-900/20":""),children:[E===D.instanceName?l.jsx($o,{className:"mr-2 h-4 w-4 animate-spin"}):l.jsx(ih,{className:"mr-2 h-4 w-4"}),"Desconectar"]}),l.jsxs(q,{variant:"destructive",size:"sm",onClick:()=>k(D.instanceName),disabled:_===D.instanceName,children:[_===D.instanceName?l.jsx($o,{className:"mr-2 h-4 w-4 animate-spin"}):l.jsx(Zc,{className:"mr-2 h-4 w-4"}),"Excluir"]})]})]},D.instanceName)))]})]})]}),s.isValidated&&l.jsxs(Re,{className:S("border-2",t?"bg-[#18181b] border-[#3f3f46]":"bg-white border-gray-200"),children:[l.jsxs(jt,{children:[l.jsxs(kt,{className:"flex items-center gap-2",children:[l.jsx(kw,{className:"w-5 h-5"}),"Vincular Canal  Instncia"]}),l.jsx(sc,{children:"Associe um canal de comunicao a uma instncia da API Evolution usando o novo webhook universal."})]}),l.jsxs(Ie,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4",children:[l.jsxs("div",{children:[l.jsx(pe,{htmlFor:"selectChannel",children:"Selecionar Canal"}),l.jsxs(Pa,{onValueChange:m,value:h,disabled:A,children:[l.jsx(ks,{id:"selectChannel",className:S(t?"bg-[#27272a] border-[#3f3f46]":"bg-white border-gray-300"),children:l.jsx(Ra,{placeholder:"Selecione um canal"})}),l.jsx(Ts,{className:S(t?"bg-[#27272a] border-[#3f3f46] text-white":"bg-white border-gray-300 text-gray-900"),children:F.map(D=>l.jsx(Dt,{value:D.id,children:D.name},D.id))})]})]}),l.jsxs("div",{children:[l.jsx(pe,{htmlFor:"selectInstance",children:"Selecionar Instncia"}),l.jsxs(Pa,{onValueChange:p,value:y,disabled:A,children:[l.jsx(ks,{id:"selectInstance",className:S(t?"bg-[#27272a] border-[#3f3f46]":"bg-white border-gray-300"),children:l.jsx(Ra,{placeholder:"Selecione uma instncia"})}),l.jsx(Ts,{className:S(t?"bg-[#27272a] border-[#3f3f46] text-white":"bg-white border-gray-300 text-gray-900"),children:s.instances.map(D=>l.jsxs(Dt,{value:D.instanceName,children:[D.instanceName,D.profileName&&l.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:["(",D.profileName,")"]})]},D.instanceName))})]})]})]}),l.jsx(q,{onClick:he,disabled:A||!h||!y,className:S("w-full bg-green-600 hover:bg-green-700 text-white",(A||!h||!y)&&"bg-gray-400 hover:bg-gray-400"),children:A?l.jsxs(l.Fragment,{children:[l.jsx($o,{className:"mr-2 h-4 w-4 animate-spin"}),"Configurando novo webhook..."]}):l.jsxs(l.Fragment,{children:[l.jsx(kw,{className:"mr-2 h-4 w-4"}),"Vincular Canal"]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(pe,{children:"Canais Vinculados:"}),d.length===0?l.jsx("p",{className:"text-gray-500",children:"Nenhum canal vinculado."}):d.map(D=>l.jsxs("div",{className:S("flex items-center justify-between p-3 border rounded-md",t?"bg-[#27272a] border-[#3f3f46]":"bg-gray-50 border-gray-200"),children:[l.jsxs("div",{className:"flex items-center gap-2",children:[xe(D.isActive?"open":"close"),l.jsx("span",{className:"font-semibold",children:D.channelName}),l.jsxs("span",{className:"text-sm text-gray-500",children:["(",D.instanceName,")"]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs(q,{variant:"outline",size:"sm",onClick:()=>ue(D.id),className:S(t?"border-[#3f3f46] text-white":"border-gray-300 text-gray-700"),children:[l.jsx(AL,{className:"mr-2 h-4 w-4"}),"Desvincular"]})})]},D.id))]})]})]})]}),l.jsx(Is,{open:o.isOpen,onOpenChange:D=>i(X=>({...X,isOpen:D})),children:l.jsxs(Qn,{className:"sm:max-w-md",children:[l.jsx(Os,{children:l.jsxs(Jn,{className:"flex items-center gap-2",children:[l.jsx(Sm,{className:"h-5 w-5"}),"Conectar WhatsApp"]})}),l.jsx("div",{className:"flex flex-col items-center space-y-4 p-4",children:o.loading?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx($o,{className:"h-4 w-4 animate-spin"}),l.jsx("span",{children:"Gerando QR Code..."})]}):o.qrCode?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:o.qrCode,alt:"QR Code WhatsApp",className:"w-64 h-64 border border-gray-300 rounded-lg"}),l.jsxs("div",{className:"text-center space-y-2",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Escaneie com seu WhatsApp"}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Instncia: ",o.instanceName]}),l.jsx("p",{className:"text-xs text-gray-400",children:"QR Code expira em alguns minutos"})]})]}):l.jsx("p",{className:"text-red-500",children:"Erro ao carregar QR Code"})})]})})]})},bB=({isDarkMode:t})=>l.jsx("div",{className:"space-y-6",children:l.jsx(wB,{isDarkMode:t,channelId:"default"})}),_B=({isDarkMode:t,toggleDarkMode:e,isMobile:r=!1,initialSection:n})=>{const[s,a]=g.useState("main");g.useEffect(()=>{n&&["credentials","notifications","users","channels","audit","ai","evolution","system","backup"].includes(n)&&a(n)},[n]);const o=()=>{s!=="main"&&a("main")},i=()=>{switch(s){case"users":return"Gerenciamento de Usurios";case"audit":return"Histrico de Auditoria";case"credentials":return"Alterar Credenciais";case"notifications":return"Configuraes de Notificao";case"channels":return"Gerenciar Canais";case"system":return"Sistema";case"backup":return"Backup e Dados";case"ai":return"Configuraes de IA";case"evolution":return"API Evolution";default:return"Configuraes"}},c=()=>{switch(s){case"users":return l.jsx(jz,{isDarkMode:t});case"audit":return l.jsx(kz,{isDarkMode:t});case"credentials":return l.jsx(zz,{isDarkMode:t});case"notifications":return l.jsx(Kz,{isDarkMode:t});case"channels":return l.jsx(Yz,{isDarkMode:t});case"system":return l.jsx(Qz,{isDarkMode:t});case"backup":return l.jsx(Jz,{isDarkMode:t});case"ai":return l.jsx(yB,{isDarkMode:t});case"evolution":return l.jsx(bB,{isDarkMode:t});default:return l.jsx(gz,{isDarkMode:t,onSectionChange:a,toggleDarkMode:e})}};return l.jsxs("div",{className:S("h-full flex flex-col min-h-screen w-full",t?"bg-[#09090b]":"bg-gray-50"),children:[l.jsxs("div",{className:S("flex items-center gap-4 p-6 mb-6 border-b",t?"text-[#ffffff] border-[#18181b] bg-[#09090b]":"text-gray-900 border-gray-200 bg-gray-50"),children:[s!=="main"&&l.jsx(q,{variant:"ghost",size:"icon",onClick:o,className:S("rounded-full",t?"text-[#9ca3af] hover:bg-[#27272a]":"text-gray-600 hover:bg-gray-100"),children:l.jsx(bE,{size:20})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:S("p-3 rounded-full",t?"bg-[#27272a]":"bg-[#b5103c]/10"),children:l.jsx(ys,{className:"h-6 w-6 text-[#b5103c]"})}),l.jsxs("div",{children:[l.jsx("h1",{className:S("text-3xl font-bold",t?"text-[#ffffff]":"text-gray-900"),children:i()}),l.jsx("p",{className:S("text-lg",t?"text-[#9ca3af]":"text-gray-600"),children:s==="main"?"Gerencie suas preferncias e configuraes do sistema":"Configure e personalize suas opes"})]})]})]}),l.jsx("div",{className:S("flex-1 overflow-y-auto px-6 pb-6",t?"bg-[#09090b]":"bg-gray-50"),children:c()})]})},SB=({isDarkMode:t})=>l.jsx("div",{className:"text-left mb-8",children:l.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[l.jsx("div",{className:"p-3 rounded-full bg-[#b5103c]/10",children:l.jsx(As,{size:32,className:"text-[#b5103c]",strokeWidth:1.5})}),l.jsxs("div",{children:[l.jsx("h1",{className:S("text-3xl font-bold",t?"text-white":"text-gray-900"),children:"Mensagens"}),l.jsx("p",{className:S("text-lg",t?"text-[#a1a1aa]":"text-gray-600"),children:"Central de comunicao com seus clientes"})]})]})}),CB=({activeTab:t,onTabChange:e,isDarkMode:r})=>l.jsxs("div",{className:"flex space-x-1 p-1 bg-gray-100 dark:bg-[#18181b] rounded-lg max-w-xs",children:[l.jsx(q,{variant:t==="canais"?"default":"ghost",size:"sm",onClick:()=>e("canais"),className:S("flex-1 text-xs px-2 py-1",t==="canais"?"bg-white dark:bg-[#27272a] text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:"Canais"}),l.jsx(q,{variant:t==="contatos"?"default":"ghost",size:"sm",onClick:()=>e("contatos"),className:S("flex-1 text-xs px-2 py-1",t==="contatos"?"bg-white dark:bg-[#27272a] text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:"Contatos"})]}),EB=({channels:t,onChannelClick:e,isDarkMode:r})=>t.length===0?l.jsx("div",{className:S("w-full flex flex-col items-center justify-center",r?"bg-[#09090b] text-[#9ca3af] min-h-[240px]":"bg-white text-gray-500 min-h-[240px]"),children:l.jsxs("div",{className:S("text-center px-6 py-12 rounded-lg border-2 border-dashed",r?"border-[#27272a]":"border-gray-200"),children:[l.jsx("p",{className:S("font-medium text-base",r?"text-white":"text-gray-800"),children:"Nenhum canal disponvel"}),l.jsx("p",{className:S("mt-2 text-sm",r?"text-[#9ca3af]":"text-gray-500"),children:"Voc ainda no tem canal cadastrado ou no tem permisso."})]})}):l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(n=>l.jsx(UA,{channelId:n.id,name:n.nome,type:n.tipo,isDarkMode:r,onClick:()=>e(n.id)},n.id))});class dc{static getChannelTableMapping(){return{chat:"yelena_ai_conversas","af1e5797-edc6-4ba3-a57a-25cf7297c4d6":"yelena_ai_conversas",canarana:"canarana_conversas","souto-soares":"souto_soares_conversas","joao-dourado":"joao_dourado_conversas","america-dourada":"america_dourada_conversas","gerente-lojas":"gerente_lojas_conversas","gerente-externo":"gerente_externo_conversas","d2892900-ca8f-4b08-a73f-6b7aa5866ff7":"gerente_externo_conversas"}}static extractPhoneFromSessionId(e){const r=e.split("-");if(r.length>1&&/^\d{10,15}$/.test(r[0]))return r[0];const n=e.match(/(\d{10,15})/);return n?n[1]:e}static extractNameFromSessionId(e,r){if(r&&r.trim())return r.trim();const n=e.split("-");return n.length>1&&n.slice(1).join("-").trim()||"Cliente"}static detectGroup(e){return e.includes("Grupo")||e.includes("group")||e.includes("@g.us")}static groupContactsByPhone(e,r){const n=new Map;e.forEach(a=>{const o=this.extractPhoneFromSessionId(a.session_id);n.has(o)||n.set(o,[]),n.get(o).push(a)});const s=[];return n.forEach((a,o)=>{a.sort((y,p)=>new Date(p.read_at||"").getTime()-new Date(y.read_at||"").getTime());const i=a[0],c=a.filter(y=>!y.is_read&&y.tipo_remetente!=="USUARIO_INTERNO").length,u=this.detectGroup(i.session_id),d=new Set;if(a.forEach(y=>{if(y.nome_do_contato&&y.nome_do_contato.trim()){const p=y.nome_do_contato.trim();!p.toLowerCase().includes("gerente")&&!p.toLowerCase().includes("yelena")&&!p.toLowerCase().includes("andressa")&&!p.toLowerCase().includes("sistema")&&p!=="Gustavo Gerente das Lojas"&&!p.includes("GerenteLojas")&&d.add(p)}}),d.size===0){const y=this.extractNameFromSessionId(i.session_id,i.nome_do_contato);!y.toLowerCase().includes("gerente")&&y!=="GerenteLojas"&&y!=="Gustavo Gerente das Lojas"&&d.add(y)}d.size===0&&d.add(u?"Grupo":"Cliente");const f=Array.from(d).slice(0,4);let h="";u?h=f.length>1?`Grupo: ${f.slice(0,2).join(", ")}${f.length>2?` e mais ${f.length-2}`:""}`:`Grupo: ${f[0]||"Sem nome"}`:h=f.length>1?`${f.slice(0,-1).join(", ")} e ${f[f.length-1]}`:f[0]||"Cliente";const m={id:`${r}-${o}`,nome:h,telefone:o,ultimaMensagem:i.message||"",tempo:this.formatTimeAgo(i.read_at||""),status:c>0?"pendente":"resolvida",canais:[r],isGroup:u};s.push(m)}),s}static formatTimeAgo(e){if(!e)return"";const r=new Date,n=new Date(e),s=r.getTime()-n.getTime(),a=Math.floor(s/(1e3*60)),o=Math.floor(s/(1e3*60*60)),i=Math.floor(s/(1e3*60*60*24));return a<1?"Agora":a<60?`${a}min`:o<24?`${o}h`:i<7?`${i}d`:n.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}static async getContactsForChannels(e){console.log(" [OPTIMIZED_CONTACT_SERVICE] Loading contacts for channels:",e);const r=e.sort().join(","),n=Date.now();if(this.cache.has(r)&&this.cacheExpiry.has(r)){const i=this.cacheExpiry.get(r);if(n<i)return console.log(" [OPTIMIZED_CONTACT_SERVICE] Returning cached data"),this.cache.get(r)}const s=this.getChannelTableMapping(),a=new Map;for(const i of e){const c=s[i];if(!c){console.warn(` [OPTIMIZED_CONTACT_SERVICE] No table mapping for channel: ${i}`);continue}try{console.log(` [OPTIMIZED_CONTACT_SERVICE] Querying table: ${c}`);const{data:u,error:d}=await ne.from(c).select("id, session_id, message, read_at, nome_do_contato, is_read, tipo_remetente").order("read_at",{ascending:!1}).limit(1e3);if(d){console.error(` [OPTIMIZED_CONTACT_SERVICE] Error querying ${c}:`,d);continue}if(!u||u.length===0){console.log(` [OPTIMIZED_CONTACT_SERVICE] No data found in ${c}`);continue}const f=[];u.forEach(m=>{m&&typeof m.id<"u"&&typeof m.session_id=="string"&&typeof m.message=="string"&&f.push({id:String(m.id),session_id:m.session_id,message:m.message,read_at:m.read_at||"",nome_do_contato:m.nome_do_contato||void 0,is_read:!!m.is_read,tipo_remetente:m.tipo_remetente||void 0})});const h=this.groupContactsByPhone(f,i);console.log(` [OPTIMIZED_CONTACT_SERVICE] Found ${h.length} contacts in ${c}`),h.forEach(m=>{if(a.has(m.telefone)){const y=a.get(m.telefone);y.canais.push(...m.canais);const p=new Date(m.tempo.includes("h")||m.tempo.includes("min")?Date.now():m.tempo),v=new Date(y.tempo.includes("h")||y.tempo.includes("min")?Date.now():y.tempo);p>v&&(y.ultimaMensagem=m.ultimaMensagem,y.tempo=m.tempo)}else a.set(m.telefone,{...m})})}catch(u){console.error(` [OPTIMIZED_CONTACT_SERVICE] Unexpected error for ${c}:`,u)}}const o=Array.from(a.values()).sort((i,c)=>{if(i.status==="pendente"&&c.status!=="pendente")return-1;if(c.status==="pendente"&&i.status!=="pendente")return 1;const u=new Date(i.tempo.includes("h")||i.tempo.includes("min")?Date.now():i.tempo);return new Date(c.tempo.includes("h")||c.tempo.includes("min")?Date.now():c.tempo).getTime()-u.getTime()});return this.cache.set(r,o),this.cacheExpiry.set(r,n+this.CACHE_DURATION),console.log(` [OPTIMIZED_CONTACT_SERVICE] Total unique contacts found: ${o.length}`),o}static clearCache(){this.cache.clear(),this.cacheExpiry.clear(),console.log(" [OPTIMIZED_CONTACT_SERVICE] Cache cleared")}}Ee(dc,"cache",new Map),Ee(dc,"cacheExpiry",new Map),Ee(dc,"CACHE_DURATION",3e4);const NB=()=>{const[t,e]=g.useState([]),[r,n]=g.useState(!1),[s,a]=g.useState(null),[o,i]=g.useState(0),{channels:c}=ul(),{getAccessibleChannels:u}=Io(),{user:d}=Tt(),f=()=>({"Yelena-AI":"chat",Canarana:"canarana","Souto Soares":"souto-soares","Joo Dourado":"joao-dourado","Amrica Dourada":"america-dourada","Gustavo Gerente das Lojas":"gerente-lojas","Andressa Gerente Externo":"gerente-externo"}),h=async()=>{if(!d||!d.name){console.log(" [UNIFIED_CONTACTS] Usurio no autenticado"),e([]),n(!1);return}n(!0),a(null),i(10);try{const y=f();let p=[];if(d.role==="admin")p=c.filter(w=>w.isActive&&w.name&&w.name.toLowerCase()!=="pedro").map(w=>y[w.name]).filter(w=>w);else{const w=u();p=c.filter(x=>x.isActive&&x.name&&x.name.toLowerCase()!=="pedro").map(x=>y[x.name]).filter(x=>x&&w.includes(x))}if(console.log(" [UNIFIED_CONTACTS] Loading contacts for channels:",p),p.length===0){console.log(" [UNIFIED_CONTACTS] Nenhum canal ativo encontrado"),e([]),n(!1);return}i(30);const v=await dc.getContactsForChannels(p);i(80),e(v),i(100),console.log(` [UNIFIED_CONTACTS] Loaded ${v.length} unified contacts`)}catch(y){console.error(" [UNIFIED_CONTACTS] Error loading contacts:",y),a("Erro ao carregar contatos"),e([])}finally{n(!1),setTimeout(()=>i(0),500)}};return g.useEffect(()=>{c.length>0&&h()},[c,d==null?void 0:d.role,d==null?void 0:d.name]),{contacts:t,loading:r,error:s,loadingProgress:o,refetch:()=>{dc.clearCache(),h()}}},AB=({contacts:t,onContactClick:e,isDarkMode:r})=>{const{contacts:n,loading:s,error:a,loadingProgress:o}=NB(),i=t||n,c=f=>f||"",u=f=>{switch(f){case"pendente":return"bg-yellow-500";case"em_andamento":return"bg-blue-500";case"resolvida":return"bg-green-500";default:return"bg-gray-500"}},d=f=>{switch(f){case"pendente":return"Pendente";case"em_andamento":return"Em Andamento";case"resolvida":return"Resolvida";default:return"Desconhecido"}};return s?l.jsxs("div",{className:S("flex flex-col items-center justify-center py-12",r?"text-gray-400":"text-gray-600"),children:[l.jsx("div",{className:S("animate-spin rounded-full h-8 w-8 border-b-2 mb-4",r?"border-white":"border-gray-900")}),l.jsx("p",{children:"Carregando contatos..."}),o>0&&l.jsx("div",{className:"w-48 bg-gray-200 rounded-full h-2 mt-2",children:l.jsx("div",{className:"bg-[#b5103c] h-2 rounded-full transition-all duration-300",style:{width:`${o}%`}})})]}):a?l.jsxs("div",{className:S("flex flex-col items-center justify-center py-12","text-red-500"),children:[l.jsx("p",{className:"font-medium",children:"Erro ao carregar contatos"}),l.jsx("p",{className:"text-sm mt-1",children:a})]}):!i||i.length===0?l.jsxs("div",{className:S("flex flex-col items-center justify-center py-12",r?"text-gray-400":"text-gray-600"),children:[l.jsx("div",{className:"text-4xl mb-4",children:""}),l.jsx("p",{className:"font-medium",children:"Nenhum contato encontrado"}),l.jsx("p",{className:"text-sm mt-1",children:"Os contatos aparecero aqui quando houver conversas"})]}):l.jsx("div",{className:"space-y-3",children:i.map(f=>l.jsx("div",{onClick:()=>e(f),className:S("p-4 rounded-lg border transition-all cursor-pointer",r?"bg-[#18181b] border-[#3f3f46] hover:bg-[#27272a]":"bg-white border-gray-200 hover:bg-gray-50","hover:scale-[1.02] hover:shadow-md"),children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h3",{className:S("font-medium text-sm truncate",r?"text-white":"text-gray-900"),children:f.nome}),l.jsx("div",{className:S("w-2 h-2 rounded-full",u(f.status))})]}),l.jsxs("p",{className:S("text-xs mb-1",r?"text-gray-400":"text-gray-600"),children:[" ",f.telefone]}),l.jsx("p",{className:S("text-xs truncate mb-2",r?"text-gray-300":"text-gray-700"),children:f.ultimaMensagem}),f.canais&&f.canais.length>0&&l.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:f.canais.map((h,m)=>l.jsx("span",{className:S("px-2 py-1 rounded-full text-xs",r?"bg-[#27272a] text-gray-300":"bg-gray-100 text-gray-600"),children:MA(h)},m))})]}),l.jsxs("div",{className:"flex flex-col items-end gap-1",children:[l.jsx("span",{className:S("text-xs",r?"text-gray-400":"text-gray-500"),children:c(f.tempo)}),l.jsx("span",{className:S("px-2 py-1 rounded-full text-xs font-medium",f.status==="pendente"&&"bg-yellow-100 text-yellow-800",f.status==="em_andamento"&&"bg-blue-100 text-blue-800",f.status==="resolvida"&&"bg-green-100 text-green-800",r&&f.status==="pendente"&&"bg-yellow-900 text-yellow-200",r&&f.status==="em_andamento"&&"bg-blue-900 text-blue-200",r&&f.status==="resolvida"&&"bg-green-900 text-green-200"),children:d(f.status)})]})]})},f.id))})},jB=({isOpen:t,onClose:e,onSubmit:r,isDarkMode:n})=>{const[s,a]=g.useState({nome:"",telefone:"",canal:""}),{channels:o}=Ay(),{getAccessibleChannels:i}=Io(),{user:c}=Tt(),u=()=>{if((c==null?void 0:c.role)==="admin")return o.filter(v=>v.isActive&&v.name&&v.name.toLowerCase()!=="pedro").map(v=>({id:v.legacyId,name:d(v.name,v.type)}));{const v=i();return o.filter(w=>w.isActive&&w.name&&w.name.toLowerCase()!=="pedro"&&v.includes(w.legacyId)).map(w=>({id:w.legacyId,name:d(w.name,w.type)}))}},d=(v,w)=>`${v} (${w==="general"?"IA Assistant":w==="store"?"Loja":w==="manager"?"Gerente":"Canal"})`,f=u(),h=async(v,w,x)=>{try{console.log(" [NEW_CONTACT] Criando nova conversa:",{channelId:v,phoneNumber:w,contactName:x});const b=_h(v),_=`Conversa iniciada com ${x}`,{data:C,error:E}=await ne.from(b).insert({session_id:w,message:_,tipo_remetente:"USUARIO_INTERNO",nome_do_contato:(c==null?void 0:c.name)||"Sistema",mensagemtype:"text",is_read:!0,read_at:new Date().toISOString()}).select().single();if(E)throw console.error(" [NEW_CONTACT] Erro ao criar conversa:",E),E;return console.log(" [NEW_CONTACT] Conversa criada com sucesso:",C),!0}catch(b){return console.error(" [NEW_CONTACT] Erro ao criar nova conversa:",b),!1}},m=async v=>{v.preventDefault(),s.nome&&s.telefone&&s.canal&&(console.log(" [NEW_CONTACT] Processando novo contato:",s),await h(s.canal,s.telefone,s.nome)?(r(s),a({nome:"",telefone:"",canal:""}),e()):(console.error(" [NEW_CONTACT] Falha ao criar conversa"),r(s),a({nome:"",telefone:"",canal:""}),e()))},y=v=>{const w=v.replace(/\D/g,"");return w.length<=11&&!w.startsWith("55")?"55"+w:w},p=v=>{const w=y(v.target.value);a({...s,telefone:w})};return l.jsx(Is,{open:t,onOpenChange:e,children:l.jsxs(Qn,{className:S("sm:max-w-md",n?"bg-[#18181b] border-[#3f3f46]":"bg-white border-gray-200"),children:[l.jsx(Os,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(Jn,{className:S("text-lg font-semibold",n?"text-white":"text-gray-900"),children:"Novo Contato"}),l.jsx(q,{variant:"ghost",size:"icon",onClick:e,children:l.jsx(Dn,{size:20})})]})}),l.jsxs("form",{onSubmit:m,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(pe,{htmlFor:"nome",className:S("text-sm font-medium",n?"text-white":"text-gray-900"),children:"Nome do Contato *"}),l.jsx(Ke,{id:"nome",type:"text",value:s.nome,onChange:v=>a({...s,nome:v.target.value}),placeholder:"Digite o nome do contato",className:S("mt-1",n?"bg-[#27272a] border-[#3f3f46] text-white":"bg-white border-gray-300"),required:!0})]}),l.jsxs("div",{children:[l.jsx(pe,{htmlFor:"telefone",className:S("text-sm font-medium",n?"text-white":"text-gray-900"),children:"Nmero de Telefone *"}),l.jsx(Ke,{id:"telefone",type:"tel",value:s.telefone,onChange:p,placeholder:"Ex: 5562992631631",className:S("mt-1",n?"bg-[#27272a] border-[#3f3f46] text-white":"bg-white border-gray-300"),required:!0}),l.jsx("p",{className:S("text-xs mt-1",n?"text-gray-400":"text-gray-600"),children:"Inclua o cdigo do pas (55) + DDD + nmero"})]}),l.jsxs("div",{children:[l.jsx(pe,{className:S("text-sm font-medium",n?"text-white":"text-gray-900"),children:"Canal para Envio *"}),l.jsxs(Pa,{value:s.canal,onValueChange:v=>a({...s,canal:v}),children:[l.jsx(ks,{className:S("mt-1",n?"bg-[#27272a] border-[#3f3f46] text-white":"bg-white border-gray-300"),children:l.jsx(Ra,{placeholder:"Selecione um canal"})}),l.jsx(Ts,{className:S(n?"bg-[#27272a] border-[#3f3f46]":"bg-white border-gray-200"),children:f.length>0?f.map(v=>l.jsx(Dt,{value:v.id,children:v.name},v.id)):l.jsx(Dt,{value:"",disabled:!0,children:"Nenhum canal disponvel"})})]}),f.length===0&&l.jsx("p",{className:S("text-xs mt-1 text-red-500"),children:"Nenhum canal est disponvel para criao de contatos"})]}),l.jsxs("div",{className:"flex gap-2 pt-4",children:[l.jsx(q,{type:"button",variant:"outline",onClick:e,className:"flex-1",children:"Cancelar"}),l.jsx(q,{type:"submit",disabled:f.length===0,className:"flex-1 bg-[#b5103c] hover:bg-[#9d0e34] text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Criar Contato"})]})]})]})})},kB=({isOpen:t,onClose:e,onChannelSelect:r,contactName:n,availableChannels:s,isDarkMode:a})=>{const o=c=>{switch(console.log(" [CHANNEL_SELECTOR] Mapping channel:",c),c.toLowerCase()){case"chat":case"yelena-ai":return"Yelena-AI";case"whatsapp":case"canarana":return"Canarana";case"souto-soares":return"Souto Soares";case"joao-dourado":return"Joo Dourado";case"america-dourada":return"Amrica Dourada";case"gerente-externo":return"Andressa Gerente";case"gerente-lojas":return"Gustavo Gerente";default:return c}},i=c=>{console.log(" [CHANNEL_SELECTOR] Channel selected:",c),r(c)};return l.jsx(Is,{open:t,onOpenChange:e,children:l.jsxs(Qn,{className:S("sm:max-w-md",a?"bg-[#18181b] border-[#3f3f46]":"bg-white border-gray-200"),children:[l.jsxs(Os,{children:[l.jsx(Jn,{className:S("text-lg font-semibold",a?"text-white":"text-gray-900"),children:"Selecionar Canal"}),l.jsxs("p",{className:S("text-sm",a?"text-gray-400":"text-gray-600"),children:[n," est disponvel em mltiplos canais. Escolha qual conversa deseja abrir:"]})]}),l.jsx("div",{className:"space-y-2",children:s.map(c=>l.jsxs(q,{variant:"outline",onClick:()=>i(c),className:S("w-full justify-start gap-3",a?"border-[#3f3f46] hover:bg-[#27272a]":"border-gray-200 hover:bg-gray-50"),children:[l.jsx(As,{size:16,className:"text-[#b5103c]"}),o(c)]},c))})]})})},TB=({isDarkMode:t,onSectionChange:e,initialChannel:r=null,initialPhone:n=null})=>{const[s,a]=g.useState("canais"),[o,i]=g.useState(""),[c,u]=g.useState(null),[d,f]=g.useState(!1),[h,m]=g.useState(!1),[y,p]=g.useState([]),[v,w]=g.useState(""),{channels:x}=Ay(),{getAccessibleChannels:b}=Io(),{user:_}=Tt(),{toast:C}=Jt();let E=[];if((_==null?void 0:_.role)==="admin")E=x.filter(R=>R.isActive&&R.name&&R.name.toLowerCase()!=="pedro").map(R=>({id:R.legacyId,nome:R.name,tipo:R.type==="general"?"IA Assistant":R.type==="store"?"Loja":R.type==="manager"?"Gerente":"Canal",status:"ativo",conversasNaoLidas:0,ultimaAtividade:"Online"}));else{const R=b();E=x.filter(H=>H.isActive&&H.name&&H.name.toLowerCase()!=="pedro"&&R.includes(H.legacyId)).map(H=>({id:H.legacyId,nome:H.name,tipo:H.type==="general"?"IA Assistant":H.type==="store"?"Loja":H.type==="manager"?"Gerente":"Canal",status:"ativo",conversasNaoLidas:0,ultimaAtividade:"Online"}))}g.useEffect(()=>{if(console.log(" [MENSAGENS] Initial params detected:",{channel:r,phone:n}),r&&n){const R=r;console.log(" [MENSAGENS] Opening ChatOverlay for channel (mapped initialChannel):",R),u(R)}},[r,n]);const N=async(R,H)=>{console.log("File sending handled by ChatOverlayRefactored")},A=async(R,H)=>{console.log("Audio sending handled by ChatOverlayRefactored")},j=R=>{u(R)},O=()=>{u(null),window.history.replaceState({},"","/?section=mensagens")},F=R=>{console.log(" [NEW_CONTACT] Creating contact:",R),C({title:"Contato Criado",description:`Contato ${R.nome} criado com sucesso. Aguardando primeira mensagem.`}),u(R.canal)},P=R=>{var H;if(console.log(" [CONTACT_CLICK] Contact selected:",R),R.canais&&R.canais.length===1)u(R.canais[0]);else if(R.canais&&R.canais.length>1)p(R.canais),w(R.nome),m(!0);else{const W=(H=E[0])==null?void 0:H.id;W&&u(W)}},V=R=>{u(R),m(!1)};return c?l.jsx(E2,{channelId:c,isDarkMode:t,onClose:O,onSendFile:N,onSendAudio:A}):l.jsxs("div",{className:S("flex-1 p-6 space-y-6 overflow-auto",t?"bg-[#09090b]":"bg-gray-50"),children:[l.jsx(SB,{isDarkMode:t}),l.jsx(CB,{activeTab:s,onTabChange:a,isDarkMode:t}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("div",{className:"relative flex-1 max-w-md",children:[l.jsx(lh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),l.jsx(Ke,{placeholder:s==="canais"?"Buscar canais...":"Buscar contatos ou nmeros...",value:o,onChange:R=>i(R.target.value),className:S("pl-10",t?"bg-[#18181b] border-[#3f3f46]":"bg-white border-gray-200")})]}),s==="contatos"&&l.jsxs(q,{onClick:()=>f(!0),className:"bg-[#b5103c] hover:bg-[#9d0e34] text-white",children:[l.jsx(Xc,{size:16,className:"mr-2"}),"Novo Contato"]})]}),s==="canais"?l.jsx(EB,{channels:E,onChannelClick:j,isDarkMode:t}):l.jsx(AB,{onContactClick:P,isDarkMode:t}),l.jsx(jB,{isOpen:d,onClose:()=>f(!1),onSubmit:F,isDarkMode:t}),l.jsx(kB,{isOpen:h,onClose:()=>m(!1),onChannelSelect:V,contactName:v,availableChannels:y,isDarkMode:t})]})},PB=t=>l.jsx(TB,{...t}),RB=["credentials","notifications","users","channels","audit","ai","evolution","system","backup"],IB=({activeSection:t,isDarkMode:e,onSectionChange:r,toggleDarkMode:n})=>{const{urlParams:s}=Py();if(t==="settings"||RB.includes(t)){const o=t!=="settings"?t:void 0;return l.jsx(_B,{isDarkMode:e,toggleDarkMode:n||(()=>{}),initialSection:o})}const a=()=>{switch(t){case"dashboard":return l.jsx(Fb,{isDarkMode:e,onSectionSelect:r});case"mensagens":const o=s.get("channel"),i=s.get("phone");return l.jsx(PB,{isDarkMode:e,onSectionChange:r,initialChannel:o,initialPhone:i});case"exams":case"exames":return l.jsx(RV,{isDarkMode:e});case"reports":return l.jsx(pz,{});default:return l.jsx(Fb,{isDarkMode:e,onSectionSelect:r})}};return l.jsx("div",{className:"flex-1 overflow-hidden",children:a()})},OB=()=>{const{activeSection:t,setActiveSection:e,isSidebarVisible:r,isSidebarCollapsed:n,setIsSidebarCollapsed:s,isDarkMode:a,toggleDarkMode:o}=Py(),[i,c]=g.useState(null);g.useMemo(()=>["chat","canarana","souto-soares","joao-dourado","america-dourada","gerente-lojas","gerente-externo"],[]),g.useEffect(()=>{s(t!=="dashboard")},[t,s]);const u=f=>{e(f)},d=()=>{t!=="dashboard"&&s(!n)};return l.jsxs("div",{className:S("flex h-screen transition-colors overflow-hidden",a&&"dark"),style:{backgroundColor:a?"hsl(var(--background))":"#f9fafb"},children:[l.jsx("div",{className:"hidden lg:block",children:l.jsx(S6,{activeSection:t,onSectionChange:u,isDarkMode:a,toggleDarkMode:o,isVisible:!0,isCollapsed:n,onToggleCollapse:d,showCollapseButton:t!=="dashboard"})}),l.jsx("div",{className:"flex-1 overflow-auto",children:l.jsx("div",{className:"h-full",children:l.jsx(IB,{activeSection:t,isDarkMode:a,onSectionChange:u,toggleDarkMode:o})})}),l.jsx("nav",{role:"navigation","aria-label":"Navegao mobile",className:"lg:hidden",children:l.jsx(C6,{activeSection:t,onSectionChange:u,isDarkMode:a})})]})},LB=()=>{const{isAuthenticated:t,user:e}=Tt(),{activeSection:r}=Py();return console.log(" [MAIN_LAYOUT] Verificando autenticao:",{isAuthenticated:t,user:e==null?void 0:e.name,activeSection:r}),t?(console.log(" [MAIN_LAYOUT] Usurio autenticado - mostrando aplicao principal"),l.jsx(z5,{activeSection:r,children:l.jsx(OB,{})})):(console.log(" [MAIN_LAYOUT] Usurio no autenticado - mostrando LoginForm"),l.jsx(SN,{title:"Login - Villa Glamour",description:"Acesse o sistema de atendimento Villa Glamour",keywords:"login, acesso, villa glamour, atendimento",children:l.jsx(F5,{})}))},$B=()=>(console.log(" [MAIN_LAYOUT] Renderizando MainLayout"),l.jsx(V5,{children:l.jsx(LB,{})})),MB=new qI;function DB(){return console.log(" [APP] Inicializando aplicao - estrutura corrigida"),l.jsx(k5,{children:l.jsx(YI,{client:MB,children:l.jsx(CI,{children:l.jsx(JI,{defaultTheme:"system",storageKey:"vite-ui-theme",children:l.jsx(j3,{children:l.jsxs(T5,{children:[l.jsx($B,{}),l.jsx(IL,{}),l.jsx(d$,{})]})})})})})})}ap.createRoot(document.getElementById("root")).render(l.jsx(G.StrictMode,{children:l.jsx(DB,{})}));export{il as _,Br as c,M_ as g};
